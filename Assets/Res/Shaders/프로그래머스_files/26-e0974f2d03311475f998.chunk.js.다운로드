/*! For license information please see 26-e0974f2d03311475f998.chunk.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1e3:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var i=n(895),r=n(177),a=n(149),o=n(619),s=n(1165),c=n(1254);const d={activate:["activated","deactivated"],create:["beforeCreate","created"],destroy:["beforeDestroy","destroyed"],mount:["beforeMount","mounted"],update:["beforeUpdate","updated"]};function l(){return Object(i.a)([r.b,"call",e=>e(),"access",e=>e.getScope,"call",e=>e(),"optionalAccess",e=>e.getTransaction,"call",e=>e()])}const u=e=>{const t=(e.hooks||[]).concat(c.a).filter(((e,t,n)=>n.indexOf(e)===t)),n={};for(const r of t){const t=d[r];if(t)for(const a of t)n[a]=function(){const n=this.$root===this;if(n){const e=l();e&&(this.$_sentryRootSpan=this.$_sentryRootSpan||e.startChild({description:"Application Render",op:"ui.vue.render"}))}const c=Object(s.a)(this,!1),d=Array.isArray(e.trackComponents)?e.trackComponents.indexOf(c)>-1:e.trackComponents;var u,h,A;if(n||d)if(this.$_sentrySpans=this.$_sentrySpans||{},a==t[0]){const e=Object(i.a)([this,"access",e=>e.$root,"optionalAccess",e=>e.$_sentryRootSpan])||l();if(e){const t=this.$_sentrySpans[r];t&&!t.endTimestamp&&t.finish(),this.$_sentrySpans[r]=e.startChild({description:`Vue <${c}>`,op:`ui.vue.${r}`})}}else{const t=this.$_sentrySpans[r];if(!t)return;t.finish(),u=this,h=Object(o.c)(),A=e.timeout,u.$_sentryRootSpanTimer&&clearTimeout(u.$_sentryRootSpanTimer),u.$_sentryRootSpanTimer=setTimeout((()=>{Object(i.a)([u,"access",e=>e.$root,"optionalAccess",e=>e.$_sentryRootSpan])&&(u.$root.$_sentryRootSpan.finish(h),u.$root.$_sentryRootSpan=void 0)}),A)}};else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.c.warn(`Unknown hook: ${r}`)}return n}},1023:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s}));var i=n(1030),r=n(896),a=n(359);function o(e){const t=Object(i.c)(),n={sid:Object(r.b)(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return Object(a.c)({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"===typeof e.did||"string"===typeof e.did?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&s(n,e),n}function s(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Object(i.c)(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Object(r.b)()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"===typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"===typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"===typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function c(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),s(e,n)}},1029:function(e,t,n){"use strict";function i(e,t){return null!=e?e:t()}n.d(t,"a",(function(){return i}))},1030:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l}));var i=n(1181),r=n(314);const a=Object(r.b)(),o={nowSeconds:()=>Date.now()/1e3};const s=Object(i.b)()?function(){try{return Object(i.a)(e,"perf_hooks").performance}catch(t){return}}():function(){const{performance:e}=a;if(!e||!e.now)return;return{now:()=>e.now(),timeOrigin:Date.now()-e.now()}}(),c=void 0===s?o:{nowSeconds:()=>(s.timeOrigin+s.now())/1e3},d=o.nowSeconds.bind(o),l=c.nowSeconds.bind(c);let u;const h=(()=>{const{performance:e}=a;if(!e||!e.now)return void(u="none");const t=36e5,n=e.now(),i=Date.now(),r=e.timeOrigin?Math.abs(e.timeOrigin+n-i):t,o=r<t,s=e.timing&&e.timing.navigationStart,c="number"===typeof s?Math.abs(s+n-i):t;return o||c<t?r<=c?(u="timeOrigin",e.timeOrigin):(u="navigationStart",s):(u="dateNow",i)})()}).call(this,n(1054)(e))},1156:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var i=n(295),r=n(149),a=n(177),o=n(611);const s=[];function c(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"===typeof n?Object(i.c)(n(t)):t;const a=function(e){const t={};return e.forEach((e=>{const{name:n}=e,i=t[n];i&&!i.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.values(t)}(r),o=a.findIndex((e=>"Debug"===e.name));if(-1!==o){const[e]=a.splice(o,1);a.push(e)}return a}function d(e){const t={};return e.forEach((e=>{t[e.name]=e,-1===s.indexOf(e.name)&&(e.setupOnce(o.b,a.b),s.push(e.name),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log(`Integration installed: ${e.name}`))})),t}},1164:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var i=n(179),r=n(2309),a=n(214),o=n(645);function s(e,t=1/0,n=1/0){try{return d("",e,t,n)}catch(i){return{ERROR:`**non-serializable** (${i})`}}}function c(e,t=3,n=102400){const i=s(e,t);return r=i,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(r))>n?c(e,t-1,n):i;var r}function d(t,n,s=1/0,c=1/0,l=Object(r.a)()){const[u,h]=l;if(null===n||["number","boolean","string"].includes(typeof n)&&!Object(i.h)(n))return n;const A=function(t,n){try{return"domain"===t&&n&&"object"===typeof n&&n._events?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":"undefined"!==typeof e&&n===e?"[Global]":"undefined"!==typeof window&&n===window?"[Window]":"undefined"!==typeof document&&n===document?"[Document]":Object(i.m)(n)?"[SyntheticEvent]":"number"===typeof n&&n!==n?"[NaN]":void 0===n?"[undefined]":"function"===typeof n?`[Function: ${Object(o.b)(n)}]`:"symbol"===typeof n?`[${String(n)}]`:"bigint"===typeof n?`[BigInt: ${String(n)}]`:`[object ${Object.getPrototypeOf(n).constructor.name}]`}catch(r){return`**non-serializable** (${r})`}}(t,n);if(!A.startsWith("[object "))return A;if(n.__sentry_skip_normalization__)return n;if(0===s)return A.replace("object ","");if(u(n))return"[Circular ~]";const p=n;if(p&&"function"===typeof p.toJSON)try{return d("",p.toJSON(),s-1,c,l)}catch(m){}const f=Array.isArray(n)?[]:{};let g=0;const _=Object(a.b)(n);for(const e in _){if(!Object.prototype.hasOwnProperty.call(_,e))continue;if(g>=c){f[e]="[MaxProperties ~]";break}const t=_[e];f[e]=d(e,t,s-1,c,l),g++}return h(n),f}}).call(this,n(151))},1165:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var i=n(895);const r=/(?:^|[-_])(\w)/g,a="<Anonymous>",o=(e,t)=>{if(!e)return a;if(e.$root===e)return"<Root>";if(!e.$options)return a;const n=e.$options;let i=n.name||n._componentTag;const o=n.__file;if(!i&&o){const e=o.match(/([^/\\]+)\.vue$/);e&&(i=e[1])}return(i?`<${s=i,s.replace(r,(e=>e.toUpperCase())).replace(/[-_]/g,"")}>`:a)+(o&&!1!==t?` at ${o}`:"");var s},s=e=>{if((Object(i.a)([e,"optionalAccess",e=>e._isVue])||Object(i.a)([e,"optionalAccess",e=>e.__isVue]))&&Object(i.a)([e,"optionalAccess",e=>e.$parent])){const t=[];let n=0;for(;e;){if(t.length>0){const i=t[t.length-1];if(i.constructor===e.constructor){n++,e=e.$parent;continue}n>0&&(t[t.length-1]=[i,n],n=0)}t.push(e),e=e.$parent}const i=t.map(((e,t)=>`${(0===t?"---\x3e ":((e,t)=>{let n="";for(;t;)t%2===1&&(n+=e),t>1&&(e+=e),t>>=1;return n})(" ",5+2*t))+(Array.isArray(e)?`${o(e[0])}... (${e[1]} recursive calls)`:o(e))}`)).join("\n");return`\n\nfound in\n\n${i}`}return`\n\n(found in ${o(e)})`}},1180:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var i="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{}}).call(this,n(151))},1181:function(e,t,n){"use strict";(function(e,i){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(2312);function a(){return!Object(r.a)()&&"[object process]"===Object.prototype.toString.call("undefined"!==typeof e?e:0)}function o(e,t){return e.require(t)}}).call(this,n(156),n(1054)(e))},1184:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var i=n(179),r=n(149),a=n(214),o=n(645),s=n(1284),c=n(300);const d=Object(c.b)(),l={},u={};function h(e){if(!u[e])switch(u[e]=!0,e){case"console":!function(){if(!("console"in d))return;r.a.forEach((function(e){e in d.console&&Object(a.e)(d.console,e,(function(t){return function(...n){p("console",{args:n,level:e}),t&&t.apply(d.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in d))return;const e=p.bind(null,"dom"),t=I(e,!0);d.document.addEventListener("click",t,!1),d.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=d[t]&&d[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Object(a.e)(n,"addEventListener",(function(t){return function(n,i,r){if("click"===n||"keypress"==n)try{const i=this,a=i.__sentry_instrumentation_handlers__=i.__sentry_instrumentation_handlers__||{},o=a[n]=a[n]||{refCount:0};if(!o.handler){const i=I(e);o.handler=i,t.call(this,n,i,r)}o.refCount++}catch(a){}return t.call(this,n,i,r)}})),Object(a.e)(n,"removeEventListener",(function(e){return function(t,n,i){if("click"===t||"keypress"==t)try{const n=this,r=n.__sentry_instrumentation_handlers__||{},a=r[t];a&&(a.refCount--,a.refCount<=0&&(e.call(this,t,a.handler,i),a.handler=void 0,delete r[t]),0===Object.keys(r).length&&delete n.__sentry_instrumentation_handlers__)}catch(r){}return e.call(this,t,n,i)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in d))return;const e=XMLHttpRequest.prototype;Object(a.e)(e,"open",(function(e){return function(...t){const n=this,r=t[1],o=n.__sentry_xhr__={method:Object(i.l)(t[0])?t[0].toUpperCase():t[0],url:t[1]};Object(i.l)(r)&&"POST"===o.method&&r.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const s=function(){if(4===n.readyState){try{o.status_code=n.status}catch(e){}p("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:n})}};return"onreadystatechange"in n&&"function"===typeof n.onreadystatechange?Object(a.e)(n,"onreadystatechange",(function(e){return function(...t){return s(),e.apply(n,t)}})):n.addEventListener("readystatechange",s),e.apply(n,t)}})),Object(a.e)(e,"send",(function(e){return function(...t){return this.__sentry_xhr__&&void 0!==t[0]&&(this.__sentry_xhr__.body=t[0]),p("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}();break;case"fetch":!function(){if(!Object(s.d)())return;Object(a.e)(d,"fetch",(function(e){return function(...t){const n={args:t,fetchData:{method:f(t),url:g(t)},startTimestamp:Date.now()};return p("fetch",{...n}),e.apply(d,t).then((e=>(p("fetch",{...n,endTimestamp:Date.now(),response:e}),e)),(e=>{throw p("fetch",{...n,endTimestamp:Date.now(),error:e}),e}))}}))}();break;case"history":!function(){if(!Object(s.c)())return;const e=d.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=_,t=String(n);_=t,p("history",{from:e,to:t})}return e.apply(this,t)}}d.onpopstate=function(...t){const n=d.location.href,i=_;if(_=n,p("history",{from:i,to:n}),e)try{return e.apply(this,t)}catch(r){}},Object(a.e)(d.history,"pushState",t),Object(a.e)(d.history,"replaceState",t)}();break;case"error":v=d.onerror,d.onerror=function(e,t,n,i,r){return p("error",{column:i,error:r,line:n,msg:e,url:t}),!!v&&v.apply(this,arguments)};break;case"unhandledrejection":C=d.onunhandledrejection,d.onunhandledrejection=function(e){return p("unhandledrejection",e),!C||C.apply(this,arguments)};break;default:return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.warn("unknown instrumentation type:",e))}}function A(e,t){l[e]=l[e]||[],l[e].push(t),h(e)}function p(e,t){if(e&&l[e])for(const i of l[e]||[])try{i(t)}catch(n){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Object(o.b)(i)}\nError:`,n)}}function f(e=[]){return"Request"in d&&Object(i.g)(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function g(e=[]){return"string"===typeof e[0]?e[0]:"Request"in d&&Object(i.g)(e[0],Request)?e[0].url:String(e[0])}let _;let m,E;function I(e,t=!1){return n=>{if(!n||E===n)return;if(function(e){if("keypress"!==e.type)return!1;try{const t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(t){}return!0}(n))return;const i="keypress"===n.type?"input":n.type;(void 0===m||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(n){}return!1}(E,n))&&(e({event:n,name:i,global:t}),E=n),clearTimeout(m),m=d.setTimeout((()=>{m=void 0}),1e3)}}let v=null;let C=null},1214:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(214);let r;class a{constructor(){a.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=a.id}setupOnce(){r=Function.prototype.toString,Function.prototype.toString=function(...e){const t=Object(i.f)(this)||this;return r.apply(t,e)}}}a.__initStatic()},1215:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(149),r=n(295),a=n(711);const o=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class s{static __initStatic(){this.id="InboundFilters"}__init(){this.name=s.id}constructor(e={}){this._options=e,s.prototype.__init.call(this)}setupOnce(e,t){const n=e=>{const n=t();if(n){const t=n.getIntegration(s);if(t){const s=n.getClient(),d=s?s.getOptions():{},l=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...o],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(t._options,d);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(t){}return!1}(e))return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Object(r.e)(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;return function(e){if(e.message)return[e.message];if(e.exception)try{const{type:t="",value:n=""}=e.exception.values&&e.exception.values[0]||{};return[`${n}`,`${t}: ${n}`]}catch(t){return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.error(`Cannot extract message for event ${Object(r.e)(e)}`),[]}return[]}(e).some((e=>Object(a.c)(e,t)))}(e,t.ignoreErrors))return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Object(r.e)(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=c(e);return!!n&&Object(a.c)(n,t)}(e,t.denyUrls))return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Object(r.e)(e)}.\nUrl: ${c(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=c(e);return!n||Object(a.c)(n,t)}(e,t.allowUrls))return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Object(r.e)(e)}.\nUrl: ${c(e)}`),!0;return!1}(e,l)?null:e}}return e};n.id=this.name,e(n)}}function c(e){try{let n;try{n=e.exception.values[0].stacktrace.frames}catch(t){}return n?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(n):null}catch(n){return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.error(`Cannot extract url for event ${Object(r.e)(e)}`),null}}s.__initStatic()},1244:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(1671),r=n(715);function a(e){return Object(i.a)(e,(function(t){return new r.a(((n,i)=>{const r=new XMLHttpRequest;r.onerror=i,r.onreadystatechange=()=>{4===r.readyState&&n({statusCode:r.status,headers:{"x-sentry-rate-limits":r.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":r.getResponseHeader("Retry-After")}})},r.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&r.setRequestHeader(t,e.headers[t]);r.send(t.body)}))}))}},1245:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(177),r=n(1165);const a=(e,t)=>{const{errorHandler:n,warnHandler:a,silent:o}=e.config;e.config.errorHandler=(s,c,d)=>{const l=Object(r.a)(c,!1),u=c?Object(r.b)(c):"",h={componentName:l,lifecycleHook:d,trace:u};if(t.attachProps&&c&&(c.$options&&c.$options.propsData?h.propsData=c.$options.propsData:c.$props&&(h.propsData=c.$props)),setTimeout((()=>{Object(i.b)().withScope((e=>{e.setContext("vue",h),Object(i.b)().captureException(s)}))})),"function"===typeof n&&n.call(e,s,c,d),t.logErrors){const e="undefined"!==typeof console,t=`Error in ${d}: "${s&&s.toString()}"`;a?a.call(null,t,c,u):e&&!o&&console.error(`[Vue warn]: ${t}${u}`)}}}},1247:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(895),r=n(2299),a=n(1253),o=n(999),s=n(149),c=n(2311),d=n(619);var l=n(1285),u=n(657),h=n(144),A=n(857);class p extends r.a{constructor(e){e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:a.a}],version:a.a},super(e),e.sendClientReports&&h.a.document&&h.a.document.addEventListener("visibilitychange",(()=>{"hidden"===h.a.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return Object(u.a)(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return Object(u.b)(this._options.stackParser,e,t,n,this._options.attachStacktrace)}sendEvent(e,t){const n=this.getIntegrationById(A.a);Object(i.a)([n,"optionalAccess",e=>e.addSentryBreadcrumb,"optionalCall",t=>t(e)]),super.sendEvent(e,t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("No outcomes to send"));if(!this._dsn)return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("No dsn provided, will not send outcomes"));("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("Sending outcomes:",e);const t=Object(o.a)(this._dsn,this._options),n=function(e,t,n){const i=[{type:"client_report"},{timestamp:n||Object(d.b)(),discarded_events:e}];return Object(c.c)(t?{dsn:t}:{},[i])}(e,this._options.tunnel&&Object(l.a)(this._dsn));try{const e="[object Navigator]"===Object.prototype.toString.call(h.a&&h.a.navigator);if(e&&"function"===typeof h.a.navigator.sendBeacon&&!this._options.transportOptions){h.a.navigator.sendBeacon.bind(h.a.navigator)(t,Object(c.h)(n))}else this._sendEnvelope(n)}catch(i){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.error(i)}}}},1248:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(1671),r=n(715),a=n(1284),o=n(149),s=n(144);let c;function d(e,t=function(){if(c)return c;if(Object(a.a)(s.a.fetch))return c=s.a.fetch.bind(s.a);const e=s.a.document;let t=s.a.fetch;if(e&&"function"===typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const i=n.contentWindow;i&&i.fetch&&(t=i.fetch),e.head.removeChild(n)}catch(n){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return c=t.bind(s.a)}()){return Object(i.a)(e,(function(n){const i={body:n.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n.body.length<=65536,...e.fetchOptions};try{return t(e.url,i).then((e=>({statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(a){return c=void 0,Object(r.b)(a)}}))}},1253:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i="7.28.0"},1254:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=["activate","mount","update"]},1255:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const i="<anonymous>";function r(e){try{return e&&"function"===typeof e&&e.name||i}catch(t){return i}}},1284:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return c}));var i=n(149),r=n(300);const a=Object(r.b)();function o(){if(!("fetch"in a))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function s(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function c(){if(!o())return!1;if(s(a.fetch))return!0;let e=!1;const t=a.document;if(t&&"function"===typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=s(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function d(){const e=a.chrome,t=e&&e.app&&e.app.runtime,n="history"in a&&!!a.history.pushState&&!!a.history.replaceState;return!t&&n}},1285:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n(889);const r=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function a(e,t=!1){const{host:n,path:i,pass:r,port:a,projectId:o,protocol:s,publicKey:c}=e;return`${s}://${c}${t&&r?`:${r}`:""}@${n}${a?`:${a}`:""}/${i?`${i}/`:i}${o}`}function o(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function s(e){const t="string"===typeof e?function(e){const t=r.exec(e);if(!t)throw new i.a(`Invalid Sentry Dsn: ${e}`);const[n,a,s="",c,d="",l]=t.slice(1);let u="",h=l;const A=h.split("/");if(A.length>1&&(u=A.slice(0,-1).join("/"),h=A.pop()),h){const e=h.match(/^\d+/);e&&(h=e[0])}return o({host:c,pass:s,path:u,projectId:h,port:d,protocol:n,publicKey:a})}(e):o(e);return function(e){if("undefined"!==typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__)return;const{port:t,projectId:n,protocol:r}=e;if(["protocol","publicKey","host","projectId"].forEach((t=>{if(!e[t])throw new i.a(`Invalid Sentry Dsn: ${t} missing`)})),!n.match(/^\d+$/))throw new i.a(`Invalid Sentry Dsn: Invalid projectId ${n}`);if(!function(e){return"http"===e||"https"===e}(r))throw new i.a(`Invalid Sentry Dsn: Invalid protocol ${r}`);if(t&&isNaN(parseInt(t,10)))throw new i.a(`Invalid Sentry Dsn: Invalid port ${t}`)}(t),t}},1286:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o}));var i=n(338);function r(e,t){return Object(i.a)().captureException(e,{captureContext:t})}function a(e){Object(i.a)().addBreadcrumb(e)}function o(e,t){Object(i.a)().setContext(e,t)}},1287:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(285),r=n(232),a=n(359),o=n(1255),s=n(314);const c=Object(s.b)();function d(){if(!("fetch"in c))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function l(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const u=Object(s.b)(),h={},A={};function p(e){if(!A[e])switch(A[e]=!0,e){case"console":!function(){if(!("console"in u))return;r.a.forEach((function(e){e in u.console&&Object(a.d)(u.console,e,(function(t){return function(...n){g("console",{args:n,level:e}),t&&t.apply(u.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in u))return;const e=g.bind(null,"dom"),t=C(e,!0);u.document.addEventListener("click",t,!1),u.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=u[t]&&u[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Object(a.d)(n,"addEventListener",(function(t){return function(n,i,r){if("click"===n||"keypress"==n)try{const i=this,a=i.__sentry_instrumentation_handlers__=i.__sentry_instrumentation_handlers__||{},o=a[n]=a[n]||{refCount:0};if(!o.handler){const i=C(e);o.handler=i,t.call(this,n,i,r)}o.refCount++}catch(a){}return t.call(this,n,i,r)}})),Object(a.d)(n,"removeEventListener",(function(e){return function(t,n,i){if("click"===t||"keypress"==t)try{const n=this,r=n.__sentry_instrumentation_handlers__||{},a=r[t];a&&(a.refCount--,a.refCount<=0&&(e.call(this,t,a.handler,i),a.handler=void 0,delete r[t]),0===Object.keys(r).length&&delete n.__sentry_instrumentation_handlers__)}catch(r){}return e.call(this,t,n,i)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in u))return;const e=XMLHttpRequest.prototype;Object(a.d)(e,"open",(function(e){return function(...t){const n=this,r=t[1],o=n.__sentry_xhr__={method:Object(i.i)(t[0])?t[0].toUpperCase():t[0],url:t[1]};Object(i.i)(r)&&"POST"===o.method&&r.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const s=function(){if(4===n.readyState){try{o.status_code=n.status}catch(e){}g("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:n})}};return"onreadystatechange"in n&&"function"===typeof n.onreadystatechange?Object(a.d)(n,"onreadystatechange",(function(e){return function(...t){return s(),e.apply(n,t)}})):n.addEventListener("readystatechange",s),e.apply(n,t)}})),Object(a.d)(e,"send",(function(e){return function(...t){return this.__sentry_xhr__&&void 0!==t[0]&&(this.__sentry_xhr__.body=t[0]),g("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}();break;case"fetch":!function(){if(!function(){if(!d())return!1;if(l(c.fetch))return!0;let e=!1;const t=c.document;if(t&&"function"===typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=l(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}())return;Object(a.d)(u,"fetch",(function(e){return function(...t){const n={args:t,fetchData:{method:_(t),url:m(t)},startTimestamp:Date.now()};return g("fetch",{...n}),e.apply(u,t).then((e=>(g("fetch",{...n,endTimestamp:Date.now(),response:e}),e)),(e=>{throw g("fetch",{...n,endTimestamp:Date.now(),error:e}),e}))}}))}();break;case"history":!function(){if(!function(){const e=c.chrome,t=e&&e.app&&e.app.runtime,n="history"in c&&!!c.history.pushState&&!!c.history.replaceState;return!t&&n}())return;const e=u.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=E,t=String(n);E=t,g("history",{from:e,to:t})}return e.apply(this,t)}}u.onpopstate=function(...t){const n=u.location.href,i=E;if(E=n,g("history",{from:i,to:n}),e)try{return e.apply(this,t)}catch(r){}},Object(a.d)(u.history,"pushState",t),Object(a.d)(u.history,"replaceState",t)}();break;case"error":y=u.onerror,u.onerror=function(e,t,n,i,r){return g("error",{column:i,error:r,line:n,msg:e,url:t}),!!y&&y.apply(this,arguments)};break;case"unhandledrejection":S=u.onunhandledrejection,u.onunhandledrejection=function(e){return g("unhandledrejection",e),!S||S.apply(this,arguments)};break;default:return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.warn("unknown instrumentation type:",e))}}function f(e,t){h[e]=h[e]||[],h[e].push(t),p(e)}function g(e,t){if(e&&h[e])for(const i of h[e]||[])try{i(t)}catch(n){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Object(o.a)(i)}\nError:`,n)}}function _(e=[]){return"Request"in u&&Object(i.d)(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function m(e=[]){return"string"===typeof e[0]?e[0]:"Request"in u&&Object(i.d)(e[0],Request)?e[0].url:String(e[0])}let E;let I,v;function C(e,t=!1){return n=>{if(!n||v===n)return;if(function(e){if("keypress"!==e.type)return!1;try{const t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(t){}return!0}(n))return;const i="keypress"===n.type?"input":n.type;(void 0===I||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(n){}return!1}(v,n))&&(e({event:n,name:i,global:t}),v=n),clearTimeout(I),I=u.setTimeout((()=>{I=void 0}),1e3)}}let y=null;let S=null},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u}));var i=n(512),r=n(300),a=n(214),o=n(295);const s=r.a;let c=0;function d(){return c>0}function l(){c++,setTimeout((()=>{c--}))}function u(e,t={},n){if("function"!==typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(Object(a.f)(e))return e}catch(s){return e}const r=function(){const r=Array.prototype.slice.call(arguments);try{n&&"function"===typeof n&&n.apply(this,arguments);const i=r.map((e=>u(e,t)));return e.apply(this,i)}catch(a){throw l(),Object(i.m)((e=>{e.addEventProcessor((e=>(t.mechanism&&(Object(o.b)(e,void 0,void 0),Object(o.a)(e,t.mechanism)),e.extra={...e.extra,arguments:r},e))),Object(i.c)(a)})),a}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(c){}Object(a.g)(r,e),Object(a.a)(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>e.name})}catch(c){}return r}},1665:function(e,t,n){"use strict";function i(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+i}}function r(e){return e.split(/[\?#]/,1)[0]}function a(e){return e.split(/\\?\//).filter((e=>e.length>0&&","!==e)).length}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r}))},1666:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(149),r=n(177);function a(e,t){!0===t.debug&&("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?i.c.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));const n=Object(r.b)(),a=n.getScope();a&&a.update(t.initialScope);const o=new e(t);n.bindClient(o)}},1667:function(e,t,n){"use strict";n.r(t);var i=n(987);n.d(t,"GlobalHandlers",(function(){return i.a}));var r=n(986);n.d(t,"TryCatch",(function(){return r.a}));var a=n(857);n.d(t,"Breadcrumbs",(function(){return a.b}));var o=n(988);n.d(t,"LinkedErrors",(function(){return o.a}));var s=n(990);n.d(t,"HttpContext",(function(){return s.a}));var c=n(989);n.d(t,"Dedupe",(function(){return c.a}))},1671:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(889),r=n(715);function a(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(a){if(!(void 0===e||t.length<e))return Object(r.b)(new i.a("Not adding Promise because buffer limit was reached."));const o=a();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new r.a(((n,i)=>{let a=t.length;if(!a)return n(!0);const o=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Object(r.c)(e).then((()=>{--a||(clearTimeout(o),n(!0))}),i)}))}))}}}var o=n(2311);function s(e,{statusCode:t,headers:n},i=Date.now()){const r={...e},a=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(a)for(const s of a.trim().split(",")){const[e,t]=s.split(":",2),n=parseInt(e,10),a=1e3*(isNaN(n)?60:n);if(t)for(const o of t.split(";"))r[o]=i+a;else r.all=i+a}else o?r.all=i+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const i=Date.parse(`${e}`);return isNaN(i)?6e4:i-t}(o,i):429===t&&(r.all=i+6e4);return r}var c=n(149);function d(e,t,n=a(e.bufferSize||30)){let d={};return{send:function(a){const u=[];if(Object(o.f)(a,((t,n)=>{const i=Object(o.e)(n);if(function(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}(d,i)){const r=l(t,n);e.recordDroppedEvent("ratelimit_backoff",i,r)}else u.push(t)})),0===u.length)return Object(r.c)();const h=Object(o.c)(a[0],u),A=t=>{Object(o.f)(h,((n,i)=>{const r=l(n,i);e.recordDroppedEvent(t,Object(o.e)(i),r)}))};return n.add((()=>t({body:Object(o.h)(h,e.textEncoder)}).then((e=>{void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),d=s(d,e)}),(e=>{("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.error("Failed while sending event:",e),A("network_error")})))).then((e=>e),(e=>{if(e instanceof i.a)return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.error("Skipped sending event because buffer is full."),A("queue_overflow"),Object(r.c)();throw e}))},flush:e=>n.drain(e)}}function l(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}},1675:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(285),r=n(314);Object(r.b)();function a(e,t={}){try{let n=e;const i=5,r=[];let a=0,s=0;const c=" > ",d=c.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,h=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&a++<i&&(l=o(n,u),!("html"===l||a>1&&s+r.length*d+l.length>=h));)r.push(l),s+=l.length,n=n.parentNode;return r.reverse().join(c)}catch(n){return"<unknown>"}}function o(e,t){const n=e,r=[];let a,o,s,c,d;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());const l=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(l&&l.length)l.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),a=n.className,a&&Object(i.i)(a))for(o=a.split(/\s+/),d=0;d<o.length;d++)r.push(`.${o[d]}`);const u=["aria-label","type","name","title","alt"];for(d=0;d<u.length;d++)s=u[d],c=n.getAttribute(s),c&&r.push(`[${s}="${c}"]`);return r.join("")}},1681:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));function i(e,t){return e[t]||e.all||0}function r(e,t,n=Date.now()){return i(e,t)>n}function a(e,{statusCode:t,headers:n},i=Date.now()){const r={...e},a=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(a)for(const s of a.trim().split(",")){const[e,t]=s.split(":",2),n=parseInt(e,10),a=1e3*(isNaN(n)?60:n);if(t)for(const o of t.split(";"))r[o]=i+a;else r.all=i+a}else o?r.all=i+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const i=Date.parse(`${e}`);return isNaN(i)?6e4:i-t}(o,i):429===t&&(r.all=i+6e4);return r}},1682:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o}));Error;function i(e,t=!1){const{host:n,path:i,pass:r,port:a,projectId:o,protocol:s,publicKey:c}=e;return`${s}://${c}${t&&r?`:${r}`:""}@${n}${a?`:${a}`:""}/${i?`${i}/`:i}${o}`}n(893);var r=n(359);function a(e,t=[]){return[e,t]}function o(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function s(e,t,n,a){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&{dsn:i(a)},..."transaction"===e.type&&o&&{trace:Object(r.c)({...o})}}}},188:function(e,t,n){"use strict";(function(t,n){e.exports=function(){function e(e,t,n){return e(n={path:t,exports:{},require:function(e,t){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}},n.exports),n.exports}function i(e,t,n){return(e=e.match(t))&&e.length>=n&&Jo(e[n],10)}function r(e,t,n){if(e.RTCPeerConnection){var i=(e=e.RTCPeerConnection.prototype).addEventListener;e.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);let a=e=>{(e=n(e))&&r(e)};return this._eventMap=this._eventMap||{},this._eventMap[r]=a,i.apply(this,[e,a])};var r=e.removeEventListener;e.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return r.apply(this,arguments);let i=this._eventMap[n];return delete this._eventMap[n],r.apply(this,[e,i])},jo(e,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function a(e){return"boolean"!=typeof e?Error("Argument type: "+typeof e+". Please use a boolean."):(Xo=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function o(e){return"boolean"!=typeof e?Error("Argument type: "+typeof e+". Please use a boolean."):(Zo=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function s(){"object"!=typeof window||Xo||"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}function c(e,t){Zo&&console.warn(e+" is deprecated, please use "+t+" instead.")}function d(e){let{navigator:t}=e,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=i(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=i(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=i(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=i(t.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return n}function l(e){var t;return"[object Object]"===Object.prototype.toString.call(e)?Fo(t=Uo(e)).call(t,(function(t,n){var i="[object Object]"===Object.prototype.toString.call(e[n]);let r=i?l(e[n]):e[n];return i=i&&!Uo(r).length,void 0===r||i?t:Bo(t,{[n]:r})}),{}):e}function u(e,t,n){let i=n?"outbound-rtp":"inbound-rtp",r=new Ao;if(null===t)return r;let a=[];return No(e).call(e,(e=>{"track"===e.type&&e.trackIdentifier===t.id&&a.push(e)})),No(a).call(a,(t=>{No(e).call(e,(n=>{n.type===i&&n.trackId===t.id&&function e(t,n,i){var r;n&&!i.has(n.id)&&(i.set(n.id,n),No(r=Uo(n)).call(r,(r=>{if(yo(r).call(r,"Id"))e(t,t.get(n[r]),i);else if(yo(r).call(r,"Ids")){var a;No(a=n[r]).call(a,(n=>{e(t,t.get(n),i)}))}})))}(e,n,r)}))})),r}function h(e){let t=e&&e.navigator;if(t.mediaDevices){var n=d(e),i=function(e){var t;if("object"!=typeof e||e.mandatory||e.optional)return e;const n={};var i;return No(t=Uo(e)).call(t,(t=>{if("require"!==t&&"advanced"!==t&&"mediaSource"!==t){var i="object"==typeof e[t]?e[t]:{ideal:e[t]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var r,a=function(e,t){return e?e+t.charAt(0).toUpperCase()+jc(t).call(t,1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){n.optional=n.optional||[];let e={};"number"==typeof i.ideal?(e[a("min",t)]=i.ideal,n.optional.push(e),e={},e[a("max",t)]=i.ideal,n.optional.push(e)):(e[a("",t)]=i.ideal,n.optional.push(e))}void 0!==i.exact&&"number"!=typeof i.exact?(n.mandatory=n.mandatory||{},n.mandatory[a("",t)]=i.exact):No(r=["min","max"]).call(r,(e=>{void 0!==i[e]&&(n.mandatory=n.mandatory||{},n.mandatory[a(e,t)]=i[e])}))}})),e.advanced&&(n.optional=Ir(i=n.optional||[]).call(i,e.advanced)),n},r=function(e,r){if(61<=n.version)return r(e);if((e=JSON.parse(Pi(e)))&&"object"==typeof e.audio){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};a((e=JSON.parse(Pi(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;if(o=o&&("object"==typeof o?o:{ideal:o}),a=66>n.version,!(!o||"user"!==o.exact&&"environment"!==o.exact&&"user"!==o.ideal&&"environment"!==o.ideal||t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!a)){let n;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?n=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(n=["front"]),n)return t.mediaDevices.enumerateDevices().then((t=>{t=rs(t).call(t,(e=>"videoinput"===e.kind));let a=Kc(t).call(t,(e=>ad(n).call(n,(t=>{var n;return nd(n=e.label.toLowerCase()).call(n,t)}))));return!a&&t.length&&nd(n).call(n,"back")&&(a=t[t.length-1]),a&&(e.video.deviceId=o.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=i(e.video),od("chrome: "+Pi(e)),r(e)}))}e.video=i(e.video)}return od("chrome: "+Pi(e)),r(e)},a=function(e){return 64<=n.version?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(e=function(e,n,i){r(e,(e=>{t.webkitGetUserMedia(e,n,(e=>{i&&i(a(e))}))}))},t.getUserMedia=Xc(e).call(e,t),t.mediaDevices.getUserMedia){var o;let e=Xc(o=t.mediaDevices.getUserMedia).call(o,t.mediaDevices);t.mediaDevices.getUserMedia=function(t){return r(t,(t=>e(t).then((e=>{var n;if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw No(n=e.getTracks()).call(n,(e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Cc.reject(a(e))))))}}}}function A(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function p(e){if("object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)r(e,"track",(e=>(e.transceiver||jo(e,"transceiver",{value:{receiver:e.receiver}}),e)));else{jo(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{var n;t.stream.addEventListener("addtrack",(n=>{let i;var r;i=e.RTCPeerConnection.prototype.getReceivers?Kc(r=this.getReceivers()).call(r,(e=>e.track&&e.track.id===n.track.id)):{track:n.track},(r=new Event("track")).track=n.track,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)})),No(n=t.stream.getTracks()).call(n,(n=>{let i;var r;i=e.RTCPeerConnection.prototype.getReceivers?Kc(r=this.getReceivers()).call(r,(e=>e.track&&e.track.id===n.id)):{track:n},(r=new Event("track")).track=n,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}}function f(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){let t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){var e;return this._senders=this._senders||[],jc(e=this._senders).call(e)};let n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){let r=n.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};let i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t;i.apply(this,arguments);let n=xc(t=this._senders).call(t,e);var r;-1!==n&&kc(r=this._senders).call(r,n,1)}}let n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var i;this._senders=this._senders||[],n.apply(this,[e]),No(i=e.getTracks()).call(i,(e=>{this._senders.push(t(this,e))}))};let i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t;this._senders=this._senders||[],i.apply(this,[e]),No(t=e.getTracks()).call(t,(e=>{var t;let n=Kc(t=this._senders).call(t,(t=>t.track===e));var i,r;n&&kc(i=this._senders).call(i,xc(r=this._senders).call(r,n),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){let t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){let e=t.apply(this,[]);return No(e).call(e,(e=>e._pc=this)),e},jo(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function g(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[e,n,i]=arguments;if(0<arguments.length&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);let r=function(e){const t={};return e=e.result(),No(e).call(e,(e=>{var n;const i={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};No(n=e.names()).call(n,(t=>{i[t]=e.stat(t)})),t[i.id]=i})),t},a=function(e){var t;return new Ao(Rc(t=Uo(e)).call(t,(t=>[t,e[t]])))};return 2<=arguments.length?t.apply(this,[function(e){n(a(r(e)))},e]):new Cc(((e,n)=>{t.apply(this,[function(t){e(a(r(t)))},n])})).then(n,i)}}}function _(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){let t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){let e=t.apply(this,[]);return No(e).call(e,(e=>e._pc=this)),e});let n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){let e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){let e=this;return this._pc.getStats().then((t=>u(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){let t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){let e=t.apply(this,[]);return No(e).call(e,(e=>e._pc=this)),e}),r(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){let e=this;return this._pc.getStats().then((t=>u(t,e.track,!1)))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(0<arguments.length&&arguments[0]instanceof e.MediaStreamTrack){var n,i;let e,t,r,a=arguments[0];return No(n=this.getSenders()).call(n,(t=>{t.track===a&&(e?r=!0:e=t)})),No(i=this.getReceivers()).call(i,(e=>(e.track===a&&(t?r=!0:t=e),e.track===a))),r||e&&t?Cc.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):e?e.getStats():t?t.getStats():Cc.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}}}function m(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Rc(e=Uo(this._shimmedLocalStreams)).call(e,(e=>this._shimmedLocalStreams[e][0]))};let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var i;if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};let r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===xc(i=this._shimmedLocalStreams[n.id]).call(i,r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};let n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t,i,r;this._shimmedLocalStreams=this._shimmedLocalStreams||{},No(t=e.getTracks()).call(t,(e=>{var t;if(Kc(t=this.getSenders()).call(t,(t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));let a=this.getSenders();n.apply(this,arguments),t=rs(i=this.getSenders()).call(i,(e=>-1===xc(a).call(a,e))),this._shimmedLocalStreams[e.id]=Ir(r=[e]).call(r,t)};let i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};let r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&No(t=Uo(this._shimmedLocalStreams)).call(t,(t=>{var n;let i=xc(n=this._shimmedLocalStreams[t]).call(n,e);var r;-1!==i&&kc(r=this._shimmedLocalStreams[t]).call(r,i,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),r.apply(this,arguments)}}function E(e){function t(e,t){var n;let i=t.sdp;return No(n=Uo(e._reverseStreams||[])).call(n,(t=>{t=e._reverseStreams[t],i=i.replace(new RegExp(e._streams[t.id].id,"g"),t.id)})),new RTCSessionDescription({type:t.type,sdp:i})}function n(e,t){var n;let i=t.sdp;return No(n=Uo(e._reverseStreams||[])).call(n,(t=>{t=e._reverseStreams[t],i=i.replace(new RegExp(t.id,"g"),e._streams[t.id].id)})),new RTCSessionDescription({type:t.type,sdp:i})}var i;if(e.RTCPeerConnection){var r=d(e);if(e.RTCPeerConnection.prototype.addTrack&&65<=r.version)return m(e);var a=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){let e=a.apply(this);return this._reverseStreams=this._reverseStreams||{},Rc(e).call(e,(e=>this._reverseStreams[e.id]))};var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n;this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},No(n=t.getTracks()).call(n,(e=>{var t;if(Kc(t=this.getSenders()).call(t,(t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),this._reverseStreams[t.id]||(n=new e.MediaStream(t.getTracks()),this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n),o.apply(this,[t])};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var i,r,a;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");let o=jc([]).call(arguments,1);if(1!==o.length||!Kc(i=o[0].getTracks()).call(i,(e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(Kc(r=this.getSenders()).call(r,(e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");return this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},(i=this._streams[n.id])?(i.addTrack(t),Cc.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}))):(i=new e.MediaStream([t]),this._streams[n.id]=i,this._reverseStreams[i.id]=n,this.addStream(i)),Kc(a=this.getSenders()).call(a,(e=>e.track===t))},No(i=["createOffer","createAnswer"]).call(i,(function(n){let i=e.RTCPeerConnection.prototype[n];e.RTCPeerConnection.prototype[n]={[n](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?i.apply(this,[n=>{n=t(this,n),e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):i.apply(this,arguments).then((e=>t(this,e)))}}[n]}));var c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=n(this,arguments[0]),c.apply(this,arguments)):c.apply(this,arguments)};var l=ts(e.RTCPeerConnection.prototype,"localDescription");jo(e.RTCPeerConnection.prototype,"localDescription",{get(){let e=l.get.apply(this);return""===e.type?e:t(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let n;this._streams=this._streams||{},No(t=Uo(this._streams)).call(t,(t=>{var i;Kc(i=this._streams[t].getTracks()).call(i,(t=>e.track===t))&&(n=this._streams[t])})),n&&(1===n.getTracks().length?this.removeStream(this._reverseStreams[n.id]):n.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}}function I(e){let t=d(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){var n;53>t.version&&No(n=["setLocalDescription","setRemoteDescription","addIceCandidate"]).call(n,(function(t){let n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}}[t]}));var i=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?78>t.version&&arguments[0]&&""===arguments[0].candidate?Cc.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Cc.resolve())}}}function v(e){r(e,"negotiationneeded",(e=>{if("stable"===e.target.signalingState)return e}))}function C(e,t,n,i,r){return t=Id.writeRtpDescription(e.kind,t),t+=Id.writeIceParameters(e.iceGatherer.getLocalParameters()),t+=Id.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":r||"active"),t+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?t+="a=sendrecv\r\n":e.rtpSender?t+="a=sendonly\r\n":e.rtpReceiver?t+="a=recvonly\r\n":t+="a=inactive\r\n",e.rtpSender&&(n=e.rtpSender._initialTrackId||e.rtpSender.track.id,e.rtpSender._initialTrackId=n,t=t+"a="+(i="msid:"+(i?i.id:"-")+" "+n+"\r\n")+"a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+i,e.sendEncodingParameters[0].rtx&&(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+i,t+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")),t+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+Id.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+Id.localCName+"\r\n"),t}function y(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},i=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},r=function(e,t,n,r){return e=i(e.parameters.apt,n),t=i(t.parameters.apt,r),e&&t&&e.name.toLowerCase()===t.name.toLowerCase()};return e.codecs.forEach((function(i){for(var a=0;a<t.codecs.length;a++){var o=t.codecs[a];if(i.name.toLowerCase()===o.name.toLowerCase()&&i.clockRate===o.clockRate&&("rtx"!==i.name.toLowerCase()||!i.parameters||!o.parameters.apt||r(i,o,e.codecs,t.codecs))){(o=JSON.parse(JSON.stringify(o))).numChannels=Math.min(i.numChannels,o.numChannels),n.codecs.push(o),o.rtcpFeedback=o.rtcpFeedback.filter((function(e){for(var t=0;t<i.rtcpFeedback.length;t++)if(i.rtcpFeedback[t].type===e.type&&i.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var i=0;i<t.headerExtensions.length;i++){var r=t.headerExtensions[i];if(e.uri===r.uri){n.headerExtensions.push(r);break}}})),n}function S(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function R(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function T(e,t){return(t=Error(t)).name=e,t.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],t}function w(e){var t;e=e&&e.navigator;let n=Xc(t=e.mediaDevices.getUserMedia).call(t,e.mediaDevices);e.mediaDevices.getUserMedia=function(e){return n(e).catch((e=>Cc.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e))))}}function b(e){var t;"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=Xc(t=e.navigator.getDisplayMedia).call(t,e.navigator)))}function N(e){let t=d(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),15025>t.version)){let t=ts(e.MediaStreamTrack.prototype,"enabled");jo(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);let n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||jo(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);let n=vd(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let n=!1;return e=JSON.parse(Pi(e)),rs(e).call(e,(e=>{if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&c("RTCIceServer.url","RTCIceServer.urls");let i="string"==typeof t;return i&&(t=[t]),t=rs(t).call(t,(e=>0!==xc(e).call(e,"stun:")&&((e=Ad(e).call(e,"turn")&&!Ad(e).call(e,"turn:[")&&nd(e).call(e,"transport=udp"))&&!n?(n=!0,!0):e&&!n))),delete e.url,e.urls=i?t[0]:t,!!t.length}}))}(e.iceServers,t.version),s("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function k(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function O(e){let t=d(e),n=e&&e.navigator;if(e=e&&e.MediaStreamTrack,n.getUserMedia=function(e,t,i){c("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,i)},!(55<t.version&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i;let t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},r=Xc(i=n.mediaDevices.getUserMedia).call(i,n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(Pi(e)),t(e.audio,"autoGainControl","mozAutoGainControl"),t(e.audio,"noiseSuppression","mozNoiseSuppression")),r(e)},e&&e.prototype.getSettings){let n=e.prototype.getSettings;e.prototype.getSettings=function(){let e=n.apply(this,arguments);return t(e,"mozAutoGainControl","autoGainControl"),t(e,"mozNoiseSuppression","noiseSuppression"),e}}if(e&&e.prototype.applyConstraints){let n=e.prototype.applyConstraints;e.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(Pi(e)),t(e,"autoGainControl","mozAutoGainControl"),t(e,"noiseSuppression","mozNoiseSuppression")),n.apply(this,[e])}}}}function D(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&jo(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function B(e){let t=d(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){var n;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),53>t.version&&No(n=["setLocalDescription","setRemoteDescription","addIceCandidate"]).call(n,(function(t){let n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}}[t]}));var i=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?68>t.version&&arguments[0]&&""===arguments[0].candidate?Cc.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Cc.resolve())};var r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},a=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[e,n,i]=arguments;return a.apply(this,[e||null]).then((e=>{if(53>t.version&&!n)try{No(e).call(e,(e=>{e.type=r[e.type]||e.type}))}catch(i){if("TypeError"!==i.name)throw i;No(e).call(e,((t,n)=>{e.set(n,Bo({},t,{type:r[t.type]||t.type}))}))}return e})).then(n,i)}}}function L(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){let e=t.apply(this,[]);return No(e).call(e,(e=>e._pc=this)),e});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){let e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Cc.resolve(new Ao)}}}function U(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){let e=t.apply(this,[]);return No(e).call(e,(e=>e._pc=this)),e}),r(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function x(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t;c("removeStream","removeTrack"),No(t=this.getSenders()).call(t,(t=>{var n;t.track&&nd(n=e.getTracks()).call(n,t.track)&&this.removeTrack(t)}))})}function M(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Q(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n,i,r;this._localStreams||(this._localStreams=[]),nd(n=this._localStreams).call(n,e)||this._localStreams.push(e),No(i=e.getAudioTracks()).call(i,(n=>t.call(this,n,e))),No(r=e.getVideoTracks()).call(r,(n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,n){var i;return n&&(this._localStreams?nd(i=this._localStreams).call(i,n)||this._localStreams.push(n):this._localStreams=[n]),t.call(this,e,n)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t,n,i;this._localStreams||(this._localStreams=[]);let r=xc(t=this._localStreams).call(t,e);if(-1!==r){kc(n=this._localStreams).call(n,r,1);var a=e.getTracks();No(i=this.getSenders()).call(i,(e=>{nd(a).call(a,e.track)&&this.removeTrack(e)}))}})}}function P(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){jo(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{var t;No(t=e.streams).call(t,(e=>{var t;this._remoteStreams||(this._remoteStreams=[]),nd(t=this._remoteStreams).call(t,e)||(this._remoteStreams.push(e),(t=new Event("addstream")).stream=e,this.dispatchEvent(t))}))})}});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){let e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){var n;No(n=t.streams).call(n,(t=>{var n;e._remoteStreams||(e._remoteStreams=[]),0<=xc(n=e._remoteStreams).call(n,t)||(e._remoteStreams.push(t),(n=new Event("addstream")).stream=t,e.dispatchEvent(n))}))}),t.apply(e,arguments)}}}function F(e){if("object"==typeof e&&e.RTCPeerConnection){var t=(e=e.RTCPeerConnection.prototype).createOffer,n=e.createAnswer,i=e.setLocalDescription,r=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(e,n){let i=t.apply(this,[2<=arguments.length?arguments[2]:arguments[0]]);return n?(i.then(e,n),Cc.resolve()):i},e.createAnswer=function(e,t){let i=n.apply(this,[2<=arguments.length?arguments[2]:arguments[0]]);return t?(i.then(e,t),Cc.resolve()):i};var o=function(e,t,n){return e=i.apply(this,[e]),n?(e.then(t,n),Cc.resolve()):e};e.setLocalDescription=o,o=function(e,t,n){return e=r.apply(this,[e]),n?(e.then(t,n),Cc.resolve()):e},e.setRemoteDescription=o,o=function(e,t,n){return e=a.apply(this,[e]),n?(e.then(t,n),Cc.resolve()):e},e.addIceCandidate=o}}function G(e){let t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n;e=t.mediaDevices;let i=Xc(n=e.getUserMedia).call(n,e);t.mediaDevices.getUserMedia=e=>i(j(e))}var i;!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=Xc(i=function(e,n,i){t.mediaDevices.getUserMedia(e).then(n,i)}).call(i,t))}function j(e){return e&&void 0!==e.video?Bo({},e,{video:l(e.video)}):e}function V(e){let t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){let t=[];for(let n=0;n<e.iceServers.length;n++){let i=e.iceServers[n];!i.hasOwnProperty("urls")&&i.hasOwnProperty("url")?(c("RTCIceServer.url","RTCIceServer.urls"),i=JSON.parse(Pi(i)),i.urls=i.url,delete i.url,t.push(i)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&jo(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function Y(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&jo(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function H(e){let t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){var n,i;void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);let t=Kc(n=this.getTransceivers()).call(n,(e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo),n=Kc(i=this.getTransceivers()).call(i,(e=>"video"===e.receiver.track.kind)),!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function K(e){if(e.RTCIceCandidate&&(!e.RTCIceCandidate||!("foundation"in e.RTCIceCandidate.prototype))){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){var n;if("object"==typeof e&&e.candidate&&0===xc(n=e.candidate).call(n,"a=")&&((e=JSON.parse(Pi(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){n=new t(e),e=Id.parseCandidate(e.candidate);let i=Bo(n,e);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,r(e,"icecandidate",(t=>(t.candidate&&jo(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}}function W(e){if(e.RTCPeerConnection){var t=d(e);"sctp"in e.RTCPeerConnection.prototype||jo(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});var n=function(e){return!(!e||!e.sdp)&&((e=Id.splitSections(e.sdp)).shift(),ad(e).call(e,(e=>{var t;return(e=Id.parseMLine(e))&&"application"===e.kind&&-1!==xc(t=e.protocol).call(t,"SCTP")})))},i=function(e){return null===(e=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/))||2>e.length||(e=Jo(e[1],10))!=e?-1:e},r=function(e){let n=65536;return"firefox"===t.browser&&(n=57>t.version?-1===e?16384:2147483637:60>t.version?57===t.version?65535:65536:2147483637),n},a=function(e,n){let i=65536;return"firefox"===t.browser&&57===t.version&&(i=65535),0<(e=Id.matchPrefix(e.sdp,"a=max-message-size:")).length?i=Jo(e[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&76<=t.version){var{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&jo(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var s=i(arguments[0]);let t;e=r(s),s=a(arguments[0],s),t=0===e&&0===s?Number.POSITIVE_INFINITY:0===e||0===s?Math.max(e,s):Math.min(e,s),jo(e={},"maxMessageSize",{get:()=>t}),this._sctp=e}return o.apply(this,arguments)}}}function z(e){function t(e,t){let n=e.send;e.send=function(){var i=arguments[0];if(i=i.length||i.size||i.byteLength,"open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){let e=n.apply(this,arguments);return t(e,this),e},r(e,"datachannel",(e=>(t(e.channel,e.target),e)))}}function q(e){var t;if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var n=e.RTCPeerConnection.prototype;jo(n,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),jo(n,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),No(t=["setLocalDescription","setRemoteDescription"]).call(t,(e=>{let t=n[e];n[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{let t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;let n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),t.apply(this,arguments)}}))}}function J(e){if(e.RTCPeerConnection){var t=d(e);if(!("chrome"===t.browser&&71<=t.version)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t,i;return e&&e.sdp&&-1!==xc(t=e.sdp).call(t,"\na=extmap-allow-mixed")&&(e.sdp=rs(i=e.sdp.split("\n")).call(i,(e=>"a=extmap-allow-mixed"!==Ed(e).call(e))).join("\n")),n.apply(this,arguments)}}}}function X(e){var t;e&&Td.setUA(e),wd=Td.getResult(),e=Z(wd);var n=(t="Blink"===wd.engine.name?wd.engine.version||"":wd.browser.version||"").split(".")[0];return t="Windows"===wd.os.name?wd.os.version?wd.os.name+" "+wd.os.version:wd.os.name:wd.os.name||"",{name:e,version:n,os:t,osVersion:wd.os.version}}function Z(e){if("Blink"===e.engine.name)return fd.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return fd.CHROME;case"Safari":case"Mobile Safari":return fd.SAFARI;case"Edge":return fd.EDGE;case"Firefox":return fd.FIREFOX;case"QQBrowser":return fd.QQ;case"Opera":return fd.OPERA;case"WeChat":return fd.WECHAT;default:return e.browser.name||""}}function $(){let e=X();return!!("WebKit"===wd.engine.name&&e.os===pd.MAC_OS&&navigator.maxTouchPoints&&0<navigator.maxTouchPoints&&e.name!==fd.SAFARI||re()&&e.name!==fd.SAFARI)}function ee(){var e=X();return!(!$()||!(e.os===pd.MAC_OS||e.os===pd.IOS&&((e=wd.os.version&&wd.os.version.split("."))&&14===Number(e[0])&&e[1]&&3<=Number(e[1])||e&&14<Number(e[0]))))}function te(){return X().name===fd.CHROME}function ne(){return X().name===fd.SAFARI}function ie(){return X().name===fd.FIREFOX}function re(){return X().os===pd.IOS}function ae(){let e=X();return e.os===pd.IOS&&15===Number(e.osVersion&&e.osVersion.split(".")[0])}function oe(){return ne()&&0<navigator.maxTouchPoints}function se(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&35>=window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]}function ce(){let e=X();return e.name!==fd.EDGE&&e.name!==fd.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function de(e){return"string"==typeof e?Bo({},Dd[e]):e}function le(e){return"string"==typeof e?Bo({},Bd[e]):e}function ue(e){return"string"==typeof e?Bo({},Ld[e]):e}function he(e){return"string"==typeof e?Bo({},Ud[e]):e}function Ae(e,t){var n;nd(n=Uo(xd)).call(n,e)&&(xd[e]=t)}function pe(e,t,n){return{sampleRate:e,stereo:t,bitrate:n}}function fe(e,t,n,i,r){return{width:e,height:t,frameRate:n,bitrateMin:i,bitrateMax:r}}function ge(e,t,n,i,r){return{width:{max:e},height:{max:t},frameRate:n,bitrateMin:i,bitrateMax:r}}function _e(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}function me(e){return"[object Array]"===nl.call(e)}function Ee(e){return null!==e&&"object"==typeof e}function Ie(e){return"[object Function]"===nl.call(e)}function ve(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),me(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function Ce(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ye(){this.handlers=[]}function Se(e,t){!il.isUndefined(e)&&il.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function Re(e){this.defaults=e,this.interceptors={request:new ol,response:new ol}}function Te(e){this.message=e}function we(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new Il(e),t(n.reason))}))}function be(e){e=new El(e);var t=tl(El.prototype.request,e);return il.extend(t,El.prototype,e),il.extend(t,e),t}function Ne(){let e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function ke(e,t){if("boolean"!=typeof e)throw new wl(zd.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function Oe(e,t,n){var i;if(!nd(n).call(n,e))throw new wl(zd.INVALID_PARAMS,Ir(i="".concat(t," can only be set as ")).call(i,Pi(n)))}function De(e,t,n=1,i=1e4,r=!0){var a,o;if(e<n||e>i||r&&("number"!=typeof e||0!=e%1))throw new wl(zd.INVALID_PARAMS,Ir(a=Ir(o="invalid ".concat(t,": the value range is [")).call(o,n,", ")).call(a,i,"]. integer only"))}function Be(e,t,n=1,i=255,r=!0){if(null==e)throw new wl(zd.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));var a,o,s;if(!Me(e,n,i,r))throw new wl(zd.INVALID_PARAMS,Ir(a=Ir(o=Ir(s="Invalid ".concat(t||"string param",": Length of the string: [")).call(s,n,",")).call(o,i,"].")).call(a,r?" ASCII characters only.":""))}function Le(e,t){if(!qd(e))throw new wl(zd.INVALID_PARAMS,"".concat(t," should be an array"))}function Ue(e){if("string"!=typeof e||!/^[a-zA-Z0-9 !#\$%&\(\)\+\-:;<=\.>\?@\[\]\^_\{\}\|~,]{1,64}$/.test(e))throw Tl.error("Invalid Channel Name ".concat(e)),new wl(zd.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function xe(e){var t;if(!("number"==typeof e&&Math.floor(e)===e&&0<=e&&4294967295>=e||Me(e,1,255)))throw Tl.error(Ir(t="Invalid UID ".concat(e," ")).call(t,typeof e)),new wl(zd.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");"string"==typeof e&&Tl.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function Me(e,t=1,n=255,i=!0){if(t="string"==typeof e&&e.length<=n&&e.length>=t){if(!(i=!i))e:if("string"!=typeof e)i=!1;else{for(i=0;i<e.length;i+=1)if(0>(t=e.charCodeAt(i))||255<t){i=!1;break e}i=!0}t=i}return t}function Qe(e){return Be(e.reportId,"params.reportId",0,100,!1),Be(e.category,"params.category",0,100,!1),Be(e.event,"params.event",0,100,!1),Be(e.label,"params.label",0,100,!1),De(e.value,"params.value",-9007199254740991,9007199254740991,!1),!0}function Pe(e){return De(e.timeout,"config.timeout",0,1e5),De(e.timeoutFactor,"config.timeoutFactor",0,100,!1),De(e.maxRetryCount,"config.maxRetryConfig",0,1/0),De(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function Fe(e){if(!qd(e)||1>e.length)return!1;try{No(e).call(e,(e=>{if(!e.urls)throw Error()}))}catch(t){return!1}return!0}function Ge(e){return Be(e.turnServerURL,"turnServerURL"),Be(e.username,"username"),Be(e.password,"password"),e.udpport&&De(e.udpport,"udpport",1,99999,!0),e.forceturn&&ke(e.forceturn,"forceturn"),e.security&&ke(e.security,"security"),e.tcpport&&De(e.tcpport,"tcpport",1,99999,!0),!0}function je(e){return void 0!==e.level&&Oe(e.level,"level",[1,2,3]),!0}function Ve(e,t){Be(e.url,"".concat(t,".url"),1,1e3,!1),null==e.x||De(e.x,"".concat(t,".x"),0,1e4),null==e.y||De(e.y,"".concat(t,".y"),0,1e4),null==e.width||De(e.width,"".concat(t,".width"),0,1e4),null==e.height||De(e.height,"".concat(t,".height"),0,1e4),null==e.zOrder||De(e.zOrder,"".concat(t,".zOrder"),0,255),null==e.alpha||De(e.alpha,"".concat(t,".alpha"),0,1,!1)}function Ye(e){if(!e.channelName)throw new wl(zd.INVALID_PARAMS,"invalid channelName in info");if(!e.uid||"number"!=typeof e.uid)throw new wl(zd.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&Be(e.token,"info.token",1,2047),xe(e.uid),Ue(e.channelName),!0}function He(e){return Oe(e,"mediaSource",["screen","window","application"]),!0}function Ke(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function We(e,t,n){return new Cc(((i,r)=>{t.timeout=t.timeout||xd.HTTP_CONNECT_TIMEOUT,t.responseType=t.responseType||"json",t.data&&!n?(t.data=Pi(t.data),yh+=kt(t.data)):n&&(t.data.size?yh+=t.data.size:t.data instanceof FormData?yh+=function(e){let t=0;return/DingTalk/i.test(navigator.userAgent)&&e.realFormData&&(e=e.realFormData),No(e).call(e,(e=>{t+="string"==typeof e?kt(e):e.size})),t+138}(t.data):yh+=kt(Pi(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,Cl.request(t).then((e=>{"string"==typeof e.data?Sh+=kt(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?Sh+=e.data.byteLength:Sh+=kt(Pi(e.data)),i(e.data)})).catch((e=>{Cl.isCancel(e)?r(new wl(zd.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?r(new wl(zd.NETWORK_TIMEOUT,e.message)):e.response?r(new wl(zd.NETWORK_RESPONSE_ERROR,e.response.status)):r(new wl(zd.NETWORK_ERROR,e.message))}))}))}async function ze(e,t){let n=new Blob([t.data],{type:"buffer"});return await We(e,function(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=Ke(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=Ke(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}({},t,{data:n,headers:{"Content-Type":"application/octet-stream"}}),!0)}function qe(e,t,n,i){let r=Bo({},Th,i),a=r.timeout,o=async()=>{await Ot(a),a*=r.timeoutFactor,a=Math.min(r.maxRetryTimeout,a)},s=!1;return i=new Cc((async(i,a)=>{t=t||(()=>!1),n=n||(()=>!0);for(let d=0;d<r.maxRetryCount;d+=1){if(s)return a(new wl(zd.OPERATION_ABORTED));try{const n=await e();if(!t(n,d)||d+1===r.maxRetryCount)return i(n);await o()}catch(c){if(!n(c,d)||d+1===r.maxRetryCount)return a(c);await o()}}})),i.cancel=()=>s=!0,i}function Je(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=Je(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=Je(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}function Ze(e={report:wh}){return function(t,n,i){let r=t[n];if("function"==typeof r){let a="AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name;i.value=function(...t){var i;let o=e.report.reportApiInvoke(this._sessionId||null,{name:Ir(i="".concat(a,".")).call(i,n),options:t,tag:Ul.TRACER});try{let e=r.apply(this,t);return o.onSuccess(),e}catch(s){throw o.onError(s),s}}}return i}}function $e(e={report:wh}){return function(t,n,i){let r=t[n];if("function"==typeof r){let a="AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name;i.value=async function(...t){var i;let o=e.report.reportApiInvoke(this._sessionId||null,{name:Ir(i="".concat(a,".")).call(i,n),options:t,tag:Ul.TRACER});try{let e=await r.apply(this,t);return o.onSuccess(),e}catch(s){throw o.onError(s),s}}}return i}}function et(){Bh?(Tl.info("create audio context"),Lh=new Bh,Uh.curState=Lh.state,Lh.onstatechange=()=>{var e;Uh.prevState=Uh.curState,Uh.curState=Lh?Lh.state:void 0,Tl.debug("AudioContext State Change",Ir(e="".concat(Uh.prevState,"=>")).call(e,Uh.curState)),(re()||oe())&&"running"===Uh.prevState&&"interrupted"===Uh.curState&&(Tl.info("ios-interruption-start"),Uh.emit(Dh.IOS_INTERRUPTION_START)),(re()||oe())&&"interrupted"===Uh.prevState&&"running"===Uh.curState&&(Tl.info("ios-interruption-end"),Uh.emit(Dh.IOS_INTERRUPTION_END)),Uh.emit("state-change")},async function(e){function t(t){"running"===e.state?n(!1):re()||oe()?"suspended"===e.state&&(n(!0),t?e.resume().then(i,i):n(!1)):"closed"!==e.state&&(n(!0),t?e.resume().then(i,i):n(!1))}function n(e){if(u!==e){u=e;for(let t=0,n=l;t<n.length;t+=1){let i=n[t];e?window.addEventListener(i,r,{capture:!0,passive:!0}):window.removeEventListener(i,r,{capture:!0,passive:!0})}}}function i(){t(!1)}function r(){t(!0)}function a(e){if(!A)if(d.paused)if(e){o(!1),A=!0,e=void 0;try{(e=d.play())?e.then(s,s):(d.addEventListener("playing",s),d.addEventListener("abort",s),d.addEventListener("error",s))}catch(t){s()}}else o(!0);else o(!1)}function o(e){if(h!==e){h=e;for(let t=0,n=l;t<n.length;t++){let i=n[t];e?window.addEventListener(i,c,{capture:!0,passive:!0}):window.removeEventListener(i,c,{capture:!0,passive:!0})}}}function s(){d.removeEventListener("playing",s),d.removeEventListener("abort",s),d.removeEventListener("error",s),A=!1,a(!1)}function c(){a(!0)}let d,l="click contextmenu auxclick dblclick mousedown mouseup touchend keydown keyup".split(" "),u=!1,h=!1,A=!1;if(re()){let t=e.createMediaStreamDestination(),n=document.createElement("div");n.innerHTML="<audio x-webkit-airplay='deny'></audio>",d=n.children.item(0),d.controls=!1,d.disableRemotePlayback=!0,d.preload="auto",d.srcObject=t.stream,a(!0)}Uh.on("state-change",(function(){t(!0)})),t(!1)}(Lh)):Tl.error("your browser is not support web audio")}function tt(){if(!Lh&&(et(),!Lh))throw new wl(zd.NOT_SUPPORTED,"can not create audio context");return Lh}function nt(e){if(!function(){if(null!==xh)return xh;var e=tt();let t=e.createBufferSource(),n=e.createGain();e=e.createGain(),t.connect(n),t.connect(e),t.disconnect(n),e=!1;try{t.disconnect(n)}catch(i){e=!0}return t.disconnect(),xh=e,e}()){Tl.debug("polyfill audio node");var t=e.connect,n=e.disconnect;e.connect=(n,i,r)=>{var a;return e._inputNodes||(e._inputNodes=[]),nd(a=e._inputNodes).call(a,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,i,r)):t.call(e,n,i)),e},e.disconnect=(i,r,a)=>{n.call(e),i?Ft(e._inputNodes,i):e._inputNodes=[];for(let n of e._inputNodes)t.call(e,n)}}}function it(e,t){let n=1/t,i=tt(),r=i.createGain();r.gain.value=0,r.connect(i.destination);let a=!1,o=()=>{if(a)return void(r=null);const t=i.createOscillator();t.onended=o,t.connect(r),t.start(0),t.stop(i.currentTime+n),e(i.currentTime)};return o(),()=>{a=!0}}async function rt(e,t){let n=(e,t)=>e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t;return e={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:n(t.height,1080),maxWidth:n(t.width,1920)}}},t.frameRate&&"number"!=typeof t.frameRate?(e.video.mandatory.maxFrameRate=t.frameRate.max,e.video.mandatory.minFrameRate=t.frameRate.min):"number"==typeof t.frameRate&&(e.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(e)}async function at(e){let t=await(n=await ot(e.mediaSource),new Cc(((e,t)=>{const i=document.createElement("div");i.innerText="share screen",i.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const r=document.createElement("div");r.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const a=document.createElement("div");a.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",a.setAttribute("style","height: 12%;");const o=document.createElement("div");o.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const s=document.createElement("div");s.setAttribute("style","text-align: right; padding: 16px 0;");const c=document.createElement("button");c.innerHTML="cancel",c.setAttribute("style","width: 85px;"),c.onclick=()=>{document.body.removeChild(d);const e=Error("NotAllowedError");e.name="NotAllowedError",t(e)},s.appendChild(c),r.appendChild(a),r.appendChild(o),r.appendChild(s);const d=document.createElement("div");d.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),d.appendChild(i),d.appendChild(r),document.body.appendChild(d),Rc(n).call(n,(t=>{if(t.id){const n=document.createElement("div");n.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let i=t.thumbnail;const{width:r}=i.getSize();1920<r&&(i=i.resize({width:1920})),n.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+i.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+t.name.replace(/[\u00A0-\u9999<>&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",n.onclick=()=>{document.body.removeChild(d),e(t.id)},o.appendChild(n)}}))})));var n;return await rt(t,e)}async function ot(e){let t=["window","screen"];"application"!==e&&"window"!==e||(t=["window"]),"screen"===e&&(t=["screen"]);let n=st();if(!n)throw new wl(zd.ELECTRON_IS_NULL);e=null;try{e=n.desktopCapturer.getSources({types:t})}catch(i){e=null}e&&e.then||(e=new Cc(((e,i)=>{n.desktopCapturer.getSources({types:t},((t,n)=>{t?i(t):e(n)}))})));try{return await e}catch(i){throw new wl(zd.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,i.toString())}}function st(){if(Ph)return Ph;try{return Ph=window.require("electron"),Ph}catch(gd){return null}}async function ct(e,t){let n=0,i=null;for(;2>n;)try{i=await dt(e,t,0<n);break}catch(o){var r,a;if(o instanceof wl)throw Tl.error(Ir(a="[".concat(t,"] ")).call(a,o.toString())),o;let e=lt(o.name||o.code||o,o.message);if(e.code!==zd.MEDIA_OPTION_INVALID)throw Tl.error(Ir(r="[".concat(t,"] ")).call(r,e.toString())),e;Tl.debug("[".concat(t,"] detect media option invalid, retry")),n+=1,await Ot(500)}if(!i)throw new wl(zd.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return i}async function dt(e,t,n){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new wl(zd.NOT_SUPPORTED,"can not find getUserMedia");n&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));var i,r,a=Tu;if(n=new MediaStream,e.audioSource&&n.addTrack(e.audioSource),e.videoSource&&n.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return Tl.debug("Using Video Source/ Audio Source"),n;if(e.screen)if(st())e.screen.sourceId?ut(n,await rt(e.screen.sourceId,e.screen)):ut(n,await at(e.screen));else if(te()&&e.screen.extensionId&&e.screen.mandatory){if(!a.getStreamFromExtension)throw new wl(zd.NOT_SUPPORTED,"This browser does not support screen sharing");Tl.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));var o=await(i=e.screen.extensionId,r=t,new Cc(((e,t)=>{try{chrome.runtime.sendMessage(i,{getStream:!0},(n=>{if(!n||!n.streamId)return Tl.error("[".concat(r,"] No response from Chrome Plugin. Plugin not installed properly"),n),void t(new wl(zd.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(n.streamId)}))}catch(a){var n;Tl.error(Ir(n="[".concat(r,"] AgoraRTC screensharing plugin is not accessible(")).call(n,i,")"),a.toString()),t(new wl(zd.CHROME_PLUGIN_NOT_INSTALL))}})));e.screen.mandatory.chromeMediaSourceId=o,ut(n,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(a.getDisplayMedia)e.screen.mediaSource&&He(e.screen.mediaSource),o={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource},Tl.debug("[".concat(t,"] getDisplayMedia:"),Pi({video:o,audio:!!e.screenAudio})),ut(n,await navigator.mediaDevices.getDisplayMedia({video:o,audio:!!e.screenAudio}));else{if(!ie())throw Tl.error("[".concat(t,"] This browser does not support screenSharing")),new wl(zd.NOT_SUPPORTED,"This browser does not support screen sharing");e.screen.mediaSource&&He(e.screen.mediaSource),a={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}},Tl.debug(Ir(o="[".concat(t,"] getUserMedia: ")).call(o,Pi(a))),ut(n,await navigator.mediaDevices.getUserMedia(a))}if(!e.video&&!e.audio)return n;let s;e={video:e.video,audio:e.audio},Tl.debug("[".concat(t,"] GetUserMedia"),Pi(e)),X(),t=null,(ne()||re()||$())&&(t=await Fh.lock());try{s=await navigator.mediaDevices.getUserMedia(e)}catch(c){throw t&&t(),c}return e.audio&&(Gh=!0),e.video&&(jh=!0),ut(n,s),t&&t(),n}function lt(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":var n;return new wl(zd.MEDIA_OPTION_INVALID,Ir(n="".concat(e,": ")).call(n,t));case"NotFoundError":case"DevicesNotFoundError":var i;return new wl(zd.DEVICE_NOT_FOUND,Ir(i="".concat(e,": ")).call(i,t));case"NotSupportedError":var r;return new wl(zd.NOT_SUPPORTED,Ir(r="".concat(e,": ")).call(r,t));case"NotReadableError":var a;return new wl(zd.NOT_READABLE,Ir(a="".concat(e,": ")).call(a,t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":var o;return new wl(zd.PERMISSION_DENIED,Ir(o="".concat(e,": ")).call(o,t));case"ConstraintNotSatisfiedError":var s;return new wl(zd.CONSTRAINT_NOT_SATISFIED,Ir(s="".concat(e,": ")).call(s,t));default:var c;return Tl.error("getUserMedia unexpected error",e),new wl(zd.UNEXPECTED_ERROR,Ir(c="".concat(e,": ")).call(c,t))}}function ut(e,t){let n=e.getVideoTracks()[0],i=e.getAudioTracks()[0],r=t.getVideoTracks()[0];(t=t.getAudioTracks()[0])&&(i&&e.removeTrack(i),e.addTrack(t)),r&&(n&&e.removeTrack(n),e.addTrack(r))}function ht(){if(!zh){let e=t=>{t.preventDefault(),zh=!1,document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0)};zh=!0,document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0),qh.emit("autoplay-failed")}}function At(){return function(e,t,n){let i=e[t];"function"==typeof i&&(n.value=function(...e){this._isClosed&&new wl(zd.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");let t=i.apply(this,e);return t instanceof Cc?new Cc(((e,n)=>{t.then(e).catch(n)})):t})}}function pt(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=pt(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=pt(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}function gt(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=gt(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=gt(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}function mt(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=mt(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=mt(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}function It(e){if(!e.address||!e.tcp)throw new wl(zd.UNEXPECTED_RESPONSE,"Invalid address format ".concat(e));return e.address.match(/^[\.:\d]+$/)?"".concat(e.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(Tl.info("Cannot recognized as IP address ".concat(e.address,". Used As Host instead")),Ir(t="".concat(e.address,":")).call(t,e.tcp));var t}function vt(e,t){var n;let i=xd.GATEWAY_DOMAINS,r=i[1]&&-1!==xc(t).call(t,i[1])?1:0;return e.addresses=e.addresses||[],{gatewayAddrs:Rc(n=e.addresses).call(n,(e=>{var t,n,a;return e.ip.match(/^[\.:\d]+$/)?Ir(t=Ir(n="".concat(e.ip.replace(/[^\d]/g,"-"),".")).call(n,i[r++%i.length],":")).call(t,e.port):(Tl.info("Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),Ir(a="".concat(e.ip,":")).call(a,e.port))})),uid:e.uid,cid:e.cid,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function Ct(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function yt(e,t){let n=e.videoSend[0];return n?(t=t&&t.videoSend[0]?t.videoSend[0].inputFrame:void 0,e={id:Bt(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:n.ssrc.toString()},n.inputFrame&&(t&&n.inputFrame.height===t.height||(e.A_fhi=n.inputFrame.height?n.inputFrame.height.toString():"0"),t&&n.inputFrame.width===t.width||(e.A_fwi=n.inputFrame.width?n.inputFrame.width.toString():"0"),t&&n.inputFrame.frameRate===t.frameRate||(e.A_fri=n.inputFrame.frameRate?n.inputFrame.frameRate.toString():"0")),e):null}function St(e){return 0<=e&&.17>e?1:.17<=e&&.36>e?2:.36<=e&&.59>e?3:.59<=e&&1>=e?4:1<e?5:0}function Rt(e,t){let n={};return e.height&&e.width&&(t=t._videoHeight||t.getMediaStreamTrack(!0).getSettings().height,n.scaleResolutionDownBy=t?t/Ct(e.height):4),n.maxFramerate=e.framerate?Ct(e.framerate):void 0,n.maxBitrate=e.bitrate?1e3*e.bitrate:void 0,n}function Tt(e,t){var n;let i,r;switch(t){case hh.CHOOSE_SERVER:i=4096,t="choose server";break;case hh.CLOUD_PROXY:i=1048576,t="proxy";break;case hh.CLOUD_PROXY_5:i=4194304,t="proxy5";break;default:throw new wl(zd.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(No(n=e.response_body).call(n,(t=>{var n;t.buffer&&t.buffer.flag===i&&(r={code:t.buffer.code,addresses:Rc(n=t.buffer.edges_services).call(n,(e=>Et({},e,{ticket:t.buffer.cert}))),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:Et({},t.buffer.detail,{},e.detail),flag:t.buffer.flag,opid:e.opid})})),!r)throw new wl(zd.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(t," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return r}function wt(e){var t;return Rc(t=e.addresses).call(t,(e=>({address:e.ip,tcpport:e.port,udpport:e.port,username:Od.username,password:Od.password})))}function bt(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=bt(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=bt(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}function kt(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function Ot(e){return new Cc((t=>{window.setTimeout(t,e)}))}function Dt(e){let t=new wl(zd.TIMEOUT,"timeout");return new Cc(((n,i)=>{window.setTimeout((()=>i(t)),e)}))}function Bt(e=7,t){var n,i;let r=Math.random().toString(16).substr(2,e).toLowerCase();return r.length===e?Ir(n="".concat(t)).call(n,r):Ir(i="".concat(t)).call(i,r)+Bt(e-r.length,"")}function Lt(e){return new Cc(((t,n)=>{let i=!1,r=document.createElement("video");r.setAttribute("autoplay",""),r.setAttribute("muted",""),r.muted=!0,r.autoplay=!0,r.setAttribute("playsinline",""),r.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(r),n=re()?"canplay":"playing",r.addEventListener(n,(()=>{let e=r.videoWidth,n=r.videoHeight;!e&&ie()||(i=!0,r.srcObject=null,r.remove(),t([e,n]))})),r.srcObject=new MediaStream([e]),r.play().catch(cA),$d((()=>{i||(r.srcObject=null,r.remove(),t([r.videoWidth,r.videoHeight]))}),4e3)}))}function Ut(e){return Cc.all(Rc(e).call(e,(e=>e.then((e=>{throw e}),(e=>e))))).then((e=>{throw e}),(e=>e))}function xt(e,t,...n){return 0===e.getListeners(t).length?Cc.reject(new wl(zd.UNEXPECTED_ERROR,"can not emit promise")):new Cc(((i,r)=>{e.emit(t,...n,i,r)}))}function Mt(e,t,...n){return 0===e.getListeners(t).length?Cc.resolve():xt(e,t,...n)}function Qt(e,t,...n){return 0===e.getListeners(t).length?null:Pt(e,t,...n)}function Pt(e,t,...n){let i=null,r=null;if(e.emit(t,...n,(e=>{i=e}),(e=>{r=e})),null!==r)throw r;if(null===i)throw new wl(zd.UNEXPECTED_ERROR,"handler is not sync");return i}function Ft(e,t){-1!==(t=xc(e).call(e,t))&&kc(e).call(e,t,1)}function Gt(e){let t=[];return No(e).call(e,(e=>{-1===xc(t).call(t,e)&&t.push(e)})),t}function jt(e){Cc.resolve().then(e)}function Vt(e,t){dA[t]||(dA[t]=!0,e())}function Yt(e){e=window.atob(e);let t=new Uint8Array(new ArrayBuffer(e.length));for(let n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t}function Ht(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}function Kt(e){var t=AA[Math.floor(e/1e4)];if(!t)return{desc:"unkonw error",retry:!1};if(!(t=t[e%1e4])){if(Math.floor(e/1e4)===Ql.ACCESS_POINT){if("1"===(t=e%1e4).toString()[0])return{desc:e.toString(),retry:!1};if("2"===t.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return t}function Wt(e){return pA[e]||{desc:"UNKNOW_ERROR_".concat(e),action:"failed"}}async function zt(){function e(e){let t=c["_"+e];return t||n("Assertion failed: Cannot call unknown function "+e+", make sure it is exported"),t}function t(t,n,i,r,a){a={string:function(e){let t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);t=B(n);var i=m,r=t;if(0<n){n=r+n-1;for(let t=0;t<e.length;++t){let a=e.charCodeAt(t);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++t)),127>=a){if(r>=n)break;i[r++]=a}else{if(2047>=a){if(r+1>=n)break;i[r++]=192|a>>6}else{if(65535>=a){if(r+2>=n)break;i[r++]=224|a>>12}else{if(r+3>=n)break;i[r++]=240|a>>18,i[r++]=128|a>>12&63}i[r++]=128|a>>6&63}i[r++]=128|63&a}}i[r]=0}}return t},array:function(e){const t=B(e.length);return _.set(e,t),t}};let o=e(t),s=[];if(t=0,r)for(let e=0;e<r.length;e++){let n=a[i[e]];n?(0===t&&(t=O()),s[e]=n(r[e])):s[e]=r[e]}return i=function(e){if("string"===n)if(r=e){e=m;var t=r+i,i=r;let n="";for(;e[i]&&!(i>=t);)++i;if(16<i-r&&e.subarray&&g)e=g.decode(e.subarray(r,i));else{for(;r<i;){if(!(128&(t=e[r++]))){n+=String.fromCharCode(t);continue}let i=63&e[r++];if(192==(224&t)){n+=String.fromCharCode((31&t)<<6|i);continue}let a=63&e[r++];t=224==(240&t)?(15&t)<<12|i<<6|a:(7&t)<<18|i<<12|a<<6|63&e[r++],65536>t?n+=String.fromCharCode(t):(t-=65536,n+=String.fromCharCode(55296|t>>10,56320|1023&t))}e=n}}else e="";else e="boolean"===n?!!e:e;return e;var r}(i=o.apply(null,s)),0!==t&&D(t),i}function n(e){throw c.onAbort&&c.onAbort(e),p(e+=""),f=!0,new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info.")}function i(e){for(;0<e.length;){let t=e.shift();if("function"==typeof t){t(c);continue}let n=t.func;"number"==typeof n?void 0===t.arg?E.get(n)():E.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}}function r(e){function t(){if(!b&&(b=!0,c.calledRun=!0,!f)){if(i(v),i(C),c.onRuntimeInitialized&&c.onRuntimeInitialized(),c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var e=c.postRun.shift();y.unshift(e)}i(y)}}0<S||(function(){if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;){var e=c.preRun.shift();I.unshift(e)}i(I)}(),0<S||(c.setStatus?(c.setStatus("Running..."),$d((function(){$d((function(){c.setStatus("")}),1),t()}),1)):t()))}var a,o;if(QA)return QA;let s,c={},d={};for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(d[s]=c[s]);let l=!1,u=!1;l="object"==typeof window,u="function"==typeof importScripts;let h="";(l||u)&&(u?h=self.location.href:"undefined"!=typeof document&&document.currentScript&&(h=document.currentScript.src),h=0!==xc(h).call(h,"blob:")?h.substr(0,MA(h).call(h,"/")+1):""),c.print||Xc(a=console.log).call(a,console);let A,p=c.printErr||Xc(o=console.warn).call(o,console);for(s in d)Object.prototype.hasOwnProperty.call(d,s)&&(c[s]=d[s]);d=null,"object"!=typeof WebAssembly&&n("no native wasm support detected");let f=!1,g="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");let _,m,E,I=[],v=[],C=[],y=[];v.push({func:function(){N()}});let S=0,R=null;var T;c.preloadedImages={},c.preloadedAudios={},Ad(T=a="deflate.wasm").call(T,"data:application/octet-stream;base64,")||(a=function(e){return c.locateFile?c.locateFile(e,h):h+e}(a));let w={emscripten_memcpy_big:function(e,t,n){var i=m.copyWithin;(m===mA||m instanceof Array&&i===mA.copyWithin?_A:i).call(m,e,t,t+n)},emscripten_resize_heap:function(e){n("OOM")}};await async function(){function e(e,t){c.asm=e.exports,A=c.asm.memory,e=A.buffer,c.HEAP8=_=new Int8Array(e),c.HEAP16=new Int16Array(e),c.HEAP32=new Int32Array(e),c.HEAPU8=m=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAPU32=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=new Float64Array(e),E=c.asm.__indirect_function_table,S--,c.monitorRunDependencies&&c.monitorRunDependencies(S),0==S&&R&&(e=R,R=null,e())}let t={env:w,wasi_snapshot_preview1:w};if(S++,c.monitorRunDependencies&&c.monitorRunDependencies(S),c.instantiateWasm)try{return c.instantiateWasm(t,e)}catch(i){return p("Module.instantiateWasm callback failed with error: "+i),!1}return await function(e){return new Cc(((e,t)=>{e(GA().buffer)})).then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(e){p("failed to asynchronously prepare wasm: "+e),n(e)}))}((function(t){e(t.instance)})),{}}();let b,N=c.___wasm_call_ctors=function(){return(N=c.___wasm_call_ctors=c.asm.__wasm_call_ctors).apply(null,arguments)},k=c._malloc=function(){return(k=c._malloc=c.asm.malloc).apply(null,arguments)};c._free=function(){return(c._free=c.asm.free).apply(null,arguments)},c.___errno_location=function(){return(c.___errno_location=c.asm.__errno_location).apply(null,arguments)},c._zlibCompress=function(){return(c._zlibCompress=c.asm.zlibCompress).apply(null,arguments)};let O=c.stackSave=function(){return(O=c.stackSave=c.asm.stackSave).apply(null,arguments)},D=c.stackRestore=function(){return(D=c.stackRestore=c.asm.stackRestore).apply(null,arguments)},B=c.stackAlloc=function(){return(B=c.stackAlloc=c.asm.stackAlloc).apply(null,arguments)};if(c.ccall=t,c.cwrap=function(n,i,r,a){let o=vA(r=r||[]).call(r,(function(e){return"number"===e}));return"string"!==i&&o&&!a?e(n):function(){return t(n,i,r,arguments)}},c.allocate=function(e,t){let n;return n=1==t?B(e.length):k(e.length),e.subarray||jc(e)?m.set(e,n):m.set(new Uint8Array(e),n),n},R=function e(){b||r(),b||(R=e)},c.run=r,c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return r(),QA=c,c}function qt(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=qt(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=qt(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}function Xt(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function Zt(e,t,n,i,r){zf+=1;let a,o,s={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(el()/1e3),seq:zf,requestId:zf,version:bd,cname:n.cname},c={service_name:t,json_body:Pi(s)},d=e[0];return qe((async()=>{a=el();var e=await We(d,{data:c,cancelToken:i,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(o=el()-a,0!==e.code){var n=new wl(zd.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0,responseTime:o});throw Tl.error(n.toString()),n}if(200!==(e=JSON.parse(e.json_body)).code)throw e=new wl(zd.UNEXPECTED_RESPONSE,Ir(n="live streaming app center error, code: ".concat(e.code,", reason: ")).call(n,e.reason),{code:e.code,responseTime:o}),Tl.error(e.toString()),e;if(!e.servers||0===e.servers.length)throw n=new wl(zd.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:e.code,responseTime:o}),Tl.error(n.toString()),n;return n=function(e,t){var n;return{addressList:Rc(n=e.servers).call(n,(e=>{var n,i;return Ir(n=Ir(i="wss://".concat(e.address.replace(/\./g,"-"),".edge.agora.io:")).call(i,e.wss,"?serviceName=")).call(n,encodeURIComponent(t))})),workerToken:e.workerToken,vid:e.vid}}(e,t),xd.LIVE_STREAMING_ADDRESS&&(n.addressList=xd.LIVE_STREAMING_ADDRESS instanceof Array?xd.LIVE_STREAMING_ADDRESS:[xd.LIVE_STREAMING_ADDRESS]),function(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=Xt(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=Xt(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}({},n,{responseTime:o})}),((i,r)=>(wh.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:Pi(i.addressList),firstSuccess:0===r,responseTime:o,serverIp:e[r%e.length]}),!1)),((i,r)=>(wh.apworkerEvent(n.sid,{success:!1,sc:i.data&&i.data.code||200,serviceName:t,responseTime:o,serverIp:e[r%e.length]}),!!(i.code!==zd.OPERATION_ABORTED&&i.code!==zd.UNEXPECTED_RESPONSE||i.data&&i.data.retry)&&(d=e[(r+1)%e.length],!0))),r)}function $t({url:e,areaCode:t},n,i,r){let a=el(),[o,s]=Zf(n,t,[hh.CHOOSE_SERVER]),c=Rh.networkState;return qe((async()=>{c&&Rh.networkState===yu.OFFLINE&&Rh.onlineWaiter&&await Cc.race([Rh.onlineWaiter,Ot(r&&r.maxRetryTimeout||Th.maxRetryTimeout)]),c=Rh.networkState;var t=await We(e,{data:o,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0);return Jf(t,e,n,a,[hh.CHOOSE_SERVER]),t=Tt(t,hh.CHOOSE_SERVER),Xf(t),vt(t,e)}),(t=>(t&&wh.joinChooseServer(n.sid,{lts:a,succ:!0,csAddr:e,opid:s,serverList:t.gatewayAddrs,ec:null,cid:t.cid.toString(),uid:t.uid.toString(),csIp:t.csIp,unilbsServerIds:[hh.CHOOSE_SERVER].toString()}),!1)),(t=>t.code!==zd.OPERATION_ABORTED&&(t.code===zd.CAN_NOT_GET_GATEWAY_SERVER?t.data.retry:(wh.joinChooseServer(n.sid,{lts:a,succ:!1,csAddr:e,serverList:null,opid:s,ec:t.code,csIp:t.data&&t.data.csIp,unilbsServerIds:[hh.CHOOSE_SERVER].toString(),extend:Pi({networkState:c})}),Tl.warning("[".concat(n.clientId,"] Choose server network error, retry"),t),!0))),r)}function en({url:e,areaCode:t,serviceIds:n},i,r,a){let o,s=el(),[c,d]=Zf(i,t,n);return qe((async()=>{o&&Rh.networkState===yu.OFFLINE&&Rh.onlineWaiter&&await Cc.race([Rh.onlineWaiter,Ot(a&&a.maxRetryTimeout||Th.maxRetryTimeout)]),o=Rh.networkState;var t=await We(e,{data:c,cancelToken:r,headers:{"Content-Type":"multipart/form-data;"}},!0);Jf(t,e,i,s,n);let d=Tt(t,hh.CHOOSE_SERVER);return t=Tt(t,"proxy5"===i.cloudProxyServer?hh.CLOUD_PROXY_5:hh.CLOUD_PROXY),Xf(d),{gatewayInfo:vt(d,e),proxyInfo:t,url:e}}),(t=>{var r;return t.gatewayInfo&&wh.joinChooseServer(i.sid,{lts:s,succ:!0,csAddr:e,serverList:t.gatewayInfo.gatewayAddrs,ec:null,opid:d,cid:t.gatewayInfo.cid.toString(),uid:t.gatewayInfo.uid.toString(),csIp:t.gatewayInfo.csIp,unilbsServerIds:n.toString()}),t.proxyInfo&&wh.joinWebProxyAP(i.sid,{lts:s,sucess:1,apServerAddr:e,turnServerAddrList:Rc(r=t.proxyInfo.addresses).call(r,(e=>e.ip)).join(","),errorCode:null,eventType:i.cloudProxyServer,unilbsServerIds:n.toString()}),!1}),(t=>t.code!==zd.OPERATION_ABORTED&&(t.code===zd.CAN_NOT_GET_GATEWAY_SERVER?t.data.retry:(wh.joinWebProxyAP(i.sid,{lts:s,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:i.cloudProxyServer,unilbsServerIds:n.toString(),extend:Pi({networkState:o})}),Tl.warning("[".concat(i.clientId,"] multi unilbs network error, retry"),t),!0))),a)}async function tn(e,t,n){return{gatewayInfo:await async function(e,t,n){var i,r;const a=Rc(i=jc(r=xd.WEBCS_DOMAIN).call(r,0,xd.AJAX_REQUEST_CONCURRENT)).call(i,(t=>{var n;return{url:e.proxyServer?Ir(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:$f()}}));let o=null;const s=[];return o=await Ut([(async()=>await hA({fragementLength:xd.FRAGEMENT_LENGTH,referenceList:a,asyncMapHandler:i=>(Tl.debug("[".concat(e.clientId,"] Connect to choose_server:"),i.url),$t(i,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:s}))(),(async()=>{var i;if(await Ot(1e3),null!==o)return o;const r=Rc(i=xd.WEBCS_DOMAIN_BACKUP_LIST).call(i,(t=>{var n;return{url:e.proxyServer?Ir(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:$f()}}));return await hA({fragementLength:xd.FRAGEMENT_LENGTH,referenceList:r,asyncMapHandler:i=>(Tl.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),i.url),$t(i,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:s})})()]),s.length&&No(s).call(s,(e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),o}(e,t,n)}}async function nn(e,t,n,i){var r,a;if("disabled"===e.cloudProxyServer)return i?await tn(e,t,n):void 0;let o;if("443only"===e.cloudProxyServer||"normal"===e.cloudProxyServer){var s;let r;i?"normal"!==e.cloudProxyServer?[r,o]=await Cc.all([an(e,t,n),tn(e,t,n)]):(r=await an(e,t,n),e.proxyServer=r.addresses[0],wh.setProxyServer(e.proxyServer),Tl.setProxyServer(e.proxyServer),o=await tn(e,t,n)):(o=void 0,"normal"!==e.cloudProxyServer?r=await an(e,t,n):(r=await an(e,t,n),e.proxyServer=r.addresses[0],wh.setProxyServer(e.proxyServer),Tl.setProxyServer(e.proxyServer))),e.turnServer={mode:"manual",servers:Rc(s=r.addresses).call(s,(t=>({turnServerURL:t,tcpport:"proxy3"===e.cloudProxyServer?void 0:r.serverResponse.tcpport?r.serverResponse.tcpport:Od.tcpport,udpport:"proxy4"===e.cloudProxyServer?void 0:r.serverResponse.udpport?r.serverResponse.udpport:Od.udpport,username:r.serverResponse.username||Od.username,password:r.serverResponse.password||Od.password,forceturn:"proxy4"!==e.cloudProxyServer&&"proxy5"!==e.cloudProxyServer,security:"proxy5"===e.cloudProxyServer})))}}else{let{proxyInfo:i,gatewayInfo:r}=await async function(e,t,n){var i,r;const a=xd.PROXY_SERVER_TYPE3,o=(e,t)=>{var n;let i=a;return qd(i)&&(i=0==t%2?a[1]:a[0]),Ir(n="https://".concat(i,"/ap/?url=")).call(n,e)},s=Rc(i=jc(r=xd.WEBCS_DOMAIN).call(r,0,xd.AJAX_REQUEST_CONCURRENT)).call(i,((t,n)=>({url:o("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),areaCode:$f(),serviceIds:[hh.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?hh.CLOUD_PROXY_5:hh.CLOUD_PROXY]})));let c=null;const d=[],{gatewayInfo:l,proxyInfo:u,url:h}=await Ut([(async()=>await hA({fragementLength:xd.FRAGEMENT_LENGTH,referenceList:s,asyncMapHandler:i=>(Tl.debug("[".concat(e.clientId,"] Connect to choose_server:"),i.url),en(i,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:d}))(),(async()=>{var i;if(await Ot(1e3),null!==c)return c;const r=Rc(i=xd.WEBCS_DOMAIN_BACKUP_LIST).call(i,((e,t)=>({url:o("".concat(e,"/api/v2/transpond/webrtc?v=2"),t),areaCode:$f(),serviceIds:[11,18]})));return await hA({fragementLength:xd.FRAGEMENT_LENGTH,referenceList:r,asyncMapHandler:i=>(Tl.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),i.url),en(i,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:d})})()]);if(d.length&&No(d).call(d,(e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),!l||!u)throw new wl(zd.UNEXPECTED_ERROR,"missing gateway or proxy response").print();return qd(a)&&h&&(i=new Wf(h).host,nd(a).call(a,i)&&(e.proxyServer=i,Tl.setProxyServer(i),wh.setProxyServer(i))),c={gatewayInfo:l,proxyInfo:wt(u)},c}(e,t,n);o={gatewayInfo:r},e.turnServer={mode:"manual",servers:Rc(i).call(i,(t=>({turnServerURL:t.address,tcpport:"proxy3"===e.cloudProxyServer?void 0:t.tcpport?t.tcpport:Od.tcpport,udpport:"proxy4"===e.cloudProxyServer?void 0:t.udpport?t.udpport:Od.udpport,username:t.username||Od.username,password:t.password||Od.password,forceturn:"proxy4"!==e.cloudProxyServer&&"proxy5"!==e.cloudProxyServer,security:"proxy5"===e.cloudProxyServer})))}}return Tl.debug(Ir(r=Ir(a="[".concat(e.clientId,"] set proxy server: ")).call(a,e.proxyServer,", mode: ")).call(r,e.cloudProxyServer)),o}async function rn(e,t,n,i){var r;let a=jc(r=xd.ACCOUNT_REGISTER).call(r,0,xd.AJAX_REQUEST_CONCURRENT);return r=[],r=t.proxyServer?Rc(a).call(a,(e=>{var n;return Ir(n="https://".concat(t.proxyServer,"/ap/?url=")).call(n,e+"/api/v1")})):Rc(a).call(a,(e=>"https://".concat(e,"/api/v1"))),(await async function(e,t,n,i,r){let a=el(),o={sid:n.sid,opid:10,appid:n.appId,string_uid:t},s=e[0];if(n=await qe((()=>We(s+"".concat(-1===xc(s).call(s,"?")?"?":"&","action=stringuid"),{data:o,cancelToken:i,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}})),((n,i)=>{if(0===n.code){var r;if(0>=n.uid||n.uid>=Math.pow(2,32))throw Tl.error(Ir(r="Invalid Uint Uid ".concat(t," => ")).call(r,n.uid),n),wh.reqUserAccount(o.sid,{lts:a,success:!1,serverAddr:s,stringUid:o.string_uid,uid:n.uid,errorCode:zd.INVALID_UINT_UID_FROM_STRING_UID,extend:o}),new wl(zd.INVALID_UINT_UID_FROM_STRING_UID);return wh.reqUserAccount(o.sid,{lts:a,success:!0,serverAddr:s,stringUid:o.string_uid,uid:n.uid,errorCode:null,extend:o}),!1}return(r=Kt(n.code)).retry&&(s=e[(i+1)%e.length]),wh.reqUserAccount(o.sid,{lts:a,success:!1,serverAddr:s,stringUid:o.string_uid,uid:n.uid,errorCode:r.desc,extend:o}),r.retry}),((t,n)=>t.code!==zd.OPERATION_ABORTED&&(wh.reqUserAccount(o.sid,{lts:a,success:!1,serverAddr:s,stringUid:o.string_uid,uid:null,errorCode:t.code,extend:o}),s=e[(n+1)%e.length],!0)),r),0!==n.code)throw n=Kt(n.code),new wl(zd.UNEXPECTED_RESPONSE,n.desc);return n}(r,e,t,n,i)).uid}async function an(e,t,n){var i,r=el(),a=Rc(i=xd["normal"===e.cloudProxyServer?"PROXY_CS":"WEBCS_DOMAIN"]).call(i,(t=>{var n;return e.proxyServer?Ir(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v1"):"https://".concat(t,"/api/v1")}));if("proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer||"proxy5"===e.cloudProxyServer){r=Rc(a).call(a,(e=>({url:e,areaCode:$f()})));var o=null;if(o=await hA({fragementLength:xd.FRAGEMENT_LENGTH,referenceList:r,asyncMapHandler:i=>function({url:e,areaCode:t},n,i,r){let a=el(),o={opid:133,flag:"proxy5"===n.cloudProxyServer?4194304:1048576,ts:+new Date,key:n.token,cname:n.cname,sid:n.sid,detail:{6:n.stringUid,11:t},uid:n.uid||0};return qe((async()=>await We(e,{data:o,cancelToken:i,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":69}})),(t=>{var i;if(0===t.code)return wh.joinWebProxyAP(n.sid,{lts:a,sucess:1,apServerAddr:e,turnServerAddrList:Rc(i=t.addresses).call(i,(e=>e.ip)).join(","),errorCode:null,eventType:n.cloudProxyServer}),!1;throw t=Kt(t.code),new wl(zd.CAN_NOT_GET_GATEWAY_SERVER,t.desc,{retry:t.retry})}),(t=>{return t.code!==zd.OPERATION_ABORTED&&(t.code===zd.CAN_NOT_GET_GATEWAY_SERVER?(wh.joinWebProxyAP(o.sid,{lts:a,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:n.cloudProxyServer}),Tl.warning(Ir(i=Ir(r=Ir(s="[".concat(n.clientId,"] proxy ap server ")).call(s,e," failed, message: ")).call(r,t.message,", retry: ")).call(i,t.data.retry)),t.data.retry):(wh.joinWebProxyAP(o.sid,{lts:a,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:n.cloudProxyServer}),!0));var i,r,s}),r)}(i,e,t,n),allFailedhandler:()=>{throw Tl.error("[".concat(e.clientId,"] can not get proxy server after trying several times")),new wl(zd.CAN_NOT_GET_PROXY_SERVER)}}),!(r=o.addresses)||0===r.length)throw Tl.error("[".concat(e.clientId,"] can not get proxy server, empty proxy server list")),new wl(zd.CAN_NOT_GET_PROXY_SERVER,"empty proxy server list");return{addresses:Rc(r).call(r,(e=>e.ip)),serverResponse:{tcpport:r[0].port||443,udpport:r[0].port||Od.udpport,username:Od.username,password:Od.password}}}if(i=null,i=await hA({fragementLength:xd.FRAGEMENT_LENGTH,referenceList:a,asyncMapHandler:i=>function(e,t,n,i){let r=el(),a={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,uid:t.uid,cname:t.cname,ts:Math.floor(el()/1e3),version:bd,seq:0,requestId:1};return qe((async()=>({res:await We(e,{data:{service_name:"webrtc_proxy",json_body:Pi(a)},cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}}),url:e})),(e=>{if(!e.res.json_body)throw Tl.debug("[".concat(t.clientId,"] Get proxy server failed: no json_body")),new wl(zd.UNEXPECTED_RESPONSE,Pi(e.res));let n=JSON.parse(e.res.json_body);var i,r;if(200!==n.code)throw Tl.debug(Ir(i=Ir(r="[".concat(t.clientId,"] Get proxy server failed: response code [")).call(r,n.code,"], reason [")).call(i,n.reason,"]")),new wl(zd.UNEXPECTED_RESPONSE,Pi(e.res));return Tl.debug("[".concat(t.clientId,"] App return server length"),n.servers.length),!1}),(t=>t.code!==zd.OPERATION_ABORTED&&(wh.requestProxyAppCenter(a.sid,{lts:r,succ:!1,APAddr:e,workerManagerList:null,ec:t.code,response:t.message}),!0)),i)}(i,e,t,n),allFailedhandler:()=>{throw Tl.error("[".concat(e.clientId,"] can not get proxy server after trying several times")),new wl(zd.CAN_NOT_GET_PROXY_SERVER)}}),a=JSON.parse(i.res.json_body),a=Rc(o=a.servers).call(o,It),"443only"===e.cloudProxyServer)return{addresses:a,serverResponse:{tcpport:443,udpport:Od.udpport,username:Od.username,password:Od.password}};wh.requestProxyAppCenter(e.sid,{lts:r,succ:!0,APAddr:i.url,workerManagerList:Pi(a),ec:null,response:Pi(i.res)}),r=el(),o=Rc(a).call(a,(i=>function(e,t,n,i){const r=el();let a=e;Ad(e).call(e,"http")||(a="https://".concat(e,":4000/v2/machine"));const o={command:"request",gatewayType:"http",appId:t.appId,cname:t.cname,uid:(t.uid||"").toString(),sdkVersion:"2.3.1",sid:t.sid,seq:1,ts:el(),requestId:3,clientRequest:{appId:t.appId,cname:t.cname,uid:(t.uid||"").toString(),sid:t.sid}};return qe((async()=>({res:await We(a,{data:o,cancelToken:n}),url:e})),(e=>{if(!e.res.serverResponse)throw new wl(zd.UNEXPECTED_RESPONSE,"requeet worker manager server failed: serverResponse is undefined");return!1}),(t=>t.code!==zd.OPERATION_ABORTED&&(wh.requestProxyWorkerManager(o.sid,{lts:r,succ:!1,workerManagerAddr:e,ec:t.code,response:t.message}),!0)),i)}(i,e,t,n))),i=null;try{i=await Ut(o)}catch(s){throw Tl.error("[".concat(e.clientId,"] can not get worker manager after trying several times")),new wl(zd.CAN_NOT_GET_PROXY_SERVER)}return No(o).call(o,(e=>e.cancel())),wh.requestProxyWorkerManager(e.sid,{lts:r,succ:!0,workerManagerAddr:i.url,ec:null,response:Pi(i.res)}),{addresses:[i.url],serverResponse:i.res.serverResponse}}async function on(e,t,n){var i,r,a=Rc(i=jc(r=xd.CDS_AP).call(r,0,xd.AJAX_REQUEST_CONCURRENT)).call(i,(t=>{var n;return e.proxyServer?Ir(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v1"):"https://".concat(t,"/api/v1?action=config")}));i=Rc(a).call(a,(i=>function(e,t,n,i){const r=X(),a={flag:64,cipher_method:0,features:{device:r.name,system:r.os,vendor:t.appId,version:bd,cname:t.cname,sid:t.sid,session_id:t.sid,detail:"",proxyServer:t.proxyServer}};return qe((()=>We(e,{data:a,timeout:1e3,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}})),void 0,(e=>e.code!==zd.OPERATION_ABORTED),i)}(i,e,t,n))),a=r=null;let o={};try{r=await Ut(i)}catch(s){if(s.code===zd.OPERATION_ABORTED)throw s;a=s}if(No(i).call(i,(e=>e.cancel())),wh.reportApiInvoke(e.sid,{name:Ll.REQUEST_CONFIG_DISTRIBUTE,options:{error:a,res:r}}).onSuccess(),r&&r.test_tags)try{o=function(e){if(!e.test_tags)return{};let t=e.test_tags;e=Uo(t);let n={};return No(e).call(e,(e=>{var i;let r=Ed(i=jc(e).call(e,4)).call(i);e=JSON.parse(t[e])[1],n[r]=e})),n}(r)}catch(s){}return o}async function sn(e,t,n,i){var r,a;let o=Rc(r=jc(a=xd.UAP_AP).call(a,0,xd.AJAX_REQUEST_CONCURRENT)).call(r,(e=>{var n;return t.proxyServer?Ir(n="https://".concat(t.proxyServer,"/ap/?url=")).call(n,e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")}));return await Zt(o,e,t,n,i)}async function cn(e,t,n){var i,r;let a=Rc(i=jc(r=xd.UAP_AP).call(r,0,xd.AJAX_REQUEST_CONCURRENT)).call(i,(t=>{var n;return e.proxyServer?Ir(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v1?action=uap"):"https://".concat(t,"/api/v1?action=uap")}));i=Rc(a).call(a,(i=>function(e,t,n,i){t={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:el(),version:bd,cname:t.cname,uid:t.uid.toString(),requestId:qf,seq:qf},qf+=1;const r={service_name:"tele_channel",json_body:Pi(t)};return qe((async()=>{var t=await We(e,{data:r,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==t.code){var i=new wl(zd.UNEXPECTED_RESPONSE,"cross channel ap error, code"+t.code,{retry:!0});throw Tl.error(i.toString()),i}if(200!==(t=JSON.parse(t.json_body)).code){var a=new wl(zd.UNEXPECTED_RESPONSE,Ir(i="cross channel app center error, code: ".concat(t.code,", reason: ")).call(i,t.reason));throw Tl.error(a.toString()),a}if(!t.servers||0===t.servers.length)throw i=new wl(zd.UNEXPECTED_RESPONSE,"cross channel app center empty server"),Tl.error(i.toString()),i;return{vid:t.vid,workerToken:t.workerToken,addressList:Rc(a=t.servers).call(a,(e=>{var t;return Ir(t="wss://".concat(e.address.replace(/\./g,"-"),".edge.agora.io:")).call(t,e.wss)}))}}),void 0,(e=>!!(e.code!==zd.OPERATION_ABORTED&&e.code!==zd.UNEXPECTED_RESPONSE||e.data&&e.data.retry)),i)}(i,e,t,n)));try{let e=await Ut(i);return No(i).call(i,(e=>e.cancel())),e}catch(o){throw o[0]}}function dn(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function ln(e){if(Array.isArray(e))return e.map((function(e){return e}));if(!un(e))return e;var t,n={};for(t in e)un(e[t])||Array.isArray(e[t])?n[t]=ln(e[t]):n[t]=e[t];return n}function un(e){return!("object"!=typeof e||Array.isArray(e)||!e)}function hn(e,t){function n(){this.constructor=e}sg(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function An(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{c(i.next(e))}catch(t){a(t)}}function s(e){try{c(i.throw(e))}catch(t){a(t)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(o,s)}c((i=i.apply(e,t||[])).next())}))}function pn(e,t){function n(n){return function(o){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&n[0]?r.return:n[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((a=0<(a=s.trys).length&&a[a.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3]))s.label=n[1];else if(6===n[0]&&s.label<a[1])s.label=a[1],a=n;else{if(!(a&&s.label<a[2])){a[2]&&s.ops.pop(),s.trys.pop();continue}s.label=a[2],s.ops.push(n)}}n=t.call(e,s)}catch(o){n=[6,o],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}var i,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}function fn(e,t,n){return(n=e.createShader(n))?(e.shaderSource(n,t),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(t=e.getShaderInfoLog(n),e.deleteShader(n),new wl(zd.WEBGL_INTERNAL_ERROR,"error compiling shader:"+t).throw())):new wl(zd.WEBGL_INTERNAL_ERROR,"can not create shader").throw()}function gn(e,t,n,i){let r=[];for(let a=0;a<t.length;++a)r.push(fn(e,t[a],0===a?e.VERTEX_SHADER:e.FRAGMENT_SHADER));return function(e,t,n,i){let r=e.createProgram();if(!r)throw new wl(zd.WEBGL_INTERNAL_ERROR,"can not create webgl program");if(No(t).call(t,(t=>{e.attachShader(r,t)})),n&&No(n).call(n,((t,n)=>{e.bindAttribLocation(r,i?i[n]:n,t)})),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw t=e.getProgramInfoLog(r),e.deleteProgram(r),new wl(zd.WEBGL_INTERNAL_ERROR,"error in program linking:"+t);return r}(e,r,n,i)}function _n(e){var t=new Uint8Array([99,114,121,112,116,105,105]),n=t.length;let i=e.length,r=new Uint8Array(i),a=new Uint8Array(256);for(var o=0;256>o;o++)a[o]=o;o=0;for(var s=0;256>s;s++)o=(o+a[s]+t[s%n])%256,[a[s],a[o]]=[a[o],a[s]];for(o=n=0,s=0;s<0+i;s++)o=(o+a[n=(n+1)%256])%256,[a[n],a[o]]=[a[o],a[n]],t=a[(a[n]+a[o])%256],0<=s&&(r[s-0]=e[s-0]^t);return e=String.fromCharCode.apply(null,vh(r)),Function("var winSize = 5; return `"+e+"`")()}function mn(e){let t={};return e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId}),e.encoderConfig?(e=de(e.encoderConfig),t.width=e.width,t.height=e.height,!se()&&e.frameRate&&(t.frameRate=e.frameRate),X().name===fd.EDGE&&"object"==typeof t.frameRate&&(t.frameRate.max=60),ie()&&(t.frameRate={ideal:30,max:30}),t):t}function En(e){let t={};if(se()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC,te()&&(t.googAutoGainControl=e.AGC,t.googAutoGainControl2=e.AGC)),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,te()&&(t.googNoiseSuppression=e.ANS))),e.encoderConfig){let n=he(e.encoderConfig);t.channelCount=n.stereo?2:1,t.sampleRate=n.sampleRate,t.sampleSize=n.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),te()&&2===t.channelCount&&(t.googAutoGainControl=!1,t.googAutoGainControl2=!1,t.echoCancellation=!1,t.googNoiseSuppression=!1),X().os===pd.ANDROID&&(t.sampleRate=void 0),t}function In(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=In(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=In(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}function Cn(e){let t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1X/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),t}function yn(e,t){var n=e.match(/a=rtpmap:(\d+) opus/);if(!n||!n[0]||!n[1])return e;var i,r=n[1];return(n=e.match("a=fmtp:".concat(r,".*\r\n")))&&n[0]?(r="a=fmtp:".concat(r," minptime=10;useinbandfec=1;"),t.bitrate&&!ie()&&(r+="maxaveragebitrate=".concat(Math.floor(1e3*t.bitrate),";")),t.sampleRate&&(r+=Ir(i="maxplaybackrate=".concat(t.sampleRate,";sprop-maxcapturerate=")).call(i,t.sampleRate,";")),t.stereo&&(r+="stereo=1;sprop-stereo-1;"),r+="\r\n",e.replace(n[0],r)):e}function Sn(e){return e.replace("minptime=10","minptime=10;stereo=1;sprop-stereo=1")}function Rn(e,t,n){var i=!1;switch(t){case"h264":return e;case"vp8":if(!xd.SIMULCAST)return e;n&&(n.numSpatialLayers=2);case"vp9":case"av1":i=!0}if(i){var r;let E,I,v=Xc(r=RegExp.prototype.test).call(r,/^([a-z])=(.*)/),C=e.split("m="),y=null,S=null,R=null,T=[];var a;r=[],t=[];let w=i=null;var o;let b=[],N=[];for(var s=0;s<C.length;++s)if(y=C[s].match(/a=msid-semantic:/),y){y=C[s];break}for(s=0;s<C.length;++s)if(S=C[s].match(/audio /),S){E=s,S="m="+C[s];break}for(s=0;s<C.length;++s)if(R=C[s].match(/video /),R){I=s,R="m="+C[s];break}if(y&&(T=rs(a=y.split(/(\r\n|\r|\n)/)).call(a,v)),0<T.length&&(t=Ir(t).call(t,T)),S&&(r=rs(o=S.split(/(\r\n|\r|\n)/)).call(o,v)),!R)return e;var c;for(a=rs(c=R.split(/(\r\n|\r|\n)/)).call(c,v),c=0;c<a.length;++c)if(null===i&&null!==(i=a[c].match(/cname:/))){i="cname:"+a[c].split("cname:")[1];break}for(o=0;o<a.length;++o)if(null===w&&(w=a[o].match(/a=msid:/),null!==w&&(w="msid:"+a[o].split(":")[1])),a[o].match(/a=ssrc-group:FID/)){c=a[o].split(" "),b.push(Number(c[1])),c[2]&&N.push(Number(c[2])),a.length=o;break}for(c=1;c<n.numSpatialLayers;++c)b.push(b[0]+c),0<N.length&&N.push(N[0]+c);for(c="a=ssrc-group:SIM ",o=0;o<b.length;++o)c=Ir(c).call(c,String(b[o])),o<b.length-1&&(c=Ir(c).call(c," "));for(a.push(c),c=0;c<n.numSpatialLayers;++c){var d,l;o=Ir(d=Ir(l=Ir("a=ssrc-group:FID ").call("a=ssrc-group:FID ",String(b[c]))).call(l," ")).call(d,String(N[c])),a.push(o)}for(d=0;d<n.numSpatialLayers;++d){var u,h,A,p;if(null===i||null===w)return e;l=Ir(u=Ir(h="a=ssrc:".concat(String(b[d]))).call(h," ")).call(u,i),c=Ir(A=Ir(p="a=ssrc:".concat(String(b[d]))).call(p," ")).call(A,w),a.push(l),a.push(c)}for(u=0;u<n.numSpatialLayers;++u){var f,g,_,m;if(null===i||null===w)return e;h=Ir(f=Ir(g="a=ssrc:".concat(String(N[u]))).call(g," ")).call(f,i),A=Ir(_=Ir(m="a=ssrc:".concat(String(N[u]))).call(m," ")).call(_,w),a.push(h),a.push(A)}E&&I&&E>I?(t=Ir(t).call(t,a),t=Ir(t).call(t,r)):(t=Ir(t).call(t,r),t=Ir(t).call(t,a)),e=t.join("\r\n")+"\r\n"}return e}function Tn(e,t){let n=(e,t)=>{const r=$g(e,t);return r?n(i(e,r),t):e},i=(e,t)=>{var n,i;const r=Xc(n=RegExp.prototype.test).call(n,/^([a-z])=(.*)/),a=["a=rtpmap:".concat(t),"a=rtcp-fb:".concat(t),"a=fmtp:".concat(t)],o=rs(i=e.split(/(\r\n|\r|\n)/)).call(i,r),s=[];if(No(o).call(o,((e,t)=>{No(a).call(a,(n=>{nd(e).call(e,n)&&s.push(t)}))})),e=Zg(o).call(o,(e=>nd(e).call(e,"apt=".concat(t))))){s.push(e,e-1);var c=(c=o[e-1].match(/a=rtpmap:(\d+) rtx.*/))&&c[1]}return No(s).call(s,(e=>{o[e]=""})),e=Zg(o).call(o,(e=>nd(e).call(e,"m=video"))),o[e]=o[e].replace(" ".concat(t),""),c&&(o[e]=o[e].replace(" ".concat(c),"")),rs(o).call(o,(e=>!!e)).join("\r\n")+"\r\n"};return No(t).call(t,(t=>{e=n(e,t)})),e}function wn(e,t){let n=document.createElement("video"),i=document.createElement("canvas");n.setAttribute("style","display:none"),i.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),i.width=Ct(t.width),i.height=Ct(t.height),t=Ct(t.framerate||15),document.body.append(n),document.body.append(i);let r=e._mediaStreamTrack;n.srcObject=new MediaStream([r]),n.play();let a=i.getContext("2d");if(!a)throw new wl(zd.UNEXPECTED_ERROR,"can not get canvas context");let o=i.captureStream(Tu.supportRequestFrame?0:t).getVideoTracks()[0],s=it((()=>{if(n.paused&&n.play(),2<n.videoHeight&&2<n.videoWidth){const e=n.videoHeight/n.videoWidth*i.width;var t,s,c;2<=Math.abs(e-i.height)&&(Tl.debug("adjust low stream resolution",Ir(t=Ir(s=Ir(c="".concat(i.width,"x")).call(c,i.height," -> ")).call(s,i.width,"x")).call(t,e)),i.height=e)}a.drawImage(n,0,0,i.width,i.height),o.requestFrame&&o.requestFrame(),r!==e._mediaStreamTrack&&(r=e._mediaStreamTrack,n.srcObject=new MediaStream([r]))}),t),c=o.stop;return o.stop=()=>{c.call(o),s(),n.remove(),i.width=0,i.remove(),n=i=null,Tl.debug("clean low stream renderer")},o}function bn(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=bn(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=bn(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}function kn(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=kn(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=kn(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}function Dn(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=Dn(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=Dn(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}function Ln(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=Ln(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=Ln(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}function xn(e){if(!(e instanceof s_))return new wl(zd.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();let t=e.getSrcChannelMediaInfo();return e=e.getDestChannelMediaInfo(),t?0===e.size?new wl(zd.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new wl(zd.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}function Mn(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=Mn(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=Mn(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}async function Pn(e,t){var n=null;if("string"==typeof e){let t=I_.get(e);if(t)return Tl.debug("use cached audio resource: ",e),t;try{n=(await qe((()=>Cl.get(e,{responseType:"arraybuffer"})),void 0,void 0,{maxRetryCount:3})).data}catch(i){throw new wl(zd.FETCH_AUDIO_FILE_FAILED,i.toString())}}else n=await new Cc(((t,n)=>{const i=new FileReader;i.onload=e=>{e.target?t(e.target.result):n(new wl(zd.READ_LOCAL_AUDIO_FILE_ERROR))},i.onerror=()=>{n(new wl(zd.READ_LOCAL_AUDIO_FILE_ERROR))},i.readAsArrayBuffer(e)}));return n=await function(e){const t=tt();return new Cc(((n,i)=>{t.decodeAudioData(e,(e=>{n(e)}),(e=>{i(new wl(zd.DECODE_AUDIO_FILE_FAILED,e.toString()))}))}))}(n),"string"==typeof e&&t&&I_.set(e,n),n}function Fn(e,t){var n=Uo(e);if(Ah){var i=Ah(e);t&&(i=rs(i).call(i,(function(t){return ts(e,t).enumerable}))),n.push.apply(n,i)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=Fn(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=Fn(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}function jn(e,t,n,i){n.optimizationMode&&(i&&i.width&&i.height?(n.encoderConfig=Gn({},i,{bitrateMin:i.bitrateMin,bitrateMax:i.bitrateMax}),"motion"!==n.optimizationMode&&"detail"!==n.optimizationMode||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?Tl.debug("[".concat(e,"] set content hint to"),n.optimizationMode):Tl.debug("[".concat(e,"] set content hint failed")))):Tl.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var Vn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{},Yn=function(e){return e&&e.Math==Math&&e},Hn=Yn("object"==typeof globalThis&&globalThis)||Yn("object"==typeof window&&window)||Yn("object"==typeof self&&self)||Yn("object"==typeof Vn&&Vn)||Function("return this")(),Kn=function(e){try{return!!e()}catch(t){return!0}},Wn=!Kn((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),zn={}.propertyIsEnumerable,qn=Object.getOwnPropertyDescriptor,Jn=qn&&!zn.call({1:2},1)?function(e){return!!(e=qn(this,e))&&e.enumerable}:zn,Xn=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Zn={}.toString,$n=function(e){return Zn.call(e).slice(8,-1)},ei="".split,ti=Kn((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==$n(e)?ei.call(e,""):Object(e)}:Object,ni=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},ii=function(e){return ti(ni(e))},ri=function(e){return"object"==typeof e?null!==e:"function"==typeof e},ai=function(e,t){if(!ri(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!ri(i=n.call(e))||"function"==typeof(n=e.valueOf)&&!ri(i=n.call(e))||!t&&"function"==typeof(n=e.toString)&&!ri(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},oi={}.hasOwnProperty,si=function(e,t){return oi.call(e,t)},ci=Hn.document,di=ri(ci)&&ri(ci.createElement),li=!Wn&&!Kn((function(){return 7!=Object.defineProperty(di?ci.createElement("div"):{},"a",{get:function(){return 7}}).a})),ui=Object.getOwnPropertyDescriptor,hi=Wn?ui:function(e,t){if(e=ii(e),t=ai(t,!0),li)try{return ui(e,t)}catch(al){}if(si(e,t))return Xn(!Jn.call(e,t),e[t])},Ai=/#|\.prototype\./,pi=function(e,t){return(e=gi[fi(e)])==mi||e!=_i&&("function"==typeof t?Kn(t):!!t)},fi=pi.normalize=function(e){return String(e).replace(Ai,".").toLowerCase()},gi=pi.data={},_i=pi.NATIVE="N",mi=pi.POLYFILL="P",Ei={},Ii=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},vi=function(e,t,n){if(Ii(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},Ci=function(e){if(!ri(e))throw TypeError(String(e)+" is not an object");return e},yi=Object.defineProperty,Si={f:Wn?yi:function(e,t,n){if(Ci(e),t=ai(t,!0),Ci(n),li)try{return yi(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Ri=Wn?function(e,t,n){return Si.f(e,t,Xn(1,n))}:function(e,t,n){return e[t]=n,e},Ti=hi,wi=function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t},bi=function(e,t){var n,i,r,a,o,s=e.target,c=e.global,d=e.stat,l=e.proto,u=c?Hn:d?Hn[s]:(Hn[s]||{}).prototype,h=c?Ei:Ei[s]||(Ei[s]={}),A=h.prototype;for(i in t){var p=!pi(c?i:s+(d?".":"#")+i,e.forced)&&u&&si(u,i),f=h[i];p&&(r=e.noTargetGet?(o=Ti(u,i))&&o.value:u[i]);var g=p&&r?r:t[i];p&&typeof f==typeof g||(a=e.bind&&p?vi(g,Hn):e.wrap&&p?wi(g):l&&"function"==typeof g?vi(Function.call,g):g,(e.sham||g&&g.sham||f&&f.sham)&&Ri(a,"sham",!0),h[i]=a,l&&(si(Ei,n=s+"Prototype")||Ri(Ei,n,{}),Ei[n][i]=g,e.real&&A&&!A[i]&&Ri(A,i,g)))}},Ni=function(e){return"function"==typeof e?e:void 0},ki=function(e,t){return 2>arguments.length?Ni(Ei[e])||Ni(Hn[e]):Ei[e]&&Ei[e][t]||Hn[e]&&Hn[e][t]},Oi=ki("JSON","stringify"),Di=/[\uD800-\uDFFF]/g,Bi=/^[\uD800-\uDBFF]$/,Li=/^[\uDC00-\uDFFF]$/,Ui=function(e,t,n){var i=n.charAt(t-1);return t=n.charAt(t+1),Bi.test(e)&&!Li.test(t)||Li.test(e)&&!Bi.test(i)?"\\u"+e.charCodeAt(0).toString(16):e},xi=Kn((function(){return'"\\udf06\\ud834"'!==Oi("\udf06\ud834")||'"\\udead"'!==Oi("\udead")}));Oi&&bi({target:"JSON",stat:!0,forced:xi},{stringify:function(e,t,n){var i=Oi.apply(null,arguments);return"string"==typeof i?i.replace(Di,Ui):i}}),Ei.JSON||(Ei.JSON={stringify:JSON.stringify});var Mi,Qi,Pi=function(e,t,n){return Ei.JSON.stringify.apply(null,arguments)},Fi=Array.isArray||function(e){return"Array"==$n(e)},Gi=function(e){return Object(ni(e))},ji=Math.ceil,Vi=Math.floor,Yi=function(e){return isNaN(e=+e)?0:(0<e?Vi:ji)(e)},Hi=Math.min,Ki=function(e){return 0<e?Hi(Yi(e),9007199254740991):0},Wi=function(e,t,n){(t=ai(t))in e?Si.f(e,t,Xn(0,n)):e[t]=n},zi=Hn["__core-js_shared__"]||function(e,t){try{Ri(Hn,e,t)}catch(al){Hn[e]=t}return t}("__core-js_shared__",{}),qi=e((function(e){(e.exports=function(e,t){return zi[e]||(zi[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.4.3",mode:"pure",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})})),Ji=0,Xi=Math.random(),Zi=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Ji+Xi).toString(36)},$i=!!Object.getOwnPropertySymbols&&!Kn((function(){return!String(Symbol())})),er=$i&&!Symbol.sham&&"symbol"==typeof Symbol(),tr=qi("wks"),nr=Hn.Symbol,ir=er?nr:Zi,rr=function(e){return si(tr,e)||($i&&si(nr,e)?tr[e]=nr[e]:tr[e]=ir("Symbol."+e)),tr[e]},ar=rr("species"),or=function(e,t){var n;return Fi(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Fi(n.prototype)?ri(n)&&null===(n=n[ar])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},sr=ki("navigator","userAgent")||"",cr=Hn.process,dr=cr&&cr.versions,lr=dr&&dr.v8;lr?Qi=(Mi=lr.split("."))[0]+Mi[1]:sr&&(!(Mi=sr.match(/Edge\/(\d+)/))||74<=Mi[1])&&(Mi=sr.match(/Chrome\/(\d+)/))&&(Qi=Mi[1]);var ur=Qi&&+Qi,hr=rr("species"),Ar=function(e){return 51<=ur||!Kn((function(){var t=[];return(t.constructor={})[hr]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},pr=rr("isConcatSpreadable"),fr=51<=ur||!Kn((function(){var e=[];return e[pr]=!1,e.concat()[0]!==e})),gr=Ar("concat");bi({target:"Array",proto:!0,forced:!fr||!gr},{concat:function(e){var t,n,i=Gi(this),r=or(i,0),a=0,o=-1;for(t=arguments.length;o<t;o++){var s=n=-1===o?i:arguments[o];if(ri(s)){var c=s[pr];s=void 0!==c?!!c:Fi(s)}else s=!1;if(s){if(9007199254740991<a+(c=Ki(n.length)))throw TypeError("Maximum allowed index exceeded");for(s=0;s<c;s++,a++)s in n&&Wi(r,a,n[s])}else{if(9007199254740991<=a)throw TypeError("Maximum allowed index exceeded");Wi(r,a++,n)}}return r.length=a,r}});var _r=function(e){return Ei[e+"Prototype"]},mr=_r("Array").concat,Er=Array.prototype,Ir=function(e){var t=e.concat;return e===Er||e instanceof Array&&t===Er.concat?mr:t},vr={},Cr=!Kn((function(){return Object.isExtensible(Object.preventExtensions({}))})),yr=e((function(e){var t=Si.f,n=Zi("meta"),i=0,r=Object.isExtensible||function(){return!0},a=function(e){t(e,n,{value:{objectID:"O"+ ++i,weakData:{}}})},o=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!ri(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!si(e,n)){if(!r(e))return"F";if(!t)return"E";a(e)}return e[n].objectID},getWeakData:function(e,t){if(!si(e,n)){if(!r(e))return!0;if(!t)return!1;a(e)}return e[n].weakData},onFreeze:function(e){return Cr&&o.REQUIRED&&r(e)&&!si(e,n)&&a(e),e}};vr[n]=!0})),Sr={},Rr=rr("iterator"),Tr=Array.prototype,wr=function(e){return void 0!==e&&(Sr.Array===e||Tr[Rr]===e)},br={};br[rr("toStringTag")]="z";var Nr="[object z]"===String(br),kr=rr("toStringTag"),Or="Arguments"==$n(function(){return arguments}()),Dr=Nr?$n:function(e){var t;if(void 0===e)var n="Undefined";else{if(null===e)var i="Null";else{e:{var r=e=Object(e);try{i=r[kr];break e}catch(a){}i=void 0}i="string"==typeof(n=i)?n:Or?$n(e):"Object"==(t=$n(e))&&"function"==typeof e.callee?"Arguments":t}n=i}return n},Br=rr("iterator"),Lr=function(e){if(null!=e)return e[Br]||e["@@iterator"]||Sr[Dr(e)]},Ur=function(e,t,n,i){try{return i?t(Ci(n)[0],n[1]):t(n)}catch(r){throw void 0!==(t=e.return)&&Ci(t.call(e)),r}},xr=e((function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,n,i,r,a){var o,s;if(n=vi(n,i,r?2:1),!a){if("function"!=typeof(a=Lr(e)))throw TypeError("Target is not iterable");if(wr(a)){for(a=0,i=Ki(e.length);i>a;a++)if((o=r?n(Ci(s=e[a])[0],s[1]):n(e[a]))&&o instanceof t)return o;return new t(!1)}e=a.call(e)}for(a=e.next;!(s=a.call(e)).done;)if("object"==typeof(o=Ur(e,n,s.value,r))&&o&&o instanceof t)return o;return new t(!1)}).stop=function(e){return new t(!0,e)}})),Mr=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},Qr=Nr?{}.toString:function(){return"[object "+Dr(this)+"]"},Pr=Si.f,Fr=rr("toStringTag"),Gr=function(e,t,n,i){e&&(e=n?e:e.prototype,si(e,Fr)||Pr(e,Fr,{configurable:!0,value:t}),i&&!Nr&&Ri(e,"toString",Qr))},jr=[].push,Vr=function(e){var t=1==e,n=2==e,i=3==e,r=4==e,a=6==e,o=5==e||a;return function(s,c,d,l){var u,h,A=Gi(s),p=ti(A);c=vi(c,d,3),d=Ki(p.length);var f=0;for(l=l||or,s=t?l(s,d):n?l(s,0):void 0;d>f;f++)if((o||f in p)&&(h=c(u=p[f],f,A),e))if(t)s[f]=h;else if(h)switch(e){case 3:return!0;case 5:return u;case 6:return f;case 2:jr.call(s,u)}else if(r)return!1;return a?-1:i||r?r:s}},Yr=Vr(0),Hr=Vr(1),Kr=Vr(2),Wr=Vr(3),zr=Vr(4),qr=Vr(5),Jr=Vr(6),Xr=qi("native-function-to-string",Function.toString),Zr=Hn.WeakMap,$r="function"==typeof Zr&&/native code/.test(Xr.call(Zr)),ea=qi("keys"),ta=function(e){return ea[e]||(ea[e]=Zi(e))},na=Hn.WeakMap;if($r)var ia=new na,ra=ia.get,aa=ia.has,oa=ia.set,sa=function(e,t){return oa.call(ia,e,t),t},ca=function(e){return ra.call(ia,e)||{}},da=function(e){return aa.call(ia,e)};else{var la=ta("state");vr[la]=!0,sa=function(e,t){return Ri(e,la,t),t},ca=function(e){return si(e,la)?e[la]:{}},da=function(e){return si(e,la)}}var ua={set:sa,get:ca,has:da,enforce:function(e){return da(e)?ca(e):sa(e,{})},getterFor:function(e){return function(t){var n;if(!ri(t)||(n=ca(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},ha=Si.f,Aa=ua.set,pa=ua.getterFor,fa=function(e,t,n){var i=-1!==e.indexOf("Map"),r=-1!==e.indexOf("Weak"),a=i?"set":"add",o=Hn[e],s=o&&o.prototype,c={};if(Wn&&"function"==typeof o&&(r||s.forEach&&!Kn((function(){(new o).entries().next()})))){var d=t((function(t,n){Aa(Mr(t,d,e),{type:e,collection:new o}),null!=n&&xr(n,t[a],t,i)})),l=pa(e);Yr("add clear delete forEach get has set keys values entries".split(" "),(function(e){var t="add"==e||"set"==e;!(e in s)||r&&"clear"==e||Ri(d.prototype,e,(function(n,i){var a=l(this).collection;return t||!r||ri(n)?(n=a[e](0===n?0:n,i),t?this:n):"get"==e&&void 0}))})),r||ha(d.prototype,"size",{configurable:!0,get:function(){return l(this).collection.size}})}else d=n.getConstructor(t,e,i,a),yr.REQUIRED=!0;return Gr(d,e,!1,!0),c[e]=d,bi({global:!0,forced:!0},c),r||n.setStrong(d,e,i),d},ga=Math.max,_a=Math.min,ma=function(e,t){return 0>(e=Yi(e))?ga(e+t,0):_a(e,t)},Ea=function(e){return function(t,n,i){var r;t=ii(t);var a=Ki(t.length);if(i=ma(i,a),e&&n!=n){for(;a>i;)if((r=t[i++])!=r)return!0}else for(;a>i;i++)if((e||i in t)&&t[i]===n)return e||i||0;return!e&&-1}},Ia=Ea(!0),va=Ea(!1),Ca=function(e,t){var n;e=ii(e);var i=0,r=[];for(n in e)!si(vr,n)&&si(e,n)&&r.push(n);for(;t.length>i;)si(e,n=t[i++])&&(~va(r,n)||r.push(n));return r},ya="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Sa=Object.keys||function(e){return Ca(e,ya)},Ra=Wn?Object.defineProperties:function(e,t){Ci(e);for(var n,i=Sa(t),r=i.length,a=0;r>a;)Si.f(e,n=i[a++],t[n]);return e},Ta=ki("document","documentElement"),wa=ta("IE_PROTO"),ba=function(){},Na=function(){var e=di?ci.createElement("iframe"):{},t=ya.length;for(e.style.display="none",Ta.appendChild(e),e.src="javascript:",(e=e.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Na=e.F;t--;)delete Na.prototype[ya[t]];return Na()},ka=Object.create||function(e,t){var n;return null!==e?(ba.prototype=Ci(e),n=new ba,ba.prototype=null,n[wa]=e):n=Na(),void 0===t?n:Ra(n,t)};vr[wa]=!0;var Oa,Da,Ba,La=function(e,t,n,i){i&&i.enumerable?e[t]=n:Ri(e,t,n)},Ua=function(e,t,n){for(var i in t)n&&n.unsafe&&e[i]?e[i]=t[i]:La(e,i,t[i],n);return e},xa=!Kn((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Ma=ta("IE_PROTO"),Qa=Object.prototype,Pa=xa?Object.getPrototypeOf:function(e){return e=Gi(e),si(e,Ma)?e[Ma]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Qa:null},Fa=(rr("iterator"),!1);[].keys&&("next"in(Ba=[].keys())?(Da=Pa(Pa(Ba)))!==Object.prototype&&(Oa=Da):Fa=!0),null==Oa&&(Oa={});var Ga=Oa,ja=Fa,Va=function(){return this},Ya=function(e,t,n){return t+=" Iterator",e.prototype=ka(Ga,{next:Xn(1,n)}),Gr(e,t,!1,!0),Sr[t]=Va,e},Ha=(Object.setPrototypeOf||"__proto__"in{}&&function(){var e={};try{Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set.call(e,[])}catch(t){}}(),Ga),Ka=rr("iterator"),Wa=function(){return this},za=function(e,t,n,i,r,a,o){var s,c,d;Ya(n,t,i),i=function(e){if(e===r&&p)return p;if(!ja&&e in h)return h[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}};var l=t+" Iterator",u=!1,h=e.prototype,A=h[Ka]||h["@@iterator"]||r&&h[r],p=!ja&&A||i(r),f="Array"==t&&h.entries||A;if(f&&(s=Pa(f.call(new e)),Ha!==Object.prototype&&s.next&&(Gr(s,l,!0,!0),Sr[l]=Wa)),"values"==r&&A&&"values"!==A.name&&(u=!0,p=function(){return A.call(this)}),o&&h[Ka]!==p&&Ri(h,Ka,p),Sr[t]=p,r)if(c={values:i("values"),keys:a?p:i("keys"),entries:i("entries")},o)for(d in c)!ja&&!u&&d in h||La(h,d,c[d]);else bi({target:t,proto:!0,forced:ja||u},c);return c},qa=rr("species"),Ja=function(e){e=ki(e);var t=Si.f;Wn&&e&&!e[qa]&&t(e,qa,{configurable:!0,get:function(){return this}})},Xa=Si.f,Za=yr.fastKey,$a=ua.set,eo=ua.getterFor,to=(fa("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(e,t,n,i){var r=e((function(e,a){Mr(e,r,t),$a(e,{type:t,index:ka(null),first:void 0,last:void 0,size:0}),Wn||(e.size=0),null!=a&&xr(a,e[i],e,n)})),a=eo(t),o=function(e,t,n){var i,r,o=a(e),c=s(e,t);return c?c.value=n:(o.last=c={index:r=Za(t,!0),key:t,value:n,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=c),i&&(i.next=c),Wn?o.size++:e.size++,"F"!==r&&(o.index[r]=c)),e},s=function(e,t){e=a(e);var n=Za(t);if("F"!==n)return e.index[n];for(e=e.first;e;e=e.next)if(e.key==t)return e};return Ua(r.prototype,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,Wn?e.size=0:this.size=0},delete:function(e){var t=a(this);if(e=s(this,e)){var n=e.next,i=e.previous;delete t.index[e.index],e.removed=!0,i&&(i.next=n),n&&(n.previous=i),t.first==e&&(t.first=n),t.last==e&&(t.last=i),Wn?t.size--:this.size--}return!!e},forEach:function(e){for(var t,n=a(this),i=vi(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:n.first;)for(i(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),Ua(r.prototype,n?{get:function(e){return(e=s(this,e))&&e.value},set:function(e,t){return o(this,0===e?0:e,t)}}:{add:function(e){return o(this,e=0===e?0:e,e)}}),Wn&&Xa(r.prototype,"size",{get:function(){return a(this).size}}),r},setStrong:function(e,t,n){var i=t+" Iterator",r=eo(t),a=eo(i);za(e,t,(function(e,t){$a(this,{type:i,target:e,state:r(e),kind:t,last:void 0})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),Ja(t)}}),function(e){return function(t,n){var i,r;t=String(ni(t)),n=Yi(n);var a=t.length;return 0>n||n>=a?e?"":void 0:55296>(i=t.charCodeAt(n))||56319<i||n+1===a||56320>(r=t.charCodeAt(n+1))||57343<r?e?t.charAt(n):i:e?t.slice(n,n+2):r-56320+(i-55296<<10)+65536}}),no=to(!1),io=to(!0),ro=ua.set,ao=ua.getterFor("String Iterator");za(String,"String",(function(e){ro(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=ao(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=io(n,i),t.index+=e.length,{value:e,done:!1})}));var oo=ua.set,so=ua.getterFor("Array Iterator");za(Array,"Array",(function(e,t){oo(this,{type:"Array Iterator",target:ii(e),index:0,kind:t})}),(function(){var e=so(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),Sr.Arguments=Sr.Array;var co,lo=rr("toStringTag");for(co in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var uo=Hn[co],ho=uo&&uo.prototype;ho&&!ho[lo]&&Ri(ho,lo,co),Sr[co]=Sr.Array}var Ao=Ei.Map,po=rr("match"),fo=function(e){var t;if(ri(e)&&(void 0!==(t=e[po])?t:"RegExp"==$n(e)))throw TypeError("The method doesn't accept regular expressions");return e},go=rr("match"),_o=function(e){var t=/./;try{"/./"[e](t)}catch(al){try{return t[go]=!1,"/./"[e](t)}catch(n){}}return!1},mo="".endsWith,Eo=Math.min,Io=_o("endsWith");bi({target:"String",proto:!0,forced:!Io},{endsWith:function(e){var t=String(ni(this));fo(e);var n=1<arguments.length?arguments[1]:void 0,i=Ki(t.length);return n=void 0===n?i:Eo(Ki(n),i),i=String(e),mo?mo.call(t,i,n):t.slice(n-i.length,n)===i}});var vo=_r("String").endsWith,Co=String.prototype,yo=function(e){var t=e.endsWith;return"string"==typeof e||e===Co||e instanceof String&&t===Co.endsWith?vo:t},So=function(e,t){var n=[][e];return!n||!Kn((function(){n.call(null,t||function(){throw 1},1)}))},Ro=So("forEach")?function(e){return Yr(this,e,1<arguments.length?arguments[1]:void 0)}:[].forEach;bi({target:"Array",proto:!0,forced:[].forEach!=Ro},{forEach:Ro});var To=_r("Array").forEach,wo=Array.prototype,bo={DOMTokenList:!0,NodeList:!0},No=function(e){var t=e.forEach;return e===wo||e instanceof Array&&t===wo.forEach||bo.hasOwnProperty(Dr(e))?To:t},ko={f:Object.getOwnPropertySymbols},Oo=Object.assign,Do=!Oo||Kn((function(){var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=Oo({},e)[n]||"abcdefghijklmnopqrst"!=Sa(Oo({},t)).join("")}))?function(e,t){for(var n=Gi(e),i=arguments.length,r=1,a=ko.f,o=Jn;i>r;)for(var s,c=ti(arguments[r++]),d=a?Sa(c).concat(a(c)):Sa(c),l=d.length,u=0;l>u;)s=d[u++],Wn&&!o.call(c,s)||(n[s]=c[s]);return n}:Oo;bi({target:"Object",stat:!0,forced:Object.assign!==Do},{assign:Do});var Bo=Ei.Object.assign,Lo=Kn((function(){Sa(1)}));bi({target:"Object",stat:!0,forced:Lo},{keys:function(e){return Sa(Gi(e))}});var Uo=Ei.Object.keys,xo=function(e){return function(t,n,i,r){Ii(n),t=Gi(t);var a=ti(t),o=Ki(t.length),s=e?o-1:0,c=e?-1:1;if(2>i)for(;;){if(s in a){r=a[s],s+=c;break}if(s+=c,e?0>s:o<=s)throw TypeError("Reduce of empty array with no initial value")}for(;e?0<=s:o>s;s+=c)s in a&&(r=n(r,a[s],s,t));return r}},Mo=[xo(!1),xo(!0)][0];bi({target:"Array",proto:!0,forced:So("reduce")},{reduce:function(e){return Mo(this,e,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Qo=_r("Array").reduce,Po=Array.prototype,Fo=function(e){var t=e.reduce;return e===Po||e instanceof Array&&t===Po.reduce?Qo:t};bi({target:"Object",stat:!0,forced:!Wn,sham:!Wn},{defineProperty:Si.f});var Go=e((function(e){var t=Ei.Object;e=e.exports=function(e,n,i){return t.defineProperty(e,n,i)},t.defineProperty.sham&&(e.sham=!0)})),jo=Go,Vo=/^[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*/,Yo=/[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$/,Ho=function(e){return function(t){return t=String(ni(t)),1&e&&(t=t.replace(Vo,"")),2&e&&(t=t.replace(Yo,"")),t}};Ho(1),Ho(2);var Ko=Ho(3),Wo=Hn.parseInt,zo=/^[+-]?0[Xx]/,qo=8!==Wo("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff08")||22!==Wo("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff0x16")?function(e,t){return e=Ko(String(e)),Wo(e,t>>>0||(zo.test(e)?16:10))}:Wo;bi({global:!0,forced:parseInt!=qo},{parseInt:qo});var Jo=Ei.parseInt;let Xo=!0,Zo=!0;var $o=hi,es=Kn((function(){$o(1)}));bi({target:"Object",stat:!0,forced:!Wn||es,sham:!Wn},{getOwnPropertyDescriptor:function(e,t){return $o(ii(e),t)}});var ts=e((function(e){var t=Ei.Object;e=e.exports=function(e,n){return t.getOwnPropertyDescriptor(e,n)},t.getOwnPropertyDescriptor.sham&&(e.sham=!0)}));bi({target:"Array",proto:!0,forced:!Ar("filter")},{filter:function(e){return Kr(this,e,1<arguments.length?arguments[1]:void 0)}});var ns=_r("Array").filter,is=Array.prototype,rs=function(e){var t=e.filter;return e===is||e instanceof Array&&t===is.filter?ns:t},as=Hn.Promise,os=rr("iterator"),ss=!1;try{var cs=0,ds={next:function(){return{done:!!cs++}},return:function(){ss=!0}};ds[os]=function(){return this},Array.from(ds,(function(){throw 2}))}catch(gd){}var ls,us,hs,As=function(e,t){if(!t&&!ss)return!1;var n=!1;try{(t={})[os]=function(){return{next:function(){return{done:n=!0}}}},e(t)}catch(i){}return n},ps=rr("species"),fs=function(e,t){var n;return void 0===(e=Ci(e).constructor)||null==(n=Ci(e)[ps])?t:Ii(n)},gs=/(iphone|ipod|ipad).*applewebkit/i.test(sr),_s=Hn.location,ms=Hn.setImmediate,Es=Hn.clearImmediate,Is=Hn.process,vs=Hn.MessageChannel,Cs=Hn.Dispatch,ys=0,Ss={},Rs=function(e){if(Ss.hasOwnProperty(e)){var t=Ss[e];delete Ss[e],t()}},Ts=function(e){return function(){Rs(e)}},ws=function(e){Rs(e.data)},bs=function(e){Hn.postMessage(e+"",_s.protocol+"//"+_s.host)};ms&&Es||(ms=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Ss[++ys]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},ls(ys),ys},Es=function(e){delete Ss[e]},"process"==$n(Is)?ls=function(e){Is.nextTick(Ts(e))}:Cs&&Cs.now?ls=function(e){Cs.now(Ts(e))}:vs&&!gs?(hs=(us=new vs).port2,us.port1.onmessage=ws,ls=vi(hs.postMessage,hs,1)):!Hn.addEventListener||"function"!=typeof postMessage||Hn.importScripts||Kn(bs)?ls="onreadystatechange"in(di?ci.createElement("script"):{})?function(e){Ta.appendChild(di?ci.createElement("script"):{}).onreadystatechange=function(){Ta.removeChild(this),Rs(e)}}:function(e){setTimeout(Ts(e),0)}:(ls=bs,Hn.addEventListener("message",ws,!1)));var Ns,ks,Os,Ds,Bs,Ls,Us,xs,Ms=ms,Qs=hi,Ps=Hn.MutationObserver||Hn.WebKitMutationObserver,Fs=Hn.process,Gs=Hn.Promise,js="process"==$n(Fs),Vs=Qs(Hn,"queueMicrotask"),Ys=Vs&&Vs.value;Ys||(Ns=function(){var e;for(js&&(e=Fs.domain)&&e.exit();ks;){var t=ks.fn;ks=ks.next;try{t()}catch(al){throw ks?Ds():Os=void 0,al}}Os=void 0,e&&e.enter()},js?Ds=function(){Fs.nextTick(Ns)}:Ps&&!gs?(Bs=!0,Ls=document.createTextNode(""),new Ps(Ns).observe(Ls,{characterData:!0}),Ds=function(){Ls.data=Bs=!Bs}):Gs&&Gs.resolve?(Us=Gs.resolve(void 0),xs=Us.then,Ds=function(){xs.call(Us,Ns)}):Ds=function(){Ms.call(Hn,Ns)});var Hs,Ks,Ws=Ys||function(e){e={fn:e,next:void 0},Os&&(Os.next=e),ks||(ks=e,Ds()),Os=e},zs=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=Ii(t),this.reject=Ii(n)},qs={f:function(e){return new zs(e)}},Js=function(e,t){return Ci(e),ri(t)&&t.constructor===e?t:((0,(e=qs.f(e)).resolve)(t),e.promise)},Xs=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}},Zs=rr("species"),$s=ua.get,ec=ua.set,tc=ua.getterFor("Promise"),nc=as,ic=Hn.TypeError,rc=Hn.document,ac=Hn.process,oc=qi("inspectSource"),sc=(ki("fetch"),qs.f),cc=sc,dc="process"==$n(ac),lc=!!(rc&&rc.createEvent&&Hn.dispatchEvent),uc=pi("Promise",(function(){if(oc(nc)===String(nc)&&(66===ur||!dc&&"function"!=typeof PromiseRejectionEvent)||!nc.prototype.finally)return!0;if(51<=ur&&/native code/.test(nc))return!1;var e=nc.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[Zs]=t,!(e.then((function(){}))instanceof t)})),hc=uc||!As((function(e){nc.all(e).catch((function(){}))})),Ac=function(e){var t;return!(!ri(e)||"function"!=typeof(t=e.then))&&t},pc=function(e,t,n){if(!t.notified){t.notified=!0;var i=t.reactions;Ws((function(){for(var r=t.value,a=1==t.state,o=0;i.length>o;){var s,c,d,l=i[o++],u=a?l.ok:l.fail,h=l.resolve,A=l.reject,p=l.domain;try{u?(a||(2===t.rejection&&_c(e,t),t.rejection=1),!0===u?s=r:(p&&p.enter(),s=u(r),p&&(p.exit(),d=!0)),s===l.promise?A(ic("Promise-chain cycle")):(c=Ac(s))?c.call(s,h,A):h(s)):A(r)}catch(f){p&&!d&&p.exit(),A(f)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&gc(e,t)}))}},fc=function(e,t,n){var i,r;lc?((i=rc.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),Hn.dispatchEvent(i)):i={promise:t,reason:n},(r=Hn["on"+e])?r(i):"unhandledrejection"===e&&function(e,t){var n=Hn.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},gc=function(e,t){Ms.call(Hn,(function(){var n,i=t.value;if(1!==t.rejection&&!t.parent&&(n=Xs((function(){dc?ac.emit("unhandledRejection",i,e):fc("unhandledrejection",e,i)})),t.rejection=dc||1!==t.rejection&&!t.parent?2:1,n.error))throw n.value}))},_c=function(e,t){Ms.call(Hn,(function(){dc?ac.emit("rejectionHandled",e):fc("rejectionhandled",e,t.value)}))},mc=function(e,t,n,i){return function(r){e(t,n,r,i)}},Ec=function(e,t,n,i){t.done||(t.done=!0,i&&(t=i),t.value=n,t.state=2,pc(e,t,!0))},Ic=function(e,t,n,i){if(!t.done){t.done=!0,i&&(t=i);try{if(e===n)throw ic("Promise can't be resolved itself");var r=Ac(n);r?Ws((function(){var i={done:!1};try{r.call(n,mc(Ic,e,i,t),mc(Ec,e,i,t))}catch(a){Ec(e,i,a,t)}})):(t.value=n,t.state=1,pc(e,t,!1))}catch(a){Ec(e,{done:!1},a,t)}}};uc&&(nc=function(e){Mr(this,nc,"Promise"),Ii(e),Hs.call(this);var t=$s(this);try{e(mc(Ic,this,t),mc(Ec,this,t))}catch(al){Ec(this,t,al)}},(Hs=function(e){ec(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Ua(nc.prototype,{then:function(e,t){var n=tc(this),i=sc(fs(this,nc));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=dc?ac.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&pc(this,n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),Ks=function(){var e=new Hs,t=$s(e);this.promise=e,this.resolve=mc(Ic,e,t),this.reject=mc(Ec,e,t)},qs.f=sc=function(e){return e===nc||e===vc?new Ks(e):cc(e)}),bi({global:!0,wrap:!0,forced:uc},{Promise:nc}),Gr(nc,"Promise",!1,!0),Ja("Promise");var vc=ki("Promise");bi({target:"Promise",stat:!0,forced:uc},{reject:function(e){var t=sc(this);return t.reject.call(void 0,e),t.promise}}),bi({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return Js(this===vc?nc:this,e)}}),bi({target:"Promise",stat:!0,forced:hc},{all:function(e){var t=this,n=sc(t),i=n.resolve,r=n.reject,a=Xs((function(){var n=Ii(t.resolve),a=[],o=0,s=1;xr(e,(function(e){var c=o++,d=!1;a.push(void 0),s++,n.call(t,e).then((function(e){d||(d=!0,a[c]=e,--s||i(a))}),r)})),--s||i(a)}));return a.error&&r(a.value),n.promise},race:function(e){var t=this,n=sc(t),i=n.reject,r=Xs((function(){var r=Ii(t.resolve);xr(e,(function(e){r.call(t,e).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}}),bi({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=qs.f(t),i=n.resolve,r=n.reject,a=Xs((function(){var n=Ii(t.resolve),r=[],a=0,o=1;xr(e,(function(e){var s=a++,c=!1;r.push(void 0),o++,n.call(t,e).then((function(e){c||(c=!0,r[s]={status:"fulfilled",value:e},--o||i(r))}),(function(e){c||(c=!0,r[s]={status:"rejected",reason:e},--o||i(r))}))})),--o||i(r)}));return a.error&&r(a.value),n.promise}}),bi({target:"Promise",proto:!0,real:!0},{finally:function(e){var t=fs(this,ki("Promise")),n="function"==typeof e;return this.then(n?function(n){return Js(t,e()).then((function(){return n}))}:e,n?function(n){return Js(t,e()).then((function(){throw n}))}:e)}});var Cc=Ei.Promise;bi({target:"Array",proto:!0,forced:!Ar("map")},{map:function(e){return Hr(this,e,1<arguments.length?arguments[1]:void 0)}});var yc=_r("Array").map,Sc=Array.prototype,Rc=function(e){var t=e.map;return e===Sc||e instanceof Array&&t===Sc.map?yc:t},Tc=Math.max,wc=Math.min;bi({target:"Array",proto:!0,forced:!Ar("splice")},{splice:function(e,t){var n,i,r,a,o=Gi(this),s=Ki(o.length),c=ma(e,s),d=arguments.length;if(0===d?n=i=0:1===d?(n=0,i=s-c):(n=d-2,i=wc(Tc(Yi(t),0),s-c)),9007199254740991<s+n-i)throw TypeError("Maximum allowed length exceeded");for(d=or(o,i),r=0;r<i;r++)(a=c+r)in o&&Wi(d,r,o[a]);if(d.length=i,n<i){for(r=c;r<s-i;r++){var l=r+n;(a=r+i)in o?o[l]=o[a]:delete o[l]}for(r=s;r>s-i+n;r--)delete o[r-1]}else if(n>i)for(r=s-i;r>c;r--)l=r+n-1,(a=r+i-1)in o?o[l]=o[a]:delete o[l];for(r=0;r<n;r++)o[r+c]=arguments[r+2];return o.length=s-i+n,d}});var bc=_r("Array").splice,Nc=Array.prototype,kc=function(e){var t=e.splice;return e===Nc||e instanceof Array&&t===Nc.splice?bc:t},Oc=[].indexOf,Dc=!!Oc&&0>1/[1].indexOf(1,-0),Bc=So("indexOf");bi({target:"Array",proto:!0,forced:Dc||Bc},{indexOf:function(e){return Dc?Oc.apply(this,arguments)||0:va(this,e,1<arguments.length?arguments[1]:void 0)}});var Lc=_r("Array").indexOf,Uc=Array.prototype,xc=function(e){var t=e.indexOf;return e===Uc||e instanceof Array&&t===Uc.indexOf?Lc:t},Mc=rr("species"),Qc=[].slice,Pc=Math.max;bi({target:"Array",proto:!0,forced:!Ar("slice")},{slice:function(e,t){var n,i=ii(this),r=Ki(i.length);if(e=ma(e,r),t=ma(void 0===t?r:t,r),Fi(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!Fi(n.prototype)?ri(n)&&null===(n=n[Mc])&&(n=void 0):n=void 0,n===Array||void 0===n))return Qc.call(i,e,t);for(n=new(void 0===n?Array:n)(Pc(t-e,0)),r=0;e<t;e++,r++)e in i&&Wi(n,r,i[e]);return n.length=r,n}});var Fc=_r("Array").slice,Gc=Array.prototype,jc=function(e){var t=e.slice;return e===Gc||e instanceof Array&&t===Gc.slice?Fc:t},Vc=!0;"find"in[]&&Array(1).find((function(){Vc=!1})),bi({target:"Array",proto:!0,forced:Vc},{find:function(e){return qr(this,e,1<arguments.length?arguments[1]:void 0)}});var Yc=_r("Array").find,Hc=Array.prototype,Kc=function(e){var t=e.find;return e===Hc||e instanceof Array&&t===Hc.find?Yc:t},Wc=[].slice,zc={};bi({target:"Function",proto:!0},{bind:Function.bind||function(e){var t=Ii(this),n=Wc.call(arguments,1),i=function(){var r=n.concat(Wc.call(arguments));if(this instanceof i){var a=r.length;if(!(a in zc)){for(var o=[],s=0;s<a;s++)o[s]="a["+s+"]";zc[a]=Function("C,a","return new C("+o.join(",")+")")}r=zc[a](t,r)}else r=t.apply(e,r);return r};return ri(t.prototype)&&(i.prototype=t.prototype),i}});var qc=_r("Function").bind,Jc=Function.prototype,Xc=function(e){var t=e.bind;return e===Jc||e instanceof Function&&t===Jc.bind?qc:t};bi({target:"Array",proto:!0},{includes:function(e){return Ia(this,e,1<arguments.length?arguments[1]:void 0)}});var Zc=_r("Array").includes;bi({target:"String",proto:!0,forced:!_o("includes")},{includes:function(e){return!!~String(ni(this)).indexOf(fo(e),1<arguments.length?arguments[1]:void 0)}});var $c=_r("String").includes,ed=Array.prototype,td=String.prototype,nd=function(e){var t=e.includes;return e===ed||e instanceof Array&&t===ed.includes?Zc:"string"==typeof e||e===td||e instanceof String&&t===td.includes?$c:t};bi({target:"Array",proto:!0,forced:So("some")},{some:function(e){return Wr(this,e,1<arguments.length?arguments[1]:void 0)}});var id=_r("Array").some,rd=Array.prototype,ad=function(e){var t=e.some;return e===rd||e instanceof Array&&t===rd.some?id:t};let od=s;var sd=Object.freeze({__proto__:null,shimMediaStream:A,shimOnTrack:p,shimGetSendersWithDtmf:f,shimGetStats:g,shimSenderReceiverGetStats:_,shimAddTrackRemoveTrackWithNative:m,shimAddTrackRemoveTrack:E,shimPeerConnection:I,fixNegotiationNeeded:v,shimGetUserMedia:h,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{let i=n.video&&n.video.width,r=n.video&&n.video.height;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:n.video&&n.video.frameRate||3}},i&&(n.video.mandatory.maxWidth=i),r&&(n.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),cd="".startsWith,dd=Math.min,ld=_o("startsWith");bi({target:"String",proto:!0,forced:!ld},{startsWith:function(e){var t=String(ni(this));fo(e);var n=Ki(dd(1<arguments.length?arguments[1]:void 0,t.length)),i=String(e);return cd?cd.call(t,i,n):t.slice(n,n+i.length)===i}});var ud=_r("String").startsWith,hd=String.prototype,Ad=function(e){var t=e.startsWith;return"string"==typeof e||e===hd||e instanceof String&&t===hd.startsWith?ud:t};bi({target:"String",proto:!0,forced:Kn((function(){return"trim"!=="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff".trim.name}))},{trim:function(){return Ko(this)}});var pd,fd,gd,_d=_r("String").trim,md=String.prototype,Ed=function(e){var t=e.trim;return"string"==typeof e||e===md||e instanceof String&&t===md.trim?_d:t},Id=e((function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){var t;return Rc(t=Ed(e).call(e).split("\n")).call(t,(function(e){return Ed(e).call(e)}))},t.splitSections=function(e){return e=e.split("\nm="),Rc(e).call(e,(function(e,t){var n;return Ed(n=0<t?"m="+e:e).call(n)+"\r\n"}))},t.getDescription=function(e){return(e=t.splitSections(e))&&e[0]},t.getMediaSections=function(e){return(e=t.splitSections(e)).shift(),e},t.matchPrefix=function(e,n){var i;return rs(i=t.splitLines(e)).call(i,(function(e){return 0===xc(e).call(e,n)}))},t.parseCandidate=function(e){var t;e={foundation:(t=0===xc(e).call(e,"a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:Jo(t[1],10),protocol:t[2].toLowerCase(),priority:Jo(t[3],10),ip:t[4],address:t[4],port:Jo(t[5],10),type:t[7]};for(var n=8;n<t.length;n+=2)switch(t[n]){case"raddr":e.relatedAddress=t[n+1];break;case"rport":e.relatedPort=Jo(t[n+1],10);break;case"tcptype":e.tcpType=t[n+1];break;case"ufrag":e.ufrag=t[n+1],e.usernameFragment=t[n+1];break;default:e[t[n]]=t[n+1]}return e},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){e=e.substr(9).split(" ");var t={payloadType:Jo(e.shift(),10)};return e=e[0].split("/"),t.name=e[0],t.clockRate=Jo(e[1],10),t.channels=3===e.length?Jo(e[2],10):1,t.numChannels=t.channels,t},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t;return e=e.substr(9).split(" "),{id:Jo(e[0],10),direction:0<xc(t=e[0]).call(t,"/")?e[0].split("/")[1]:"sendrecv",uri:e[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t={},n=e.substr(xc(e).call(e," ")+1).split(";"),i=0;i<n.length;i++){var r,a;e=Ed(r=n[i]).call(r).split("="),t[Ed(a=e[0]).call(a)]=e[1]}return t},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Uo(e.parameters).length){var i,r=[];No(i=Uo(e.parameters)).call(i,(function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){return{type:(e=e.substr(xc(e).call(e," ")+1).split(" ")).shift(),parameter:e.join(" ")}},t.writeRtcpFb=function(e){var t,n="",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&No(t=e.rtcpFeedback).call(t,(function(e){n+="a=rtcp-fb:"+i+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),n},t.parseSsrcMedia=function(e){var t=xc(e).call(e," "),n={ssrc:Jo(e.substr(7,t-7),10)},i=xc(e).call(e,":",t);return-1<i?(n.attribute=e.substr(t+1,i-t-1),n.value=e.substr(i+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){return{semantics:(e=e.substr(13).split(" ")).shift(),ssrcs:Rc(e).call(e,(function(e){return Jo(e,10)}))}},t.getMid=function(e){if(e=t.matchPrefix(e,"a=mid:")[0])return e.substr(6)},t.parseFingerprint=function(e){return{algorithm:(e=e.substr(14).split(" "))[0].toLowerCase(),value:e[1]}},t.getDtlsParameters=function(e,n){return e=t.matchPrefix(e+n,"a=fingerprint:"),{role:"auto",fingerprints:Rc(e).call(e,t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n,i="a=setup:"+t+"\r\n";return No(n=e.fingerprints).call(n,(function(e){i+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),i},t.getIceParameters=function(e,n){return e=t.splitLines(e),e=Ir(e).call(e,t.splitLines(n)),{usernameFragment:rs(e).call(e,(function(e){return 0===xc(e).call(e,"a=ice-ufrag:")}))[0].substr(12),password:rs(e).call(e,(function(e){return 0===xc(e).call(e,"a=ice-pwd:")}))[0].substr(10)}},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n,i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),a=3;a<r.length;a++){var o=r[a],s=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var c;s=t.parseRtpMap(s);var d=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=d.length?t.parseFmtp(d[0]):{},s.rtcpFeedback=Rc(c=t.matchPrefix(e,"a=rtcp-fb:"+o+" ")).call(c,t.parseRtcpFb),i.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(s.name.toUpperCase())}}}return No(n=t.matchPrefix(e,"a=extmap:")).call(n,(function(e){i.headerExtensions.push(t.parseExtmap(e))})),i},t.writeRtpDescription=function(e,n){var i,r,a,o="";o+="m="+e+" ",o+=0<n.codecs.length?"9":"0",o+=" UDP/TLS/RTP/SAVPF ",o+=Rc(i=n.codecs).call(i,(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",o+="c=IN IP4 0.0.0.0\r\n",o+="a=rtcp:9 IN IP4 0.0.0.0\r\n",No(r=n.codecs).call(r,(function(e){o+=t.writeRtpMap(e),o+=t.writeFmtp(e),o+=t.writeRtcpFb(e)}));var s,c=0;return No(a=n.codecs).call(a,(function(e){e.maxptime>c&&(c=e.maxptime)})),0<c&&(o+="a=maxptime:"+c+"\r\n"),o+="a=rtcp-mux\r\n",n.headerExtensions&&No(s=n.headerExtensions).call(s,(function(e){o+=t.writeExtmap(e)})),o},t.parseRtpEncodingParameters=function(e){var n,i,r,a,o,s,c,d=[],l=t.parseRtpParameters(e),u=-1!==xc(n=l.fecMechanisms).call(n,"RED"),h=-1!==xc(i=l.fecMechanisms).call(i,"ULPFEC"),A=0<(n=rs(r=Rc(a=t.matchPrefix(e,"a=ssrc:")).call(a,(function(e){return t.parseSsrcMedia(e)}))).call(r,(function(e){return"cname"===e.attribute}))).length&&n[0].ssrc;r=Rc(o=t.matchPrefix(e,"a=ssrc-group:FID")).call(o,(function(e){return e=e.substr(17).split(" "),Rc(e).call(e,(function(e){return Jo(e,10)}))})),0<r.length&&1<r[0].length&&r[0][0]===A&&(c=r[0][1]),No(s=l.codecs).call(s,(function(e){"RTX"===e.name.toUpperCase()&&e.parameters.apt&&(e={ssrc:A,codecPayloadType:Jo(e.parameters.apt,10)},A&&c&&(e.rtx={ssrc:c}),d.push(e),u&&((e=JSON.parse(Pi(e))).fec={ssrc:A,mechanism:h?"red+ulpfec":"red"},d.push(e)))})),0===d.length&&A&&d.push({ssrc:A});var p,f,g=t.matchPrefix(e,"b=");return g.length&&(g=0===xc(p=g[0]).call(p,"b=TIAS:")?Jo(g[0].substr(7),10):0===xc(f=g[0]).call(f,"b=AS:")?950*Jo(g[0].substr(5),10)-16e3:void 0,No(d).call(d,(function(e){e.maxBitrate=g}))),d},t.parseRtcpParameters=function(e){var n,i,r={},a=rs(n=Rc(i=t.matchPrefix(e,"a=ssrc:")).call(i,(function(e){return t.parseSsrcMedia(e)}))).call(n,(function(e){return"cname"===e.attribute}))[0];return a&&(r.cname=a.value,r.ssrc=a.ssrc),n=t.matchPrefix(e,"a=rtcp-rsize"),r.reducedSize=0<n.length,r.compound=0===n.length,e=t.matchPrefix(e,"a=rtcp-mux"),r.mux=0<e.length,r},t.parseMsid=function(e){var n,i,r,a=t.matchPrefix(e,"a=msid:");return 1===a.length?{stream:(r=a[0].substr(7).split(" "))[0],track:r[1]}:0<(e=rs(n=Rc(i=t.matchPrefix(e,"a=ssrc:")).call(i,(function(e){return t.parseSsrcMedia(e)}))).call(n,(function(e){return"msid"===e.attribute}))).length?{stream:(r=e[0].value.split(" "))[0],track:r[1]}:void 0},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,i){return n=void 0!==n?n:2,"v=0\r\no="+(i||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,i,r){return n=t.writeRtpDescription(e.kind,n),n+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),n+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":"active"),n+="a=mid:"+e.mid+"\r\n",e.direction?n+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?n+="a=sendrecv\r\n":e.rtpSender?n+="a=sendonly\r\n":e.rtpReceiver?n+="a=recvonly\r\n":n+="a=inactive\r\n",e.rtpSender&&(n=n+"a="+(i="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n")+"a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+i,e.sendEncodingParameters[0].rtx&&(n+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+i,n+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")),n+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(n+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),n},t.getDirection=function(e,n){e=t.splitLines(e);for(var i=0;i<e.length;i++)switch(e[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return e[i].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){return{kind:(e=t.splitLines(e)[0].substr(2).split(" "))[0],port:Jo(e[1],10),protocol:e[2],fmt:jc(e).call(e,3).join(" ")}},t.parseOLine=function(e){return{username:(e=t.matchPrefix(e,"o=")[0].substr(2).split(" "))[0],sessionId:e[1],sessionVersion:Jo(e[2],10),netType:e[3],addressType:e[4],address:e[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;e=t.splitLines(e);for(var n=0;n<e.length;n++)if(2>e[n].length||"="!==e[n].charAt(1))return!1;return!0},e.exports=t})),vd=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function i(t,n,i,r){var a=new Event("track");a.track=n,a.receiver=i,a.transceiver={receiver:i},a.streams=r,e.setTimeout((function(){t._dispatchEvent("track",a)}))}var r=function(n){var i=this,r=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){i[e]=r[e].bind(r)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw T("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var i=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var r="string"==typeof i;return r&&(i=[i]),i=i.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&14393<=t&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=r?i[0]:i,!!i.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var a=n.iceCandidatePoolSize;0<a;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=Id.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(r.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(r.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),r.prototype.onicecandidate=null,r.prototype.onaddstream=null,r.prototype.ontrack=null,r.prototype.onremovestream=null,r.prototype.onsignalingstatechange=null,r.prototype.oniceconnectionstatechange=null,r.prototype.onconnectionstatechange=null,r.prototype.onicegatheringstatechange=null,r.prototype.onnegotiationneeded=null,r.prototype.ondatachannel=null,r.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},r.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},r.prototype.getConfiguration=function(){return this._config},r.prototype.getLocalStreams=function(){return this.localStreams},r.prototype.getRemoteStreams=function(){return this.remoteStreams},r.prototype._createTransceiver=function(e,t){var n=0<this.transceivers.length;return e={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0},this.usingBundle&&n?(e.iceTransport=this.transceivers[0].iceTransport,e.dtlsTransport=this.transceivers[0].dtlsTransport):(n=this._createIceAndDtlsTransports(),e.iceTransport=n.iceTransport,e.dtlsTransport=n.dtlsTransport),t||this.transceivers.push(e),e},r.prototype.addTrack=function(t,n){if(this._isClosed)throw T("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var i;if(this.transceivers.find((function(e){return e.track===t})))throw T("InvalidAccessError","Track already exists.");for(var r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==t.kind||(i=this.transceivers[r]);return i||(i=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),i.track=t,i.stream=n,i.rtpSender=new e.RTCRtpSender(t,i.dtlsTransport),i.rtpSender},r.prototype.addStream=function(e){var n=this;if(15025<=t)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var i=e.clone();e.getTracks().forEach((function(e,t){var n=i.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),i.getTracks().forEach((function(e){n.addTrack(e,i)}))}},r.prototype.removeTrack=function(t){if(this._isClosed)throw T("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw T("InvalidAccessError","Sender was not created by this connection.");var i=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(i)&&-1<this.localStreams.indexOf(i)&&this.localStreams.splice(this.localStreams.indexOf(i),1),this._maybeFireNegotiationNeeded()},r.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},r.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},r.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},r.prototype._createIceGatherer=function(t,n){var i=this;if(n&&0<t)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var r=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(r,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;r.state=n?"completed":"gathering",null!==i.transceivers[t].bufferedCandidateEvents&&i.transceivers[t].bufferedCandidateEvents.push(e)},r.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),r},r.prototype._gather=function(t,n){var i=this,r=this.transceivers[n].iceGatherer;if(!r.onlocalcandidate){var a=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,r.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),r.onlocalcandidate=function(e){if(!(i.usingBundle&&0<n)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:n};var o=e.candidate;(e=!o||0===Object.keys(o).length)?"new"!==r.state&&"gathering"!==r.state||(r.state="completed"):("new"===r.state&&(r.state="gathering"),o.component=1,o.ufrag=r.getLocalParameters().usernameFragment,o=Id.writeCandidate(o),a.candidate=Object.assign(a.candidate,Id.parseCandidate(o)),a.candidate.candidate=o,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}),(o=Id.getMediaSections(i._localDescription.sdp))[a.candidate.sdpMLineIndex]+=e?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",i._localDescription.sdp=Id.getDescription(i._localDescription.sdp)+o.join(""),o=i.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state})),"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),e||i._dispatchEvent("icecandidate",a),o&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout((function(){a.forEach((function(e){r.onlocalcandidate(e)}))}),0)}},r.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var i=new e.RTCDtlsTransport(n);return i.ondtlsstatechange=function(){t._updateConnectionState()},i.onerror=function(){Object.defineProperty(i,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:i}},r.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer),(t=this.transceivers[e].iceTransport)&&(delete t.onicestatechange,delete this.transceivers[e].iceTransport),(t=this.transceivers[e].dtlsTransport)&&(delete t.ondtlsstatechange,delete t.onerror,delete this.transceivers[e].dtlsTransport)},r.prototype._transceive=function(e,n,i){var r=y(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(r.encodings=e.sendEncodingParameters,r.rtcp={cname:Id.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(r.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(r)),i&&e.rtpReceiver&&0<r.codecs.length&&("video"===e.kind&&e.recvEncodingParameters&&15019>t&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?r.encodings=e.recvEncodingParameters:r.encodings=[{}],r.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(r.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(r.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(r))},r.prototype.setLocalDescription=function(e){var t=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(T("TypeError",'Unsupported type "'+e.type+'"'));if(!S("setLocalDescription",e.type,t.signalingState)||t._isClosed)return Promise.reject(T("InvalidStateError","Can not set local "+e.type+" in state "+t.signalingState));if("offer"===e.type){var n=Id.splitSections(e.sdp),i=n.shift();n.forEach((function(e,n){e=Id.parseRtpParameters(e),t.transceivers[n].localCapabilities=e})),t.transceivers.forEach((function(e,n){t._gather(e.mid,n)}))}else if("answer"===e.type){n=Id.splitSections(t._remoteDescription.sdp),i=n.shift();var r=0<Id.matchPrefix(i,"a=ice-lite").length;n.forEach((function(e,n){var a=t.transceivers[n],o=a.iceGatherer,s=a.iceTransport,c=a.dtlsTransport,d=a.localCapabilities,l=a.remoteCapabilities;if(!(Id.isRejected(e)&&0===Id.matchPrefix(e,"a=bundle-only").length||a.rejected)){var u=Id.getIceParameters(e,i);e=Id.getDtlsParameters(e,i),r&&(e.role="server"),t.usingBundle&&0!==n||(t._gather(a.mid,n),"new"===s.state&&s.start(o,u,r?"controlling":"controlled"),"new"===c.state&&c.start(e)),n=y(d,l),t._transceive(a,0<n.codecs.length,!1)}}))}return t._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?t._updateSignalingState("have-local-offer"):t._updateSignalingState("stable"),Promise.resolve()},r.prototype.setRemoteDescription=function(r){var a=this;if(-1===["offer","answer"].indexOf(r.type))return Promise.reject(T("TypeError",'Unsupported type "'+r.type+'"'));if(!S("setRemoteDescription",r.type,a.signalingState)||a._isClosed)return Promise.reject(T("InvalidStateError","Can not set remote "+r.type+" in state "+a.signalingState));var o={};a.remoteStreams.forEach((function(e){o[e.id]=e}));var s=[],c=Id.splitSections(r.sdp),d=c.shift(),l=0<Id.matchPrefix(d,"a=ice-lite").length,u=0<Id.matchPrefix(d,"a=group:BUNDLE ").length;a.usingBundle=u;var h=Id.matchPrefix(d,"a=ice-options:")[0];return a.canTrickleIceCandidates=!!h&&0<=h.substr(14).split(" ").indexOf("trickle"),c.forEach((function(i,c){var h=Id.splitLines(i),A=Id.getKind(i),p=Id.isRejected(i)&&0===Id.matchPrefix(i,"a=bundle-only").length,f=h[0].substr(2).split(" ")[2];h=Id.getDirection(i,d);var g=Id.parseMsid(i),_=Id.getMid(i)||Id.generateIdentifier();if(p||"application"===A&&("DTLS/SCTP"===f||"UDP/DTLS/SCTP"===f))a.transceivers[c]={mid:_,kind:A,protocol:f,rejected:!0};else{var m,E;!p&&a.transceivers[c]&&a.transceivers[c].rejected&&(a.transceivers[c]=a._createTransceiver(A,!0));var I,v,C=Id.parseRtpParameters(i);p||(I=Id.getIceParameters(i,d),(v=Id.getDtlsParameters(i,d)).role="client"),f=Id.parseRtpEncodingParameters(i);var S=Id.parseRtcpParameters(i),T=0<Id.matchPrefix(i,"a=end-of-candidates",d).length;if(i=Id.matchPrefix(i,"a=candidate:").map((function(e){return Id.parseCandidate(e)})).filter((function(e){return 1===e.component})),("offer"===r.type||"answer"===r.type)&&!p&&u&&0<c&&a.transceivers[c]&&(a._disposeIceAndDtlsTransports(c),a.transceivers[c].iceGatherer=a.transceivers[0].iceGatherer,a.transceivers[c].iceTransport=a.transceivers[0].iceTransport,a.transceivers[c].dtlsTransport=a.transceivers[0].dtlsTransport,a.transceivers[c].rtpSender&&a.transceivers[c].rtpSender.setTransport(a.transceivers[0].dtlsTransport),a.transceivers[c].rtpReceiver&&a.transceivers[c].rtpReceiver.setTransport(a.transceivers[0].dtlsTransport)),"offer"!==r.type||p){if("answer"===r.type&&!p){A=(m=a.transceivers[c]).iceGatherer;var w=m.iceTransport,b=m.dtlsTransport,N=m.rtpReceiver;p=m.sendEncodingParameters,_=m.localCapabilities,a.transceivers[c].recvEncodingParameters=f,a.transceivers[c].remoteCapabilities=C,a.transceivers[c].rtcpParameters=S,i.length&&"new"===w.state&&(!l&&!T||u&&0!==c?i.forEach((function(e){R(m.iceTransport,e)})):w.setRemoteCandidates(i)),u&&0!==c||("new"===w.state&&w.start(A,I,"controlling"),"new"===b.state&&b.start(v)),!y(m.localCapabilities,m.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&m.sendEncodingParameters[0].rtx&&delete m.sendEncodingParameters[0].rtx,a._transceive(m,"sendrecv"===h||"recvonly"===h,"sendrecv"===h||"sendonly"===h),!N||"sendrecv"!==h&&"sendonly"!==h?delete m.rtpReceiver:(E=N.track,g?(o[g.stream]||(o[g.stream]=new e.MediaStream),n(E,o[g.stream]),s.push([E,N,o[g.stream]])):(o.default||(o.default=new e.MediaStream),n(E,o.default),s.push([E,N,o.default])))}}else(m=a.transceivers[c]||a._createTransceiver(A)).mid=_,m.iceGatherer||(m.iceGatherer=a._createIceGatherer(c,u)),i.length&&"new"===m.iceTransport.state&&(!T||u&&0!==c?i.forEach((function(e){R(m.iceTransport,e)})):m.iceTransport.setRemoteCandidates(i)),_=e.RTCRtpReceiver.getCapabilities(A),15019>t&&(_.codecs=_.codecs.filter((function(e){return"rtx"!==e.name}))),p=m.sendEncodingParameters||[{ssrc:1001*(2*c+2)}],I=!1,"sendrecv"===h||"sendonly"===h?(I=!m.rtpReceiver,N=m.rtpReceiver||new e.RTCRtpReceiver(m.dtlsTransport,A),I&&(E=N.track,g&&"-"===g.stream||(g?(o[g.stream]||(o[g.stream]=new e.MediaStream,Object.defineProperty(o[g.stream],"id",{get:function(){return g.stream}})),Object.defineProperty(E,"id",{get:function(){return g.track}}),w=o[g.stream]):(o.default||(o.default=new e.MediaStream),w=o.default)),w&&(n(E,w),m.associatedRemoteMediaStreams.push(w)),s.push([E,N,w]))):m.rtpReceiver&&m.rtpReceiver.track&&(m.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===m.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),m.associatedRemoteMediaStreams=[]),m.localCapabilities=_,m.remoteCapabilities=C,m.rtpReceiver=N,m.rtcpParameters=S,m.sendEncodingParameters=p,m.recvEncodingParameters=f,a._transceive(a.transceivers[c],!1,I)}})),void 0===a._dtlsRole&&(a._dtlsRole="offer"===r.type?"active":"passive"),a._remoteDescription={type:r.type,sdp:r.sdp},"offer"===r.type?a._updateSignalingState("have-remote-offer"):a._updateSignalingState("stable"),Object.keys(o).forEach((function(t){var n=o[t];if(n.getTracks().length){if(-1===a.remoteStreams.indexOf(n)){a.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){a._dispatchEvent("addstream",r)}))}s.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&i(a,t,r,[n])}))}})),s.forEach((function(e){e[2]||i(a,e[0],e[1],[])})),e.setTimeout((function(){a&&a.transceivers&&a.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&0<e.iceTransport.getRemoteCandidates().length&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},r.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},r.prototype._updateSignalingState=function(e){this.signalingState=e,e=new Event("signalingstatechange"),this._dispatchEvent("signalingstatechange",e)},r.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},r.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",0<t.failed?e="failed":0<t.checking?e="checking":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected?e="connected":0<t.completed&&(e="completed"),e!==this.iceConnectionState&&(this.iceConnectionState=e,e=new Event("iceconnectionstatechange"),this._dispatchEvent("iceconnectionstatechange",e))},r.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",0<t.failed?e="failed":0<t.connecting?e="connecting":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected&&(e="connected"),e!==this.connectionState&&(this.connectionState=e,e=new Event("connectionstatechange"),this._dispatchEvent("connectionstatechange",e))},r.prototype.createOffer=function(n){var i=this;if(i._isClosed)return Promise.reject(T("InvalidStateError","Can not call createOffer after close"));var r=i.transceivers.filter((function(e){return"audio"===e.kind})).length,a=i.transceivers.filter((function(e){return"video"===e.kind})).length;if(n){if(n.mandatory||n.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==n.offerToReceiveAudio&&(r=!0===n.offerToReceiveAudio?1:!1===n.offerToReceiveAudio?0:n.offerToReceiveAudio),void 0!==n.offerToReceiveVideo&&(a=!0===n.offerToReceiveVideo?1:!1===n.offerToReceiveVideo?0:n.offerToReceiveVideo)}for(i.transceivers.forEach((function(e){"audio"===e.kind?0>--r&&(e.wantReceive=!1):"video"===e.kind&&0>--a&&(e.wantReceive=!1)}));0<r||0<a;)0<r&&(i._createTransceiver("audio"),r--),0<a&&(i._createTransceiver("video"),a--);var o=Id.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);return i.transceivers.forEach((function(n,r){var a=n.track,o=n.kind,s=n.mid||Id.generateIdentifier();n.mid=s,n.iceGatherer||(n.iceGatherer=i._createIceGatherer(r,i.usingBundle)),s=e.RTCRtpSender.getCapabilities(o),15019>t&&(s.codecs=s.codecs.filter((function(e){return"rtx"!==e.name}))),s.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),n.remoteCapabilities&&n.remoteCapabilities.codecs&&n.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),s.headerExtensions.forEach((function(e){(n.remoteCapabilities&&n.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))})),r=n.sendEncodingParameters||[{ssrc:1001*(2*r+1)}],a&&15019<=t&&"video"===o&&!r[0].rtx&&(r[0].rtx={ssrc:r[0].ssrc+1}),n.wantReceive&&(n.rtpReceiver=new e.RTCRtpReceiver(n.dtlsTransport,o)),n.localCapabilities=s,n.sendEncodingParameters=r})),"max-compat"!==i._config.bundlePolicy&&(o+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),o+="a=ice-options:trickle\r\n",i.transceivers.forEach((function(e,t){o+=C(e,e.localCapabilities,"offer",e.stream,i._dtlsRole),o+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===i.iceGatheringState||0!==t&&i.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,o+="a="+Id.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(o+="a=end-of-candidates\r\n"))})),n=new e.RTCSessionDescription({type:"offer",sdp:o}),Promise.resolve(n)},r.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(T("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(T("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var i=Id.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(i+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),i+="a=ice-options:trickle\r\n";var r=Id.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,a){if(!(a+1>r)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?i+="m=application 0 DTLS/SCTP 5000\r\n":i+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?i+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(i+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(i+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var o;e.stream&&("audio"===e.kind?o=e.stream.getAudioTracks()[0]:"video"===e.kind&&(o=e.stream.getVideoTracks()[0]),o&&15019<=t&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1})),!(a=y(e.localCapabilities,e.remoteCapabilities)).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,i+=C(e,a,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(i+="a=rtcp-rsize\r\n")}}));var a=new e.RTCSessionDescription({type:"answer",sdp:i});return Promise.resolve(a)},r.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(i,r){if(!n._remoteDescription)return r(T("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var o=0;o<n.transceivers.length;o++)if(n.transceivers[o].mid===e.sdpMid){a=o;break}var s=n.transceivers[a];if(!s)return r(T("OperationError","Can not add ICE candidate"));if(s.rejected)return i();if("tcp"===(o=0<Object.keys(e.candidate).length?Id.parseCandidate(e.candidate):{}).protocol&&(0===o.port||9===o.port)||o.component&&1!==o.component)return i();if((0===a||0<a&&s.iceTransport!==n.transceivers[0].iceTransport)&&!R(s.iceTransport,o))return r(T("OperationError","Can not add ICE candidate"));0===(r=e.candidate.trim()).indexOf("a=")&&(r=r.substr(2)),(t=Id.getMediaSections(n._remoteDescription.sdp))[a]+="a="+(o.type?r:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=Id.getDescription(n._remoteDescription.sdp)+t.join("")}else for(a=0;a<n.transceivers.length&&(n.transceivers[a].rejected||(n.transceivers[a].iceTransport.addRemoteCandidate({}),(t=Id.getMediaSections(n._remoteDescription.sdp))[a]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=Id.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));a++);i()}))},r.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw T("InvalidAccessError","Invalid selector.");return n.getStats()}var i=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&i.push(e[t].getStats())}))})),Promise.all(i).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){if((t=e[t])&&t.prototype&&t.prototype.getStats){var n=t.prototype.getStats;t.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var i;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(i=e[n]).type]||i.type,t.set(n,e[n])})),t}))}}}));var a=["createOffer","createAnswer"];return a.forEach((function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(a=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),r},Cd=Object.freeze({__proto__:null,shimPeerConnection:N,shimReplaceTrack:k,shimGetUserMedia:w,shimGetDisplayMedia:b}),yd=Object.freeze({__proto__:null,shimOnTrack:D,shimPeerConnection:B,shimSenderGetStats:L,shimReceiverGetStats:U,shimRemoveStream:x,shimRTCDataChannel:M,shimGetUserMedia:O,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){return n&&n.video?(!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)):((n=new DOMException("getDisplayMedia without video constraints is undefined")).name="NotFoundError",n.code=8,Cc.reject(n))})}}),Sd=Object.freeze({__proto__:null,shimLocalStreamsAPI:Q,shimRemoteStreamsAPI:P,shimCallbacksAPI:F,shimGetUserMedia:G,shimConstraints:j,shimRTCIceServerUrls:V,shimTrackEventTransceiver:Y,shimCreateOfferLegacy:H}),Rd=Object.freeze({__proto__:null,shimRTCIceCandidate:K,shimMaxMessageSize:W,shimSendThrowTypeError:z,shimConnectionState:q,removeAllowExtmapMixed:J});!function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){let n=d(e),r={browserDetails:n,commonShim:Rd,extractVersion:i,disableLog:a,disableWarnings:o};switch(n.browser){case"chrome":if(!sd||!I||!t.shimChrome)return s("Chrome shim is not included in this adapter release."),r;s("adapter.js shimming chrome."),r.browserShim=sd,h(e),A(e),I(e),p(e),E(e),f(e),g(e),_(e),v(e),K(e),q(e),W(e),z(e),J(e);break;case"firefox":if(!yd||!B||!t.shimFirefox)return s("Firefox shim is not included in this adapter release."),r;s("adapter.js shimming firefox."),r.browserShim=yd,O(e),B(e),D(e),x(e),L(e),U(e),M(e),K(e),q(e),W(e),z(e);break;case"edge":if(!Cd||!N||!t.shimEdge)return s("MS edge shim is not included in this adapter release."),r;s("adapter.js shimming edge."),r.browserShim=Cd,w(e),b(e),N(e),k(e),W(e),z(e);break;case"safari":if(!Sd||!t.shimSafari)return s("Safari shim is not included in this adapter release."),r;s("adapter.js shimming safari."),r.browserShim=Sd,V(e),H(e),F(e),Q(e),P(e),Y(e),G(e),K(e),W(e),z(e),J(e);break;default:s("Unsupported browser!")}}({window:window}),(gd=pd||(pd={})).WIN_10="Windows 10",gd.WIN_81="Windows 8.1",gd.WIN_8="Windows 8",gd.WIN_7="Windows 7",gd.WIN_VISTA="Windows Vista",gd.WIN_SERVER_2003="Windows Server 2003",gd.WIN_XP="Windows XP",gd.WIN_2000="Windows 2000",gd.ANDROID="Android",gd.OPEN_BSD="Open BSD",gd.SUN_OS="Sun OS",gd.LINUX="Linux",gd.IOS="iOS",gd.MAC_OS="Mac OS",gd.QNX="QNX",gd.UNIX="UNIX",gd.BEOS="BeOS",gd.OS_2="OS/2",gd.SEARCH_BOT="Search Bot",function(e){e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger"}(fd||(fd={}));let Td=new(e((function(e,t){!function(n,i){var r={extend:function(e,t){var n,i={};for(n in e)t[n]&&0==t[n].length%2?i[n]=t[n].concat(e[n]):i[n]=e[n];return i},has:function(e,t){return"string"===typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"===typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:i},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),void 0===t?e:e.substring(0,255)}},a=function(e,t){for(var n,r,a,o,s,c,d=0;d<t.length&&!s;){var l=t[d],u=t[d+1];for(n=r=0;n<l.length&&!s;)if(s=l[n++].exec(e))for(a=0;a<u.length;a++)c=s[++r],"object"===typeof(o=u[a])&&0<o.length?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,c):this[o[0]]=o[1]:3==o.length?"function"!==typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=c?c.replace(o[1],o[2]):i:this[o[0]]=c?o[1].call(this,c,o[2]):i:4==o.length&&(this[o[0]]=c?o[3].call(this,c.replace(o[1],o[2])):i):this[o]=c||i;d+=2}},o=function(e,t){for(var n in t)if("object"===typeof t[n]&&0<t[n].length){for(var a=0;a<t[n].length;a++)if(r.has(t[n][a],e))return"?"===n?i:n}else if(r.has(t[n],e))return"?"===n?i:n;return e},s={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},c={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],["version",["name","Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],["version",["name","Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],["name","version"],[/opios[\/\s]+([\w\.]+)/i],["version",["name","Opera Mini"]],[/\sopr\/([\w\.]+)/i],["version",["name","Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],["name","version"],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],["version",["name","UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],["version",["name","WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],["version",["name","WeChat"]],[/konqueror\/([\w\.]+)/i],["version",["name","Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],["version",["name","IE"]],[/yabrowser\/([\w\.]+)/i],["version",["name","Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[["name",/(.+)/,"$1 Secure Browser"],"version"],[/focus\/([\w\.]+)/i],["version",["name","Firefox Focus"]],[/opt\/([\w\.]+)/i],["version",["name","Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],["version",["name","Coc Coc"]],[/dolfin\/([\w\.]+)/i],["version",["name","Dolphin"]],[/coast\/([\w\.]+)/i],["version",["name","Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/fxios\/([\w\.-]+)/i],["version",["name","Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[["name","360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[["name",/(.+)/,"$1 Browser"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],["name","version"],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],["name"],[/;fbav\/([\w\.]+);/i],["version",["name","Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[["name","Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],["name","version"],[/\bgsa\/([\w\.]+)\s.*safari\//i],["version",["name","GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],["version",["name","Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[["name","Chrome WebView"],"version"],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],["version",["name","Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],["name","version"],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],["version",["name","Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],["version","name"],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],["name",["version",o,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape)\/([\w\.-]+)/i],[["name","Netscape"],"version"],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],["version",["name","Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],["name","version"]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",r.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[["architecture","arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[["architecture","armhf"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",r.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[["architecture",r.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],["model",["vendor","Samsung"],["type","tablet"]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],["model",["vendor","Samsung"],["type","mobile"]],[/\((ip(?:hone|od)[\s\w]*);/i],["model",["vendor","Apple"],["type","mobile"]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],["model",["vendor","Apple"],["type","tablet"]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],["model",["vendor","Huawei"],["type","tablet"]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],["model",["vendor","Huawei"],["type","mobile"]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","mobile"]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","tablet"]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],["model",["vendor","OPPO"],["type","mobile"]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],["model",["vendor","Vivo"],["type","mobile"]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],["model",["vendor","Realme"],["type","mobile"]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],["model",["vendor","Motorola"],["type","mobile"]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],["model",["vendor","Motorola"],["type","tablet"]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],["model",["vendor","LG"],["type","tablet"]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],["model",["vendor","LG"],["type","mobile"]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],["model",["vendor","Lenovo"],["type","tablet"]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[["model",/_/g," "],["vendor","Nokia"],["type","mobile"]],[/droid.+;\s(pixel\sc)[\s)]/i],["model",["vendor","Google"],["type","tablet"]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],["model",["vendor","Google"],["type","mobile"]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],["model",["vendor","Sony"],["type","mobile"]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[["model","Xperia Tablet"],["vendor","Sony"],["type","tablet"]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],["model",["vendor","OnePlus"],["type","mobile"]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],["model",["vendor","Amazon"],["type","tablet"]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[["model","Fire Phone"],["vendor","Amazon"],["type","mobile"]],[/\((playbook);[\w\s\),;-]+(rim)/i],["model","vendor",["type","tablet"]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],["model",["vendor","BlackBerry"],["type","mobile"]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],["model",["vendor","ASUS"],["type","tablet"]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],["model",["vendor","ASUS"],["type","mobile"]],[/(nexus\s9)/i],["model",["vendor","HTC"],["type","tablet"]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],["vendor",["model",/_/g," "],["type","mobile"]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],["model",["vendor","Acer"],["type","tablet"]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],["model",["vendor","Meizu"],["type","mobile"]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],["vendor","model",["type","mobile"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],["vendor","model",["type","tablet"]],[/\s(surface\sduo)\s/i],["model",["vendor","Microsoft"],["type","tablet"]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],["model",["vendor","Fairphone"],["type","mobile"]],[/\s(u304aa)\sbuild/i],["model",["vendor","AT&T"],["type","mobile"]],[/sie-(\w*)/i],["model",["vendor","Siemens"],["type","mobile"]],[/[;\/]\s?(rct\w+)\sbuild/i],["model",["vendor","RCA"],["type","tablet"]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],["model",["vendor","Dell"],["type","tablet"]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],["model",["vendor","Verizon"],["type","tablet"]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],["model",["vendor","Barnes & Noble"],["type","tablet"]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],["model",["vendor","NuVision"],["type","tablet"]],[/;\s(k88)\sbuild/i],["model",["vendor","ZTE"],["type","tablet"]],[/;\s(nx\d{3}j)\sbuild/i],["model",["vendor","ZTE"],["type","mobile"]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],["model",["vendor","Swiss"],["type","mobile"]],[/[;\/]\s?(zur\d{3})\sbuild/i],["model",["vendor","Swiss"],["type","tablet"]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],["model",["vendor","Zeki"],["type","tablet"]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[["vendor","Dragon Touch"],"model",["type","tablet"]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],["model",["vendor","Insignia"],["type","tablet"]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],["model",["vendor","NextBook"],["type","tablet"]],[/[;\/]\s?(xtreme_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[["vendor","Voice"],"model",["type","mobile"]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[["vendor","LvTel"],"model",["type","mobile"]],[/;\s(ph-1)\s/i],["model",["vendor","Essential"],["type","mobile"]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],["model",["vendor","Envizen"],["type","tablet"]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],["model",["vendor","MachSpeed"],["type","tablet"]],[/[;\/]\s?tu_(1491)\sbuild/i],["model",["vendor","Rotor"],["type","tablet"]],[/(shield[\w\s]+)\sbuild/i],["model",["vendor","Nvidia"],["type","tablet"]],[/(sprint)\s(\w+)/i],["vendor","model",["type","mobile"]],[/(kin\.[onetw]{3})/i],[["model",/\./g," "],["vendor","Microsoft"],["type","mobile"]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],["model",["vendor","Zebra"],["type","tablet"]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],["model",["vendor","Zebra"],["type","mobile"]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],["vendor","model",["type","console"]],[/droid.+;\s(shield)\sbuild/i],["model",["vendor","Nvidia"],["type","console"]],[/(playstation\s[345portablevi]+)/i],["model",["vendor","Sony"],["type","console"]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],["model",["vendor","Microsoft"],["type","console"]],[/smart-tv.+(samsung)/i],["vendor",["type","smarttv"]],[/hbbtv.+maple;(\d+)/i],[["model",/^/,"SmartTV"],["vendor","Samsung"],["type","smarttv"]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[["vendor","LG"],["type","smarttv"]],[/(apple)\s?tv/i],["vendor",["model","Apple TV"],["type","smarttv"]],[/crkey/i],[["model","Chromecast"],["vendor","Google"],["type","smarttv"]],[/droid.+aft([\w])(\sbuild\/|\))/i],["model",["vendor","Amazon"],["type","smarttv"]],[/\(dtv[\);].+(aquos)/i],["model",["vendor","Sharp"],["type","smarttv"]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[["vendor",r.trim],["model",r.trim],["type","smarttv"]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[["type","smarttv"]],[/((pebble))app\/[\d\.]+\s/i],["vendor","model",["type","wearable"]],[/droid.+;\s(glass)\s\d/i],["model",["vendor","Google"],["type","wearable"]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],["model",["vendor","Zebra"],["type","wearable"]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],["vendor",["type","embedded"]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],["model",["type","mobile"]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],["model",["type","tablet"]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[["type",r.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],["model",["vendor","Generic"]],[/(phone)/i],[["type","mobile"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],["version",["name","EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],["version",["name","Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],["name","version"],[/rv:([\w\.]{1,9})\b.+(gecko)/i],["version","name"]],os:[[/microsoft\s(windows)\s(vista|xp)/i],["name","version"],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],["name",["version",o,s]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",o,s]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[["version",/_/g,"."],["name","iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[["name","Mac OS"],["version",/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],["name","version"],[/\(bb(10);/i],["version",["name","BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],["version",["name","Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name","Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],["version",["name","webOS"]],[/crkey\/([\d\.]+)/i],["version",["name","Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],["name","version"],[/(sunos)\s?([\w\.\d]*)/i],[["name","Solaris"],"version"],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],["name","version"]]},d=function(e,t){if("object"==typeof e&&(t=e,e=i),!(this instanceof d))return new d(e,t).getResult();var o=e||(void 0!==n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),s=t?r.extend(c,t):c;return this.getBrowser=function(){var e={name:i,version:i};return a.call(e,o,s.browser),e.major=r.major(e.version),e},this.getCPU=function(){var e={architecture:i};return a.call(e,o,s.cpu),e},this.getDevice=function(){var e={vendor:i,model:i,type:i};return a.call(e,o,s.device),e},this.getEngine=function(){var e={name:i,version:i};return a.call(e,o,s.engine),e},this.getOS=function(){var e={name:i,version:i};return a.call(e,o,s.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return o},this.setUA=function(e){return o="string"===typeof e&&255<e.length?r.trim(e,255):e,this},this.setUA(o),this};d.VERSION="0.7.28",d.BROWSER={NAME:"name",MAJOR:"major",VERSION:"version"},d.CPU={ARCHITECTURE:"architecture"},d.DEVICE={MODEL:"model",VENDOR:"vendor",TYPE:"type",CONSOLE:"console",MOBILE:"mobile",SMARTTV:"smarttv",TABLET:"tablet",WEARABLE:"wearable",EMBEDDED:"embedded"},d.ENGINE={NAME:"name",VERSION:"version"},d.OS={NAME:"name",VERSION:"version"},e.exports&&(t=e.exports=d),t.UAParser=d;var l=void 0!==n&&(n.jQuery||n.Zepto);if(l&&!l.ua){var u=new d;l.ua=u.getResult(),l.ua.get=function(){return u.getUA()},l.ua.set=function(e){for(var t in u.setUA(e),e=u.getResult())l.ua[t]=e[t]}}}("object"==typeof window?window:Vn)}))),wd=Td.getResult(),bd=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;var t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){var n,i=t[2];return Ir(n="".concat(t[1],".")).call(n,i)}return(t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/))&&t[1]&&t[2]?(n=t[2],Ir(i="".concat(t[1],".")).call(i,100*(Number(n)+1))):"4.0.0.999"}("4.7.2");try{var Nd=!0===JSON.parse("true")}catch(gd){Nd=!0}let kd=Nd,Od={username:"test",password:"111111",turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1},Dd={"90p":fe(160,90),"90p_1":fe(160,90),"120p":fe(160,120,15,30,65),"120p_1":fe(160,120,15,30,65),"120p_3":fe(120,120,15,30,50),"120p_4":fe(212,120),"180p":fe(320,180,15,30,140),"180p_1":fe(320,180,15,30,140),"180p_3":fe(180,180,15,30,100),"180p_4":fe(240,180,15,30,120),"240p":fe(320,240,15,40,200),"240p_1":fe(320,240,15,40,200),"240p_3":fe(240,240,15,40,140),"240p_4":fe(424,240,15,40,220),"360p":fe(640,360,15,80,400),"360p_1":fe(640,360,15,80,400),"360p_3":fe(360,360,15,80,260),"360p_4":fe(640,360,30,80,600),"360p_6":fe(360,360,30,80,400),"360p_7":fe(480,360,15,80,320),"360p_8":fe(480,360,30,80,490),"360p_9":fe(640,360,15,80,800),"360p_10":fe(640,360,24,80,800),"360p_11":fe(640,360,24,80,1e3),"480p":fe(640,480,15,100,500),"480p_1":fe(640,480,15,100,500),"480p_2":fe(640,480,30,100,1e3),"480p_3":fe(480,480,15,100,400),"480p_4":fe(640,480,30,100,750),"480p_6":fe(480,480,30,100,600),"480p_8":fe(848,480,15,100,610),"480p_9":fe(848,480,30,100,930),"480p_10":fe(640,480,10,100,400),"720p":fe(1280,720,15,120,1130),"720p_1":fe(1280,720,15,120,1130),"720p_2":fe(1280,720,30,120,2e3),"720p_3":fe(1280,720,30,120,1710),"720p_5":fe(960,720,15,120,910),"720p_6":fe(960,720,30,120,1380),"1080p":fe(1920,1080,15,120,2080),"1080p_1":fe(1920,1080,15,120,2080),"1080p_2":fe(1920,1080,30,120,3e3),"1080p_3":fe(1920,1080,30,120,3150),"1080p_5":fe(1920,1080,60,120,4780),"1440p":fe(2560,1440,30,120,4850),"1440p_1":fe(2560,1440,30,120,4850),"1440p_2":fe(2560,1440,60,120,7350),"4k":fe(3840,2160,30,120,8910),"4k_1":fe(3840,2160,30,120,8910),"4k_3":fe(3840,2160,60,120,13500)},Bd={"480p":ge(640,480,5),"480p_1":ge(640,480,5),"480p_2":ge(640,480,30),"480p_3":ge(640,480,15),"720p":ge(1280,720,5),"720p_1":ge(1280,720,5),"720p_2":ge(1280,720,30),"720p_3":ge(1280,720,15),"1080p":ge(1920,1080,5),"1080p_1":ge(1920,1080,5),"1080p_2":ge(1920,1080,30),"1080p_3":ge(1920,1080,15)},Ld={"1SL1TL":_e(1,1),"3SL3TL":_e(3,3),"2SL3TL":_e(2,3)},Ud={speech_low_quality:pe(16e3,!1),speech_standard:pe(32e3,!1,18),music_standard:pe(48e3,!1),standard_stereo:pe(48e3,!0,56),high_quality:pe(48e3,!1,128),high_quality_stereo:pe(48e3,!0,192)},xd={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e4,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!0,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:5e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,ENUMERATE_DEVICES_INTERVAL:!0};kd||(xd.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],xd.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],xd.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],xd.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],xd.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],xd.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],xd.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",xd.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",xd.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",xd.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",xd.AREAS=["NORTH_AMERICA","OVERSEA"]);let Md=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],Qd=[],Pd=[];var Fd=[],Gd=Fd.sort,jd=Kn((function(){Fd.sort(void 0)})),Vd=Kn((function(){Fd.sort(null)})),Yd=So("sort");bi({target:"Array",proto:!0,forced:jd||!Vd||Yd},{sort:function(e){return void 0===e?Gd.call(Gi(this)):Gd.call(Gi(this),Ii(e))}});var Hd=_r("Array").sort,Kd=Array.prototype,Wd=function(e){var t=e.sort;return e===Kd||e instanceof Array&&t===Kd.sort?Hd:t};bi({target:"Array",stat:!0},{isArray:Fi});var zd,qd=Ei.Array.isArray;!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN"}(zd||(zd={}));var Jd=[].slice,Xd=/MSIE .\./.test(sr),Zd=function(e){return function(t,n){var i=2<arguments.length,r=i?Jd.call(arguments,2):void 0;return e(i?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,n)}};bi({global:!0,bind:!0,forced:Xd},{setTimeout:Zd(Hn.setTimeout),setInterval:Zd(Hn.setInterval)});var $d=Ei.setTimeout;bi({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var el=Ei.Date.now,tl=function(e,t){return function(){for(var n=Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}},nl=Object.prototype.toString,il={isArray:me,isArrayBuffer:function(e){return"[object ArrayBuffer]"===nl.call(e)},isBuffer:function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Ee,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===nl.call(e)},isFile:function(e){return"[object File]"===nl.call(e)},isBlob:function(e){return"[object Blob]"===nl.call(e)},isFunction:Ie,isStream:function(e){return Ee(e)&&Ie(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:ve,merge:function e(){function t(t,i){"object"==typeof n[i]&&"object"==typeof t?n[i]=e(n[i],t):n[i]=t}for(var n={},i=0,r=arguments.length;i<r;i++)ve(arguments[i],t);return n},deepMerge:function e(){function t(t,i){"object"==typeof n[i]&&"object"==typeof t?n[i]=e(n[i],t):n[i]="object"==typeof t?e({},t):t}for(var n={},i=0,r=arguments.length;i<r;i++)ve(arguments[i],t);return n},extend:function(e,t,n){return ve(t,(function(t,i){e[i]=n&&"function"==typeof t?tl(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}},rl=function(e,t,n){if(!t)return e;if(n)t=n(t);else if(il.isURLSearchParams(t))t=t.toString();else{var i=[];il.forEach(t,(function(e,t){null!=e&&(il.isArray(e)?t+="[]":e=[e],il.forEach(e,(function(e){il.isDate(e)?e=e.toISOString():il.isObject(e)&&(e=JSON.stringify(e)),i.push(Ce(t)+"="+Ce(e))})))})),t=i.join("&")}return t&&(-1!==(n=e.indexOf("#"))&&(e=e.slice(0,n)),e+=(-1===e.indexOf("?")?"?":"&")+t),e};ye.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},ye.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},ye.prototype.forEach=function(e){il.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var al,ol=ye,sl=function(e,t,n){return il.forEach(n,(function(n){e=n(e,t)})),e},cl=function(e){return!(!e||!e.__CANCEL__)},dl=function(e,t){il.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))},ll=function(e,t,n,i,r){return function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(Error(e),t,n,i,r)},ul="age authorization content-length content-type etag expires from host if-modified-since if-unmodified-since last-modified location max-forwards proxy-authorization referer retry-after user-agent".split(" "),hl=il.isStandardBrowserEnv()?function(){function e(e){return n&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){return(n=il.isString(n)?e(n):n).protocol===t.protocol&&n.host===t.host}}():function(){return!0},Al=il.isStandardBrowserEnv()?{write:function(e,t,n,i,r,a){var o=[];o.push(e+"="+encodeURIComponent(t)),il.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),il.isString(i)&&o.push("path="+i),il.isString(r)&&o.push("domain="+r),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){return(e=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)")))?decodeURIComponent(e[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},pl=function(e){return new Promise((function(t,n){var i=e.data,r=e.headers;il.isFormData(i)&&delete r["Content-Type"];var a=new XMLHttpRequest;if(e.auth&&(r.Authorization="Basic "+btoa((e.auth.username||"")+":"+(e.auth.password||""))),a.open(e.method.toUpperCase(),rl(e.url,e.params,e.paramsSerializer),!0),a.timeout=e.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var i,r,o,s,c,d="getAllResponseHeaders"in a?(i=a.getAllResponseHeaders(),c={},i?(il.forEach(i.split("\n"),(function(e){s=e.indexOf(":"),r=il.trim(e.substr(0,s)).toLowerCase(),o=il.trim(e.substr(s+1)),!r||c[r]&&0<=ul.indexOf(r)||(c[r]="set-cookie"===r?(c[r]?c[r]:[]).concat([o]):c[r]?c[r]+", "+o:o)})),c):c):null;!function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(ll("Request failed with status code "+n.status,n.config,null,n.request,n))}(t,n,{data:e.responseType&&"text"!==e.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:d,config:e,request:a}),a=null}},a.onabort=function(){a&&(n(ll("Request aborted",e,"ECONNABORTED",a)),a=null)},a.onerror=function(){n(ll("Network Error",e,null,a)),a=null},a.ontimeout=function(){n(ll("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",a)),a=null},il.isStandardBrowserEnv()){var o=(e.withCredentials||hl(e.url))&&e.xsrfCookieName?Al.read(e.xsrfCookieName):void 0;o&&(r[e.xsrfHeaderName]=o)}if("setRequestHeader"in a&&il.forEach(r,(function(e,t){void 0===i&&"content-type"===t.toLowerCase()?delete r[t]:a.setRequestHeader(t,e)})),e.withCredentials&&(a.withCredentials=!0),e.responseType)try{a.responseType=e.responseType}catch(s){if("json"!==e.responseType)throw s}"function"==typeof e.onDownloadProgress&&a.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){a&&(a.abort(),n(e),a=null)})),void 0===i&&(i=null),a.send(i)}))},fl={"Content-Type":"application/x-www-form-urlencoded"},gl={adapter:(("undefined"!=typeof n&&"[object process]"===Object.prototype.toString.call(n)||"undefined"!=typeof XMLHttpRequest)&&(al=pl),al),transformRequest:[function(e,t){return dl(t,"Accept"),dl(t,"Content-Type"),il.isFormData(e)||il.isArrayBuffer(e)||il.isBuffer(e)||il.isStream(e)||il.isFile(e)||il.isBlob(e)?e:il.isArrayBufferView(e)?e.buffer:il.isURLSearchParams(e)?(Se(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):il.isObject(e)?(Se(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&300>e},headers:{common:{Accept:"application/json, text/plain, */*"}}};il.forEach(["delete","get","head"],(function(e){gl.headers[e]={}})),il.forEach(["post","put","patch"],(function(e){gl.headers[e]=il.merge(fl)}));var _l=function(e){var t,n;return e.cancelToken&&e.cancelToken.throwIfRequested(),e.baseURL&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e.url)&&(e.url=(t=e.baseURL,(n=e.url)?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t)),e.headers=e.headers||{},e.data=sl(e.data,e.headers,e.transformRequest),e.headers=il.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),il.forEach("delete get head post put patch common".split(" "),(function(t){delete e.headers[t]})),(e.adapter||gl.adapter)(e).then((function(t){return e.cancelToken&&e.cancelToken.throwIfRequested(),t.data=sl(t.data,t.headers,e.transformResponse),t}),(function(t){return cl(t)||(e.cancelToken&&e.cancelToken.throwIfRequested(),t&&t.response&&(t.response.data=sl(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},ml=function(e,t){t=t||{};var n={};return il.forEach(["url","method","params","data"],(function(e){void 0!==t[e]&&(n[e]=t[e])})),il.forEach(["headers","auth","proxy"],(function(i){il.isObject(t[i])?n[i]=il.deepMerge(e[i],t[i]):void 0!==t[i]?n[i]=t[i]:il.isObject(e[i])?n[i]=il.deepMerge(e[i]):void 0!==e[i]&&(n[i]=e[i])})),il.forEach("baseURL transformRequest transformResponse paramsSerializer timeout withCredentials adapter responseType xsrfCookieName xsrfHeaderName onUploadProgress onDownloadProgress maxContentLength validateStatus maxRedirects httpAgent httpsAgent cancelToken socketPath".split(" "),(function(i){void 0!==t[i]?n[i]=t[i]:void 0!==e[i]&&(n[i]=e[i])})),n};Re.prototype.request=function(e,t){"string"==typeof e?(e=t||{}).url=e:e=e||{},(e=ml(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var n=[_l,void 0];for(e=Promise.resolve(e),this.interceptors.request.forEach((function(e){n.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){n.push(e.fulfilled,e.rejected)}));n.length;)e=e.then(n.shift(),n.shift());return e},Re.prototype.getUri=function(e){return e=ml(this.defaults,e),rl(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},il.forEach(["delete","get","head","options"],(function(e){Re.prototype[e]=function(t,n){return this.request(il.merge(n||{},{method:e,url:t}))}})),il.forEach(["post","put","patch"],(function(e){Re.prototype[e]=function(t,n,i){return this.request(il.merge(i||{},{method:e,url:t,data:n}))}}));var El=Re;Te.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Te.prototype.__CANCEL__=!0;var Il=Te;we.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},we.source=function(){var e;return{token:new we((function(t){e=t})),cancel:e}};var vl=be(gl);vl.Axios=El,vl.create=function(e){return be(ml(vl.defaults,e))},vl.Cancel=Il,vl.CancelToken=we,vl.isCancel=cl,vl.all=function(e){return Promise.all(e)},vl.spread=function(e){return function(t){return e.apply(null,t)}};var Cl=vl.default=vl;let yl={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},Sl=el(),Rl=e=>{for(const t in yl)if(Object.prototype.hasOwnProperty.call(yl,t)&&yl[t]===e)return t;return"DEFAULT"},Tl=new class{constructor(){this.logLevel=yl.DEBUG,this.uploadState="collecting",this.uploadLogWaitingList=[],this.uploadLogUploadingList=[],this.currentLogID=this.uploadErrorCount=0}debug(...e){var t;e=Ir(t=[yl.DEBUG]).call(t,e),this.log.apply(this,e)}info(...e){var t;e=Ir(t=[yl.INFO]).call(t,e),this.log.apply(this,e)}warning(...e){var t;e=Ir(t=[yl.WARNING]).call(t,e),this.log.apply(this,e)}error(...e){var t;e=Ir(t=[yl.ERROR]).call(t,e),this.log.apply(this,e)}setLogLevel(e){this.logLevel=e=Math.min(Math.max(0,e),4)}enableLogUpload(){Ae("UPLOAD_LOG",!0)}disableLogUpload(){Ae("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}log(...e){var t,n,i,r;if(100>el()-Sl)return void $d((()=>{this.log(...e)}),el()-Sl);const a=Math.max(0,Math.min(4,e[0]));if(e[0]=Ne()+" Agora-SDK [".concat(Rl(a),"]:"),this.appendLogToWaitingList(a,e),!(a<this.logLevel)){var o=Ne()+" %cAgora-SDK [".concat(Rl(a),"]:"),s=[];switch(a){case yl.DEBUG:s=Ir(t=[o,"color: #64B5F6;"]).call(t,jc(e).call(e,1)),console.log.apply(console,s);break;case yl.INFO:s=Ir(n=[o,"color: #1E88E5; font-weight: bold;"]).call(n,jc(e).call(e,1)),console.log.apply(console,s);break;case yl.WARNING:s=Ir(i=[o,"color: #FB8C00; font-weight: bold;"]).call(i,jc(e).call(e,1)),console.warn.apply(console,s);break;case yl.ERROR:s=Ir(r=[o,"color: #B00020; font-weight: bold;"]).call(r,jc(e).call(e,1)),console.error.apply(console,s)}}}appendLogToWaitingList(e,...t){if(xd.UPLOAD_LOG){var n="";No(t).call(t,(e=>{"object"==typeof e&&(e=Pi(e)),n+="".concat(e," ")})),this.uploadLogWaitingList.push({payload_str:n,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){var e,t={sdk_version:bd,process_id:xd.PROCESS_ID,payload:Pi(this.uploadLogUploadingList)};if("OK"!==(t=await Cl.post(this.url||(this.proxyServerURL?Ir(e="https://".concat(this.proxyServerURL,"/ls/?h=")).call(e,xd.LOG_UPLOAD_SERVER,"&p=443&d=upload/v1"):"https://".concat(xd.LOG_UPLOAD_SERVER,"/upload/v1")),t,{responseType:"text"})).data)throw Error("unexpected upload log response: "+t.data);this.uploadLogUploadingList=[]}uploadLogInterval(){var e;0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=kc(e=this.uploadLogWaitingList).call(e,0,10)),this.uploadLogs().then((()=>{this.uploadErrorCount=0,0<this.uploadLogWaitingList.length&&window.setTimeout((()=>this.uploadLogInterval()),3e3)})).catch((e=>{this.uploadErrorCount+=1,2>this.uploadErrorCount?window.setTimeout((()=>this.uploadLogInterval()),200):window.setTimeout((()=>this.uploadLogInterval()),1e3)})))}};class wl{constructor(e,t="",n){var i;this.name="AgoraRTCException",this.code=e,this.message=Ir(i="AgoraRTCError ".concat(this.code,": ")).call(i,t),this.data=n}toString(){var e;return this.data?Ir(e="".concat(this.message," data: ")).call(e,Pi(this.data)):this.message}print(e="error"){return"error"===e&&Tl.error(this.toString()),"warning"===e&&Tl.warning(this.toString()),this}throw(){throw this.print(),this}}var bl,Nl;!function(e){e.FREE="free",e.UPLOADING="uploading"}(bl||(bl={})),function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied"}(Nl||(Nl={})),bi({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),bi({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991});let kl={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};var Ol,Dl,Bl,Ll,Ul,xl,Ml,Ql,Pl,Fl,Gl,jl,Vl,Yl,Hl,Kl,Wl,zl,ql,Jl,Xl;!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics"}(Ol||(Ol={})),function(e){e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAT="io.agora.pb.Wrtc.JoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics"}(Dl||(Dl={})),function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(Bl||(Bl={})),function(e){e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",e.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange"}(Ll||(Ll={})),(Ul||(Ul={})).TRACER="tracer",function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(xl||(xl={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(Ml||(Ml={})),function(e){e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(Ql||(Ql={})),function(e){e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(Pl||(Pl={})),function(e){e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Fl||(Fl={})),function(e){e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(Gl||(Gl={})),function(e){e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(jl||(jl={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.INJECT_STREAM_STATUS="stream-inject-status",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost"}(Vl||(Vl={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE"}(Yl||(Yl={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed"}(Hl||(Hl={})),function(e){e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success"}(Kl||(Kl={})),function(e){e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v2",e.REJOIN="rejoin",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer"}(Wl||(Wl={})),function(e){e.PUBLISH_STATS="publish_stats",e.PUBLISH_RELATED_STATS="publish_related_stats",e.SUBSCRIBE_STATS="subscribe_stats",e.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length"}(zl||(zl={})),function(e){e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio"}(ql||(ql={})),function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.NEED_ANSWER="NEED_ANSWER",e.NEED_RENEGOTIATE="NEED_RENEGOTIATE",e.P2P_LOST="P2P_LOST",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NEED_UNPUB="NEED_UNPUB",e.NEED_UNSUB="NEED_UNSUB",e.NEED_UPLOAD="NEED_UPLOAD",e.NEED_CONTROL="NEED_CONTROL",e.START_RECONNECT="START_RECONNECT",e.END_RECONNECT="END_RECONNECT",e.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(Jl||(Jl={})),function(e){e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer"}(Xl||(Xl={}));let Zl={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},$l={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},eu={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},tu={uplinkNetworkQuality:0,downlinkNetworkQuality:0},nu={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};var iu,ru;!function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls"}(iu||(iu={})),function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(ru||(ru={}));let au={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},ou={x:0,y:0,width:160,height:160,zOrder:255,alpha:1},su={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},cu={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};var du,lu,uu,hu,Au,pu,fu,gu,_u,mu;!function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(du||(du={})),(lu||(lu={})).REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager",function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(uu||(uu={})),function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(hu||(hu={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(Au||(Au={})),function(e){e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid"}(pu||(pu={})),function(e){e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_CLOSE="@need_close",e.NEED_ADD_TRACK="@need_add_track",e.NEED_REMOVE_TRACK="@need_remove_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.SET_VIDEO_TRACK_MUTED="@set_video_track_muted",e.SET_AUDIO_TRACK_MUTED="@set_audio_track_muted"}(fu||(fu={})),function(e){e.SCREEN_TRACK="screen_track",e.LOW_STREAM="low_stream"}(gu||(gu={})),function(e){e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload"}(_u||(_u={})),(mu||(mu={})).FIRST_FRAME_DECODED="first-frame-decoded";let Eu="AFRICA ASIA CHINA EUROPE GLOBAL INDIA JAPAN NORTH_AMERICA OCEANIA OVERSEA SOUTH_AMERICA".split(" ");var Iu;!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(Iu||(Iu={}));let vu={CHINA:{},ASIA:{CODE:Iu.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Iu.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Iu.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Iu.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Iu.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Iu.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Iu.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Iu.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Iu.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Iu.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};var Cu,yu,Su;kd&&(vu.CHINA={CODE:Iu.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),(Cu||(Cu={})).UPDATE_BITRATE_LIMIT="update_bitrate_limit",function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(yu||(yu={})),function(e){e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Su||(Su={}));let Ru={join:["startJoin","startRequestAp","startJoinGateway","finishJoin"],publish:["startPublish"]},Tu={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1};bi({target:"Object",stat:!0,forced:!Wn,sham:!Wn},{defineProperties:Ra});var wu=e((function(e){var t=Ei.Object;e=e.exports=function(e,n){return t.defineProperties(e,n)},t.defineProperties.sham&&(e.sham=!0)})),bu=ya.concat("length","prototype"),Nu={f:Object.getOwnPropertyNames||function(e){return Ca(e,bu)}},ku=ki("Reflect","ownKeys")||function(e){var t=Nu.f(Ci(e)),n=ko.f;return n?t.concat(n(e)):t};bi({target:"Object",stat:!0,sham:!Wn},{getOwnPropertyDescriptors:function(e){var t,n;e=ii(e);for(var i=hi,r=ku(e),a={},o=0;r.length>o;)void 0!==(n=i(e,t=r[o++]))&&Wi(a,t,n);return a}});var Ou=Ei.Object.getOwnPropertyDescriptors,Du=Nu.f,Bu={}.toString,Lu="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Uu=function(e){if(Lu&&"[object Window]"==Bu.call(e))try{var t=Du(e)}catch(n){t=Lu.slice()}else t=Du(ii(e));return t},xu={f:rr},Mu=Si.f,Qu=ta("hidden"),Pu=rr("toPrimitive"),Fu=ua.set,Gu=ua.getterFor("Symbol"),ju=Object.prototype,Vu=Hn.Symbol,Yu=ki("JSON","stringify"),Hu=hi,Ku=Si.f,Wu=Uu,zu=Jn,qu=qi("symbols"),Ju=qi("op-symbols"),Xu=qi("string-to-symbol-registry"),Zu=qi("symbol-to-string-registry"),$u=qi("wks"),eh=Hn.QObject,th=!eh||!eh.prototype||!eh.prototype.findChild,nh=Wn&&Kn((function(){return 7!=ka(Ku({},"a",{get:function(){return Ku(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=Hu(ju,t);i&&delete ju[t],Ku(e,t,n),i&&e!==ju&&Ku(ju,t,i)}:Ku,ih=function(e,t){var n=qu[e]=ka(Vu.prototype);return Fu(n,{type:"Symbol",tag:e,description:t}),Wn||(n.description=t),n},rh=$i&&"symbol"==typeof Vu.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Vu},ah=function(e,t,n){return e===ju&&ah(Ju,t,n),Ci(e),t=ai(t,!0),Ci(n),si(qu,t)?(n.enumerable?(si(e,Qu)&&e[Qu][t]&&(e[Qu][t]=!1),n=ka(n,{enumerable:Xn(0,!1)})):(si(e,Qu)||Ku(e,Qu,Xn(1,{})),e[Qu][t]=!0),nh(e,t,n)):Ku(e,t,n)},oh=function(e,t){Ci(e);var n=ii(t);return t=Sa(n).concat(lh(n)),Yr(t,(function(t){Wn&&!sh.call(n,t)||ah(e,t,n[t])})),e},sh=function(e){e=ai(e,!0);var t=zu.call(this,e);return!(this===ju&&si(qu,e)&&!si(Ju,e))&&(!(t||!si(this,e)||!si(qu,e)||si(this,Qu)&&this[Qu][e])||t)},ch=function(e,t){if(e=ii(e),t=ai(t,!0),e!==ju||!si(qu,t)||si(Ju,t)){var n=Hu(e,t);return!n||!si(qu,t)||si(e,Qu)&&e[Qu][t]||(n.enumerable=!0),n}},dh=function(e){e=Wu(ii(e));var t=[];return Yr(e,(function(e){si(qu,e)||si(vr,e)||t.push(e)})),t},lh=function(e){var t=e===ju;e=Wu(t?Ju:ii(e));var n=[];return Yr(e,(function(e){!si(qu,e)||t&&!si(ju,e)||n.push(qu[e])})),n};if($i||(La((Vu=function(){if(this instanceof Vu)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=Zi(e),n=function(e){this===ju&&n.call(Ju,e),si(this,Qu)&&si(this[Qu],t)&&(this[Qu][t]=!1),nh(this,t,Xn(1,e))};return Wn&&th&&nh(ju,t,{configurable:!0,set:n}),ih(t,e)}).prototype,"toString",(function(){return Gu(this).tag})),Jn=sh,Si.f=ah,hi=ch,Nu.f=Uu=dh,ko.f=lh,Wn&&Ku(Vu.prototype,"description",{configurable:!0,get:function(){return Gu(this).description}})),er||(xu.f=function(e){return ih(rr(e),e)}),bi({global:!0,wrap:!0,forced:!$i,sham:!$i},{Symbol:Vu}),Yr(Sa($u),(function(e){var t=Ei.Symbol||(Ei.Symbol={});si(t,e)||Mu(t,e,{value:xu.f(e)})})),bi({target:"Symbol",stat:!0,forced:!$i},{for:function(e){if(e=String(e),si(Xu,e))return Xu[e];var t=Vu(e);return Xu[e]=t,Zu[t]=e,t},keyFor:function(e){if(!rh(e))throw TypeError(e+" is not a symbol");if(si(Zu,e))return Zu[e]},useSetter:function(){th=!0},useSimple:function(){th=!1}}),bi({target:"Object",stat:!0,forced:!$i,sham:!Wn},{create:function(e,t){return void 0===t?ka(e):oh(ka(e),t)},defineProperty:ah,defineProperties:oh,getOwnPropertyDescriptor:ch}),bi({target:"Object",stat:!0,forced:!$i},{getOwnPropertyNames:dh,getOwnPropertySymbols:lh}),bi({target:"Object",stat:!0,forced:Kn((function(){ko.f(1)}))},{getOwnPropertySymbols:function(e){return ko.f(Gi(e))}}),Yu){var uh=!$i||Kn((function(){var e=Vu();return"[null]"!=Yu([e])||"{}"!=Yu({a:e})||"{}"!=Yu(Object(e))}));bi({target:"JSON",stat:!0,forced:uh},{stringify:function(e,t,n){for(var i,r=[e],a=1;arguments.length>a;)r.push(arguments[a++]);if(i=t,(ri(t)||void 0!==e)&&!rh(e))return Fi(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!rh(t))return t}),r[1]=t,Yu.apply(null,r)}})}Vu.prototype[Pu]||Ri(Vu.prototype,Pu,Vu.prototype.valueOf),Gr(Vu,"Symbol"),vr[Qu]=!0;var hh,Ah=Ei.Object.getOwnPropertySymbols,ph=function(e,t,n){return t in e?Go(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};!function(e){e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5"}(hh||(hh={}));var fh=_r("Array").values,gh=Array.prototype,_h={DOMTokenList:!0,NodeList:!0},mh=function(e){var t=e.values;return e===gh||e instanceof Array&&t===gh.values||_h.hasOwnProperty(Dr(e))?fh:t},Eh=function(e){var t=Gi(e),n="function"==typeof this?this:Array,i=arguments.length,r=1<i?arguments[1]:void 0,a=void 0!==r,o=0,s=Lr(t);if(a&&(r=vi(r,2<i?arguments[2]:void 0,2)),null==s||n==Array&&wr(s))for(n=new n(i=Ki(t.length));i>o;o++)Wi(n,o,a?r(t[o],o):t[o]);else for(i=(t=s.call(t)).next,n=new n;!(s=i.call(t)).done;o++)Wi(n,o,a?Ur(t,r,[s.value,o],!0):s.value);return n.length=o,n},Ih=!As((function(e){Array.from(e)}));bi({target:"Array",stat:!0,forced:Ih},{from:Eh});var vh=Ei.Array.from;class Ch{constructor(){this._events={},this.addListener=this.on}getListeners(e){var t;return this._events[e]?Rc(t=this._events[e]).call(t,(e=>e.listener)):[]}on(e,t){this._events[e]||(this._events[e]=[]),e=this._events[e],-1===this._indexOfListener(e,t)&&e.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]),e=this._events[e],-1===this._indexOfListener(e,t)&&e.push({listener:t,once:!0})}off(e,t){if(this._events[e]){var n=this._events[e];-1!==(t=this._indexOfListener(n,t))&&kc(n).call(n,t,1),0===this._events[e].length&&delete this._events[e]}}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e,...t){var n;this._events[e]||(this._events[e]=[]);let i=Rc(n=this._events[e]).call(n,(e=>e));for(n=0;n<i.length;n+=1){let r=i[n];r.once&&this.off(e,r.listener),r.listener.apply(this,t||[])}}_indexOfListener(e,t){let n=e.length;for(;n--;)if(e[n].listener===t)return n;return-1}}let yh=0,Sh=0,Rh=new class extends Ch{constructor(){super(),this._moduleName="network-indicator",this._networkState=yu.ONLINE,window.addEventListener("online",(()=>{this.networkState=yu.ONLINE})),window.addEventListener("offline",(()=>{this.networkState=yu.OFFLINE}))}set networkState(e){Tl.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+e),this.emit(Su.NETWORK_STATE_CHANGE,e,this._networkState),e===yu.ONLINE?this.emit(Su.ONLINE):e===yu.OFFLINE&&(this.onlineWaiter=new Cc((e=>{this.once(Su.ONLINE,(()=>{this.onlineWaiter=void 0,e(yu.ONLINE)}))})),this.emit(Su.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}},Th={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4},wh=new class{constructor(){var e,t;this.baseInfoMap=new Ao,this.clientList=Qd,this.keyEventUploadPendingItems=[],this.normalEventUploadPendingItems=[],this.apiInvokeUploadPendingItems=[],this.apiInvokeCount=0,this.ltsList=[],this.lastSendNormalEventTime=el(),this.customReportCount=0,this.eventUploadTimer=window.setInterval(Xc(e=this.doSend).call(e,this),xd.EVENT_REPORT_SEND_INTERVAL),this.setSessionIdTimer=window.setInterval(Xc(t=this.appendSessionId).call(t,this),xd.EVENT_REPORT_SEND_INTERVAL)}reportApiInvoke(e,t,n){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const i=el(),r=this.apiInvokeCount+=1,a=()=>({tag:t.tag,invokeId:r,sid:e,name:t.name,apiInvokeTime:i,options:t.options,states:t.states||null}),o=!!xd.SHOW_REPORT_INVOKER_LOG;o&&Tl.info("".concat(t.name," start"),t.options);let s=!1;Ot(t.timeout).then((()=>{s||(this.sendApiInvoke(Xe({},a(),{error:zd.API_INVOKE_TIMEOUT,success:!1})),Tl.debug("".concat(t.name," timeout")))}));const c=new wl(zd.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:e=>{const i=()=>{if(s)throw c;return s=!0,this.sendApiInvoke(Xe({},a(),{success:!0},t.reportResult&&{result:e})),o&&Tl.info("".concat(t.name," onSuccess")),e};return n?uA(i,t.name+"Success",n,(()=>s=!0)):i()},onError:e=>{const i=()=>{if(s)throw e;s=!0,this.sendApiInvoke(Xe({},a(),{success:!1,error:e.toString()})),o&&Tl.info("".concat(t.name," onFailure"),e.toString())};return n?uA(i,t.name+"Error",n,(()=>s=!0)):i()}}}sessionInit(e,t){if(!this.baseInfoMap.has(e)){var n=el();(e=this.createBaseInfo(e,n)).cname=t.cname;var i=Bo({},{willUploadConsoleLog:xd.UPLOAD_LOG,maxTouchPoints:navigator.maxTouchPoints,areaVersion:kd?"global":"oversea",areas:xd.AREAS&&xd.AREAS.join(",")},t.extend),r=el();t=Xe({},e,{eventType:Ol.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,build:"v4.7.2-0-gf83f608b(10/13/2021, 5:32:13 PM)",lts:r,elapse:r-n,extend:Pi(i),mode:t.mode,process:xd.PROCESS_ID,success:!0,version:bd}),this.send({type:Dl.SESSION,data:t},!0)}}joinChooseServer(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,i=el();t=Xe({},n,{eventType:Ol.JOIN_CHOOSE_SERVER,lts:i,eventElapse:i-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:i-e.startTime,success:t.succ,chooseServerAddrList:Pi(t.serverList),uid:t.uid?Jo(t.uid):null,cid:t.cid?Jo(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0}),this.send({type:Dl.JOIN_CHOOSE_SERVER,data:t},!0)}}reqUserAccount(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,i=el();t=Xe({},n,{eventType:Ol.REQ_USER_ACCOUNT,lts:i,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:i-e.startTime,eventElapse:i-t.lts,extend:Pi(t.extend)}),this.send({type:Dl.REQ_USER_ACCOUNT,data:t},!0)}}joinGateway(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info;t.vid&&(n.vid=t.vid),n.uid=t.uid,n.cid=t.cid;var i=el();n=Xe({},n,{eventType:Ol.JOIN_GATEWAY,lts:i,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,elapse:i-e.startTime,eventElapse:i-t.lts}),t.succ&&(e.lastJoinSuccessTime=i),this.send({type:Dl.JOIN_GATEWAT,data:n},!0)}}joinChannelTimeout(e,t){if(e=this.baseInfoMap.get(e)){var n=el();t=Xe({},e.info,{lts:n,timeout:t,elapse:n-e.startTime}),this.send({type:Dl.JOIN_CHANNEL_TIMEOUT,data:t},!0)}}publish(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,i=el();t=Xe({},n,{eventType:Ol.PUBLISH,lts:i,eventElapse:i-t.lts,elapse:i-e.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid}),this.send({type:Dl.PUBLISH,data:t},!0)}}subscribe(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,i=el();e=Xe({},n,{eventType:Ol.SUBSCRIBE,lts:i,eventElapse:i-t.lts,elapse:i-e.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid}),"string"==typeof t.peerid?e.peerSuid=t.peerid:e.peer=t.peerid,this.send({type:Dl.SUBSCRIBE,data:e},!0)}}firstRemoteFrame(e,t,n,i){if(e=this.baseInfoMap.get(e)){var r=e.info,a=el();t=Xe({},r,{},i,{elapse:a-e.startTime,eventType:t,lts:a}),this.send({type:n,data:t},!0)}}onGatewayStream(e,t,n,i){(e=this.baseInfoMap.get(e))&&(t=Xe({},e.info,{},i,{eventType:t,lts:el()}),this.send({type:n,data:t},!0))}streamSwitch(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,i=el();t=Xe({},n,{eventType:Ol.STREAM_SWITCH,lts:i,isDual:t.isdual,elapse:i-e.startTime,success:t.succ}),this.send({type:Dl.STREAM_SWITCH,data:t},!0)}}requestProxyAppCenter(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,i=el();t=Xe({},n,{eventType:Ol.REQUEST_PROXY_APPCENTER,lts:i,eventElapse:i-t.lts,elapse:i-e.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ}),this.send({type:Dl.REQUEST_PROXY_APPCENTER,data:t},!0)}}requestProxyWorkerManager(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,i=el();t=Xe({},n,{eventType:Ol.REQUEST_PROXY_WORKER_MANAGER,lts:i,eventElapse:i-t.lts,elapse:i-e.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ}),this.send({type:Dl.REQUEST_PROXY_WORKER_MANAGER,data:t},!0)}}setProxyServer(e){(this.proxyServer=e)?Tl.debug("reportProxyServerurl: ".concat(e)):Tl.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,i=el();t=Xe({},n,{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:0<t.audioPublishDuration?1:-1,videotag:0<t.videoPublishDuration?1:-1,lts:i,elapse:i-e.startTime,joinChannelSuccessElapse:i-(e.lastJoinSuccessTime||i)}),this.send({type:Dl.PEER_PUBLISH_STATUS,data:t},!0)}}workerEvent(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,i=el();t=function(e,t,n){const i=e[t];if(!i||"string"!=typeof i)return[e];e[t]="";const r=kt(Pi(e));let a=0;const o=[];let s=0;for(let c=0;c<i.length;c++)s+=127>=i.charCodeAt(c)?1:3,s<=n-r||(o[o.length]=Nt({},e,{[t]:i.substring(a,c)}),a=c,s=127>=i.charCodeAt(c)?1:3);return a!==i.length-1&&(o[o.length]=Nt({},e,{[t]:i.substring(a)})),o}(Xe({},n,{},t,{elapse:i-e.startTime,lts:i,productType:"WebRTC"}),"payload",1300),No(t).call(t,(e=>this.send({type:Dl.WORKER_EVENT,data:e},!0)))}}apworkerEvent(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,i=el();t=Xe({},n,{},t,{elapse:i-e.startTime,lts:i}),this.send({type:Dl.AP_WORKER_EVENT,data:t},!0)}}joinWebProxyAP(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,i=el();t=Xe({},n,{},t,{elapse:i-e.startTime,lts:i,extend:t.extend||void 0}),this.send({type:Dl.JOIN_WEB_PROXY_AP,data:t},!0)}}WebSocketQuit(e,t){if(e=this.baseInfoMap.get(e)){var n=e.info,i=el();t=Xe({},n,{},t,{elapse:i-e.startTime,lts:i}),this.send({type:Dl.WEBSOCKET_QUIT,data:t},!0)}}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>xd.CUSTOM_REPORT_LIMIT)throw new wl(zd.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((()=>{this.customReportCount=0}),5e3)),t=Rc(t).call(t,(t=>({type:Dl.USER_ANALYTICS,data:Xe({sid:e},t)}))),t={msgType:"EventMessages",sentTs:Math.round(el()/1e3),payloads:Rc(t).call(t,(e=>Pi(e)))};try{await this.postDataToStatsCollector(t)}catch(n){throw Tl.error("send custom report message failed",n.toString()),new wl(zd.CUSTOM_REPORT_SEND_FAILED,n.message)}}sendApiInvoke(e){var t=xd.NOT_REPORT_EVENT;if(e.tag&&nd(t)&&nd(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;if(!(t=this.baseInfoMap.get(e.sid)))return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:n,uid:i,cid:r}=t.info;return e.lts=e.lts||el(),e={invokeId:e.invokeId,sid:e.sid,cname:n,cid:r,uid:i,lts:e.lts,success:e.success,elapse:e.lts-t.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?Pi(e.options):void 0,execStates:e.states?Pi(e.states):void 0,execResult:e.result?Pi(e.result):void 0,errorCode:e.error?Pi(e.error):void 0},this.send({type:Dl.API_INVOKE,data:e},!1),!0}appendSessionId(){var e;No(e=this.clientList).call(e,(e=>{if(e._sessionId){const t=this.apiInvokeUploadPendingItems.length;for(let n=0;n<t;n++){const t=this.apiInvokeUploadPendingItems.shift();t&&(t.sid=e._sessionId,this.sendApiInvoke(Bo({},t)))}}}))}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);var n;this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>xd.NORMAL_EVENT_QUEUE_CAPACITY&&kc(n=this.normalEventUploadPendingItems).call(n,0,1),10<=this.normalEventUploadPendingItems.length&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){0<this.keyEventUploadPendingItems.length&&this.sendItems(this.keyEventUploadPendingItems,!0),0<this.normalEventUploadPendingItems.length&&5e3<=el()-this.lastSendNormalEventTime&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const n=[];for(var i=[];e.length;){const t=e.shift();20>n.length?n.push(t):i.push(t)}e.push(...i);for(const o of[...n]){var r,a;-1!==xc(r=this.ltsList).call(r,o.data.lts)?(o.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(o.data.lts)):(this.ltsList.push(o.data.lts),Wd(a=this.ltsList).call(a,((e,t)=>e-t)))}return t||(this.lastSendNormalEventTime=el()),i={msgType:"EventMessages",sentTs:Math.round(el()/1e3),payloads:Rc(n).call(n,(e=>Pi(e))),vid:(e=>(e=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid))&&e.info.vid&&+e.info.vid||0)(n[0])},n.length&&this.postDataToStatsCollector(i).catch((e=>n=>{var i,r,a;xd.EVENT_REPORT_RETRY&&(t?this.keyEventUploadPendingItems=Ir(i=this.keyEventUploadPendingItems).call(i,e):(this.normalEventUploadPendingItems=Ir(r=this.normalEventUploadPendingItems).call(r,e),this.normalEventUploadPendingItems.length>xd.NORMAL_EVENT_QUEUE_CAPACITY&&(kc(a=this.normalEventUploadPendingItems).call(a,0,this.normalEventUploadPendingItems.length-xd.NORMAL_EVENT_QUEUE_CAPACITY),Tl.warning("report: drop normal events"))))})(n)),e}async postDataToStatsCollector(e,t=!1){var n,i,r;Rh.networkState===yu.OFFLINE&&await Cc.race([Rh.onlineWaiter,Ot(2*Th.maxRetryTimeout)]);const a=t?"/events/proto-raws":"/events/messages";let o=this.url||(this.proxyServer?Ir(n=Ir(i="https://".concat(this.proxyServer,"/rs/?h=")).call(i,xd.EVENT_REPORT_DOMAIN,"&p=6443&d=")).call(n,a):Ir(r="https://".concat(xd.EVENT_REPORT_DOMAIN,":6443")).call(r,a));for(n=0;2>n;n+=1){var s,c,d;1===n&&(o=this.backupUrl||(this.proxyServer?Ir(s=Ir(c="https://".concat(this.proxyServer,"/rs/?h=")).call(c,xd.EVENT_REPORT_BACKUP_DOMAIN,"&p=6443&d=")).call(s,a):Ir(d="https://".concat(xd.EVENT_REPORT_BACKUP_DOMAIN,":6443")).call(d,a)));try{t?await ze(o,{timeout:1e4,data:e}):await We(o,{timeout:1e4,data:e})}catch(l){if(1===n)throw l;continue}break}}createBaseInfo(e,t){const n=Bo({},kl);return n.sid=e,this.baseInfoMap.set(e,{info:n,startTime:t}),n}};class bh extends Ch{constructor(e,t){super(),this._hints=[],this._isClosed=!1,this._ID=t||Bt(8,"track-"),this._mediaStreamTrack=this._originMediaStreamTrack=e,nd(Pd).call(Pd,this)||Pd.push(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){return e||(e=wh.reportApiInvoke(null,{name:Ll.GET_MEDIA_STREAM_TRACK,options:[],tag:Ul.TRACER}),this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?e.onSuccess(this._mediaStreamTrack.label):e.onSuccess("")),this._mediaStreamTrack}close(){this._isClosed=!0;{let e=xc(Pd).call(Pd,this);-1!==e&&kc(Pd).call(Pd,e,1)}}}let Nh=1;class kh{constructor(e){var t;this.lockingPromise=Cc.resolve(),this.locks=0,this.name="",this.lockId=Nh++,e&&(this.name=e),Tl.debug(Ir(t="[lock-".concat(this.name,"-")).call(t,this.lockId,"] is created."))}get isLocked(){return 0<this.locks}lock(){var e,t;let n;this.locks+=1,Tl.debug(Ir(e=Ir(t="[lock-".concat(this.name,"-")).call(t,this.lockId,"] is locked, current queue ")).call(e,this.locks,"."));let i=new Cc((e=>{n=()=>{var t,n;--this.locks,Tl.debug(Ir(t=Ir(n="[lock-".concat(this.name,"-")).call(n,this.lockId,"] is not locked, current queue ")).call(t,this.locks,".")),e()}}));return e=this.lockingPromise.then((()=>n)),this.lockingPromise=this.lockingPromise.then((()=>i)),e}}class Oh extends bh{constructor(e,t){super(e,t),this._enabled=!0,this._isClosed=this._muted=!1,this._trackProcessors=[],this._handleTrackEnded=()=>{this.onTrackEnded()},this._enabledMutex=new kh("".concat(t)),e.addEventListener("ended",this._handleTrackEnded)}get muted(){return this._muted}get enabled(){return this._enabled}getTrackLabel(){return this._originMediaStreamTrack.label}close(){var e;this._isClosed||(this.stop(),No(e=this._trackProcessors).call(e,(e=>e.destroy())),this._trackProcessors=[],this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,Tl.debug("[".concat(this.getTrackId(),"] close")),this.emit(fu.NEED_CLOSE),super.close())}async _registerTrackProcessor(e){var t;if(-1===xc(t=this._trackProcessors).call(t,e)){var n=this._trackProcessors[this._trackProcessors.length-1];this._trackProcessors.push(e),e.onOutputChange=async()=>{this._mediaStreamTrack=e.output||this._originMediaStreamTrack,this._updatePlayerSource(),await Mt(this,fu.NEED_REPLACE_TRACK,this._mediaStreamTrack)},n?(n.onOutputChange=async()=>{n.output&&await e.setInput(n.output)},await e.setInput(n.output||n.input||this._originMediaStreamTrack)):await e.setInput(this._originMediaStreamTrack)}}_getOutputFromProcessors(){if(0===this._trackProcessors.length)return this._originMediaStreamTrack;let e=this._trackProcessors[this._trackProcessors.length-1];return e.output||e.input||this._originMediaStreamTrack}async _updateOriginMediaStreamTrack(e,t){e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop(),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,0<this._trackProcessors.length?(await this._trackProcessors[0].setInput(e),this._mediaStreamTrack=this._getOutputFromProcessors()):this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mt(this,fu.NEED_REPLACE_TRACK,this._mediaStreamTrack))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){Tl.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(_u.TRACK_ENDED)}stateCheck(e,t){var n,i,r;if(Tl.debug(Ir(n=Ir(i=Ir(r="check track state, [muted: ".concat(this._muted,", enabled: ")).call(r,this._enabled,"] to [")).call(i,e,": ")).call(n,t,"]")),"muted"===e&&!Tu.webAudioMediaStreamDest)throw new wl(zd.NOT_SUPPORTED,"current environment does not support set mute").print();if(ke(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new wl(zd.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new wl(zd.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}}var Dh;!function(e){e.IOS_15_INTERRUPTION_START="ios15-interruption-start",e.IOS_15_INTERRUPTION_END="ios15-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end"}(Dh||(Dh={}));let Bh=window.AudioContext||window.webkitAudioContext,Lh=null,Uh=new class extends Ch{constructor(){super(...arguments),this.onLocalAudioTrackMute=()=>{Tl.info("ios15-interruption-start"),this.emit(Dh.IOS_15_INTERRUPTION_START)},this.onLocalAudioTrackUnmute=async()=>{Tl.info("ios15-interruption-end"),"running"===this.curState&&(Lh&&await Lh.suspend(),this.emit(Dh.IOS_15_INTERRUPTION_END))}}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(e){Tl.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){Tl.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}},xh=null;class Mh extends Ch{constructor(){super(),this.isPlayed=!1,this.audioOutputLevel=0,this.isNoAudioInput=this.isDestroyed=!1,this._noAudioInputCount=0,this.context=tt(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),nt(this.outputNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.smoothingTimeConstant=.4,this.analyserNode.fftSize=2048}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{this.emit(Xl.ON_AUDIO_BUFFER,function(e){for(let t=0;t<e.outputBuffer.numberOfChannels;t+=1){let n=e.outputBuffer.getChannelData(t);for(let e=0;e<n.length;e+=1)n[e]=0}return e.inputBuffer}(e))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Tu.webAudioMediaStreamDest)throw new wl(zd.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){"running"!==this.context.state&&jt((()=>{Uh.emit("autoplay-failed")})),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(al){}this.isPlayed=!1}getAccurateVolumeLevel(){if(!this.context||re()||oe()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;let e=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(e);let t=0;for(let n=0;n<e.length;n++)t+=64>n?Math.abs(10*e[n]):Math.abs(6*e[n]/15);return t/e.length/255}async checkHasAudioInput(e=0){if(5<e)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;if(re()||oe()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return!1;let t=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(t);let n=!1;for(let i=0;i<t.length;i++)0!==t[i]&&(n=!0);return n?(this.isNoAudioInput=!1,!0):(await Ot(200),await this.checkHasAudioInput(e?e+1:1)&&n)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}setMute(e){e?(this.disconnect(),this.audioOutputLevel=0):this.connect()}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){this.sourceNode&&this.sourceNode.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){this.sourceNode&&this.sourceNode.connect(this.outputNode),this.outputNode.connect(this.analyserNode)}}class Qh extends Mh{constructor(e,t){if(super(),this.isCurrentTrackCloned=!1,this.isRemoteTrack=!1,this.rebuildWebAudio=async()=>{if(Tl.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void Tl.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then((()=>Tl.info("resume success"))),Tl.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();var e=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?e.stop():this.isCurrentTrackCloned=!0,e=new MediaStream([this.track]),this.sourceNode=this.context.createMediaStreamSource(e),nt(this.sourceNode),this.analyserNode=this.context.createAnalyser();let t=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(t,this.context.currentTime),nt(this.outputNode),this.connect(),this.audioElement.srcObject=e,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()},"audio"!==e.kind)throw new wl(zd.UNEXPECTED_ERROR);this.track=e,e=new MediaStream([this.track]),this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(e),nt(this.sourceNode),this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=e,e=X(),t&&e.os===pd.IOS&&15>Number(e.osVersion&&e.osVersion.split(".")[0])&&(Uh.on("state-change",(()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()})),this.checkHasAudioInput().then((e=>{e||document.body.addEventListener("click",this.rebuildWebAudio,!0)})))}get isFreeze(){return!1}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1,e=new MediaStream([e]),this.sourceNode=this.context.createMediaStreamSource(e),nt(this.sourceNode),this.sourceNode.connect(this.outputNode),this.audioElement.srcObject=e}destroy(){this.audioElement.srcObject=null,this.audioElement.remove(),Uh.off("state-change",this.rebuildWebAudio),super.destroy()}}let Ph=null,Fh=new kh("safari"),Gh=!1,jh=!1,Vh=new class extends Ch{constructor(){super(),this._state=xl.IDLE,this.lastAccessCameraPermission=this.lastAccessMicrophonePermission=this.isAccessCameraPermission=this.isAccessMicrophonePermission=!1,this.deviceInfoMap=new Ao,this.init().then((()=>{var e;navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",Xc(e=this.updateDevicesInfo).call(e,this)),window.setInterval((()=>X().name!==fd.WECHAT&&xd.ENUMERATE_DEVICES_INTERVAL&&this.updateDevicesInfo()),6e4)})).catch((e=>Tl.error(e.toString())))}get state(){return this._state}set state(e){e!==this._state&&(this.emit(Ml.STATE_CHANGE,e),this._state=e)}async enumerateDevices(e,t,n=!1){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new wl(zd.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();var i=await navigator.mediaDevices.enumerateDevices();i=this.checkMediaDeviceInfoIsOk(i);let r=!this.isAccessMicrophonePermission&&e,a=!this.isAccessCameraPermission&&t;i.audio&&(r=!1),i.video&&(a=!1);let o=i=null,s=null;if(!n&&(r||a)){if(Fh.isLocked&&(Tl.debug("[device manager] wait GUM lock"),(await Fh.lock())(),Tl.debug("[device manager] GUM unlock")),Gh&&(r=!1,this.isAccessMicrophonePermission=!0),jh&&(a=!1,this.isAccessCameraPermission=!0),Tl.debug("[device manager] check media device permissions",e,t,r,a),r&&a){try{s=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(p){if((n=lt(p.name||p.code||p,p.message)).code===zd.PERMISSION_DENIED)throw n;Tl.warning("getUserMedia failed in getDevices",n)}this.isAccessMicrophonePermission=this.isAccessCameraPermission=!0}else if(r){try{i=await navigator.mediaDevices.getUserMedia({audio:e})}catch(p){if((n=lt(p.name||p.code||p,p.message)).code===zd.PERMISSION_DENIED)throw n;Tl.warning("getUserMedia failed in getDevices",n)}this.isAccessMicrophonePermission=!0}else if(a){try{o=await navigator.mediaDevices.getUserMedia({video:t})}catch(p){if((n=lt(p.name||p.code||p,p.message)).code===zd.PERMISSION_DENIED)throw n;Tl.warning("getUserMedia failed in getDevices",n)}this.isAccessCameraPermission=!0}Tl.debug("[device manager] mic permission",e,"cam permission",t)}try{var c,d,l;const e=await navigator.mediaDevices.enumerateDevices();return i&&No(c=i.getTracks()).call(c,(e=>e.stop())),o&&No(d=o.getTracks()).call(d,(e=>e.stop())),s&&No(l=s.getTracks()).call(l,(e=>e.stop())),i=null,o=null,s=null,e}catch(p){var u,h,A;return i&&No(u=i.getTracks()).call(u,(e=>e.stop())),o&&No(h=o.getTracks()).call(h,(e=>e.stop())),s&&No(A=s.getTracks()).call(A,(e=>e.stop())),s=o=i=null,new wl(zd.ENUMERATE_DEVICES_FAILED,p.toString()).throw()}}async getRecordingDevices(e=!1){return e=await this.enumerateDevices(!0,!1,e),rs(e).call(e,(e=>"audioinput"===e.kind))}async getCamerasDevices(e=!1){return e=await this.enumerateDevices(!1,!0,e),rs(e).call(e,(e=>"videoinput"===e.kind))}async getSpeakers(e=!1){return e=await this.enumerateDevices(!0,!1,e),rs(e).call(e,(e=>"audiooutput"===e.kind))}searchDeviceNameById(e){return(e=this.deviceInfoMap.get(e))?e.device.label||e.device.deviceId:null}searchDeviceIdByName(e){var t;let n=null;return No(t=this.deviceInfoMap).call(t,(t=>{t.device.label===e&&(n=t.device.deviceId)})),n}async getDeviceById(e){var t=await this.enumerateDevices(!0,!0,!0);if(!(t=Kc(t).call(t,(t=>t.deviceId===e))))throw new wl(zd.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=xl.INITING;try{await this.updateDevicesInfo(),this.state=xl.INITEND}catch(e){throw Tl.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=xl.IDLE,("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)||new wl(zd.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){var e;const t=await this.enumerateDevices(!0,!0,!0),n=el(),i=[],r=this.checkMediaDeviceInfoIsOk(t);if(No(t).call(t,(e=>{if(e.deviceId){var t=this.deviceInfoMap.get(e.deviceId);if("ACTIVE"!==(t?t.state:"INACTIVE")){const t={initAt:n,updateAt:n,device:e,state:"ACTIVE"};this.deviceInfoMap.set(e.deviceId,t),i.push(t)}t&&(t.updateAt=n)}})),No(e=this.deviceInfoMap).call(e,((e,t)=>{"ACTIVE"===e.state&&e.updateAt!==n&&(e.state="INACTIVE",i.push(e))})),this.state!==xl.INITEND)return r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));No(i).call(i,(e=>{switch(e.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Ml.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(Ml.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Ml.PLAYOUT_DEVICE_CHANGED,e)}})),r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=rs(e).call(e,(e=>"audioinput"===e.kind));e=rs(e).call(e,(e=>"videoinput"===e.kind));const n={audio:!1,video:!1};for(const i of t)if(i.label&&i.deviceId){n.audio=!0;break}for(const i of e)if(i.label&&i.deviceId){n.video=!0;break}return n}};var Yh=_r("Array").entries,Hh=Array.prototype,Kh={DOMTokenList:!0,NodeList:!0},Wh=function(e){var t=e.entries;return e===Hh||e instanceof Array&&t===Hh.entries||Kh.hasOwnProperty(Dr(e))?Yh:t};let zh=!1,qh=new Ch,Jh="play playing loadeddata canplay pause stalled suspend waiting abort emptied ended".split(" "),Xh=new class{constructor(){this.elementMap=new Ao,this.elementStateMap=new Ao,this.elementsNeedToResume=[],this.sinkIdMap=new Ao,this.autoResumeAfterInterruption=()=>{var e,t;No(e=vh(Wh(t=this.elementMap).call(t))).call(e,(([e,t])=>{e=this.elementStateMap.get(e);const n=t.srcObject.getAudioTracks()[0];ae()?n&&"live"===n.readyState&&"running"===Uh.curState&&(Tl.debug("auto resume after interruption for iOS 15"),t.pause(),t.play()):e&&"pause"===e&&n&&"live"===n.readyState&&"running"===Uh.curState&&(Tl.debug("auto resume after interruption for iOS"),t.play())}))},this.autoResumeAfterInterruptionOnIOS15=()=>{var e,t;No(e=vh(Wh(t=this.elementMap).call(t))).call(e,(([,e])=>{const t=e.srcObject.getAudioTracks()[0];t&&"live"===t.readyState&&(Tl.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),e.pause(),e.play())}))},this.autoResumeAudioElement(),Uh.on(Dh.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Uh.on(Dh.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}async setSinkID(e,t){const n=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),n)try{await n.setSinkId(t)}catch(i){throw new wl(zd.PERMISSION_DENIED,"can not set sink id: "+i.toString())}}play(e,t,n){if(!this.elementMap.has(t)){var i=document.createElement("audio");i.autoplay=!0,i.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,i),this.elementMap.set(t,i),this.elementStateMap.set(t,Nl.INIT),this.setVolume(t,n),(e=this.sinkIdMap.get(t))&&i.setSinkId(e).catch((e=>{Tl.warning("[".concat(t,"] set sink id failed"),e.toString())})),(e=i.play())&&e.then&&e.catch((e=>{Tl.warning("audio element play warning",e.toString()),this.elementMap.has(t)&&"NotAllowedError"===e.name&&(Tl.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(i),jt((()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),ht()})))}))}}updateTrack(e,t){(e=this.elementMap.get(e))&&(e.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)}setVolume(e,t){(e=this.elementMap.get(e))&&(t=Math.max(0,Math.min(100,t)),e.volume=t/100)}stop(e){var t,n;const i=this.elementMap.get(e);if(this.sinkIdMap.delete(e),i){var r=xc(t=this.elementsNeedToResume).call(t,i);kc(n=this.elementsNeedToResume).call(n,r,1),i.srcObject=null,i.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}}bindAudioElementEvents(e,t){No(Jh).call(Jh,(n=>{t.addEventListener(n,(t=>{var n,i;const r=this.elementStateMap.get(e);t=t.type,Tl.debug(Ir(n=Ir(i="[".concat(e,"] audio-element-status change ")).call(i,r," => ")).call(n,t)),this.elementStateMap.set(e,t)}))}))}autoResumeAudioElement(){const e=()=>{var e;No(e=this.elementsNeedToResume).call(e,(e=>{e.play().then((e=>{Tl.debug("Auto resume audio element success")})).catch((e=>{Tl.warning("Auto resume audio element failed!",e)}))})),this.elementsNeedToResume=[]};new Cc((e=>{document.body?e():window.addEventListener("load",(()=>e()))})).then((()=>{document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)}))}};var Zh=function(e,t,n,i){var r,a=arguments.length,o=3>a?t:null===i?i=ts(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(o=(3>a?r(o):3<a?r(t,n,o):r(t,n))||o);return 3<a&&o&&jo(t,n,o),o},$h=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class eA extends Oh{constructor(e,t,n){super(e,n),this.trackMediaType="audio",this._enabled=!0,this._volume=100,this._bypassWebAudio=this._useAudioElement=!1,this._encoderConfig=t,this._source=new Qh(e)}get isPlaying(){return this._useAudioElement?Xh.isPlaying(this.getTrackId()):this._source.isPlayed}setVolume(e){De(e,"volume",0,1e3);let t=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.LOCAL_AUDIO_TRACK_SET_VOLUME,options:[this.getTrackId(),e]},300);this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&Xh.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void Tl.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));let e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,Mt(this,fu.NEED_REPLACE_TRACK,this._mediaStreamTrack).then((()=>{Tl.debug("[".concat(this.getTrackId(),"] replace web audio track success"))})).catch((e=>{Tl.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),e)})))}catch(n){}t.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){let t=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[this.getTrackId(),e]});if(!this._useAudioElement)throw new wl(zd.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{await Xh.setSinkID(this.getTrackId(),e)}catch(n){throw t.onError(n),n}t.onSuccess()}async setEnabled(e,t,n){var i;if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(Tl.info("[".concat(this.getTrackId(),"] start setEnabled"),e),t=await this._enabledMutex.lock(),!e){this._originMediaStreamTrack.enabled=!1;try{await Mt(this,fu.NEED_REMOVE_TRACK,this)}catch(r){throw Tl.error("[".concat(this.getTrackId(),"] setEnabled to false error"),r.toString()),t(),r}return n||(this._enabled=!1),t()}this._originMediaStreamTrack.enabled=!0;try{await Mt(this,fu.NEED_ADD_TRACK,this)}catch(r){throw Tl.error("[".concat(this.getTrackId(),"] setEnabled to true error"),r.toString()),t(),r}Tl.info(Ir(i="[".concat(this.getTrackId(),"] setEnabled to ")).call(i,e," success")),n||(this._enabled=!0),t()}async setMuted(e){var t,n;if(this._bypassWebAudio)return Tl.debug(Ir(n="[".concat(this.getTrackId(),"] setMuted:")).call(n,e," fallback to setEnabled because no pass through.")),void await this.setEnabled(!e);if(e!==this._muted){if(this.stateCheck("muted",e),this._muted=e,X().name===fd.FIREFOX)return Tl.debug("[".concat(this.getTrackId(),"] firefox set mute fallback to set enabled")),void await this.setEnabled(!e,void 0,!0);this._mediaStreamTrack.enabled=!e,Tl.debug(Ir(t="[".concat(this.getTrackId(),"] start set muted: ")).call(t,e)),await Mt(this,fu.SET_AUDIO_TRACK_MUTED,{track:this,muted:e})}}getStats(){return Vt((()=>{Tl.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")}),"localAudioTrackGetStatsWarning"),Qt(this,fu.GET_STATS)||ft({},Zl)}setAudioFrameCallback(e,t=4096){if(!e)return this._source.removeAllListeners(Xl.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Xl.ON_AUDIO_BUFFER),this._source.on(Xl.ON_AUDIO_BUFFER,(t=>e(t)))}play(){let e=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.LOCAL_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});Tl.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(Tl.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Xh.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),e.onSuccess()}stop(){let e=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.LOCAL_AUDIO_TRACK_STOP,options:[this.getTrackId()]});Tl.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Xh.stop(this.getTrackId()):this._source.stop(),e.onSuccess()}close(){super.close(),this._source.destroy()}_updatePlayerSource(){Tl.debug("[".concat(this.getTrackId(),"] update player source track")),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Xh.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),e.addEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=e,this._source.updateTrack(this._originMediaStreamTrack),this._mediaStreamTrack!==this._source.outputTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mt(this,fu.NEED_REPLACE_TRACK,this._mediaStreamTrack)))}renewMediaStreamTrack(){return Cc.resolve(void 0)}}Zh([At(),$h("design:type",Function),$h("design:paramtypes",[String]),$h("design:returntype",Cc)],eA.prototype,"setPlaybackDevice",null),Zh([At(),$h("design:type",Function),$h("design:paramtypes",[Boolean,Object,Boolean]),$h("design:returntype",Cc)],eA.prototype,"setEnabled",null),Zh([At(),$e({report:wh}),$h("design:type",Function),$h("design:paramtypes",[Boolean]),$h("design:returntype",Cc)],eA.prototype,"setMuted",null),Zh([At(),$h("design:type",Function),$h("design:paramtypes",[]),$h("design:returntype",Object)],eA.prototype,"getStats",null),Zh([At(),$h("design:type",Function),$h("design:paramtypes",[Object,Number]),$h("design:returntype",void 0)],eA.prototype,"setAudioFrameCallback",null),Zh([At(),$h("design:type",Function),$h("design:paramtypes",[]),$h("design:returntype",void 0)],eA.prototype,"play",null),Zh([At(),$h("design:type",Function),$h("design:paramtypes",[]),$h("design:returntype",void 0)],eA.prototype,"stop",null);class tA extends eA{constructor(e,t,n,i){super(e,t.encoderConfig?he(t.encoderConfig):{},i),this._deviceName="default",this._enabled=!0,this._config=t,this._constraints=n,this._deviceName=e.label,"boolean"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),ae()&&Uh.bindInterruptDetectorTrack(this)}async setDevice(e){var t,n;let i=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.MIC_AUDIO_TRACK_SET_DEVICE,options:[this.getTrackId(),e]});if(Tl.info(Ir(t="[".concat(this.getTrackId(),"] start set device to ")).call(t,e)),this._enabled)try{let n=await Vh.getDeviceById(e);(t={}).audio=ft({},this._constraints),t.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let i=null;try{i=await ct(t,this.getTrackId())}catch(r){throw Tl.error("[".concat(this.getTrackId(),"] setDevice failed"),r.toString()),i=await ct({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!1),r}await this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!1),this._deviceName=n.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(a){throw i.onError(a),Tl.error("[".concat(this.getTrackId(),"] setDevice error"),a.toString()),a}else try{this._deviceName=(await Vh.getDeviceById(e)).label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(a){throw i.onError(a),Tl.error("[".concat(this.getTrackId(),"] setDevice error"),a.toString()),a}i.onSuccess(),Tl.info(Ir(n="[".concat(this.getTrackId(),"] set device to ")).call(n,e," success"))}async setEnabled(e,t,n){if(t)return Tl.debug("[".concat(this.getTrackId,"] setEnabled false (do not close microphone)")),await super.setEnabled(e);if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(Tl.info("[".concat(this.getTrackId(),"] start setEnabled"),e),t=await this._enabledMutex.lock(),!e){this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),n||(this._enabled=!1);try{await Mt(this,fu.NEED_REMOVE_TRACK,this)}catch(r){throw Tl.error("[".concat(this.getTrackId(),"] setEnabled false failed"),r.toString()),t(),r}return void t()}e=ft({},this._constraints);let i=Vh.searchDeviceIdByName(this._deviceName);i&&!e.deviceId&&(e.deviceId=i);try{let e=await ct({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await Mt(this,fu.NEED_ADD_TRACK,this)}catch(r){throw t(),Tl.error("[".concat(this.getTrackId(),"] setEnabled true failed"),r.toString()),r}n||(this._enabled=!0),Tl.info("[".concat(this.getTrackId(),"] setEnabled success")),t()}close(){super.close(),ae()&&Uh.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((re()||oe())&&this._enabled&&!this._isClosed&&Uh.duringInterruption){let e=async()=>{Uh.off(Dh.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Tl.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Uh.on(Dh.IOS_INTERRUPTION_END,e)}else Tl.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(_u.TRACK_ENDED)}async renewMediaStreamTrack(){var e=ft({},this._constraints);let t=Vh.searchDeviceIdByName(this._deviceName);t&&!e.deviceId&&(e.deviceId=t),e=await ct({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!0)}}Zh([At(),$h("design:type",Function),$h("design:paramtypes",[String]),$h("design:returntype",Cc)],tA.prototype,"setDevice",null),Zh([At(),$h("design:type",Function),$h("design:paramtypes",[Boolean,Boolean,Boolean]),$h("design:returntype",Cc)],tA.prototype,"setEnabled",null);class nA extends eA{constructor(e,t,n,i){super(t.createOutputTrack(),n,i),this.source=e,this._bufferSource=t,this._bufferSource.on(Xl.AUDIO_SOURCE_STATE_CHANGE,(e=>{this.emit(_u.SOURCE_STATE_CHANGE,e)}));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(r){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){let t=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.BUFFER_AUDIO_TRACK_START,options:[this.getTrackId(),e,this.duration]});e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer(),t.onSuccess()}pauseProcessAudioBuffer(){let e=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.BUFFER_AUDIO_TRACK_PAUSE,options:[this.getTrackId()]});this._bufferSource.pauseProcessAudioBuffer(),e.onSuccess()}seekAudioBuffer(e){let t=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.BUFFER_AUDIO_TRACK_SEEK,options:[this.getTrackId()]});this._bufferSource.seekAudioBuffer(e),t.onSuccess()}resumeProcessAudioBuffer(){let e=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.BUFFER_AUDIO_TRACK_RESUME,options:[this.getTrackId()]});this._bufferSource.resumeProcessAudioBuffer(),e.onSuccess()}stopProcessAudioBuffer(){let e=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.BUFFER_AUDIO_TRACK_STOP,options:[this.getTrackId()]});this._bufferSource.stopProcessAudioBuffer(),e.onSuccess()}}Zh([At(),$h("design:type",Function),$h("design:paramtypes",[Object]),$h("design:returntype",void 0)],nA.prototype,"startProcessAudioBuffer",null),Zh([At(),$h("design:type",Function),$h("design:paramtypes",[]),$h("design:returntype",void 0)],nA.prototype,"pauseProcessAudioBuffer",null),Zh([At(),$h("design:type",Function),$h("design:paramtypes",[Number]),$h("design:returntype",void 0)],nA.prototype,"seekAudioBuffer",null),Zh([At(),$h("design:type",Function),$h("design:paramtypes",[]),$h("design:returntype",void 0)],nA.prototype,"resumeProcessAudioBuffer",null),Zh([At(),$h("design:type",Function),$h("design:paramtypes",[]),$h("design:returntype",void 0)],nA.prototype,"stopProcessAudioBuffer",null);class iA extends eA{constructor(){let e=tt().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,Bt(8,"track-mix-"));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(t){}this.destNode=e,this.trackList=[]}get isActive(){var e;return!(!this.trackList.length||!Kc(e=this.trackList).call(e,(e=>!e.muted)))}getSubTrackLabels(){var e;return Rc(e=this.trackList).call(e,(e=>e.getTrackLabel()))}hasAudioTrack(e){var t;return-1!==xc(t=this.trackList).call(t,e)}addAudioTrack(e){var t;-1===xc(t=this.trackList).call(t,e)?(Tl.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):Tl.debug("track ".concat(e.getTrackId()," is already added"))}removeAudioTrack(e){var t;if(-1!==xc(t=this.trackList).call(t,e)){Tl.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(n){}Ft(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){var e;let t={};No(e=this.trackList).call(e,(e=>{e._encoderConfig&&((e._encoderConfig.bitrate||0)>(t.bitrate||0)&&(t.bitrate=e._encoderConfig.bitrate),(e._encoderConfig.sampleRate||0)>(t.sampleRate||0)&&(t.sampleRate=e._encoderConfig.sampleRate),(e._encoderConfig.sampleSize||0)>(t.sampleSize||0)&&(t.sampleSize=e._encoderConfig.sampleSize),e._encoderConfig.stereo&&(t.stereo=!0))})),this._encoderConfig=t}}class rA extends Ch{constructor(){super(...arguments),this.resultStorage=new Ao}setLocalAudioStats(e,t,n){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(n,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(n,t))}setLocalVideoStats(e,t,n){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(n,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(n,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(n))}setRemoteAudioStats(e,t){e=e.getUserId(),this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",e,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){e=e.getUserId(),this.record("RECV_VIDEO_DECODE_FAILED",e,this.checkVideoDecode(t))}record(e,t,n){this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});let i=this.resultStorage.get(e);var r;i&&(i.result.push(n),5<=i.result.length)&&(n=nd(r=i.result).call(r,!0),i.isPrevNormal&&!n&&this.emit("exception",aA[e],e,t),!i.isPrevNormal&&n&&this.emit("exception",aA[e]+2e3,e+"_RECOVER",t),i.isPrevNormal=n,i.result=[])}checkAudioOutputLevel(e){return!(0<e.receiveBitrate&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof iA&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}checkFramerateInput(e,t){let n=null;return t._encoderConfig&&t._encoderConfig.frameRate&&(n=Ct(t._encoderConfig.frameRate)),e=e.captureFrameRate,!n||!e||!(10<n&&5>e||10>n&&5<=n&&1>=e)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&5<e.captureFrameRate&&1>=e.sendFrameRate)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof iA&&!t.isActive||!!t.muted||0!==e.sendBitrate}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}let aA={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003};class oA{constructor(e){this.localConnectionsMap=new Ao,this.remoteConnectionsMap=new Ao,this.trafficStatsPeerList=[],this.updateStats=()=>{var e,t;No(e=this.remoteConnectionsMap).call(e,(e=>{var t;let n=e.audioStats;var i=e.videoStats,r=e.pcStats;let a=_t({},eu),o=_t({},nu),s=_t({},tu),c=e.connection.pc.getStats(),d=c.audioRecv[0],l=c.videoRecv[0];r=r?r.videoRecv[0]:void 0;let u=!0===e.connection.pc._statsFilter.videoIsReady,h=this.trafficStats&&Kc(t=this.trafficStats.peer_delay).call(t,(t=>t.peer_uid===e.connection.getUserId()));d&&("opus"!==d.codec&&"aac"!==d.codec||(a.codecType=d.codec),d.outputLevel?a.receiveLevel=Math.round(32767*d.outputLevel):e.connection.user.audioTrack&&(a.receiveLevel=Math.round(32767*e.connection.user.audioTrack.getVolumeLevel())),a.receiveBytes=d.bytes,a.receivePackets=d.packets,a.receivePacketsLost=d.packetsLost,a.packetLossRate=a.receivePacketsLost/(a.receivePackets+a.receivePacketsLost),a.receiveBitrate=n?8*Math.max(0,a.receiveBytes-n.receiveBytes):0,a.totalDuration=n?n.totalDuration+1:1,a.totalFreezeTime=n?n.totalFreezeTime:0,a.freezeRate=a.totalFreezeTime/a.totalDuration,a.receiveDelay=d.jitterBufferMs,t=e.connection.user.audioTrack,10<a.totalDuration&&oA.isRemoteAudioFreeze(t)&&(a.totalFreezeTime+=1)),l&&("H264"!==l.codec&&"VP8"!==l.codec&&"VP9"!==l.codec&&"AV1X"!==l.codec||(o.codecType=l.codec),o.receiveBytes=l.bytes,o.receiveBitrate=i?8*Math.max(0,o.receiveBytes-i.receiveBytes):0,o.decodeFrameRate=l.decodeFrameRate,o.renderFrameRate=l.decodeFrameRate,l.outputFrame&&(o.renderFrameRate=l.outputFrame.frameRate),l.receivedFrame?(o.receiveFrameRate=l.receivedFrame.frameRate,o.receiveResolutionHeight=l.receivedFrame.height,o.receiveResolutionWidth=l.receivedFrame.width):e.connection.user.videoTrack&&(o.receiveResolutionHeight=e.connection.user.videoTrack._videoHeight||0,o.receiveResolutionWidth=e.connection.user.videoTrack._videoWidth||0),void 0!==l.framesRateFirefox&&(o.receiveFrameRate=Math.round(l.framesRateFirefox)),o.receivePackets=l.packets,o.receivePacketsLost=l.packetsLost,o.packetLossRate=o.receivePacketsLost/(o.receivePackets+o.receivePacketsLost),o.totalDuration=i?i.totalDuration+1:1,o.totalFreezeTime=i?i.totalFreezeTime:0,o.receiveDelay=l.jitterBufferMs||0,i=e.connection.user.videoTrack,e.connection.subscribeOptions.video&&u&&oA.isRemoteVideoFreeze(i,l,r)&&(o.totalFreezeTime+=1),o.freezeRate=o.totalFreezeTime/o.totalDuration),h&&(a.end2EndDelay=h.B_ad,o.end2EndDelay=h.B_vd,a.transportDelay=h.B_ed,o.transportDelay=h.B_ed,a.currentPacketLossRate=h.B_ealr4/100,o.currentPacketLossRate=h.B_evlr4/100,s.uplinkNetworkQuality=h.B_punq?h.B_punq:0,s.downlinkNetworkQuality=h.B_pdnq?h.B_punq:0),e.audioStats=a,e.videoStats=o,e.pcStats=c,e.networkStats=s,e.connection.user.audioTrack&&this.exceptionMonitor.setRemoteAudioStats(e.connection.user.audioTrack,a),e.connection.user.videoTrack&&this.exceptionMonitor.setRemoteVideoStats(e.connection.user.videoTrack,o)})),No(t=this.localConnectionsMap).call(t,(e=>{let t=e.audioStats,n=e.videoStats,i=_t({},Zl),r=_t({},$l);var a=e.connection.pc.getStats();let o=a.audioSend[0];a=a.videoSend[0];let s=e.connection.getUserId();o&&("opus"!==o.codec&&"aac"!==o.codec||(i.codecType=o.codec),o.inputLevel?i.sendVolumeLevel=Math.round(32767*o.inputLevel):e.connection.audioTrack&&(i.sendVolumeLevel=Math.round(32767*e.connection.audioTrack.getVolumeLevel())),i.sendBytes=o.bytes,i.sendPackets=o.packets,i.sendPacketsLost=o.packetsLost,i.sendBitrate=t?8*Math.max(0,i.sendBytes-t.sendBytes):0),a&&("H264"!==a.codec&&"VP8"!==a.codec&&"VP9"!==a.codec&&"AV1X"!==a.codec||(r.codecType=a.codec),r.sendBytes=a.bytes,r.sendBitrate=n?8*Math.max(0,r.sendBytes-n.sendBytes):0,a.inputFrame?(r.captureFrameRate=a.inputFrame.frameRate,r.captureResolutionHeight=a.inputFrame.height,r.captureResolutionWidth=a.inputFrame.width):e.connection.videoTrack&&(r.captureResolutionWidth=e.connection.videoTrack._videoWidth||0,r.captureResolutionHeight=e.connection.videoTrack._videoHeight||0),a.sentFrame?(r.sendFrameRate=a.sentFrame.frameRate,r.sendResolutionHeight=a.sentFrame.height,r.sendResolutionWidth=a.sentFrame.width):e.connection.videoTrack&&(r.sendResolutionWidth=e.connection.videoTrack._videoWidth||0,r.sendResolutionHeight=e.connection.videoTrack._videoHeight||0),a.avgEncodeMs&&(r.encodeDelay=a.avgEncodeMs),e.connection.videoTrack&&e.connection.videoTrack._encoderConfig&&e.connection.videoTrack._encoderConfig.bitrateMax&&(r.targetSendBitrate=1e3*e.connection.videoTrack._encoderConfig.bitrateMax),r.sendPackets=a.packets,r.sendPacketsLost=a.packetsLost,r.totalDuration=n?n.totalDuration+1:1,r.totalFreezeTime=n?n.totalFreezeTime:0,this.isLocalVideoFreeze(a)&&(r.totalFreezeTime+=1)),this.trafficStats&&(i.sendPacketsLost=this.trafficStats.B_palr4/100,r.sendPacketsLost=this.trafficStats.B_pvlr4/100),e.audioStats=i,e.videoStats=r,e.audioStats&&e.connection.audioTrack&&this.exceptionMonitor.setLocalAudioStats(s,e.connection.audioTrack,e.audioStats),e.videoStats&&e.connection.videoTrack&&this.exceptionMonitor.setLocalVideoStats(s,e.connection.videoTrack,e.videoStats)}))},this.clientId=e,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new rA,this.exceptionMonitor.on("exception",((e,t,n)=>{this.onStatsException&&this.onStatsException(e,t,n)}))}reset(){this.localConnectionsMap=new Ao,this.remoteConnectionsMap=new Ao,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(e){return(e=this.localConnectionsMap.get(e))&&e.audioStats?e.audioStats:_t({},Zl)}getLocalVideoTrackStats(e){return(e=this.localConnectionsMap.get(e))&&e.videoStats?e.videoStats:_t({},$l)}getRemoteAudioTrackStats(e){var t;let n=this.remoteConnectionsMap.get(e);return n&&n.audioStats?this.trafficStats?((e=Kc(t=this.trafficStats.peer_delay).call(t,(e=>e.peer_uid===n.connection.user.uid)))&&(n.audioStats.publishDuration=e.B_ppad+(el()-this.trafficStats.timestamp)),n.audioStats):n.audioStats:_t({},eu)}getRemoteNetworkQualityStats(e){return(e=this.remoteConnectionsMap.get(e))&&e.networkStats?e.networkStats:_t({},tu)}getRemoteVideoTrackStats(e){var t;let n=this.remoteConnectionsMap.get(e);return n&&n.videoStats?this.trafficStats?((e=Kc(t=this.trafficStats.peer_delay).call(t,(e=>e.peer_uid===n.connection.user.uid)))&&(n.videoStats.publishDuration=e.B_ppvd+(el()-this.trafficStats.timestamp)),n.videoStats):n.videoStats:_t({},nu)}getRTCStats(){var e,t;let n=0,i=0,r=0,a=0;return No(e=this.localConnectionsMap).call(e,(e=>{e.audioStats&&(n+=e.audioStats.sendBytes,i+=e.audioStats.sendBitrate),e.videoStats&&(n+=e.videoStats.sendBytes,i+=e.videoStats.sendBitrate)})),No(t=this.remoteConnectionsMap).call(t,(e=>{e.audioStats&&(r+=e.audioStats.receiveBytes,a+=e.audioStats.receiveBitrate),e.videoStats&&(r+=e.videoStats.receiveBytes,a+=e.videoStats.receiveBitrate)})),e=1,this.trafficStats&&(e+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:e,SendBitrate:i,SendBytes:n,RecvBytes:r,RecvBitrate:a,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}removeConnection(e){this.localConnectionsMap.delete(e),this.remoteConnectionsMap.delete(e)}addLocalConnection(e){let t=e.connectionId;this.localConnectionsMap.has(t)||this.localConnectionsMap.set(t,{connection:e})}addRemoteConnection(e){let t=e.connectionId;this.remoteConnectionsMap.has(t)||this.remoteConnectionsMap.set(t,{connection:e})}updateTrafficStats(e){var t;let n=rs(t=e.peer_delay).call(t,(e=>{var t;return-1===xc(t=this.trafficStatsPeerList).call(t,e.peer_uid)}));No(n).call(n,(e=>{var t,n;let i=Kc(t=vh(mh(n=this.remoteConnectionsMap).call(n))).call(t,(t=>t.connection._userId===e.peer_uid));void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,i?el()-i.connection.startTime:0),this.trafficStatsPeerList.push(e.peer_uid))})),this.trafficStats=e}updateUplinkStats(e){var t;this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&Tl.debug(Ir(t="[".concat(this.clientId,"]: Period fir changes to ")).call(t,e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,n){return!!e&&(e=!n||t.framesDecodeCount>n.framesDecodeCount,!!n&&t.framesDecodeFreezeTime>n.framesDecodeFreezeTime||!e)}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&5<e.inputFrame.frameRate&&3>e.sentFrame.frameRate}}var sA;let cA=()=>{},dA={},lA=new class{constructor(){this.fnMap=new Ao}throttleByKey(e,t,n,i,...r){if(this.fnMap.has(t)){var a=this.fnMap.get(t);a.threshold!==n?(a.fn(...a.args),clearTimeout(a.timer),a=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n),this.fnMap.set(t,{fn:e,threshold:n,timer:a,args:r,skipFn:i})):(a.skipFn&&a.skipFn(...a.args),this.fnMap.set(t,Nt({},a,{fn:e,args:r,skipFn:i})))}else a=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n),this.fnMap.set(t,{fn:e,threshold:n,timer:a,args:r,skipFn:i})}},uA=Xc(sA=lA.throttleByKey).call(sA,lA),hA=async({fragementLength:e,referenceList:t,asyncMapHandler:n,allFailedhandler:i,promisesCollector:r})=>{let a,o=0,s=0;const c=async()=>{const d=(()=>{var i=o*e;const r=i+e;return i=jc(t).call(t,i,r),Rc(i).call(i,n)})();r&&r.push(...d);try{a=await Ut(d)}catch(l){if(s+=e,o++,!(s>=t.length))return void await c();i(l)}No(d).call(d,(e=>e.cancel()))};return await c(),a},AA={[Ql.ACCESS_POINT]:{[Gl.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[Gl.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[Gl.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[Gl.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[Gl.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[Ql.UNILBS]:{[Fl.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Fl.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Fl.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Fl.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Fl.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Fl.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Fl.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Fl.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Fl.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Fl.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Fl.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Fl.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[Ql.STRING_UID_ALLOCATOR]:{[Pl.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[Pl.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[Pl.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}},pA={[jl.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[jl.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[jl.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[jl.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[jl.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[jl.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[jl.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[jl.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[jl.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[jl.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[jl.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[jl.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[jl.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[jl.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[jl.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[jl.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[jl.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[jl.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[jl.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[jl.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[jl.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[jl.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[jl.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[jl.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[jl.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[jl.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[jl.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[jl.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[jl.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[jl.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[jl.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[jl.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[jl.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[jl.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[jl.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[jl.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[jl.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[jl.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[jl.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[jl.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[jl.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[jl.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[jl.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[jl.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[jl.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[jl.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[jl.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[jl.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[jl.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[jl.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[jl.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[jl.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[jl.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[jl.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[jl.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[jl.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"}};var fA=e((function(e,t){e.exports=function(){function e(e){for(var t=e.length,n=0,i=0;i<t;){var r=e.charCodeAt(i++);if(0!=(4294967168&r))if(0==(4294965248&r))n+=2;else{if(55296<=r&&56319>=r&&i<t){var a=e.charCodeAt(i);56320==(64512&a)&&(++i,r=((1023&r)<<10)+(1023&a)+65536)}n+=0==(4294901760&r)?3:4}else n++}return n}function t(e,t,n){n=t+n;for(var i=[],r="";t<n;){var a=e[t++];if(0==(128&a))i.push(a);else if(192==(224&a)){var o=63&e[t++];i.push((31&a)<<6|o)}else if(224==(240&a)){o=63&e[t++];var s=63&e[t++];i.push((31&a)<<12|o<<6|s)}else 240==(248&a)?(65535<(a=(7&a)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a)):i.push(a);4096<=i.length&&(r+=String.fromCharCode.apply(String,y([],C(i))),i.length=0)}return 0<i.length&&(r+=String.fromCharCode.apply(String,y([],C(i)))),r}function i(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}function r(e){var t,n=e.sec;if(e=e.nsec,0<=n&&0<=e&&17179869183>=n){if(0===e&&4294967295>=n){var i=new Uint8Array(4);return new DataView(i.buffer).setUint32(0,n),i}var r=n/4294967296;return n&=4294967295,i=new Uint8Array(8),(t=new DataView(i.buffer)).setUint32(0,e<<2|3&r),t.setUint32(4,n),i}return i=new Uint8Array(12),(t=new DataView(i.buffer)).setUint32(0,e),t.setUint32(4,Math.floor(n/4294967296)),t.setUint32(8,n),i}function a(e){var t=e.getTime();t=1e6*(t-1e3*(e=Math.floor(t/1e3)));var n=Math.floor(t/1e9);return{sec:e+n,nsec:t-1e9*n}}function o(e){return e instanceof Date?r(a(e)):null}function s(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:return{sec:4294967296*(3&(e=t.getUint32(0)))+t.getUint32(4),nsec:e>>>2};case 12:return{sec:i(t,4),nsec:t.getUint32(0)};default:throw Error("Unrecognized data size for timestamp: "+e.length)}}function c(e){return e=s(e),new Date(1e3*e.sec+e.nsec/1e6)}function d(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}function l(e,t){return void 0===t&&(t=x),new U(t.extensionCodec,t.context,t.maxDepth,t.initialBufferSize,t.sortKeys,t.forceFloat32,t.ignoreUndefined,t.forceIntegerToFloat).encode(e)}function u(e){return(0>e?"-":"")+"0x"+Math.abs(e).toString(16).padStart(2,"0")}function h(e,t){return void 0===t&&(t=q),new z(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decode(e)}function A(e,t){return void 0===t&&(t=q),new z(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeMulti(e)}function p(e){return null!=e[Symbol.asyncIterator]?e:function(e){return Z(this,arguments,(function(){var t,n,i,r;return J(this,(function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,X(t.read())];case 3:return n=a.sent(),i=n.done,r=n.value,i?[4,X(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:if(null==r)throw Error("Assertion Failure: value must not be null nor undefined");return[4,X(r)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e)}function f(e,t){return void 0===t&&(t=q),n=this,i=void 0,a=function(){var n;return function(e,t){function n(n){return function(o){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&n[0]?r.return:n[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((a=0<(a=s.trys).length&&a[a.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3]))s.label=n[1];else if(6===n[0]&&s.label<a[1])s.label=a[1],a=n;else{if(!(a&&s.label<a[2])){a[2]&&s.ops.pop(),s.trys.pop();continue}s.label=a[2],s.ops.push(n)}}n=t.call(e,s)}catch(o){n=[6,o],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}var i,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}(this,(function(i){return n=p(e),[2,new z(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeAsync(n)]}))},new(r=void 0,r=Promise)((function(e,t){function o(e){try{c(a.next(e))}catch(n){t(n)}}function s(e){try{c(a.throw(e))}catch(n){t(n)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,s)}c((a=a.apply(n,i||[])).next())}));var n,i,r,a}function g(e,t){return void 0===t&&(t=q),e=p(e),new z(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeArrayStream(e)}function _(e,t){return void 0===t&&(t=q),e=p(e),new z(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeStream(e)}function m(e,t){return void 0===t&&(t=q),_(e,t)}var E={d:function(e,t){for(var n in t)E.o(t,n)&&!E.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},I={};E.r(I),E.d(I,{DecodeError:function(){return W},Decoder:function(){return z},EXT_TIMESTAMP:function(){return O},Encoder:function(){return U},ExtData:function(){return k},ExtensionCodec:function(){return B},decode:function(){return h},decodeArrayStream:function(){return g},decodeAsync:function(){return f},decodeMulti:function(){return A},decodeMultiStream:function(){return _},decodeStream:function(){return m},decodeTimestampExtension:function(){return c},decodeTimestampToTimeSpec:function(){return s},encode:function(){return l},encodeDateToTimeSpec:function(){return a},encodeTimeSpecToTimestamp:function(){return r},encodeTimestampExtension:function(){return o}});var v,C=function(e,t){var n,i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;e=i.call(e);var r=[];try{for(;(void 0===t||0<t--)&&!(n=e.next()).done;)r.push(n.value)}catch(o){var a={error:o}}finally{try{n&&!n.done&&(i=e.return)&&i.call(e)}finally{if(a)throw a.error}}return r},y=function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},S="undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder,R=S?new TextEncoder:void 0,T=S?"undefined"!=typeof n?200:0:4294967295,w=null!=R&&R.encodeInto?function(e,t,n){R.encodeInto(e,t.subarray(n))}:function(e,t,n){t.set(R.encode(e),n)},b=S?new TextDecoder:null,N=S?"undefined"!=typeof n?200:0:4294967295,k=function(e,t){this.type=e,this.data=t},O=-1,D={type:O,encode:o,decode:c},B=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(D)}return e.prototype.register=function(e){var t=e.type,n=e.encode;e=e.decode,0<=t?(this.encoders[t]=n,this.decoders[t]=e):(t=1+t,this.builtInEncoders[t]=n,this.builtInDecoders[t]=e)},e.prototype.tryToEncode=function(e,t){for(var n=0;n<this.builtInEncoders.length;n++)if(null!=(i=this.builtInEncoders[n])&&null!=(r=i(e,t)))return new k(-1-n,r);for(n=0;n<this.encoders.length;n++){var i,r;if(null!=(i=this.encoders[n])&&null!=(r=i(e,t)))return new k(n,r)}return e instanceof k?e:null},e.prototype.decode=function(e,t,n){var i=0>t?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,n):new k(t,e)},e.defaultCodec=new e,e}(),L=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},U=function(){function t(e,t,n,i,r,a,o,s){void 0===e&&(e=B.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=100),void 0===i&&(i=2048),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===o&&(o=!1),void 0===s&&(s=!1),this.extensionCodec=e,this.context=t,this.maxDepth=n,this.initialBufferSize=i,this.sortKeys=r,this.forceFloat32=a,this.ignoreUndefined=o,this.forceIntegerToFloat=s,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return t.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},t.prototype.reinitializeState=function(){this.pos=0},t.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.getUint8Array()},t.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw Error("Too deep objects in depth "+t);null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},t.prototype.ensureBufferSizeToWrite=function(e){e=this.pos+e,this.view.byteLength<e&&this.resizeBuffer(2*e)},t.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e);e=new Uint8Array(t),t=new DataView(t),e.set(this.bytes),this.view=t,this.bytes=e},t.prototype.encodeNil=function(){this.writeU8(192)},t.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},t.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?0<=e?128>e?this.writeU8(e):256>e?(this.writeU8(204),this.writeU8(e)):65536>e?(this.writeU8(205),this.writeU16(e)):4294967296>e?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):-32<=e?this.writeU8(224|e+32):-128<=e?(this.writeU8(208),this.writeI8(e)):-32768<=e?(this.writeU8(209),this.writeI16(e)):-2147483648<=e?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},t.prototype.writeStringHeader=function(e){if(32>e)this.writeU8(160+e);else if(256>e)this.writeU8(217),this.writeU8(e);else if(65536>e)this.writeU8(218),this.writeU16(e);else{if(!(4294967296>e))throw Error("Too long string: "+e+" bytes in UTF-8");this.writeU8(219),this.writeU32(e)}},t.prototype.encodeString=function(t){if(t.length>T){var n=e(t);this.ensureBufferSizeToWrite(5+n),this.writeStringHeader(n),w(t,this.bytes,this.pos)}else{n=e(t),this.ensureBufferSizeToWrite(5+n),this.writeStringHeader(n);for(var i=this.bytes,r=t.length,a=this.pos,o=0;o<r;){var s=t.charCodeAt(o++);if(0!=(4294967168&s)){if(0==(4294965248&s))i[a++]=s>>6&31|192;else{if(55296<=s&&56319>=s&&o<r){var c=t.charCodeAt(o);56320==(64512&c)&&(++o,s=((1023&s)<<10)+(1023&c)+65536)}0==(4294901760&s)?(i[a++]=s>>12&15|224,i[a++]=s>>6&63|128):(i[a++]=s>>18&7|240,i[a++]=s>>12&63|128,i[a++]=s>>6&63|128)}i[a++]=63&s|128}else i[a++]=s}}this.pos+=n},t.prototype.encodeObject=function(e,t){var n=this.extensionCodec.tryToEncode(e,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw Error("Unrecognized object: "+Object.prototype.toString.apply(e));this.encodeMap(e,t)}},t.prototype.encodeBinary=function(e){var t=e.byteLength;if(256>t)this.writeU8(196),this.writeU8(t);else if(65536>t)this.writeU8(197),this.writeU16(t);else{if(!(4294967296>t))throw Error("Too large binary: "+t);this.writeU8(198),this.writeU32(t)}e=d(e),this.writeU8a(e)},t.prototype.encodeArray=function(e,t){var n,i=e.length;if(16>i)this.writeU8(144+i);else if(65536>i)this.writeU8(220),this.writeU16(i);else{if(!(4294967296>i))throw Error("Too large array: "+i);this.writeU8(221),this.writeU32(i)}try{for(var r=L(e),a=r.next();!a.done;a=r.next())this.doEncode(a.value,t+1)}catch(s){var o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}},t.prototype.countWithoutUndefined=function(e,t){var n,i=0;try{for(var r=L(t),a=r.next();!a.done;a=r.next())void 0!==e[a.value]&&i++}catch(s){var o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},t.prototype.encodeMap=function(e,t){var n,i=Object.keys(e);this.sortKeys&&i.sort();var r=this.ignoreUndefined?this.countWithoutUndefined(e,i):i.length;if(16>r)this.writeU8(128+r);else if(65536>r)this.writeU8(222),this.writeU16(r);else{if(!(4294967296>r))throw Error("Too large map object: "+r);this.writeU8(223),this.writeU32(r)}try{for(var a=L(i),o=a.next();!o.done;o=a.next()){var s=o.value,c=e[s];this.ignoreUndefined&&void 0===c||(this.encodeString(s),this.doEncode(c,t+1))}}catch(l){var d={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(d)throw d.error}}},t.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(256>t)this.writeU8(199),this.writeU8(t);else if(65536>t)this.writeU8(200),this.writeU16(t);else{if(!(4294967296>t))throw Error("Too large extension object: "+t);this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},t.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},t.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},t.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},t.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},t.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},t.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},t.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},t.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},t.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},t.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8);var t=this.view,n=this.pos;t.setUint32(n,e/4294967296),t.setUint32(n+4,e),this.pos+=8},t.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8);var t=this.view,n=this.pos;t.setUint32(n,Math.floor(e/4294967296)),t.setUint32(n+4,e),this.pos+=8},t}(),x={};S=function(){function e(e,t){for(void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.miss=this.hit=0,this.caches=[],e=0;e<this.maxKeyLength;e++)this.caches.push([])}return e.prototype.canBeCached=function(e){return 0<e&&e<=this.maxKeyLength},e.prototype.find=function(e,t,n){var i,r=this.caches[n-1];try{var a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),o=a.next();e:for(;!o.done;o=a.next()){var s=o.value,c=s.bytes;for(r=0;r<n;r++)if(c[r]!==e[t+r])continue e;return s.str}}catch(l){var d={error:l}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(d)throw d.error}}return null},e.prototype.store=function(e,t){var n=this.caches[e.length-1];e={bytes:e,str:t},n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=e:n.push(e)},e.prototype.decode=function(e,n,i){var r=this.find(e,n,i);return null!=r?(this.hit++,r):(this.miss++,r=t(e,n,i),e=Uint8Array.prototype.slice.call(e,n,n+i),this.store(e,r),r)},e}();var M=(v=function(e,t){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");v(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Q=function(e,t){function n(n){return function(o){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&n[0]?r.return:n[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((a=0<(a=s.trys).length&&a[a.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3]))s.label=n[1];else if(6===n[0]&&s.label<a[1])s.label=a[1],a=n;else{if(!(a&&s.label<a[2])){a[2]&&s.ops.pop(),s.trys.pop();continue}s.label=a[2],s.ops.push(n)}}n=t.call(e,s)}catch(o){n=[6,o],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}var i,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},P=function(e){function t(t){n[t]=e[t]&&function(n){return new Promise((function(i,r){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,r,(n=e[t](n)).done,n.value)}))}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)},F=function(e){return this instanceof F?(this.v=e,this):new F(e)},G=function(e,t,n){function i(e){d[e]&&(c[e]=function(t){return new Promise((function(n,i){1<l.push([e,t,n,i])||r(e,t)}))})}function r(e,t){try{(n=d[e](t)).value instanceof F?Promise.resolve(n.value.v).then(a,o):s(l[0][2],n)}catch(i){s(l[0][3],i)}var n}function a(e){r("next",e)}function o(e){r("throw",e)}function s(e,t){e(t),l.shift(),l.length&&r(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,d=n.apply(e,t||[]),l=[];return c={},i("next"),i("throw"),i("return"),c[Symbol.asyncIterator]=function(){return this},c},j=new DataView(new ArrayBuffer(0)),V=new Uint8Array(j.buffer);e:{try{j.getInt8(0)}catch($){var Y=$.constructor;break e}throw Error("never reached")}var H=new Y("Insufficient data"),K=new S,W=function(e){function t(n){n=e.call(this,n)||this;var i=Object.create(t.prototype);return Object.setPrototypeOf(n,i),Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:t.name}),n}return M(t,e),t}(Error),z=function(){function e(e,t,n,i,r,a,o,s){void 0===e&&(e=B.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=4294967295),void 0===i&&(i=4294967295),void 0===r&&(r=4294967295),void 0===a&&(a=4294967295),void 0===o&&(o=4294967295),void 0===s&&(s=K),this.extensionCodec=e,this.context=t,this.maxStrLength=n,this.maxBinLength=i,this.maxArrayLength=r,this.maxMapLength=a,this.maxExtLength=o,this.keyDecoder=s,this.pos=this.totalPos=0,this.view=j,this.bytes=V,this.headByte=-1,this.stack=[]}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=d(e),(e=this.bytes)instanceof ArrayBuffer?e=new DataView(e):(e=d(e),e=new DataView(e.buffer,e.byteOffset,e.byteLength)),this.view=e,this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining()){var t=this.bytes.subarray(this.pos);e=d(e);var n=new Uint8Array(t.length+e.length);n.set(t),n.set(e,t.length),this.setBuffer(n)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return void 0===e&&(e=1),this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view;return new RangeError("Extra "+(t.byteLength-this.pos)+" of "+t.byteLength+" byte(s) found at buffer["+e+"]")},e.prototype.decode=function(e){if(this.reinitializeState(),this.setBuffer(e),e=this.doDecodeSync(),this.hasRemaining())throw this.createExtraByteError(this.pos);return e},e.prototype.decodeMulti=function(e){return Q(this,(function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining()?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}}))},e.prototype.decodeAsync=function(e){var t,n,i,r,a,o,s;return a=this,s=function(){var a,o,s,c,d,l,h,A;return Q(this,(function(p){switch(p.label){case 0:a=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),t=P(e),p.label=2;case 2:return[4,t.next()];case 3:if((n=p.sent()).done)return[3,5];if(s=n.value,a)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s);try{o=this.doDecodeSync(),a=!0}catch(f){if(!(f instanceof Y))throw f}this.totalPos+=this.pos,p.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return c=p.sent(),i={error:c},[3,12];case 7:return p.trys.push([7,,10,11]),n&&!n.done&&(r=t.return)?[4,r.call(t)]:[3,9];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(i)throw i.error;return[7];case 11:return[7];case 12:if(a){if(this.hasRemaining())throw this.createExtraByteError(this.totalPos);return[2,o]}throw l=(d=this).headByte,h=d.pos,A=d.totalPos,new RangeError("Insufficient data in parsing "+u(l)+" at "+A+" ("+h+" in the current buffer)")}}))},new(o=void 0,o=Promise)((function(e,t){function n(e){try{r(s.next(e))}catch(n){t(n)}}function i(e){try{r(s.throw(e))}catch(n){t(n)}}function r(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(n,i)}r((s=s.apply(a,[])).next())}))},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return G(this,arguments,(function(){var n,i,r,a,o,s,c,d,l;return Q(this,(function(u){switch(u.label){case 0:n=t,i=-1,u.label=1;case 1:u.trys.push([1,13,14,19]),r=P(e),u.label=2;case 2:return[4,F(r.next())];case 3:if((a=u.sent()).done)return[3,12];if(o=a.value,t&&0===i)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o),n&&(i=this.readArraySize(),n=!1,this.complete()),u.label=4;case 4:u.trys.push([4,9,,10]),u.label=5;case 5:return[4,F(this.doDecodeSync())];case 6:return[4,u.sent()];case 7:return u.sent(),0==--i?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((s=u.sent())instanceof Y))throw s;return[3,10];case 10:this.totalPos+=this.pos,u.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return c=u.sent(),d={error:c},[3,19];case 14:return u.trys.push([14,,17,18]),a&&!a.done&&(l=r.return)?[4,F(l.call(r))]:[3,16];case 15:u.sent(),u.label=16;case 16:return[3,18];case 17:if(d)throw d.error;return[7];case 18:return[7];case 19:return[2]}}))}))},e.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte();if(224<=e)e-=256;else if(192>e){if(!(128>e))if(144>e){if(0!=(e-=128)){this.pushMapState(e),this.complete();continue e}e={}}else if(160>e){if(0!=(e-=144)){this.pushArrayState(e),this.complete();continue e}e=[]}else e-=160,e=this.decodeUtf8String(e,0)}else if(192===e)e=null;else if(194===e)e=!1;else if(195===e)e=!0;else if(202===e)e=this.readF32();else if(203===e)e=this.readF64();else if(204===e)e=this.readU8();else if(205===e)e=this.readU16();else if(206===e)e=this.readU32();else if(207===e)e=this.readU64();else if(208===e)e=this.readI8();else if(209===e)e=this.readI16();else if(210===e)e=this.readI32();else if(211===e)e=this.readI64();else if(217===e)e=this.lookU8(),e=this.decodeUtf8String(e,1);else if(218===e)e=this.lookU16(),e=this.decodeUtf8String(e,2);else if(219===e)e=this.lookU32(),e=this.decodeUtf8String(e,4);else if(220===e){if(0!==(e=this.readU16())){this.pushArrayState(e),this.complete();continue e}e=[]}else if(221===e){if(0!==(e=this.readU32())){this.pushArrayState(e),this.complete();continue e}e=[]}else if(222===e){if(0!==(e=this.readU16())){this.pushMapState(e),this.complete();continue e}e={}}else if(223===e){if(0!==(e=this.readU32())){this.pushMapState(e),this.complete();continue e}e={}}else if(196===e)e=this.lookU8(),e=this.decodeBinary(e,1);else if(197===e)e=this.lookU16(),e=this.decodeBinary(e,2);else if(198===e)e=this.lookU32(),e=this.decodeBinary(e,4);else if(212===e)e=this.decodeExtension(1,0);else if(213===e)e=this.decodeExtension(2,0);else if(214===e)e=this.decodeExtension(4,0);else if(215===e)e=this.decodeExtension(8,0);else if(216===e)e=this.decodeExtension(16,0);else if(199===e)e=this.lookU8(),e=this.decodeExtension(e,1);else if(200===e)e=this.lookU16(),e=this.decodeExtension(e,2);else{if(201!==e)throw new W("Unrecognized type byte: "+u(e));e=this.lookU32(),e=this.decodeExtension(e,4)}this.complete();for(var t=this.stack;0<t.length;){var n=t[t.length-1];if(0===n.type){if(n.array[n.position]=e,n.position++,n.position!==n.size)continue e;t.pop(),e=n.array}else{if(1===n.type){if("string"!=(i=typeof e)&&"number"!==i)throw new W("The type of key must be string or number but "+typeof e);if("__proto__"===e)throw new W("The key __proto__ is not allowed");n.key=e,n.type=2;continue e}if(n.map[n.key]=e,n.readCount++,n.readCount!==n.size){n.key=null,n.type=1;continue e}t.pop(),e=n.map}}return e}var i},e.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(160>e)return e-144;throw new W("Unrecognized array type byte: "+u(e))}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new W("Max length exceeded: map length ("+e+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new W("Max length exceeded: array length ("+e+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:e,array:Array(e),position:0})},e.prototype.decodeUtf8String=function(e,n){var i;if(e>this.maxStrLength)throw new W("Max length exceeded: UTF-8 byte length ("+e+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+n+e)throw H;var r,a=this.pos+n;return this.stateIsMapKey()&&null!==(i=this.keyDecoder)&&void 0!==i&&i.canBeCached(e)?i=this.keyDecoder.decode(this.bytes,a,e):e>N?(i=this.bytes.subarray(a,a+e),i=b.decode(i)):i=t(this.bytes,a,e),r=i,this.pos+=n+e,r},e.prototype.stateIsMapKey=function(){return 0<this.stack.length&&1===this.stack[this.stack.length-1].type},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new W("Max length exceeded: bin length ("+e+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(e+t))throw H;var n=this.pos+t;return n=this.bytes.subarray(n,n+e),this.pos+=t+e,n},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new W("Max length exceeded: ext length ("+e+") > maxExtLength ("+this.maxExtLength+")");var n=this.view.getInt8(this.pos+t);return e=this.decodeBinary(e,t+1),this.extensionCodec.decode(e,n,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e,t,n=(e=this.view,t=this.pos,4294967296*e.getUint32(t)+e.getUint32(t+4));return this.pos+=8,n},e.prototype.readI64=function(){var e=i(this.view,this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},e}(),q={},J=function(e,t){function n(n){return function(o){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&n[0]?r.return:n[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((a=0<(a=s.trys).length&&a[a.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3]))s.label=n[1];else if(6===n[0]&&s.label<a[1])s.label=a[1],a=n;else{if(!(a&&s.label<a[2])){a[2]&&s.ops.pop(),s.trys.pop();continue}s.label=a[2],s.ops.push(n)}}n=t.call(e,s)}catch(o){n=[6,o],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}var i,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},X=function(e){return this instanceof X?(this.v=e,this):new X(e)},Z=function(e,t,n){function i(e){d[e]&&(c[e]=function(t){return new Promise((function(n,i){1<l.push([e,t,n,i])||r(e,t)}))})}function r(e,t){try{(n=d[e](t)).value instanceof X?Promise.resolve(n.value.v).then(a,o):s(l[0][2],n)}catch(i){s(l[0][3],i)}var n}function a(e){r("next",e)}function o(e){r("throw",e)}function s(e,t){e(t),l.shift(),l.length&&r(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,d=n.apply(e,t||[]),l=[];return c={},i("next"),i("throw"),i("return"),c[Symbol.asyncIterator]=function(){return this},c};return I}()})),gA=Math.min;bi({target:"Array",proto:!0},{copyWithin:[].copyWithin||function(e,t){var n=Gi(this),i=Ki(n.length),r=ma(e,i),a=ma(t,i),o=2<arguments.length?arguments[2]:void 0;for(i=gA((void 0===o?i:ma(o,i))-a,i-r),o=1,a<r&&r<a+i&&(o=-1,a+=i-1,r+=i-1);0<i--;)a in n?n[r]=n[a]:delete n[r],r+=o,a+=o;return n}});var _A=_r("Array").copyWithin,mA=Array.prototype;bi({target:"Array",proto:!0,forced:So("every")},{every:function(e){return zr(this,e,1<arguments.length?arguments[1]:void 0)}});var EA=_r("Array").every,IA=Array.prototype,vA=function(e){var t=e.every;return e===IA||e instanceof Array&&t===IA.every?EA:t},CA=yr.getWeakData,yA=ua.set,SA=ua.getterFor,RA=0,TA=function(e){return e.frozen||(e.frozen=new wA)},wA=function(){this.entries=[]},bA=function(e,t){return qr(e.entries,(function(e){return e[0]===t}))};wA.prototype={get:function(e){if(e=bA(this,e))return e[1]},has:function(e){return!!bA(this,e)},set:function(e,t){var n=bA(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=Jr(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}};var NA={getConstructor:function(e,t,n,i){var r=e((function(e,a){Mr(e,r,t),yA(e,{type:t,id:RA++,frozen:void 0}),null!=a&&xr(a,e[i],e,n)})),a=SA(t),o=function(e,t,n){var i=a(e),r=CA(Ci(t),!0);return!0===r?TA(i).set(t,n):r[i.id]=n,e};return Ua(r.prototype,{delete:function(e){var t=a(this);if(!ri(e))return!1;var n=CA(e);return!0===n?TA(t).delete(e):n&&si(n,t.id)&&delete n[t.id]},has:function(e){var t=a(this);if(!ri(e))return!1;var n=CA(e);return!0===n?TA(t).has(e):n&&si(n,t.id)}}),Ua(r.prototype,n?{get:function(e){var t=a(this);if(ri(e)){var n=CA(e);return!0===n?TA(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return o(this,e,t)}}:{add:function(e){return o(this,e,!0)}}),r}},kA=(e((function(e){var t=ua.enforce,n=!Hn.ActiveXObject&&"ActiveXObject"in Hn,i=Object.isExtensible,r=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}};if(e=e.exports=fa("WeakMap",r,NA),$r&&n){var a=NA.getConstructor(r,"WeakMap",!0);yr.REQUIRED=!0;var o=(n=e.prototype).delete,s=n.has,c=n.get,d=n.set;Ua(n,{delete:function(e){if(ri(e)&&!i(e)){var n=t(this);return n.frozen||(n.frozen=new a),o.call(this,e)||n.frozen.delete(e)}return o.call(this,e)},has:function(e){if(ri(e)&&!i(e)){var n=t(this);return n.frozen||(n.frozen=new a),s.call(this,e)||n.frozen.has(e)}return s.call(this,e)},get:function(e){if(ri(e)&&!i(e)){var n=t(this);return n.frozen||(n.frozen=new a),s.call(this,e)?c.call(this,e):n.frozen.get(e)}return c.call(this,e)},set:function(e,n){if(ri(e)&&!i(e)){var r=t(this);r.frozen||(r.frozen=new a),s.call(this,e)?d.call(this,e,n):r.frozen.set(e,n)}else d.call(this,e,n);return this}})}})),Math.min),OA=[].lastIndexOf,DA=!!OA&&0>1/[1].lastIndexOf(1,-0),BA=So("lastIndexOf"),LA=DA||BA?function(e){if(DA)return OA.apply(this,arguments)||0;var t=ii(this),n=Ki(t.length),i=n-1;for(1<arguments.length&&(i=kA(i,Yi(arguments[1]))),0>i&&(i=n+i);0<=i;i--)if(i in t&&t[i]===e)return i||0;return-1}:OA;bi({target:"Array",proto:!0,forced:LA!==[].lastIndexOf},{lastIndexOf:LA});var UA=_r("Array").lastIndexOf,xA=Array.prototype,MA=function(e){var t=e.lastIndexOf;return e===xA||e instanceof Array&&t===xA.lastIndexOf?UA:t};let QA,PA,FA,GA=()=>function(e){var t;return e=Rc(t=window.atob(e).split("")).call(t,(e=>e.charCodeAt(0))),new Uint8Array(e,0,e.length/Uint8Array.BYTES_PER_ELEMENT)}("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AAA2AkAgACgCKCABKAJMQQIgACgCIBEAACECIAFBADYCwC0gASACNgJEIAFBgAg2ApwtIAEgACgCKEGACEEEIAAoAiARAAAiAjYCCCABIAEoApwtIgNBAnQ2AgwCQAJAIAEoAjhFDQAgASgCQEUNACACRQ0AIAEoAkQNAQsgAUGaBTYCBCAAQbjfACgCADYCGCAAEAgPCyABQQA2AogBIAFBCTYChAEgAUEIOgAkIAEgAiADQQNsajYCmC0gASACIANBfnFqNgKkLSAAEAkNACAAKAIcIgAgACgCLEEBdDYCPCAAKAJEIgEgACgCTEEBdEECayIDakEAOwEAIAEgAxAgIABBADYCtC0gAEKAgICAIDcCdCAAQgA3AmggAEKAgICAIDcCXCAAQQA2AkggACAAKAKEAUEMbCIBQYTIAGovAQA2ApABIAAgAUGAyABqLwEANgKMASAAIAFBgsgAai8BADYCgAEgACABQYbIAGovAQA2AnwLC6kCAQN/AkAgAEUNACAAKAIgRQ0AIAAoAiQiA0UNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgJBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIAJBmgVGDQAgAkEqRw0BCwJ/An8CfyABKAIIIgIEQCAAKAIoIAIgAxECACAAKAIcIQELIAEoAkQiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAkAiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAjgiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAAoAiggASAAKAIkEQIAIABBADYCHAsLlgIBA39BfiECAkAgAEUNACAAKAIgRQ0AIAAoAiRFDQAgACgCHCIBRQ0AIAEoAgAgAEcNAAJAAkAgASgCBCIDQTlrDjkBAgICAgICAgICAgIBAgICAQICAgICAgICAgICAgICAgICAQICAgICAgICAgICAQICAgICAgICAgEACyADQZoFRg0AIANBKkcNAQsgAEECNgIsIABBADYCCCAAQgA3AhQgAUEANgIUIAEgASgCCDYCECABKAIYIgJBf0wEQCABQQAgAmsiAjYCGAsgAUE5QSpB8QAgAhsgAkECRhs2AgQgAAJ/IAJBAkYEQEEAQQBBABAGDAELQQBBAEEAEAQLNgIwQQAhAiABQQA2AiggARAQCyACC9wIAQt/IAAoAiwiB0GGAmshCyAAKAJ0IQUgByEBA0AgACgCPCAFayAAKAJsIghrIQYgASALaiAITQRAIAAoAjgiASABIAdqIAcgBmsQHxogACAAKAJwIAdrNgJwIAAgACgCbCAHayIINgJsIAAgACgCXCAHazYCXCAAKAJMIgRBAWshCiAAKAJEIARBAXRqIQMgACgCLCEBIARBA3EiAgRAA0AgA0ECayIDQQAgAy8BACIFIAFrIgkgBSAJSRs7AQAgBEEBayEEIAJBAWsiAg0ACwsgCkEDTwRAA0AgA0ECayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EEayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EGayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EIayIDQQAgAy8BACICIAFrIgUgAiAFSRs7AQAgBEEEayIEDQALCyABQQFrIQogACgCQCABQQF0aiEDIAEhBCABQQNxIgIEQANAIANBAmsiA0EAIAMvAQAiBSABayIJIAUgCUkbOwEAIARBAWshBCACQQFrIgINAAsLIApBA08EQANAIANBAmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBGsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBCGsiA0EAIAMvAQAiAiABayIFIAIgBUkbOwEAIARBBGsiBA0ACwsgBiAHaiEGCwJAIAAoAgAiASgCBCIERQ0AIAAoAnQhAiAGIAQgBCAGSxsiAwRAIAAoAjghBSABIAQgA2s2AgQgBSAIaiACaiABKAIAIAMQHyEEAkACQAJAIAEoAhwoAhhBAWsOAgABAgsgASABKAIwIAQgAxAENgIwDAELIAEgASgCMCAEIAMQBjYCMAsgASABKAIAIANqNgIAIAEgASgCCCADajYCCCAAKAJ0IQILIAAgAiADaiIFNgJ0AkAgACgCtC0iAyAFakEDSQ0AIAAgACgCOCIJIAAoAmwgA2siAWoiBC0AACICNgJIIAAgACgCVCIIIAQtAAEgAiAAKAJYIgZ0c3EiBDYCSANAIANFDQEgACABIAlqLQACIAQgBnRzIAhxIgQ2AkggACgCQCAAKAI0IAFxQQF0aiAAKAJEIARBAXRqIgIvAQA7AQAgAiABOwEAIAAgA0EBayIDNgK0LSABQQFqIQEgAyAFakECSw0ACwsgBUGFAksNACAAKAIAKAIERQ0AIAAoAiwhAQwBCwsCQCAAKAI8IgQgACgCwC0iAU0NACAAKAJ0IAAoAmxqIgMgAUsEQCAAKAI4IANqIAQgA2siAUGCAiABQYICSRsiARAgIAAgASADajYCwC0PCyADQYICaiIDIAFNDQAgACgCOCABaiAEIAFrIgQgAyABayIBIAEgBEsbIgEQICAAIAAoAsAtIAFqNgLALQsLsSwBCn8CQCAARQ0AIAAoAiBFDQAgACgCJEUNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgNBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIANBmgVGDQAgA0EqRw0BCwJAAkAgACgCDEUNACAAKAIEIgIEQCAAKAIARQ0BCyADQZoFRw0BCyAAQbDfACgCADYCGA8LIAAoAhBFBEAgAEG83wAoAgA2AhgPCyABKAIoIQUgAUEDNgIoAkAgASgCFARAIAEQEwJAIAAoAhAiAyABKAIUIgQgAyAESRsiAkUNACAAKAIMIAEoAhAgAhAfGiAAIAAoAgwgAmo2AgwgASABKAIQIAJqNgIQIAAgACgCFCACajYCFCAAIAAoAhAgAmsiAzYCECABIAEoAhQgAmsiBDYCFCAEDQAgASABKAIINgIQQQAhBAsgAwRAIAEoAgQhAwwCCyABQX82AigPCyACDQAgBUEBdEF3QQAgBUEEShtqQQZIDQAgAEG83wAoAgA2AhgPCwJAAkACQAJAAn8CQAJAAkACQAJAAkAgA0EqRwRAIANBmgVHDQEgACgCBEUNAiAAQbzfACgCADYCGA8LIAEoAjBBDHRBgPABayEDQQAhAgJAIAEoAogBQQFKDQAgASgChAEiBUECSA0AQcAAIQIgBUEGSA0AQYABQcABIAVBBkYbIQILIAEgBEEBajYCFCABKAIIIARqIAIgA3IiAkEgciACIAEoAmwbIgJBCHY6AAAgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQR9wIAJyQR9zOgAAIAEoAmwEQCAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQRh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEQdjoAACAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQQh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAsgAEEAQQBBABAENgIwIAFB8QA2AgQgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBCABKAIEIQMLAkACQAJAAkACQAJAAkAgA0E5RgR/IABBAEEAQQAQBjYCMCABIAEoAhQiAkEBajYCFCACIAEoAghqQR86AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakGLAToAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQg6AAAgASgCHCICDQIgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAAEECIQIgASgChAEiA0EJRwRAQQQgASgCiAFBAUpBAnQgA0ECSBshAgsgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBAzoAACABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIUDQEgASgCBAUgAwtBxQBrDiMCBgYGAwYGBgYGBgYGBgYGBgYGBgYGBAYGBgYGBgYGBgYGBQYLIAFBfzYCKA8LIAIoAiQhAyACKAIcIQQgAigCECEFIAIoAiwhBiACKAIAIQggASABKAIUIgdBAWo2AhRBAiECIAcgASgCCGogBkEAR0EBdCAIQQBHciAFQQBHQQJ0ciAEQQBHQQN0ciADQQBHQQR0cjoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAhwoAgQhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIANBCHY6AAAgASgCHC8BBiEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcLQAHIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABKAIcKAIMIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEoAhwiAigCEAR/IAIoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcBSACCygCLARAIAAgACgCMCABKAIIIAEoAhQQBjYCMAsgAUHFADYCBCABQQA2AiALIAEoAhwiBCgCECIDBEAgASgCFCICIAQvARQgASgCICIGayIFaiABKAIMIgRLBEADQCABKAIIIAJqIAMgBmogBCACayIEEB8aIAEgASgCDCIDNgIUAkAgAiADTw0AIAEoAhwoAixFDQAgACAAKAIwIAEoAgggAmogAyACaxAGNgIwCyABIAEoAiAgBGo2AiAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIGIAMgBkkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQEQCABQX82AigPCyABKAIgIQYgASgCHCgCECEDQQAhAiAFIARrIgUgASgCDCIESw0ACwsgASgCCCACaiADIAZqIAUQHxogASABKAIUIAVqIgM2AhQCQCACIANPDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCACaiADIAJrEAY2AjALIAFBADYCIAsgAUHJADYCBAsgASgCHCgCHARAIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCHCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLAkAgASgCHCgCLEUNACABKAIUIgIgBU0NACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAFBADYCIAsgAUHbADYCBAsCQCABKAIcKAIkRQ0AIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCJCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLIAEoAhwoAixFDQAgASgCFCICIAVNDQAgACAAKAIwIAEoAgggBWogAiAFaxAGNgIwCyABQecANgIECyABKAIcKAIsBEAgASgCDCABKAIUIgJBAmpJBEAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBUEAIQILIAAoAjAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAEEAQQBBABAGNgIwCyABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIURQ0AIAFBfzYCKA8LIAAoAgQNAQsgASgCdA0AIAEoAgRBmgVGDQgLIAEoAoQBIgJFBEAgAUEDEAwMBAsCQAJAIAEoAogBQQJrDgIAAQQLA0ACQAJAIAEoAnQNACABEAogASgCdA0AIAFBADYCtC0MAQsgAUEANgJgIAEoAjggASgCbGotAAAhAiABKAKkLSABKAKgLSIDQQF0akEAOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAjoAACABIAJBAnRqQZQBaiICIAIvAQBBAWo7AQAgASABKAJ0QQFrNgJ0IAEgASgCbEEBaiICNgJsIAEoAqAtIAEoApwtQQFrRw0BIAEgASgCXCIEQQBOBH8gASgCOCAEagVBAAsgAiAEa0EAEBQgASABKAJsNgJcIAEoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAEoAgAoAhANAQwHCwsgASgCoC1FDQcgASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2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CAC2AAgAdgAIAPYACAAOAAgAjgAIAE4ACADOAAgALgAIAK4ACABuAAgA7gAIAB4ACACeAAgAXgAIAN4ACAA+AAgAvgAIAH4ACAD+AAgAAQAIAIEACABBAAgAwQAIACEACAChAAgAYQAIAOEACAARAAgAkQAIAFEACADRAAgAMQAIALEACABxAAgA8QAIAAkACACJAAgASQAIAMkACAApAAgAqQAIAGkACADpAAgAGQAIAJkACABZAAgA2QAIADkACAC5AAgAeQAIAPkACAAFAAgAhQAIAEUACADFAAgAJQAIAKUACABlAAgA5QAIABUACACVAAgAVQAIANUACAA1AAgAtQAIAHUACAD1AAgADQAIAI0ACABNAAgAzQAIAC0ACACtAAgAbQAIAO0ACAAdAAgAnQAIAF0ACADdAAgAPQAIAL0ACAB9AAgA/QAIABMACQATAQkAkwAJAJMBCQBTAAkAUwEJANMACQDTAQkAMwAJADMBCQCzAAkAswEJAHMACQBzAQkA8wAJAPMBCQALAAkACwEJAIsACQCLAQkASwAJAEsBCQDLAAkAywEJACsACQArAQkAqwAJAKsBCQBrAAkAawEJAOsACQDrAQkAGwAJABsBCQCbAAkAmwEJAFsACQBbAQkA2wAJANsBCQA7AAkAOwEJALsACQC7AQkAewAJAHsBCQD7AAkA+wEJAAcACQAHAQkAhwAJAIcBCQBHAAkARwEJAMcACQDHAQkAJwAJACcBCQCnAAkApwEJAGcACQBnAQkA5wAJAOcBCQAXAAkAFwEJAJcACQCXAQkAVwAJAFcBCQDXAAkA1wEJADcACQA3AQkAtwAJALcBCQB3AAkAdwEJAPcACQD3AQkADwAJAA8BCQCPAAkAjwEJAE8ACQBPAQkAzwAJAM8BCQAvAAkALwEJAK8ACQCvAQkAbwAJAG8BCQDvAAkA7wEJAB8ACQAfAQkAnwAJAJ8BCQBfAAkAXwEJAN8ACQDfAQkAPwAJAD8BCQC/AAkAvwEJAH8ACQB/AQkA/wAJAP8BCQAAAAcAQAAHACAABwBgAAcAEAAHAFAABwAwAAcAcAAHAAgABwBIAAcAKAAHAGgABwAYAAcAWAAHADgABwB4AAcABAAHAEQABwAkAAcAZAAHABQABwBUAAcANAAHAHQABwADAAgAgwAIAEMACADDAAgAIwAIAKMACABjAAgA4wAIAAAABQAQAAUACAAFABgABQAEAAUAFAAFAAwABQAcAAUAAgAFABIABQAKAAUAGgAFAAYABQAWAAUADgAFAB4ABQABAAUAEQAFAAkABQAZAAUABQAFABUABQANAAUAHQAFAAMABQATAAUACwAFABsABQAHAAUAFwAFAEHg2QALTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAAAwAAAAQAAAAEAAAABAAAAAQAAAAFAAAABQAAAAUAAAAFAEHQ2gALZQEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAEGA3AALIwIAAAADAAAABwAAAAAAAAAQERIACAcJBgoFCwQMAw0CDgEPAEG03AALaQEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACgAAAAwAAAAOAAAAEAAAABQAAAAYAAAAHAAAACAAAAAoAAAAMAAAADgAAABAAAAAUAAAAGAAAABwAAAAgAAAAKAAAADAAAAA4ABBtN0AC5oCAQAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAAAAAEAAIABAAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAABuZWVkIGRpY3Rpb25hcnkAc3RyZWFtIGVuZAAAZmlsZSBlcnJvcgBzdHJlYW0gZXJyb3IAZGF0YSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBpbmNvbXBhdGlibGUgdmVyc2lvbgAAAAAoLwAAOC8AAEMvAABELwAATy8AAFwvAABnLwAAey8AAIgvAABDLwAAMS4yLjExAEHQ3wALA9AxUA=="),jA=Uint8Array.BYTES_PER_ELEMENT,VA={bytesReceived:"br",frameDropped:"fd",frameReceived:"fr",googJitterReceived:"jr",isAudioMute:"am",isFreeze:"fz",mediaType:"mt",packetsLost:"pl",packetsReceived:"pr",peerId:"pid",id:"id",ssrc:"ssrc",timestamp:"ts",type:"tp",frameRateInput:"fi",frameRateSent:"fs",googRtt:"rt",isVideoMute:"vm"},YA={stats:"sts",state:"st",stream_id:"stid",session_id:"seid",stream_type:"stt",app_id:"aid",channel_key:"ck",channel_name:"cn",sdk_version:"sv",browser:"b",process_id:"pcid",mode:"m",codec:"c",role:"r",has_changed_gateway:"hcg",ap_response:"ar",extends:"es",details:"d",features:"ft",p2p_id:"ppid",sdp:"sdp",audio:"a",video:"v",attributes:"at",hq:"h",lq:"l",stereo:"str",speech:"spe",extend:"e",pingpongElapse:"ppe"},HA={_message:"m",_type:"t",_id:"id"},KA={join_v2:"j2",publish:"pub",publish_related_stats:"prs",ping:"pi",traffic_stats:"ts",ping_back:"pib",publish_stats:"pubs"};class WA{constructor(){}async init(){FA||(FA=(await(async()=>(PA||(PA=await zt()),{zlibCompress:e=>{var t,n=new Uint8Array(e);const i=jA*n.byteLength;e=PA._malloc(i);const r=PA._malloc(3*i);for(let a=0;a<i;a++)PA.HEAP8[e/jA+a]=n[a];return n=PA._zlibCompress(e,i,r),n=new Uint8Array(jc(t=PA.HEAP8).call(t,r,r+n)),PA._free(e),PA._free(r),n}}))()).zlibCompress),this.zlibCompress=FA}msgPackCompress(e){return fA.encode(e)}compress(e){let t=el(),n=this.compressKeyAndValue(JSON.parse(Pi(e))),i=this.msgPackCompress(n);var r=this.zlibCompress(i);return r=new Uint8Array([49,49,49,50,...vh(r)]),{origin:Bo({},e),originLength:Pi(e).length,shortKeyAndValue:n,msgpackSer:i,compressed:r,compressedLength:r.length,time:el()-t}}compressKeyAndValue(e){return this._ObjectKeyCompress(this._typeCompress(e))}_typeCompress(e){let t=e._type;return t?(e._type=KA[t]||t,e):e}_ObjectKeyCompress(e){let t=e._message;if(t){let n=t.stats;n&&(t.stats=this._statsCompress(n)),e._message=this._messageCompress(t)}return this._reportCompress(e)}_statsCompress(e){return this._keyCompress(e,VA)}_messageCompress(e){return this._keyCompress(e,YA)}_reportCompress(e){return this._keyCompress(e,HA)}_keyCompress(e,t){let n={},i=Uo(e);return Fo(i).call(i,((i,r)=>(i=e[r],t[r]?n[t[r]]=i:n[r]=i,n)),n),n}}class zA extends Ch{constructor(e){super(),this.lowPriorityQueue=[],this.highPriorityQueue=[],this.AgoraWebSocketManager=e}get queue(){return[...this.highPriorityQueue,...this.lowPriorityQueue]}reset(){this.lowPriorityQueue=[],this.highPriorityQueue=[]}pushMessage(e,t=!1){t?this.highPriorityQueue.push(e):this.lowPriorityQueue.push(e),this.sendMessage()}sendMessage(){let e=this.queue.length;$d((()=>{this._sendMessage()}),5>e?15*e:60+3*(e-4))}_sendMessage(){var e;if(this.queue.length){var t=this.AgoraWebSocketManager.getConnection();if(t&&1===t.readyState){var n=this.queue.shift();return nd(e=this.lowPriorityQueue).call(e,n)?this.lowPriorityQueue.shift():this.highPriorityQueue.shift(),t.send(n.compressed),n}}}}class qA extends Ch{constructor(e,t,n=!1){super(),this.currentURLIndex=this.connectionID=0,this.reconnectMode="tryNext",this._state="closed",this.reconnectCount=0,this.isCompressorInitSuccess=!1,this.wsDeflateLength=this.wsInflateLength=0,this.name=e,this.retryConfig=t,this.useCompress=n}get url(){return this.websocket?this.websocket.url:null}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(iu.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(iu.CONNECTED):"closed"===this._state?this.emit(iu.CLOSED):"failed"===this._state&&this.emit(iu.FAILED))}getConnection(){return this.websocket||void 0}init(e){let t=(t,n)=>{this.urls=e;const i=this.urls[this.currentURLIndex];this.state="connecting",this.messageSender=new zA(this),this.createWebSocketConnection(i).then(t).catch(n),this.once(iu.CLOSED,(()=>n(new wl(zd.WS_DISCONNECT)))),this.once(iu.CONNECTED,(()=>t()))};return new Cc(((e,n)=>{this.compressor=new WA,this.compressor.init().then((()=>{var i;Tl.debug("websocket compressor initialized successfully"),this.isCompressorInitSuccess=!0,this.compress=Xc(i=this.compressor.compress).call(i,this.compressor),t(e,n)})).catch((()=>{Tl.debug("websocket compressor failed to initialize"),t(e,n)}))}))}close(e,t){if(this.currentURLIndex=0,this.reconnectCount=0,this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;let e=this.websocket;t?$d((()=>e.close()),500):e.close(),this.websocket=void 0}this.state=e?"failed":"closed"}reconnect(e,t){this.websocket?(void 0!==e&&(this.reconnectMode=e),Tl.debug("[".concat(this.name,"] reconnect is triggered initiative")),e=this.websocket.onclose,this.websocket.onclose=null,this.websocket.close(),e&&Xc(e).call(e,this.websocket)({code:9999,reason:t})):Tl.warning("[".concat(this.name,"] can not reconnect, no websocket"))}sendMessage(e,t=!1){if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new wl(zd.WS_ABORT,"websocket is not ready");try{let n=null;if(this.isCompressorInitSuccess&&this.useCompress&&xd.WEBSOCKET_COMPRESS)n=this.compress(e),this.setWsInflateData(n);else{if(this.isCompressorInitSuccess&&this.useCompress){let t=this.compress(e);this.setWsInflateData(t)}let t=Pi(e);n={compressed:t,compressedLength:t.length,origin:e}}t?this.websocket.send(n.compressed):this.messageSender.pushMessage(n)}catch(n){throw new wl(zd.WS_ERR,"send websocket message error"+n.toString())}}setWsInflateData(e){this.wsDeflateLength+=e.originLength,this.wsInflateLength+=e.compressedLength}getWsInflateData(){let e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsDeflateLength=this.wsInflateLength=0}async createWebSocketConnection(e){let t=this.connectionID+=1;return new Cc(((n,i)=>{var r,a;this.websocket&&(this.websocket.onclose=null,this.websocket.close()),xd.GATEWAY_WSS_ADDRESS&&Ad(r=this.name).call(r,"gateway")&&(e=xd.GATEWAY_WSS_ADDRESS),Tl.debug(Ir(a="[".concat(this.name,"] start connect, url: ")).call(a,e));try{this.websocket=new WebSocket(e),this.websocket.binaryType="arraybuffer"}catch(s){var o;return r=new wl(zd.WS_ERR,"init websocket failed! Error: ".concat(s.toString())),Tl.error(Ir(o="[".concat(this.name,"]")).call(o,r)),void i(r)}Ot(5e3).then((()=>{t===this.connectionID&&this.websocket&&this.websocket.readyState!==WebSocket.OPEN&&this.websocket&&this.websocket.close()})),this.websocket.onopen=()=>{Tl.debug("[".concat(this.name,"] websocket opened:"),e),this.reconnectMode="retry",this.state="connected",this.reconnectCount=0,n()},this.websocket.onclose=async e=>{var t,r,a,o;if(Tl.debug(Ir(t=Ir(r=Ir(a=Ir(o="[".concat(this.name,"] websocket close ")).call(o,this.websocket&&this.websocket.url,", code: ")).call(a,e.code,", reason: ")).call(r,e.reason,", current mode: ")).call(t,this.reconnectMode)),this.reconnectCount<this.retryConfig.maxRetryCount){if("connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting"),t=Qt(this,iu.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,t=await this.reconnectWithAction(t),"closed"===this.state)return void Tl.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!t)return i(new wl(zd.WS_DISCONNECT,"websocket reconnect failed: ".concat(e.code))),void this.close(!0);n()}else i(new wl(zd.WS_DISCONNECT,"websocket close: ".concat(e.code))),this.close()},this.websocket.onmessage=e=>{this.emit(iu.ON_MESSAGE,e)}}))}async reconnectWithAction(e,t){var n,i;if(!t&&this.reconnectCount>=this.retryConfig.maxRetryCount||!this.urls||"closed"===this.state)return!1;if(this.onlineReconnectListener||Rh.networkState!==yu.OFFLINE||(this.onlineReconnectListener=Rh.onlineWaiter&&Rh.onlineWaiter.then((()=>{this.onlineReconnectListener=void 0}))),t=function(e,t){return Math.min(t.maxRetryTimeout,t.timeout*Math.pow(t.timeoutFactor,e))}(this.reconnectCount,this.retryConfig),Tl.debug(Ir(n=Ir(i="[".concat(this.name,"] wait ")).call(i,t,"ms to reconnect websocket, mode: ")).call(n,e)),await Cc.race([Ot(t),this.onlineReconnectListener||new Cc((()=>{}))]),"closed"===this.state)return!1;this.reconnectCount+=1;try{if("retry"===e)await this.createWebSocketConnection(this.urls[this.currentURLIndex]);else if("tryNext"===e){var r,a;if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return await this.reconnectWithAction("recover");Tl.debug(Ir(r=Ir(a="[".concat(this.name,"] websocket url length: ")).call(a,this.urls.length," current index: ")).call(r,this.currentURLIndex)),await this.createWebSocketConnection(this.urls[this.currentURLIndex])}else"recover"===e&&(Tl.debug("[".concat(this.name,"] request new urls")),this.urls=await xt(this,iu.REQUEST_NEW_URLS),this.currentURLIndex=0,await this.createWebSocketConnection(this.urls[this.currentURLIndex]));return!0}catch(o){return Tl.error("[".concat(this.name,"] reconnect failed"),o.toString()),await this.reconnectWithAction(e)}}}class JA{constructor(e){this.input=[],this.size=e}add(e){var t;this.input.push(e),this.input.length>this.size&&kc(t=this.input).call(t,0,1)}mean(){var e;return 0===this.input.length?0:Fo(e=this.input).call(e,((e,t)=>e+t))/this.input.length}}class XA extends Ch{constructor(e){super(),this._connectionState=Hl.CLOSED,this.openConnectionTime=el(),this.lastMsgTime=el(),this.uploadCache=[],this.rttRolling=new JA(5),this.pingpongTimeoutCount=0,this.onWebsocketMessage=e=>{if(e.data instanceof ArrayBuffer)this.emit(Kl.ON_BINARY_DATA,e.data);else if(e=JSON.parse(e.data),this.lastMsgTime=el(),Object.prototype.hasOwnProperty.call(e,"_id")){let t="res-@".concat(e._id);this.emit(t,e._result,e._message)}else if(Object.prototype.hasOwnProperty.call(e,"_type")&&(this.emit(e._type,e._message),e._type===ql.ON_NOTIFICATION&&this.handleNotification(e._message),e._type===ql.ON_USER_BANNED))switch(e._message.error_code){case 14:this.close("UID_BANNED");break;case 15:this.close("IP_BANNED");break;case 16:this.close("CHANNEL_BANNED")}},this.clientId=e.clientId,this.spec=e,this.websocket=new qA("gateway-".concat(this.clientId),this.spec.retryConfig,!0),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===Hl.CONNECTED&&this.reconnect("retry",Yl.OFFLINE)}))}get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===Hl.CONNECTED?this.emit(Kl.WS_CONNECTED):e===Hl.RECONNECTING?this.emit(Kl.WS_RECONNECTING,this._websocketReconnectReason):e===Hl.CLOSED&&this.emit(Kl.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}async request(e,t,n,i){var r,a,o,s,c;let d=Bt(6,"");var l={_id:d,_type:e,_message:t};let u=this.websocket.connectionID;var h=()=>new Cc(((e,t)=>{if(this.connectionState===Hl.CONNECTED)return e();const n=()=>{this.off(Kl.WS_CLOSED,i),e()},i=()=>{this.off(Kl.WS_CONNECTED,n),t(new wl(zd.WS_ABORT))};this.once(Kl.WS_CONNECTED,n),this.once(Kl.WS_CLOSED,i)}));if(this.connectionState!==Hl.CONNECTING&&this.connectionState!==Hl.RECONNECTING||e===Wl.JOIN||e===Wl.REJOIN||await h(),this.websocket.sendMessage(l,!0),!i){l=new Cc(((n,i)=>{let r=!1;const a=(i,a)=>{r=!0,n({isSuccess:"success"===i,message:a||{}}),this.off(Kl.WS_CLOSED,o),this.off(Kl.WS_RECONNECTING,o),this.emit(Kl.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(d),a);const o=()=>{i(new wl(zd.WS_ABORT,"type: ".concat(e))),this.off(Kl.WS_CLOSED,o),this.off(Kl.WS_RECONNECTING,o),this.off("res-@".concat(d),a)};this.once(Kl.WS_CLOSED,o),this.once(Kl.WS_RECONNECTING,o),Ot(xd.SIGNAL_REQUEST_TIMEOUT).then((()=>{this.websocket.connectionID!==u||r||(Tl.warning("ws request timeout, type: ".concat(e)),this.emit(Kl.REQUEST_TIMEOUT,e,t))}))})),i=null;try{i=await l}catch(A){if(this.connectionState===Hl.CLOSED||e===Wl.LEAVE)throw new wl(zd.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?A.throw():e===Wl.JOIN||e===Wl.REJOIN?null:(await h(),await this.request(e,t))}return i.isSuccess?i.message:(h=Wt(n=Number(i.message.error_code||i.message.code)),l=new wl(zd.UNEXPECTED_RESPONSE,Ir(r="".concat(h.desc,": ")).call(r,i.message.error_str),{code:n,data:i.message}),"success"===h.action?i.message:(Tl.warning(Ir(a=Ir(o=Ir(s=Ir(c="[".concat(this.websocket.connectionID,"] unexpected response from type ")).call(c,e,", error_code: ")).call(s,n,", message: ")).call(o,h.desc,", action: ")).call(a,h.action)),"failed"===h.action?l.throw():"quit"===h.action?(this.initError=l,this.close(),l.throw()):(n===jl.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=i.message.option,Tl.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Yl.MULTI_IP)):this.reconnect(h.action,Yl.SERVER_ERROR),e===Wl.JOIN||e===Wl.REJOIN?null:await this.request(e,t))))}}waitMessage(e,t){return new Cc((n=>{let i=r=>{t&&!t(r)||(this.off(e,i),n(r))};this.on(e,i)}))}upload(e,t){e={_type:e,_message:t};try{this.websocket.sendMessage(e)}catch(i){var n;t=xd.MAX_UPLOAD_CACHE||50,this.uploadCache.push(e),this.uploadCache.length>t&&kc(n=this.uploadCache).call(n,0,1),0<this.uploadCache.length&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{var e;if(this.connectionState===Hl.CONNECTED){var t=kc(e=this.uploadCache).call(e,0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(t._type,t._message)}}),xd.UPLOAD_CACHE_INTERVAL||2e3))}}send(e,t){this.websocket.sendMessage({_type:e,_message:t})}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,new Cc(((t,n)=>{this.once(Kl.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(Kl.WS_CLOSED,(()=>n(this.initError||new wl(zd.WS_ABORT)))),this.connectionState=Hl.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval((()=>{this.handleWsInflateData()}),2e4)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.joinResponse=this.reconnectToken=void 0,this._disconnectedReason=e||"LEAVE",this.connectionState=Hl.CLOSED,this.websocket.close()}async join(){var e;if(!this.joinResponse){var t=Pt(this,Kl.REQUEST_JOIN_INFO);if(!(t=await this.request(Wl.JOIN,t)))return this.emit(Kl.REPORT_JOIN_GATEWAY,zd.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Hl.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(Xc(e=this.handlePingPong).call(e,this),3e3),!0}async rejoin(){var e,t;if(!this.reconnectToken)throw new wl(zd.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");var n=Pt(this,Kl.REQUEST_REJOIN_INFO);return n.token=this.reconnectToken,!!(n=await this.request(Wl.REJOIN,n))&&(this.connectionState=Hl.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(Xc(e=this.handlePingPong).call(e,this),3e3),n.peers&&No(t=n.peers).call(t,(e=>{this.emit(ql.ON_USER_ONLINE,{uid:e.uid}),e.audio_mute?this.emit(ql.MUTE_AUDIO,{uid:e.uid}):this.emit(ql.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(ql.MUTE_VIDEO,{uid:e.uid}):this.emit(ql.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(ql.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(ql.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(ql.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(ql.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(ql.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id}),e.audio&&this.emit(ql.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0}),e.video&&this.emit(ql.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){if(Tl.debug("[".concat(this.clientId,"] receive notification: "),e),"success"!==(e=Wt(e.code)).action){if("failed"!==e.action)return"quit"===e.action?("ERR_REPEAT_JOIN_CHANNEL"===e.desc&&this.close("UID_BANNED"),void this.close()):void this.reconnect(e.action,Yl.SERVER_ERROR);Tl.error("[".concat(this.clientId,"] ignore error: "),e.desc)}}handlePingPong(){if(this.websocket&&"connected"===this.websocket.state){0<this.pingpongTimeoutCount&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;var e=xd.PING_PONG_TIME_OUT,t=el();this.pingpongTimeoutCount>=e&&(Tl.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>xd.WEBSOCKET_TIMEOUT_MIN)?this.reconnect("retry",Yl.TIMEOUT):this.request(Wl.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;let e=el()-t;this.rttRolling.add(e),xd.REPORT_STATS&&this.send(Wl.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}}handleWsInflateData(){let{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(zl.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(iu.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(iu.CLOSED,(()=>{this.connectionState=Hl.CLOSED})),this.websocket.on(iu.FAILED,(()=>{this._disconnectedReason="NETWORK_ERROR",this.connectionState=Hl.CLOSED})),this.websocket.on(iu.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===Hl.CONNECTED?this.connectionState=Hl.RECONNECTING:this.connectionState=Hl.CONNECTING})),this.websocket.on(iu.WILL_RECONNECT,((e,t)=>{if(Pt(this,Kl.IS_P2P_DISCONNECTED)&&"retry"===e)return this.reconnectToken=void 0,this.emit(Kl.NEED_RENEW_SESSION),this.emit(Kl.DISCONNECT_P2P),t("tryNext");"retry"!==e&&(this.reconnectToken=void 0,this.emit(Kl.NEED_RENEW_SESSION),this.emit(Kl.DISCONNECT_P2P)),t(e)})),this.websocket.on(iu.CONNECTED,(()=>{this.openConnectionTime=el(),this.reconnectToken?this.rejoin().catch((e=>{var t;Tl.warning(Ir(t="[".concat(this.clientId,"] rejoin failed ")).call(t,e)),this.reconnect("tryNext",Yl.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(Kl.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof wl&&e.code===zd.UNEXPECTED_RESPONSE&&e.data.code===jl.ERR_NO_AUTHORIZED)return Tl.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Yl.SERVER_ERROR);Tl.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Yl.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(iu.REQUEST_NEW_URLS,((e,t)=>{xt(this,Kl.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)}))}}let ZA=new Ao;class $A extends Ch{constructor(e){super(),this.inChannelInfo={joinAt:null,duration:0},this._state="DISCONNECTED",this.needToSendUnpubUnsub=new Ao,this.hasChangeBGPAddress=this.isSignalRecover=!1,this.joinGatewayStartTime=0,this._signalTimeout=!1,this.clientId=e.clientId,this.spec=e,this.signal=new XA(Jt({},e,{retryConfig:e.websocketRetryConfig})),this._statsCollector=e.statsCollector,this.role=e.role||"audience",this._clientRoleOptions=e.clientRoleOptions,this.handleSignalEvents()}get state(){return this._state}set state(e){if(e!==this._state){var t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(pu.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(pu.CONNECTION_STATE_CHANGE,e,t)}}async join(e,t){var n,i;"disabled"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);let r=el();var a=ZA.get(e.cname);if(a||(a=new Ao,ZA.set(e.cname,a)),a.has(e.uid))throw a=new wl(zd.UID_CONFLICT),wh.joinGateway(e.sid,{lts:r,succ:!1,ec:a.message,addr:null,uid:e.uid,cid:e.cid}),a;a.set(e.uid,!0),this.joinInfo=e,this.key=t,t=e.proxyServer?Rc(n=e.gatewayAddrs).call(n,(t=>{var n,i;return t=t.split(":"),Ir(n=Ir(i="wss://".concat(e.proxyServer,"/ws/?h=")).call(i,t[0],"&p=")).call(n,t[1])})):Rc(i=e.gatewayAddrs).call(i,(e=>"wss://".concat(e))),n=0,this.joinGatewayStartTime=r;try{n=(await this.signal.init(t)).uid}catch(o){throw Tl.error("[".concat(this.clientId,"] User join failed"),o.toString()),wh.joinGateway(e.sid,{lts:r,succ:!1,ec:o.message,addr:this.signal.url,uid:e.uid,cid:e.cid}),a.delete(e.uid),this.signal.close(),o}return this.state="CONNECTED",this.inChannelInfo.joinAt=el(),Tl.debug("[".concat(this.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval((()=>{this.updateTrafficStats().catch((e=>{Tl.warning("[".concat(this.clientId,"] get traffic stats error"),e.toString())}))}),3e3),this.networkQualityInterval=window.setInterval((()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(pu.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(pu.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===this.state&&this._statsCollector.trafficStats?this.emit(pu.NETWORK_QUALITY,{uplinkNetworkQuality:St(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:St(this._statsCollector.trafficStats.B_dnq)}):this.emit(pu.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3),n}async leave(e=!1){if("DISCONNECTED"!==this.state){this.state="DISCONNECTING";try{if(!e&&this.signal.connectionState===Hl.CONNECTED){var t=this.signal.request(Wl.LEAVE,void 0,!0);await Cc.race([t,Dt(3e3)])}}catch(n){Tl.warning("[".concat(this.clientId,"] leave request failed, ignore"),n)}this.signal.close(),this.reset(),this.state="DISCONNECTED"}}async publish(e,t){if(!this.joinInfo)throw new wl(zd.UNEXPECTED_ERROR,"publish no joinInfo");let n=e.getUserId(),i=e.videoTrack?function(e){var t;if(!(e=e._encoderConfig))return{};const n={resolution:e.width&&e.height?Ir(t="".concat(Ct(e.width),"x")).call(t,Ct(e.height)):void 0,maxVideoBW:e.bitrateMax,minVideoBW:e.bitrateMin};return"number"==typeof e.frameRate?(n.maxFrameRate=e.frameRate,n.minFrameRate=e.frameRate):e.frameRate&&(n.maxFrameRate=e.frameRate.max||e.frameRate.ideal||e.frameRate.exact||e.frameRate.min,n.minFrameRate=e.frameRate.min||e.frameRate.ideal||e.frameRate.exact||e.frameRate.max),n}(e.videoTrack):{};if(e.on(Jl.NEED_ANSWER,((r,a,o)=>{var s;let c={state:"offer",stream_type:t,p2p_id:e.pc.ID,sdp:Pi(r),audio:!!e.audioTrack,video:!!e.videoTrack,screen:e.videoTrack&&-1!==xc(s=e.videoTrack._hints).call(s,gu.SCREEN_TRACK),attributes:i,dtx:e.audioTrack instanceof tA&&e.audioTrack._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1,mode:this.spec.mode,codec:this.spec.codec,extend:xd.PUB_EXTEND};e.audioTrack&&e.audioTrack instanceof iA&&(e.audioTrack&&(s={stream_id:this.joinInfo&&(this.joinInfo.stringUid||this.joinInfo.uid),action:""},e.audioTrack.isActive?s.action="unmute_local_audio":s.action="mute_local_audio",this.sendControl(s)),e.videoTrack&&(s={stream_id:this.joinInfo&&(this.joinInfo.stringUid||this.joinInfo.uid),action:""},e.videoTrack.muted?s.action="mute_local_video":s.action="unmute_local_video",this.sendControl(s))),this.signal.request(Wl.PUBLISH,c,!0).then((e=>{n&&this.needToSendUnpubUnsub.set(n,!0),a(JSON.parse(e.sdp))})).catch((t=>{if(r.retry&&t.data&&t.data.code===jl.ERR_PUBLISH_REQUEST_INVALID)return Tl.warning("[".concat(this.clientId,"] receiver publish error code, retry"),t.toString()),xt(e,Jl.NEED_UNPUB).then((()=>{r.retry=!1,xt(e,Jl.NEED_ANSWER,r).then(a).catch(o)}));t.code!==zd.WS_ABORT&&o(t)}))})),e.on(Jl.NEED_RENEGOTIATE,((n,i,r)=>{this.signal.request(Wl.PUBLISH,{state:"negotiation",stream_type:t,p2p_id:e.pc.ID,sdp:n},!0).then((e=>{i(JSON.parse(e.sdp))})).catch((e=>{e.code!==zd.WS_ABORT&&r(e)}))})),e.on(Jl.NEED_UNPUB,(i=>n&&!this.needToSendUnpubUnsub.has(n)?i(!1):"RECONNECTING"===this.state?i(!0):void this.signal.request(Wl.UNPUBLISH,{stream_id:e.getUserId(),stream_type:t},!0).then((()=>i(!1))).catch((e=>{Tl.warning("unpublish warning: ",e),i(!0)})))),e.on(Jl.NEED_UPLOAD,((e,n)=>{this.signal.upload(e,{stream_type:t,stats:n})})),e.on(Jl.NEED_SIGNAL_RTT,(e=>{e(this.signal.rtt)})),e.on(Jl.NEED_CONTROL,((e,t,n)=>{if("video"===e.type&&e.muted)e="mute_local_video";else if("video"!==e.type||e.muted)if("audio"===e.type&&e.muted)e="mute_local_audio";else{if("audio"!==e.type||e.muted)return;e="unmute_local_audio"}else e="unmute_local_video";this.sendControl({stream_id:this.joinInfo&&(this.joinInfo.stringUid||this.joinInfo.uid),action:e}).then(t).catch(n)})),"RECONNECTING"!==this.state){if("CONNECTED"!==this.state)return new wl(zd.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state)).throw();await e.startP2PConnection()}else e.readyToReconnectPC()}async subscribe(e){if(!this.joinInfo)throw new wl(zd.UNEXPECTED_ERROR,"subscribe no joinInfo");let t=e.getUserId();if(e.on(Jl.NEED_ANSWER,((n,i,r)=>{var a=e.subscribeOptions;a={stream_id:e.getUserId(),audio:!!a.audio,video:!!a.video,mode:this.spec.mode,codec:this.spec.codec,p2p_id:e.pc.ID,sdp:Pi(n),tcc:!!xd.SUBSCRIBE_TCC,extend:xd.SUB_EXTEND},this.signal.request(Wl.SUBSCRIBE,a,!0).then((e=>{this.needToSendUnpubUnsub.set(t,!0),i(JSON.parse(e.sdp))})).catch((t=>{if(n.retry&&t.data&&t.data.code===jl.ERR_SUBSCRIBE_REQUEST_INVALID)return Tl.warning("[".concat(this.clientId,"] receiver subscribe error code, retry"),t.toString()),xt(e,Jl.NEED_UNSUB).then((()=>{n.retry=!1,xt(e,Jl.NEED_ANSWER,n).then(i).catch(r)}));t.code!==zd.WS_ABORT&&r(t)}))})),e.on(Jl.NEED_UNSUB,(n=>this.needToSendUnpubUnsub.has(t)?"RECONNECTING"===this.state?n(!0):void this.signal.request(Wl.UNSUBSCRIBE,{stream_id:e.getUserId()},!0).then((()=>n(!1))).catch((e=>{Tl.warning("unsubscribe warning",e),n(!0)})):n(!1))),e.on(Jl.NEED_UPLOAD,((t,n)=>{this.signal.upload(t,{stream_id:e.getUserId(),stats:n})})),e.on(Jl.NEED_SIGNAL_RTT,(e=>{e(this.signal.rtt)})),"RECONNECTING"!==this.state){if("CONNECTED"!==this.state)return new wl(zd.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state)).throw();await e.startP2PConnection()}else e.readyToReconnectPC()}async subscribeChange(e,t){var n,i;if(!this.joinInfo)throw new wl(zd.UNEXPECTED_ERROR,"subscribe no joinInfo");if(await e.setSubscribeOptions(t),"RECONNECTING"!==this.state){if("CONNECTED"!==this.state)return new wl(zd.INVALID_OPERATION,"can not subscribe change when connection state is ".concat(this.state)).throw();Tl.debug(Ir(n=Ir(i="[".concat(this.clientId,"] send subscribe change, audio: ")).call(i,t.audio,", video: ")).call(n,t.video)),await this.signal.request(Wl.SUBSCRIBE_CHANGE,{stream_id:e.getUserId(),audio:!!t.audio,video:!!t.video},!0)}}async sendControl(e){this.signal.request(Wl.CONTROL,e,!0,!0)}async unsubscribe(e){await e.closeP2PConnection()}getGatewayInfo(){return this.signal.request(Wl.GATEWAY_INFO)}renewToken(e){return this.signal.request(Wl.RENEW_TOKEN,{token:e})}async setClientRole(e,t){t&&(this._clientRoleOptions=Bo({},t)),"CONNECTED"===this.state?(await this.signal.request(Wl.SET_CLIENT_ROLE,{role:e,level:"audience"===e?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0}),this.role=e):this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(Wl.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setStreamFallbackOption(e,t){await this.signal.request(Wl.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(Wl.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=el()-this.inChannelInfo.joinAt),Jt({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(Wl.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=el()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){let e=ZA.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.needToSendUnpubUnsub=new Ao,this.key=this.joinInfo=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(this.joinInfo){var e=(e=(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex])||"").match(/(wss:\/\/)?([^:]+):(\d+)/))?{username:Od.username,password:Od.password,turnServerURL:e[2],tcpport:Jo(e[3])+30,udpport:Jo(e[3])+30,forceturn:!1}:null;this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(Jt({},Od,{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}}async updateTrafficStats(){var e;if("CONNECTED"===this.state){var t=await this.signal.request(Wl.TRAFFIC_STATS,void 0,!0);t.timestamp=el(),No(e=t.peer_delay).call(e,(e=>{var t;let n=this._statsCollector.trafficStats&&Kc(t=this._statsCollector.trafficStats.peer_delay).call(t,(t=>t.peer_uid===e.peer_uid));n&&n.B_st!==e.B_st&&jt((()=>{this.emit(pu.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)}))})),this._statsCollector.updateTrafficStats(t)}}getJoinMessage(){if(!this.joinInfo||!this.key)throw new wl(zd.UNEXPECTED_ERROR,"can not generate join message, no join info");let e=Bo({},this.joinInfo.apResponse);var t=xd.REPORT_APP_SCENARIO;if("string"!=typeof t)try{t=Pi(t)}catch(n){t=void 0}return t&&128<t.length&&(t=void 0),t={session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:bd,browser:navigator.userAgent,process_id:xd.PROCESS_ID,mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:e,extend:xd.JOIN_EXTEND,details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:t},this.joinInfo.stringUid&&(t.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(t.aes_mode=this.joinInfo.aesmode,xd.ENCRYPT_AES?(t.aes_secret=this.joinInfo.aespassword,t.aes_encrypt=!0):t.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(t.aes_salt=this.joinInfo.aessalt)),e.addresses[this.signal.websocket.currentURLIndex]&&(t.ap_response.ticket=e.addresses[this.signal.websocket.currentURLIndex].ticket,delete e.addresses),t}getRejoinMessage(){if(!this.joinInfo)throw new wl(zd.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(Kl.WS_RECONNECTING,(e=>{this.joinInfo&&wh.WebSocketQuit(this.joinInfo.sid,{lts:el(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||Yl.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",wh.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=el())})),this.signal.on(Kl.WS_CLOSED,(e=>{let t;switch(e){case"LEAVE":t=Yl.LEAVE;break;case"UID_BANNED":case"IP_BANNED":case"CHANNEL_BANNED":case"SERVER_ERROR":t=Yl.SERVER_ERROR;break;default:t=Yl.NETWORK_ERROR}Tl.debug("[signal] websocket closed, reason: ".concat(t||"undefined -> "+Yl.NETWORK_ERROR)),this.joinInfo&&wh.WebSocketQuit(this.joinInfo.sid,{lts:el(),succ:"LEAVE"===e?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this.reset(),this._disconnectedReason=e,this.state="DISCONNECTED"})),this.signal.on(Kl.WS_CONNECTED,(()=>{var e,t,n;if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&this._clientRoleOptions.level&&(Tl.debug(Ir(e=Ir(t=Ir(n="[".concat(this.clientId,"] patch to send set client role, role: ")).call(n,this.role,", mode: ")).call(t,this.spec.mode,", level: ")).call(e,this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),wh.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid}),this.joinInfo.useLocalAccessPoint)){var i;if(!(e=this.signal.url&&this.signal.url.match(/wss:\/\/([^:]+):(\d+)/)))return void Tl.error(Ir(i="[".concat(this.clientId,"] set local access point after joined failed: ")).call(i,e));Ae("EVENT_REPORT_DOMAIN",e[1]),Ae("EVENT_REPORT_BACKUP_DOMAIN",e[1]),Ae("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}})),this.signal.on(ql.ON_UPLINK_STATS,(e=>{this._statsCollector.updateUplinkStats(e)})),this.signal.on(Kl.REQUEST_RECOVER,((e,t,n)=>{if(!this.joinInfo)return n(new wl(zd.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,xt(this,pu.REQUEST_NEW_GATEWAY_LIST).then(t).catch(n)})),this.signal.on(Kl.REQUEST_JOIN_INFO,(e=>{e(this.getJoinMessage())})),this.signal.on(Kl.REQUEST_REJOIN_INFO,(e=>{e(this.getRejoinMessage())})),this.signal.on(Kl.REPORT_JOIN_GATEWAY,((e,t)=>{this.joinInfo&&wh.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:e,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid})})),this.signal.on(Kl.IS_P2P_DISCONNECTED,(e=>{e(Pt(this,pu.IS_P2P_DISCONNECTED))})),this.signal.on(Kl.DISCONNECT_P2P,(()=>{this.needToSendUnpubUnsub=new Ao,this.emit(pu.DISCONNECT_P2P)})),this.signal.on(Kl.NEED_RENEW_SESSION,(()=>{this.emit(pu.NEED_RENEW_SESSION)})),this.signal.on(Kl.REQUEST_SUCCESS,(()=>{this._signalTimeout=!1})),this.signal.on(Kl.REQUEST_TIMEOUT,(()=>{this._signalTimeout=!0}))}}var ep=rr("iterator"),tp=!Kn((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),n+=i+e})),!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[ep]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),np=/[^\0-\u007E]/,ip=/[.\u3002\uFF0E\uFF61]/g,rp=Math.floor,ap=String.fromCharCode,op=function(e){return e+22+75*(26>e)},sp=function(e){for(var t,n=[],i=[],r=0,a=e.length;r<a;){var o=e.charCodeAt(r++);if(55296<=o&&56319>=o&&r<a){var s=e.charCodeAt(r++);56320==(64512&s)?i.push(((1023&o)<<10)+(1023&s)+65536):(i.push(o),r--)}else i.push(o)}r=(e=i).length,a=128;var c=0,d=72;for(i=0;i<e.length;i++)128>(t=e[i])&&n.push(ap(t));for((s=o=n.length)&&n.push("-");s<r;){var l=2147483647;for(i=0;i<e.length;i++)(t=e[i])>=a&&t<l&&(l=t);var u=s+1;if(l-a>rp((2147483647-c)/u))throw RangeError("Overflow: input needs wider integers to process");for(c+=(l-a)*u,a=l,i=0;i<e.length;i++){if((t=e[i])<a&&2147483647<++c)throw RangeError("Overflow: input needs wider integers to process");if(t==a){var h=c;for(l=36;;l+=36){var A=l<=d?1:l>=d+26?26:l-d;if(h<A)break;h-=A;var p=36-A;n.push(ap(op(A+h%p))),h=rp(h/p)}for(n.push(ap(op(h))),d=u,l=0,c=s==o?rp(c/700):c>>1,c+=rp(c/d);455<c;l+=36)c=rp(c/35);d=rp(l+36*c/(c+38)),c=0,++s}}++c,++a}return n.join("")},cp=function(e){var t=Lr(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return Ci(t.call(e))},dp=ki("fetch"),lp=ki("Headers"),up=rr("iterator"),hp=ua.set,Ap=ua.getterFor("URLSearchParams"),pp=ua.getterFor("URLSearchParamsIterator"),fp=/\+/g,gp=Array(4),_p=function(e){return gp[e-1]||(gp[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},mp=function(e){try{return decodeURIComponent(e)}catch(t){return e}},Ep=function(e){e=e.replace(fp," ");var t=4;try{return decodeURIComponent(e)}catch(n){for(;t;)e=e.replace(_p(t--),mp);return e}},Ip=/[!'()~]|%20/g,vp={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Cp=function(e){return vp[e]},yp=function(e,t){if(t){var n,i;t=t.split("&");for(var r=0;r<t.length;)(n=t[r++]).length&&(i=n.split("="),e.push({key:Ep(i.shift()),value:Ep(i.join("="))}))}},Sp=function(e){this.entries.length=0,yp(this.entries,e)},Rp=function(e,t){if(e<t)throw TypeError("Not enough arguments")},Tp=Ya((function(e,t){hp(this,{type:"URLSearchParamsIterator",iterator:cp(Ap(e).entries),kind:t})}),"Iterator",(function(){var e=pp(this),t=e.kind,n=(e=e.iterator.next()).value;return e.done||(e.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),e})),wp=function(){var e,t,n,i,r;Mr(this,wp,"URLSearchParams");var a=0<arguments.length?arguments[0]:void 0,o=[];if(hp(this,{type:"URLSearchParams",entries:o,updateURL:function(){},updateSearchParams:Sp}),void 0!==a)if(ri(a))if("function"==typeof(e=Lr(a)))for(t=(e=e.call(a)).next;!(a=t.call(e)).done;){if((a=(i=(n=cp(Ci(a.value))).next).call(n)).done||(r=i.call(n)).done||!i.call(n).done)throw TypeError("Expected sequence with length 2");o.push({key:a.value+"",value:r.value+""})}else for(t in a)si(a,t)&&o.push({key:t,value:a[t]+""});else yp(o,"string"==typeof a?"?"===a.charAt(0)?a.slice(1):a:a+"")},bp=wp.prototype;Ua(bp,{append:function(e,t){Rp(arguments.length,2);var n=Ap(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){Rp(arguments.length,1);for(var t=Ap(this),n=t.entries,i=e+"",r=0;r<n.length;)n[r].key===i?n.splice(r,1):r++;t.updateURL()},get:function(e){Rp(arguments.length,1);for(var t=Ap(this).entries,n=e+"",i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){Rp(arguments.length,1);for(var t=Ap(this).entries,n=e+"",i=[],r=0;r<t.length;r++)t[r].key===n&&i.push(t[r].value);return i},has:function(e){Rp(arguments.length,1);for(var t=Ap(this).entries,n=e+"",i=0;i<t.length;)if(t[i++].key===n)return!0;return!1},set:function(e,t){Rp(arguments.length,1);for(var n,i=Ap(this),r=i.entries,a=!1,o=e+"",s=t+"",c=0;c<r.length;c++)(n=r[c]).key===o&&(a?r.splice(c--,1):(a=!0,n.value=s));a||r.push({key:o,value:s}),i.updateURL()},sort:function(){var e,t,n=Ap(this),i=n.entries,r=i.slice();for(t=i.length=0;t<r.length;t++){var a=r[t];for(e=0;e<t;e++)if(i[e].key>a.key){i.splice(e,0,a);break}e===t&&i.push(a)}n.updateURL()},forEach:function(e){for(var t,n=Ap(this).entries,i=vi(e,1<arguments.length?arguments[1]:void 0,3),r=0;r<n.length;)i((t=n[r++]).value,t.key,this)},keys:function(){return new Tp(this,"keys")},values:function(){return new Tp(this,"values")},entries:function(){return new Tp(this,"entries")}},{enumerable:!0}),La(bp,up,bp.entries),La(bp,"toString",(function(){for(var e,t=Ap(this).entries,n=[],i=0;i<t.length;)e=t[i++],n.push(encodeURIComponent(e.key).replace(Ip,Cp)+"="+encodeURIComponent(e.value).replace(Ip,Cp));return n.join("&")}),{enumerable:!0}),Gr(wp,"URLSearchParams"),bi({global:!0,forced:!tp},{URLSearchParams:wp}),tp||"function"!=typeof dp||"function"!=typeof lp||bi({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,i,r=[e];return 1<arguments.length&&(ri(t=arguments[1])&&(n=t.body,"URLSearchParams"===Dr(n)&&((i=t.headers?new lp(t.headers):new lp).has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=ka(t,{body:Xn(0,String(n)),headers:Xn(0,i)}))),r.push(t)),dp.apply(this,r)}});var Np=Hn.URL,kp=wp,Op=ua.set,Dp=ua.getterFor("URL"),Bp=Math.floor,Lp=Math.pow,Up=/[A-Za-z]/,xp=/[\d+\-.A-Za-z]/,Mp=/\d/,Qp=/^(0x|0X)/,Pp=/^[0-7]+$/,Fp=/^\d+$/,Gp=/^[\dA-Fa-f]+$/,jp=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,Vp=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Yp=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Hp=/[\u0009\u000A\u000D]/g,Kp=function(e,t){var n,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1)||!(n=zp(t.slice(1,-1))))return"Invalid host"}else if(nf(e)){var r=[],a=t.toLowerCase().replace(ip,".").split(".");for(i=0;i<a.length;i++){var o=a[i];r.push(np.test(o)?"xn--"+sp(o):o)}if(t=r.join("."),jp.test(t)||null===(n=Wp(t)))return"Invalid host"}else{if(Vp.test(t))return"Invalid host";for(n="",t=Eh(t),i=0;i<t.length;i++)n+=ef(t[i],Jp)}e.host=n},Wp=function(e){var t,n,i,r,a=e.split(".");if(a.length&&""==a[a.length-1]&&a.pop(),4<(t=a.length))return e;var o=[];for(n=0;n<t;n++){if(""==(i=a[n]))return e;if(r=10,1<i.length&&"0"==i.charAt(0)&&(r=Qp.test(i)?16:8,i=i.slice(8==r?1:2)),""===i)i=0;else{if(!(10==r?Fp:8==r?Pp:Gp).test(i))return e;i=parseInt(i,r)}o.push(i)}for(n=0;n<t;n++)if(i=o[n],n==t-1){if(i>=Lp(256,5-t))return null}else if(255<i)return null;for(e=o.pop(),n=0;n<o.length;n++)e+=o[n]*Lp(256,3-n);return e},zp=function(e){var t,n,i,r=[0,0,0,0,0,0,0,0],a=0,o=null,s=0,c=function(){return e.charAt(s)};if(":"==c()){if(":"!=e.charAt(1))return;s+=2,o=++a}for(;c();){if(8==a)return;if(":"!=c()){for(t=n=0;4>n&&Gp.test(c());)t=16*t+parseInt(c(),16),s++,n++;if("."==c()){if(0==n||(s-=n,6<a))return;for(t=0;c();){if(n=null,0<t){if(!("."==c()&&4>t))return;s++}if(!Mp.test(c()))return;for(;Mp.test(c());){if(i=parseInt(c(),10),null===n)n=i;else{if(0==n)return;n=10*n+i}if(255<n)return;s++}r[a]=256*r[a]+n,2!=++t&&4!=t||a++}if(4!=t)return;break}if(":"==c()){if(s++,!c())return}else if(c())return;r[a++]=t}else{if(null!==o)return;s++,o=++a}}if(null!==o)for(c=a-o,a=7;0!=a&&0<c;)t=r[a],r[a--]=r[o+c-1],r[o+--c]=t;else if(8!=a)return;return r},qp=function(e){var t,n;if("number"==typeof e){var i=[];for(t=0;4>t;t++)i.unshift(e%256),e=Bp(e/256);return i.join(".")}if("object"==typeof e){i="",t=null;for(var r=1,a=null,o=0,s=0;8>s;s++)0!==e[s]?(o>r&&(t=a,r=o),a=null,o=0):(null===a&&(a=s),++o);for(o>r&&(t=a),r=t,t=0;8>t;t++)n&&0===e[t]||(n&&(n=!1),r===t?(i+=t?":":"::",n=!0):(i+=e[t].toString(16),7>t&&(i+=":")));return"["+i+"]"}return e},Jp={},Xp=Do({},Jp,{" ":1,'"':1,"<":1,">":1,"`":1}),Zp=Do({},Xp,{"#":1,"?":1,"{":1,"}":1}),$p=Do({},Zp,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ef=function(e,t){var n=no(e,0);return 32<n&&127>n&&!si(t,e)?e:encodeURIComponent(e)},tf={ftp:21,file:null,http:80,https:443,ws:80,wss:443},nf=function(e){return si(tf,e.scheme)},rf=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},af=function(e,t){var n;return 2==e.length&&Up.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},of=function(e){var t;return 1<e.length&&af(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},sf=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&af(t[0],!0)||t.pop()},cf={},df={},lf={},uf={},hf={},Af={},pf={},ff={},gf={},_f={},mf={},Ef={},If={},vf={},Cf={},yf={},Sf={},Rf={},Tf={},wf={},bf={},Nf=function(e,t,n,i){var r,a,o=n||cf,s=0,c="",d=!1,l=!1,u=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(Yp,"")),t=t.replace(Hp,""),t=Eh(t);s<=t.length;){switch(r=t[s],o){case cf:if(!r||!Up.test(r)){if(n)return"Invalid scheme";o=lf;continue}c+=r.toLowerCase(),o=df;break;case df:if(r&&(xp.test(r)||"+"==r||"-"==r||"."==r))c+=r.toLowerCase();else{if(":"!=r){if(n)return"Invalid scheme";c="",o=lf,s=0;continue}if(n&&(nf(e)!=si(tf,c)||"file"==c&&(""!=e.username||""!=e.password||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=c,n)return void(nf(e)&&tf[e.scheme]==e.port&&(e.port=null));c="","file"==e.scheme?o=vf:nf(e)&&i&&i.scheme==e.scheme?o=uf:nf(e)?o=ff:"/"==t[s+1]?(o=hf,s++):(e.cannotBeABaseURL=!0,e.path.push(""),o=Tf)}break;case lf:if(!i||i.cannotBeABaseURL&&"#"!=r)return"Invalid scheme";if(i.cannotBeABaseURL&&"#"==r){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,o=bf;break}o="file"==i.scheme?vf:Af;continue;case uf:if("/"!=r||"/"!=t[s+1]){o=Af;continue}o=gf,s++;break;case hf:if("/"==r){o=_f;break}o=Rf;continue;case Af:if(e.scheme=i.scheme,void 0==r)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==r||"\\"==r&&nf(e))o=pf;else if("?"==r)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",o=wf;else{if("#"!=r){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),o=Rf;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",o=bf}break;case pf:if(!nf(e)||"/"!=r&&"\\"!=r){if("/"!=r){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,o=Rf;continue}o=_f}else o=gf;break;case ff:if(o=gf,"/"!=r||"/"!=c.charAt(s+1))continue;s++;break;case gf:if("/"!=r&&"\\"!=r){o=_f;continue}break;case _f:if("@"==r){for(d&&(c="%40"+c),d=!0,c=Eh(c),r=0;r<c.length;r++){var h=c[r];":"!=h||u?(h=ef(h,$p),u?e.password+=h:e.username+=h):u=!0}c=""}else if(void 0==r||"/"==r||"?"==r||"#"==r||"\\"==r&&nf(e)){if(d&&""==c)return"Invalid authority";s-=Eh(c).length+1,c="",o=mf}else c+=r;break;case mf:case Ef:if(n&&"file"==e.scheme){o=yf;continue}if(":"!=r||l){if(void 0==r||"/"==r||"?"==r||"#"==r||"\\"==r&&nf(e)){if(nf(e)&&""==c)return"Invalid host";if(n&&""==c&&(""!=e.username||""!=e.password||null!==e.port))return;if(o=Kp(e,c))return o;if(c="",o=Sf,n)return;continue}"["==r?l=!0:"]"==r&&(l=!1),c+=r}else{if(""==c)return"Invalid host";if(o=Kp(e,c))return o;if(c="",o=If,n==Ef)return}break;case If:if(!Mp.test(r)){if(void 0==r||"/"==r||"?"==r||"#"==r||"\\"==r&&nf(e)||n){if(""!=c){if(65535<(o=parseInt(c,10)))return"Invalid port";e.port=nf(e)&&o===tf[e.scheme]?null:o,c=""}if(n)return;o=Sf;continue}return"Invalid port"}c+=r;break;case vf:if(e.scheme="file","/"==r||"\\"==r)o=Cf;else{if(!i||"file"!=i.scheme){o=Rf;continue}if(void 0==r)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==r)e.host=i.host,e.path=i.path.slice(),e.query="",o=wf;else{if("#"!=r){of(t.slice(s).join(""))||(e.host=i.host,e.path=i.path.slice(),sf(e)),o=Rf;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",o=bf}}break;case Cf:if("/"==r||"\\"==r){o=yf;break}i&&"file"==i.scheme&&!of(t.slice(s).join(""))&&(af(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),o=Rf;continue;case yf:if(void 0==r||"/"==r||"\\"==r||"?"==r||"#"==r){if(!n&&af(c))o=Rf;else{if(""==c){if(e.host="",n)return}else{if(o=Kp(e,c))return o;if("localhost"==e.host&&(e.host=""),n)return;c=""}o=Sf}continue}c+=r;break;case Sf:if(nf(e)){if(o=Rf,"/"!=r&&"\\"!=r)continue}else if(n||"?"!=r)if(n||"#"!=r){if(void 0!=r&&(o=Rf,"/"!=r))continue}else e.fragment="",o=bf;else e.query="",o=wf;break;case Rf:if(void 0==r||"/"==r||"\\"==r&&nf(e)||!n&&("?"==r||"#"==r)){if(".."===(a=(a=c).toLowerCase())||"%2e."===a||".%2e"===a||"%2e%2e"===a?(sf(e),"/"==r||"\\"==r&&nf(e)||e.path.push("")):"."===c||"%2e"===c.toLowerCase()?"/"==r||"\\"==r&&nf(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&af(c)&&(e.host&&(e.host=""),c=c.charAt(0)+":"),e.path.push(c)),c="","file"==e.scheme&&(void 0==r||"?"==r||"#"==r))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==r?(e.query="",o=wf):"#"==r&&(e.fragment="",o=bf)}else c+=ef(r,Zp);break;case Tf:"?"==r?(e.query="",o=wf):"#"==r?(e.fragment="",o=bf):void 0!=r&&(e.path[0]+=ef(r,Jp));break;case wf:n||"#"!=r?void 0!=r&&("'"==r&&nf(e)?e.query+="%27":e.query+="#"==r?"%23":ef(r,Jp)):(e.fragment="",o=bf);break;case bf:void 0!=r&&(e.fragment+=ef(r,Xp))}s++}},kf=function(e){var t=Mr(this,kf,"URL"),n=1<arguments.length?arguments[1]:void 0,i=String(e),r=Op(t,{type:"URL"});if(void 0!==n)if(n instanceof kf)var a=Dp(n);else if(n=Nf(a={},String(n)))throw TypeError(n);if(n=Nf(r,i,null,a))throw TypeError(n);var o=r.searchParams=new kp;(a=Ap(o)).updateSearchParams(r.query),a.updateURL=function(){r.query=String(o)||null},Wn||(t.href=Df.call(t),t.origin=Bf.call(t),t.protocol=Lf.call(t),t.username=Uf.call(t),t.password=xf.call(t),t.host=Mf.call(t),t.hostname=Qf.call(t),t.port=Pf.call(t),t.pathname=Ff.call(t),t.search=Gf.call(t),t.searchParams=jf.call(t),t.hash=Vf.call(t))},Of=kf.prototype,Df=function(){var e=Dp(this),t=e.scheme,n=e.username,i=e.password,r=e.host,a=e.port,o=e.path,s=e.query,c=e.fragment,d=t+":";return null!==r?(d+="//",(""!=e.username||""!=e.password)&&(d+=n+(i?":"+i:"")+"@"),d+=qp(r),null!==a&&(d+=":"+a)):"file"==t&&(d+="//"),d+=e.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==s&&(d+="?"+s),null!==c&&(d+="#"+c),d},Bf=function(){var e=Dp(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(i){return"null"}return"file"!=t&&nf(e)?t+"://"+qp(e.host)+(null!==n?":"+n:""):"null"},Lf=function(){return Dp(this).scheme+":"},Uf=function(){return Dp(this).username},xf=function(){return Dp(this).password},Mf=function(){var e=Dp(this),t=e.host;return e=e.port,null===t?"":null===e?qp(t):qp(t)+":"+e},Qf=function(){var e=Dp(this).host;return null===e?"":qp(e)},Pf=function(){var e=Dp(this).port;return null===e?"":String(e)},Ff=function(){var e=Dp(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Gf=function(){var e=Dp(this).query;return e?"?"+e:""},jf=function(){return Dp(this).searchParams},Vf=function(){var e=Dp(this).fragment;return e?"#"+e:""},Yf=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(Wn&&Ra(Of,{href:Yf(Df,(function(e){var t=Dp(this);if(e=Nf(t,String(e)))throw TypeError(e);Ap(t.searchParams).updateSearchParams(t.query)})),origin:Yf(Bf),protocol:Yf(Lf,(function(e){var t=Dp(this);Nf(t,String(e)+":",cf)})),username:Yf(Uf,(function(e){var t=Dp(this);if(e=Eh(String(e)),!rf(t)){t.username="";for(var n=0;n<e.length;n++)t.username+=ef(e[n],$p)}})),password:Yf(xf,(function(e){var t=Dp(this);if(e=Eh(String(e)),!rf(t)){t.password="";for(var n=0;n<e.length;n++)t.password+=ef(e[n],$p)}})),host:Yf(Mf,(function(e){var t=Dp(this);t.cannotBeABaseURL||Nf(t,String(e),mf)})),hostname:Yf(Qf,(function(e){var t=Dp(this);t.cannotBeABaseURL||Nf(t,String(e),Ef)})),port:Yf(Pf,(function(e){var t=Dp(this);rf(t)||(""==(e=String(e))?t.port=null:Nf(t,e,If))})),pathname:Yf(Ff,(function(e){var t=Dp(this);t.cannotBeABaseURL||(t.path=[],Nf(t,e+"",Sf))})),search:Yf(Gf,(function(e){var t=Dp(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Nf(t,e,wf)),Ap(t.searchParams).updateSearchParams(t.query)})),searchParams:Yf(jf),hash:Yf(Vf,(function(e){var t=Dp(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Nf(t,e,bf)):t.fragment=null}))}),La(Of,"toJSON",(function(){return Df.call(this)}),{enumerable:!0}),La(Of,"toString",(function(){return Df.call(this)}),{enumerable:!0}),Np){var Hf=Np.createObjectURL,Kf=Np.revokeObjectURL;Hf&&La(kf,"createObjectURL",(function(e){return Hf.apply(Np,arguments)})),Kf&&La(kf,"revokeObjectURL",(function(e){return Kf.apply(Np,arguments)}))}Gr(kf,"URL"),bi({global:!0,forced:!tp,sham:!Wn},{URL:kf});var Wf=Ei.URL;!function(){function e(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function t(e,t){if(t)e:{var n=p;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&A(n,e,{configurable:!0,writable:!0,value:t})}}function n(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function i(t){var n="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return n?n.call(t):{next:e(t)}}function r(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function a(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function o(e,t){return e.h=3,{value:t}}function s(e){this.g=new r,this.G=e}function c(e,t,n,i){try{var r=t.call(e.g.j,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.m=!1,r;var a=r.value}catch(o){return e.g.j=null,e.g.s(o),d(e)}return e.g.j=null,i.call(e.g,a),d(e)}function d(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(n){e.g.v=void 0,e.g.s(n)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function l(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){a(e.g);var n=e.g.j;return n?c(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),d(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function u(e,t){return t=new l(new s(t)),_&&e.prototype&&_(t,e.prototype),t}var h,A="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},p=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Vn&&Vn];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);if(t("Symbol",(function(e){function t(e,t){this.A=e,A(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}})),t("Symbol.iterator",(function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<i.length;r++){var a=p[i[r]];"function"==typeof a&&"function"!=typeof a.prototype[t]&&A(a.prototype,t,{configurable:!0,writable:!0,value:function(){return n(e(this))}})}return t})),"function"==typeof Object.setPrototypeOf)var f=Object.setPrototypeOf;else{e:{var g={};try{g.__proto__={a:!0},f=g.a;break e}catch(k){}f=!1}f=f?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var _=f;if(r.prototype.o=function(e){this.v=e},r.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},r.prototype.return=function(e){this.l={return:e},this.h=this.u},s.prototype.o=function(e){return a(this.g),this.g.j?c(this,this.g.j.next,e,this.g.o):(this.g.o(e),d(this))},s.prototype.s=function(e){return a(this.g),this.g.j?c(this,this.g.j.throw,e,this.g.o):(this.g.s(e),d(this))},t("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var m=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},E=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},I=function(e,t,n){return t instanceof Blob?(n=void 0!==n?String(n+""):"string"==typeof t.name?t.name:"blob",t.name===n&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],n)),[String(e),t]):[String(e),String(t)]},v=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},C=(f="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this).FormData,y=f.XMLHttpRequest&&f.XMLHttpRequest.prototype.send,S=f.Request&&f.fetch,R=f.navigator&&f.navigator.sendBeacon;g=f.Element&&f.Element.prototype;var T=f.Symbol&&Symbol.toStringTag;T&&(Blob.prototype[T]||(Blob.prototype[T]="Blob"),"File"in f&&!File.prototype[T]&&(File.prototype[T]="File"));try{new File([],"")}catch(k){f.File=function(e,t,n){return e=new Blob(e,n||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(n&&void 0!==n.lastModified?new Date(n.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),T&&Object.defineProperty(e,T,{value:"File"}),e}}var w=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},b=function(e){this.i=[];var t=this;e&&m(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var n=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];m(n,(function(n){t.append(e.name,n)}))}else"select-multiple"===e.type||"select-one"===e.type?m(e.options,(function(n){!n.disabled&&n.selected&&t.append(e.name,n.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(n="textarea"===e.type?E(e.value):e.value,t.append(e.name,n))}))};if((h=b.prototype).append=function(e,t,n){v(arguments,2),this.i.push(I(e,t,n))},h.delete=function(e){v(arguments,1);var t=[];e=String(e),m(this.i,(function(n){n[0]!==e&&t.push(n)})),this.i=t},h.entries=function e(){var t,n=this;return u(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<n.i.length?e=o(e,n.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},h.forEach=function(e,t){v(arguments,1);for(var n=i(this),r=n.next();!r.done;r=n.next()){var a=i(r.value);r=a.next().value,a=a.next().value,e.call(t,a,r,this)}},h.get=function(e){v(arguments,1);var t=this.i;e=String(e);for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n][1];return null},h.getAll=function(e){v(arguments,1);var t=[];return e=String(e),m(this.i,(function(n){n[0]===e&&t.push(n[1])})),t},h.has=function(e){v(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},h.keys=function e(){var t,n,r,a=this;return u(e,(function(e){if(1==e.h&&(t=i(a),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,o(e,i(r).next().value));n=t.next(),e.h=2}))},h.set=function(e,t,n){v(arguments,2),e=String(e);var i=[],r=I(e,t,n),a=!0;m(this.i,(function(t){t[0]===e?a&&(a=!i.push(r)):i.push(t)})),a&&i.push(r),this.i=i},h.values=function e(){var t,n,r,a,s=this;return u(e,(function(e){if(1==e.h&&(t=i(s),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,(a=i(r)).next(),o(e,a.next().value));n=t.next(),e.h=2}))},b.prototype._asNative=function(){for(var e=new C,t=i(this),n=t.next();!n.done;n=t.next()){var r=i(n.value);n=r.next().value,r=r.next().value,e.append(n,r)}return e},b.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],n="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,i){return"string"==typeof e?t.push(n+w(E(i))+'"\r\n\r\n'+E(e)+"\r\n"):t.push(n+w(E(i))+'"; filename="'+w(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},b.prototype[Symbol.iterator]=function(){return this.entries()},b.prototype.toString=function(){return"[object FormData]"},g&&!g.matches&&(g.matches=g.matchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector||g.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),T&&(b.prototype[T]="FormData"),y){var N=f.XMLHttpRequest.prototype.setRequestHeader;f.XMLHttpRequest.prototype.setRequestHeader=function(e,t){N.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},f.XMLHttpRequest.prototype.send=function(e){e instanceof b?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),y.call(this,e)):y.call(this,e)}}S&&(f.fetch=function(e,t){return t&&t.body&&t.body instanceof b&&(t.body=t.body._blob()),S.call(this,e,t)}),R&&(f.navigator.sendBeacon=function(e,t){return t instanceof b&&(t=t._asNative()),R.call(this,e,t)}),f.FormData=b}}();let zf=1,qf=1,Jf=(e,t,n,i,r)=>{var a,o,s;const c=[];if(No(a=e.response_body).call(a,(a=>{var o=a.buffer.code;0!==o&&(o=Kt(o),a={error:new wl(zd.CAN_NOT_GET_GATEWAY_SERVER,o.desc,{retry:o.retry,csIp:e.detail[502]}),flag:a.buffer.flag},c.push(a),4096===a.flag?wh.joinChooseServer(n.sid,{lts:i,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:a.error.message,csIp:a.error.data&&a.error.data.csIp,unilbsServerIds:r.toString()}):1048576!==a.flag&&4194304!==a.flag||wh.joinWebProxyAP(n.sid,{lts:i,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:a.error.code,eventType:n.cloudProxyServer,unilbsServerIds:r.toString()}))})),c.length)throw Tl.warning(Ir(o=Ir(s="[".concat(n.clientId,"] multi unilbs ")).call(s,t," failed, ")).call(o,Rc(c).call(c,(e=>{var t,n;return Ir(t=Ir(n="flag: ".concat(e.flag,", message: ")).call(n,e.error.message,", retry: ")).call(t,e.error.data.retry)})).join(" | "))),new wl(zd.CAN_NOT_GET_GATEWAY_SERVER,Rc(c).call(c,(e=>{var t;return Ir(t="flag: ".concat(e.flag,", message: ")).call(t,e.error.message)})).join(" | "),{retry:!!Kc(c).call(c,(e=>e.error.data.retry)),csIp:e.detail[502]})},Xf=e=>{if(e.addresses&&0===e.addresses.length&&0===e.code)throw new wl(zd.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(xd.GATEWAY_ADDRESS&&0<xd.GATEWAY_ADDRESS.length){var t;Tl.debug("assign gateway address to",xd.GATEWAY_ADDRESS);const n=Rc(t=xd.GATEWAY_ADDRESS).call(t,(t=>({ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket})));e.addresses=n}},Zf=(e,t,n)=>{var i;const r=Math.floor(1e12*Math.random());return t={appid:e.appId,client_ts:el(),opid:r,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:{6:e.stringUid,11:t},key:e.token,service_ids:n,uid:e.uid||0}}]},No(i=t.request_bodies).call(i,(t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=Pi({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))})),(i=new FormData).append("request",Pi(t)),[i,r]},$f=()=>{const e=xd.AREAS;return 0===e.length&&e.push("GLOBAL"),Fo(e).call(e,((e,t,n)=>{var i,r,a,o,s,c;return(t="OVERSEA"===t?Ir(i=Ir(r=Ir(a=Ir(o=Ir(s="".concat(Iu.ASIA,",")).call(s,Iu.EUROPE,",")).call(o,Iu.AFRICA,",")).call(a,Iu.NORTH_AMERICA,",")).call(r,Iu.SOUTH_AMERICA,",")).call(i,Iu.OCEANIA):Iu[t])?0===n?t:Ir(c="".concat(e,",")).call(c,t):e}),"")};var eg={ASIA:["CHINA","JAPAN","INDIA"],EUROPE:[],NORTH_AMERICA:[],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]};let tg=Uo(eg),ng="CHINA NORTH_AMERICA EUROPE ASIA JAPAN INDIA OCEANIA SOUTH_AMERICA AFRICA".split(" "),ig=function(e,t){var n,i=[];if(nd(e).call(e,"GLOBAL")){i=["GLOBAL","OVERSEA"];const r=Uo(vu);if("GLOBAL"===t)throw new wl(zd.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if("CHINA"===t)i=["OVERSEA"];else if(n=t,nd(tg).call(tg,n)){e=eg[t]||[];const n=[...i,t,...e];i=rs(r).call(r,(e=>!nd(n).call(n,e)))}else if(function(e){let t=!1;return No(tg).call(tg,(n=>{var i;nd(i=eg[n]).call(i,e)&&(t=!0)})),t}(t)){e=function(e){let t;return No(tg).call(tg,(n=>{var i;nd(i=eg[n]).call(i,e)&&(t=n)})),t}(t);const n=[...i,e,t];i=rs(r).call(r,(e=>!nd(n).call(n,e)))}else i=e;i=function(e){const t=[];return No(ng).call(ng,(n=>{nd(e).call(e,n)&&t.push(n)})),Ir(t).call(t,rs(e).call(e,(e=>!nd(ng).call(ng,e))))}(i)}else i=e;return i};class rg extends Ch{constructor(){super(),this.retryConfig={timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4},this.mutex=new kh("config-distribute")}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),this.updateConfigDistribute(),this.interval=window.setInterval((()=>{this.updateConfigDistribute()}),xd.CONFIG_DISTRIBUTE_INTERVAL)}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.cancelToken=this.joinInfo=this.interval=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(!this.joinInfo||!this.cancelToken||!this.retryConfig)return void Tl.debug("[config-distribute] get config distribute interrupted have no joininfo");let e,t=await this.mutex.lock();try{e=await on(this.joinInfo,this.cancelToken,this.retryConfig),Tl.debug("[config-distribute] get config distribute",Pi(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.configs=e}catch(n){let e=new wl(zd.NETWORK_RESPONSE_ERROR,n);Tl.warning("[config-distribute] ".concat(e.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){e&&e.uplink&&e.id&&void 0!==e.uplink.max_bitrate&&void 0!==e.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(Cu.UPDATE_BITRATE_LIMIT,e):this.emit(Cu.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&function(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)No(n=dn(Object(i),!0)).call(n,(function(t){ph(e,t,i[t])}));else if(Ou)wu(e,Ou(i));else{var r;No(r=dn(Object(i))).call(r,(function(t){jo(e,t,ts(i,t))}))}}return e}({},this.configs.limit_bitrate.low_stream_uplink)}}var ag,og=function(){function e(e){this.input=[],this.size=e}return e.prototype.add=function(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)},e.prototype.diffMean=function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},e}(),sg=function(e,t){return(sg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},cg=function(){return(cg=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},dg={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[]},lg={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0},ug={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},hg={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},Ag={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0},pg=function(){function e(e,t){var n=this;this.videoIsReady=!1,this.stats=ln(dg),this.isFirstAudioDecoded=this.isFirstAudioReceived=this.isFirstVideoDecoded=this.isFirstVideoReceived=!1,this.lossRateWindowStats=[],this.pc=e,this.options=t,this.intervalTimer=window.setInterval((function(){return An(n,void 0,void 0,(function(){return pn(this,(function(e){return this.updateStats(),[2]}))}))}),this.options.updateInterval)}return e.prototype.getStats=function(){return this.stats},e.prototype.setVideoIsReady=function(e){this.videoIsReady=e},e.prototype.setIsFirstAudioDecoded=function(e){this.isFirstAudioDecoded=e},e.prototype.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},e.prototype.calcLossRate=function(e){var t=this;this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var n=this.lossRateWindowStats.length,i=0,r=0,a=0,o=0,s=function(s){e[s].forEach((function(e,c){if(t.lossRateWindowStats[n-1][s][c]&&t.lossRateWindowStats[0][s][c]){var d=t.lossRateWindowStats[n-1][s][c].packets-t.lossRateWindowStats[0][s][c].packets;c=t.lossRateWindowStats[n-1][s][c].packetsLost-t.lossRateWindowStats[0][s][c].packetsLost,"videoSend"===s||"audioSend"===s?(i+=d,a+=c):(r+=d,o+=c),Number.isNaN(d)||Number.isNaN(d)?e.packetLostRate=0:e.packetLostRate=0>=d||0>=c?0:c/(d+c)}}))},c=0,d=["videoSend","audioSend","videoRecv","audioRecv"];c<d.length;c++)s(d[c]);e.sendPacketLossRate=0>=i||0>=a?0:a/(i+a),e.recvPacketLossRate=0>=r||0>=o?0:o/(r+o)},e}(),fg=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._stats=dg,t.lastDecodeVideoReceiverStats=new Map,t}return hn(t,e),t.prototype.updateStats=function(){return An(this,void 0,void 0,(function(){var e,t,n,i;return pn(this,(function(r){switch(r.label){case 0:return[4,this._getStats()];case 1:return e=r.sent(),t=this.statsResponsesToObjects(e),this._stats=ln(dg),n=t.filter((function(e){return"ssrc"===e.type})),this.processSSRCStats(n),(i=t.find((function(e){return"VideoBwe"===e.type})))&&this.processBandwidthStats(i),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}}))}))},t.prototype.processBandwidthStats=function(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)},t.prototype.processSSRCStats=function(e){var t=this;e.forEach((function(e){var n=e.id.includes("send");switch(e.mediaType+"_"+(n?"send":"recv")){case"video_send":(n=ln(ug)).codec=e.googCodecName,n.adaptionChangeReason="none",e.googCpuLimitedResolution&&(n.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(n.adaptionChangeReason="bandwidth"),n.avgEncodeMs=Number(e.googAvgEncodeMs),n.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},n.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},n.firsCount=Number(e.googFirReceived),n.nacksCount=Number(e.googNacksReceived),n.plisCount=Number(e.googPlisReceived),n.frameCount=Number(e.framesEncoded),n.bytes=Number(e.bytesSent),n.packets=Number(e.packetsSent),n.packetsLost=Number(e.packetsLost),n.ssrc=Number(e.ssrc),n.rttMs=Number(e.googRtt||0),t._stats.videoSend.push(n),t._stats.rtt=n.rttMs;break;case"video_recv":n=ln(lg);var i=t.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(n.codec=e.googCodecName,n.targetDelayMs=Number(e.googTargetDelayMs),n.renderDelayMs=Number(e.googRenderDelayMs),n.currentDelayMs=Number(e.googCurrentDelayMs),n.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),n.decodeMs=Number(e.googDecodeMs),n.maxDecodeMs=Number(e.googMaxDecodeMs),n.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},n.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},n.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},n.jitterBufferMs=Number(e.googJitterBufferMs),n.firsCount=Number(e.googFirsSent),n.nacksCount=Number(e.googNacksSent),n.plisCount=Number(e.googPlisSent),n.framesDecodeCount=Number(e.framesDecoded),n.bytes=Number(e.bytesReceived),n.packets=Number(e.packetsReceived),n.packetsLost=Number(e.packetsLost),n.ssrc=Number(e.ssrc),0<n.packets&&!t.isFirstVideoReceived&&(t.onFirstVideoReceived&&t.onFirstVideoReceived(),t.isFirstVideoReceived=!0),0<n.framesDecodeCount&&!t.isFirstVideoDecoded&&(t.onFirstVideoDecoded&&t.onFirstVideoDecoded(n.decodedFrame.width,n.decodedFrame.height),t.isFirstVideoDecoded=!0),i){e=i.stats;var r=Date.now()-i.lts;n.framesDecodeFreezeTime=e.framesDecodeFreezeTime,n.framesDecodeInterval=e.framesDecodeInterval,n.framesDecodeCount>e.framesDecodeCount&&t.isFirstVideoDecoded?(i.lts=Date.now(),n.framesDecodeInterval=r,n.framesDecodeInterval>=t.options.freezeRateLimit&&(t.videoIsReady?n.framesDecodeFreezeTime+=n.framesDecodeInterval:t.setVideoIsReady(!0))):n.framesDecodeCount<i.stats.framesDecodeCount&&(n.framesDecodeInterval=0)}t.lastDecodeVideoReceiverStats.set(n.ssrc,{stats:cg({},n),lts:Date.now()}),t._stats.videoRecv.push(n);break;case"audio_recv":(n=ln(Ag)).codec=e.googCodecName,n.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,n.decodingCNG=Number(e.googDecodingCNG),n.decodingCTN=Number(e.googDecodingCTN),n.decodingCTSG=Number(e.googDecodingCTSG),n.decodingNormal=Number(e.googDecodingNormal),n.decodingPLC=Number(e.googDecodingPLC),n.decodingPLCCNG=Number(e.googDecodingPLCCNG),n.expandRate=Number(e.googExpandRate),n.accelerateRate=Number(e.googAccelerateRate),n.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),n.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),n.speechExpandRate=Number(e.googSpeechExpandRate),n.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),n.jitterBufferMs=Number(e.googJitterBufferMs),n.jitterMs=Number(e.googJitterReceived),n.bytes=Number(e.bytesReceived),n.packets=Number(e.packetsReceived),n.packetsLost=Number(e.packetsLost),n.ssrc=Number(e.ssrc),n.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),n.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),0<n.receivedFrames&&!t.isFirstAudioReceived&&(t.onFirstAudioReceived&&t.onFirstAudioReceived(),t.isFirstAudioReceived=!0),0<n.decodingNormal&&!t.isFirstAudioDecoded&&(t.onFirstAudioDecoded&&t.onFirstAudioDecoded(),t.isFirstAudioDecoded=!0),t._stats.audioRecv.push(n);break;case"audio_send":(n=ln(hg)).codec=e.googCodecName,n.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,n.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),n.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),n.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),n.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),n.bytes=Number(e.bytesSent),n.packets=Number(e.packetsSent),n.packetsLost=Number(e.packetsLost),n.ssrc=Number(e.ssrc),n.rttMs=Number(e.googRtt||0),t._stats.rtt=n.rttMs,t._stats.audioSend.push(n)}}))},t.prototype._getStats=function(){var e=this;return new Promise((function(t,n){e.pc.getStats(t,n)}))},t.prototype.statsResponsesToObjects=function(e){var t=[];return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t.push(n)})),t},t}(pg);!function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(ag||(ag={}));var gg=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._stats=dg,t.lastDecodeVideoReceiverStats=new Map,t.lastVideoFramesRecv=new Map,t.lastVideoFramesSent=new Map,t.lastVideoFramesDecode=new Map,t.lastVideoJBDelay=new Map,t.lastAudioJBDelay=new Map,t.mediaBytesSent=new Map,t.mediaBytesRetransmit=new Map,t.mediaBytesTargetEncode=new Map,t.lastEncoderMs=new Map,t}return hn(t,e),t.prototype.updateStats=function(){return An(this,void 0,void 0,(function(){var e,t=this;return pn(this,(function(n){switch(n.label){case 0:return e=this,[4,this.pc.getStats()];case 1:return e.report=n.sent(),this._stats=ln(dg),this.report.forEach((function(e){switch(e.type){case ag.OUTBOUND:"audio"===e.mediaType?t.processAudioOutboundStats(e):"video"===e.mediaType&&t.processVideoOutboundStats(e);break;case ag.INBOUND:"audio"===e.mediaType?t.processAudioInboundStats(e):"video"===e.mediaType&&t.processVideoInboundStats(e);break;case ag.TRANSPORT:(e=t.report.get(e.selectedCandidatePairId))&&t.processCandidatePairStats(e);break;case ag.CANDIDATE_PAIR:e.selected&&t.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}}))}))},t.prototype.processCandidatePairStats=function(e){this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}))},t.prototype.processAudioInboundStats=function(e){var t=this._stats.audioRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=ln(Ag),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,e.trackId&&this.processAudioTrackReceiverStats(e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),0<t.receivedFrames&&!this.isFirstAudioReceived&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(),this.isFirstAudioReceived=!0),t.outputLevel&&0<t.outputLevel&&!this.isFirstAudioDecoded&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(),this.isFirstAudioDecoded=!0)},t.prototype.processVideoInboundStats=function(e){var t=this._stats.videoRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=ln(lg),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded;var n=this.lastDecodeVideoReceiverStats.get(t.ssrc),i=this.lastVideoFramesDecode.get(t.ssrc),r=Date.now();if(0<t.framesDecodeCount&&!this.isFirstVideoDecoded){var a=t.decodedFrame?t.decodedFrame.width:0,o=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(a,o),this.isFirstVideoDecoded=!0}n&&(a=n.stats,o=r-n.lts,t.framesDecodeFreezeTime=a.framesDecodeFreezeTime,t.framesDecodeInterval=a.framesDecodeInterval,t.framesDecodeCount>a.framesDecodeCount&&this.isFirstVideoDecoded?(n.lts=Date.now(),t.framesDecodeInterval=o,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.videoIsReady?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady(!0))):t.framesDecodeCount<a.framesDecodeCount&&(t.framesDecodeInterval=0)),i&&800<=r-i.lts?(t.decodeFrameRate=Math.round((t.framesDecodeCount-i.count)/((r-i.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:r,rate:t.decodeFrameRate})):i?t.decodeFrameRate=i.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:r,rate:0}),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),e.trackId&&this.processVideoTrackReceiverStats(e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),0<t.packets&&!this.isFirstVideoReceived&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(),this.isFirstVideoReceived=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:cg({},t),lts:n?n.lts:Date.now()})},t.prototype.processVideoOutboundStats=function(e){var t=this._stats.videoSend.find((function(t){return t.ssrc===e.ssrc}));t||(t=ln(ug),this._stats.videoSend.push(t));var n,i=this.mediaBytesSent.get(e.ssrc);i?i.add(e.bytesSent):((n=new og(10)).add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,n)),void 0!==e.retransmittedBytesSent&&((i=this.mediaBytesRetransmit.get(e.ssrc))?i.add(e.retransmittedBytesSent):((n=new og(10)).add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,n))),e.totalEncodedBytesTarget&&((i=this.mediaBytesTargetEncode.get(e.ssrc))?i.add(e.totalEncodedBytesTarget):((n=new og(10)).add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,n))),t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,e.totalEncodeTime&&e.framesEncoded&&(i=this.lastEncoderMs.get(e.ssrc),t.avgEncodeMs=!i||i.lastFrameCount>e.framesEncoded?1e3*e.totalEncodeTime/e.framesEncoded:1e3*(e.totalEncodeTime-i.lastEncoderTime)/(e.framesEncoded-i.lastFrameCount),this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lts:Date.now()})),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),e.trackId&&this.processVideoTrackSenderStats(e.trackId,t),e.remoteId?this.processRemoteInboundStats(e.remoteId,t):(i=this.findRemoteStatsId(e.ssrc,ag.REMOTE_INBOUND))&&this.processRemoteInboundStats(i,t)},t.prototype.processAudioOutboundStats=function(e){var t=this._stats.audioSend.find((function(t){return t.ssrc===e.ssrc}));if(t||(t=ln(hg),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.trackId&&this.processAudioTrackSenderStats(e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{var n=this.findRemoteStatsId(e.ssrc,ag.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}},t.prototype.findRemoteStatsId=function(e,t){var n=Array.from(this.report.values()).find((function(n){return n.type===t&&n.ssrc===e}));return n?n.id:null},t.prototype.processVideoMediaSource=function(e,t){(e=this.report.get(e))&&e.width&&e.height&&e.framesPerSecond&&(t.inputFrame={width:e.width,height:e.height,frameRate:e.framesPerSecond})},t.prototype.processAudioMediaSource=function(e,t){(e=this.report.get(e))&&(t.inputLevel=e.audioLevel)},t.prototype.processVideoTrackSenderStats=function(e,t){if(e=this.report.get(e)){var n=0,i=Date.now(),r=this.lastVideoFramesSent.get(t.ssrc);r&&800<=i-r.lts?(n=Math.round((e.framesSent-r.count)/((i-r.lts)/1e3)),this.lastVideoFramesSent.set(t.ssrc,{count:e.framesSent,lts:i,rate:n})):r?n=r.rate:this.lastVideoFramesSent.set(t.ssrc,{count:e.framesSent,lts:i,rate:0}),t.sentFrame={width:e.frameWidth,height:e.frameHeight,frameRate:n}}},t.prototype.processVideoTrackReceiverStats=function(e,t){if(e=this.report.get(e)){var n=this.lastVideoFramesRecv.get(t.ssrc),i=Date.now();t.framesReceivedCount=e.framesReceived;var r=0;n&&800<=i-n.lts?(r=Math.round((e.framesReceived-n.count)/((i-n.lts)/1e3)),this.lastVideoFramesRecv.set(t.ssrc,{count:e.framesReceived,lts:i,rate:r})):n?r=n.rate:this.lastVideoFramesRecv.set(t.ssrc,{count:e.framesReceived,lts:i,rate:0}),t.receivedFrame={width:e.frameWidth||0,height:e.frameHeight||0,frameRate:r||0},t.decodedFrame={width:e.frameWidth||0,height:e.frameHeight||0,frameRate:t.decodeFrameRate||0},t.outputFrame={width:e.frameWidth||0,height:e.frameHeight||0,frameRate:t.decodeFrameRate||0},e.jitterBufferDelay&&e.jitterBufferEmittedCount&&(n=this.lastVideoJBDelay.get(t.ssrc),this.lastVideoJBDelay.set(t.ssrc,{jitterBufferDelay:e.jitterBufferDelay,jitterBufferEmittedCount:e.jitterBufferEmittedCount}),n||(n={jitterBufferDelay:0,jitterBufferEmittedCount:0}),e=1e3*(e.jitterBufferDelay-n.jitterBufferDelay)/(e.jitterBufferEmittedCount-n.jitterBufferEmittedCount),t.jitterBufferMs=e,t.currentDelayMs=Math.round(e))}},t.prototype.processAudioTrackSenderStats=function(e,t){(e=this.report.get(e))&&(t.aecReturnLoss=e.echoReturnLoss||0,t.aecReturnLossEnhancement=e.echoReturnLossEnhancement||0)},t.prototype.processAudioTrackReceiverStats=function(e,t){if(e=this.report.get(e)){if(e.removedSamplesForAcceleration&&e.totalSamplesReceived&&(t.accelerateRate=e.removedSamplesForAcceleration/e.totalSamplesReceived),e.jitterBufferDelay&&e.jitterBufferEmittedCount){var n=this.lastAudioJBDelay.get(t.ssrc);this.lastAudioJBDelay.set(t.ssrc,{jitterBufferDelay:e.jitterBufferDelay,jitterBufferEmittedCount:e.jitterBufferEmittedCount}),n||(n={jitterBufferDelay:0,jitterBufferEmittedCount:0}),t.jitterBufferMs=Math.round(1e3*(e.jitterBufferDelay-n.jitterBufferDelay)/(e.jitterBufferEmittedCount-n.jitterBufferEmittedCount))}t.outputLevel=e.audioLevel,n=1920,e.totalSamplesDuration&&e.totalSamplesReceived&&(n=e.totalSamplesReceived/e.totalSamplesDuration/50,t.receivedFrames=Math.round(e.totalSamplesReceived/n)),e.concealedSamples&&(t.droppedFrames=Math.round(e.concealedSamples/n))}},t.prototype.processRemoteInboundStats=function(e,t){(e=this.report.get(e))&&(t.packetsLost=e.packetsLost,e.roundTripTime&&(t.rttMs=1e3*e.roundTripTime))},t.prototype.getCodecFromCodecStats=function(e){return(e=this.report.get(e))&&(e=e.mimeType.match(/\/(.*)$/))&&e[1]?e[1]:""},t.prototype.updateSendBitrate=function(){var e=0,t=null,n=null;this.mediaBytesSent.forEach((function(t){e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((function(e){t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((function(e){n=null===n?e.diffMean():n+e.diffMean()})),this._stats.bitrate={actualEncoded:8*(null!==t?e-t:e)/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==n&&(this._stats.bitrate.targetEncoded=8*n/(this.options.updateInterval/1e3))},t}(pg),_g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hn(t,e),t.prototype.updateStats=function(){return Promise.resolve()},t}(pg);class mg{constructor(e){this.localCandidateCount=0,this.allCandidateReceived=!1,this.videoTrack=this.audioTrack=null,this.mediaStream=new MediaStream,this.ID=vg,vg+=1,this.spec=e,this.createPeerConnection(),e=this.pc;var t=void 0,n=void 0,i=ie()?1200:void 0;void 0===t&&(t=250),void 0===n&&(n=8),void 0===i&&(i=500);var r,a=(r=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i))&&r[0]?Number(r[0].split("/")[1]):null;this.statsFilter=a?76>a?new fg(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:i}):new gg(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:i}):window.RTCStatsReport&&e.getStats()instanceof Promise?new gg(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:i}):new _g(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:i})}get _statsFilter(){return this.statsFilter}getStats(){return this.statsFilter.getStats()}async createOfferSDP(){try{let e=await this.pc.createOffer(this.offerOptions);if(!e.sdp)throw Error("offer sdp is empty");return e.sdp}catch(al){throw Tl.error("create offer error:",al.toString()),new wl(zd.CREATE_OFFER_FAILED,al.toString())}}async setOfferSDP(e){try{await this.pc.setLocalDescription({type:"offer",sdp:e})}catch(t){throw Tl.error("set local offer error",t.toString()),new wl(zd.CREATE_OFFER_FAILED,t.toString())}}async setAnswerSDP(e){try{await this.pc.setRemoteDescription({type:"answer",sdp:e})}catch(t){if("InvalidStateError"!==t.name||"stable"!==this.pc.signalingState)throw Tl.error("set remote answer error",t.toString()),new wl(zd.SET_ANSWER_FAILED,t.toString());Tl.debug("[pc-".concat(this.ID,"] ignore invalidstate error"))}}close(){this.onConnectionStateChange=this.onICEConnectionStateChange=void 0;try{this.pc.oniceconnectionstatechange=null,this.pc.onconnectionstatechange=null,this.pc.onsignalingstatechange=null,this.pc.onicecandidateerror=null,this.pc.onicecandidate=null,this.pc.close(),this.pc=null,this.videoTransceiver=this.audioTransceiver=void 0}catch(al){}this.statsFilter.destroy()}createPeerConnection(){let e={iceServers:[]},t=e=>{const t=[];return No(e).call(e,(e=>{var n,i,r,a;e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Ir(n="turns:".concat((a=e.turnServerURL,a.match(/^[\.:\d]+$/)?"".concat(a.replace(/[^\d]/g,"-"),".edge.agora.io"):(Tl.info("Cannot recognized as IP address ".concat(a,". Used As Host instead")),a)),":")).call(n,e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Ir(i="turn:".concat(e.turnServerURL,":")).call(i,e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Ir(r="turn:".concat(e.turnServerURL,":")).call(r,e.tcpport,"?transport=tcp")}))})),t};var n,i;this.spec.iceServers?e.iceServers=this.spec.iceServers:this.spec.turnServer&&"off"!==this.spec.turnServer.mode&&(Fe(this.spec.turnServer.servers)?e.iceServers=this.spec.turnServer.servers:(e.iceServers&&e.iceServers.push(...t(this.spec.turnServer.servers)),e.iceServers&&this.spec.turnServer.serversFromGateway&&e.iceServers.push(...t(this.spec.turnServer.serversFromGateway)),No(n=Ir(i=this.spec.turnServer.servers).call(i,this.spec.turnServer.serversFromGateway||[])).call(n,(t=>{t.forceturn&&(e.iceTransportPolicy="relay")})))),xd.CHROME_FORCE_PLAN_B&&ce()&&(e.sdpSemantics="plan-b",Tu.supportUnifiedPlan=!1),this.pc=new RTCPeerConnection(e,{optional:[{googDscp:!0}]}),this.pc.oniceconnectionstatechange=()=>{this.onICEConnectionStateChange&&this.onICEConnectionStateChange(this.pc.iceConnectionState)},this.pc.onconnectionstatechange=()=>{this.onConnectionStateChange&&this.onConnectionStateChange(this.pc.connectionState)},this.pc.onsignalingstatechange=()=>{this.pc&&"closed"===this.pc.connectionState&&this.onConnectionStateChange&&this.onConnectionStateChange(this.pc.connectionState)},this.pc.onicecandidate=e=>{if(!e.candidate)return this.pc.onicecandidate=null,this.allCandidateReceived=!0,void Tl.debug("[pc-".concat(this.ID,"] local candidate count"),this.localCandidateCount);this.localCandidateCount+=1},$d((()=>{this.allCandidateReceived||(this.allCandidateReceived=!0,Tl.debug("[pc-".concat(this.ID,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),xd.CANDIDATE_TIMEOUT)}}class Eg extends mg{constructor(e){super(e)}async setOfferSDP(e){let t=xd.CUSTOM_PUB_OFFER_MODIFIER;return t&&(e=t(e)),await super.setOfferSDP(e)}async setAnswerSDP(e){let t=xd.CUSTOM_PUB_ANSWER_MODIFIER;return t&&(e=t(e)),await super.setAnswerSDP(e)}getAnswerSDP(){return this.pc.remoteDescription}getOfferSDP(){return this.pc.localDescription}async addStream(e){e=e.getTracks();for(let t of e)await this.addTrack(t)}async replaceTrack(e){if(!Tu.supportReplaceTrack){var t="audio"===e.kind?this.audioTrack:this.videoTrack;if(!t)throw new wl(zd.UNEXPECTED_ERROR,"can not find replaced track");return await this.removeTrack(t),await this.addTrack(e),!0}let n=this.getSender(e.kind),i=Kc(t=this.mediaStream.getTracks()).call(t,(t=>t.kind===e.kind));i&&this.mediaStream.removeTrack(i),this.mediaStream.addTrack(e);try{await n.replaceTrack(e),"audio"===e.kind?this.audioTrack=e:this.videoTrack=e}catch(r){throw new wl(zd.SENDER_REPLACE_FAILED,r.toString())}return!1}async removeTrack(e){let t=this.getSender(e.kind);this.mediaStream.removeTrack(e);try{let e=X();"Safari"===e.name&&"11"===e.version&&await t.replaceTrack(null),this.pc.removeTrack(t)}catch(n){Tl.warning("[pc-".concat(this.ID,"] remove track error, ignore"),n)}"audio"===e.kind?(this.audioTrack=null,this.audioSender=void 0,this.audioTransceiver&&(this.audioTransceiver.direction="inactive"),this.audioTransceiver=void 0):(this.videoTrack=null,this.videoSender=void 0,this.videoTransceiver&&(this.videoTransceiver.direction="inactive"),this.videoTransceiver=void 0)}onOfferSettled({videoActive:e,audioActive:t}){if(ie())Tl.debug("firefox do not set sender parameter");else{if(this.audioSender){let e={networkQuality:void 0,active:!0};xd.DSCP_TYPE&&(e.networkQuality=xd.DSCP_TYPE),this.audioTrack&&(e.active=!!t),this.setAudioRtpEncodingParameters(e).catch((e=>{Tl.debug("set audio sender`s network priority failed")}))}this.videoSender&&(t={networkQuality:void 0,active:!0},xd.DSCP_TYPE&&(t.networkQuality=xd.DSCP_TYPE),this.videoTrack&&(t.active=!!e),this.setVideoRtpEncodingParameters(t).catch((e=>{Tl.debug("set video sender`s network priority failed")})))}}async addTrack(e){let t,n,i=Tu;if("audio"===e.kind&&this.audioTrack||"video"===e.kind&&this.videoTrack)throw new wl(zd.UNEXPECTED_ERROR,"Can't add multiple stream");this.mediaStream.addTrack(e),i.supportUnifiedPlan?(t=await async function(e,t,n){var i;let r=Kc(i=e.getTransceivers()).call(i,(e=>"inactive"===e.direction&&e.receiver.track.kind===t.kind));return r?(r.direction="sendrecv",await r.sender.replaceTrack(t),r):e.addTransceiver(t,{direction:"sendrecv",streams:[n]})}(this.pc,e,this.mediaStream),n=t.sender):n=this.pc.addTrack(e,this.mediaStream),"audio"===e.kind?(this.audioTrack=e,this.audioSender=n,this.audioTransceiver=t):(this.videoTrack=e,this.videoSender=n,this.videoTransceiver=t)}async setRtpSenderParameters(e,t){if(e=this.videoSender||(this.videoTransceiver?this.videoTransceiver.sender:void 0)){var n=e.getParameters();n.degradationPreference=t;try{await e.setParameters(n)}catch(i){Tl.debug("[".concat(this.ID,"] ignore RtpSender.setParameters"),i.toString())}}}async setVideoRtpEncodingParameters(e){let t=this.videoSender||(this.videoTransceiver?this.videoTransceiver.sender:void 0);if(!t)throw new wl(zd.LOW_STREAM_ENCODING_ERROR,"Low stream has no video sender.");let n=t.getParameters();if(!n.encodings||!n.encodings[0])throw new wl(zd.LOW_STREAM_ENCODING_ERROR,"Low stream RtpEncodingParameters is empty.");e.scaleResolutionDownBy&&(n.encodings[0].scaleResolutionDownBy=e.scaleResolutionDownBy),e.maxBitrate&&(n.encodings[0].maxBitrate=e.maxBitrate),e.maxFramerate&&(n.encodings[0].maxFramerate=e.maxFramerate),void 0!==e.active&&(Tl.debug("set video sender encoding active:",e.active),n.encodings[0].active=e.active);let i=["very-low","low","medium","high"];return e.networkPriority&&nd(i).call(i,e.networkPriority)&&(Tl.debug("set video sender network quality:",e.networkPriority),n.encodings[0].networkPriority=e.networkPriority),await t.setParameters(n),t.getParameters()}async setAudioRtpEncodingParameters(e){let t=this.audioSender||(this.audioTransceiver?this.audioTransceiver.sender:void 0);if(!t)throw new wl(zd.SET_ENCODING_PARAMETER_ERROR,"pc has no audio sender.");let n=t.getParameters();if(!n.encodings||!n.encodings[0])throw new wl(zd.SET_ENCODING_PARAMETER_ERROR,"pc RtpEncodingParameters is empty.");void 0!==e.active&&(Tl.debug("set audio sender encoding active:",e.active),n.encodings[0].active=e.active);let i=["very-low","low","medium","high"];return e.networkPriority&&nd(i).call(i,e.networkPriority)&&(Tl.debug("set audio sender network quality:",e.networkPriority),n.encodings[0].networkPriority=e.networkPriority),await t.setParameters(n),t.getParameters()}getSender(e){var t,n,i=null;if(!(i=Tu.supportUnifiedPlan?(i=Kc(t=this.pc.getTransceivers()).call(t,(t=>t.sender.track&&t.sender.track.kind===e)))?i.sender:null:Kc(n=this.pc.getSenders()).call(n,(t=>t.track&&t.track.kind===e))||null))throw new wl(zd.SENDER_NOT_FOUND);return i}close(){this.videoSender=this.audioSender=void 0,super.close()}}class Ig extends mg{constructor(e){super(e),this.statsFilter.onFirstAudioDecoded=()=>this.onFirstAudioDecoded&&this.onFirstAudioDecoded(),this.statsFilter.onFirstVideoDecoded=(e,t)=>this.onFirstVideoDecoded&&this.onFirstVideoDecoded(e,t),this.statsFilter.onFirstAudioReceived=()=>this.onFirstAudioReceived&&this.onFirstAudioReceived(),this.statsFilter.onFirstVideoReceived=()=>this.onFirstVideoReceived&&this.onFirstVideoReceived(),Tu.supportUnifiedPlan?(this.audioTransceiver=this.pc.addTransceiver("audio",{direction:"recvonly"}),this.videoTransceiver=this.pc.addTransceiver("video",{direction:"recvonly"})):this.offerOptions={offerToReceiveAudio:!0,offerToReceiveVideo:!0},this.pc.ontrack=e=>{"audio"===e.track.kind?this.audioTrack=e.track:this.videoTrack=e.track,this.onTrack&&this.onTrack(e.track,e.streams[0])}}async setOfferSDP(e){let t=xd.CUSTOM_SUB_OFFER_MODIFIER;return t&&(e=t(e)),await super.setOfferSDP(e)}async setAnswerSDP(e){let t=xd.CUSTOM_SUB_ANSWER_MODIFIER;return t&&(e=t(e)),await super.setAnswerSDP(e)}}let vg=1,Cg=1;class yg extends Ch{constructor(e,t){super(),this.startTime=el(),this.createTime=el(),this.readyToReconnect=!1,this._connectionState="disconnected",this.currentReconnectCount=0,this.ID=Cg,Cg+=1,this.joinInfo=e,this._userId=t,this.createPC()}get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this.emit(Jl.CONNECTION_STATE_CHANGE,e,this._connectionState),this._connectionState=e)}get connectionId(){var e,t;return Ir(e=Ir(t="".concat(this.joinInfo.clientId,"-")).call(t,this.type?this.type:"sub(".concat(this._userId,")"),"-")).call(e,this.ID)}getUserId(){return this._userId}startUploadStats(){this.statsUploadInterval=window.setInterval((()=>{let e=this.pc.getStats();this.uploadStats(e,this.lastUploadPCStats),this.lastUploadPCStats=e}),3e3),this.statsUploadSlowInterval=window.setInterval((()=>{let e=this.pc.getStats();this.uploadSlowStats(e)}),6e4),this.relatedStatsUploadInterval=window.setInterval((()=>{let e=this.pc.getStats();this.uploadRelatedStats(e,this.lastRelatedPcStats),this.lastRelatedPcStats=e}),1e3)}stopUploadStats(){this.statsUploadInterval&&window.clearInterval(this.statsUploadInterval),this.relatedStatsUploadInterval&&window.clearInterval(this.relatedStatsUploadInterval),this.relatedStatsUploadInterval=this.statsUploadInterval=void 0}createWaitConnectionConnectedPromise(){return new Cc(((e,t)=>{"disconnected"===this.connectionState?t():"connected"===this.connectionState?e():this.once(Jl.CONNECTION_STATE_CHANGE,(n=>{"connected"===n?e():t()}))}))}async reconnectPC(e){if(this.readyToReconnect=!1,e&&this.onPCDisconnected(e),1/0<this.currentReconnectCount)throw Tl.debug("[".concat(this.connectionId,"] cannot reconnect pc")),e||new wl(zd.UNEXPECTED_ERROR);if(this.stopUploadStats(),Tl.debug("[".concat(this.connectionId,"] start reconnect pc")),this.connectionState="connecting",this.currentReconnectCount+=1,await this.closePC())return Tl.debug("[".concat(this.connectionId,"] abort reconnect pc, wait ws")),void this.readyToReconnectPC();this.createPC(),await this.startP2PConnection(),this.currentReconnectCount=0}readyToReconnectPC(){this.stopUploadStats(),this.readyToReconnect=!0,this.pc.onICEConnectionStateChange=void 0,this.connectionState="connecting"}updateICEPromise(){this.removeAllListeners(Jl.GATEWAY_P2P_LOST),this.icePromise=new Cc(((e,t)=>{let n=!0;this.pc.onICEConnectionStateChange=i=>{var r,a;Tl.info(Ir(r=Ir(a="[".concat(this.connectionId,"] ice-state: ")).call(a,this.type," p2p ")).call(r,i)),"connected"===i&&e(),"failed"!==i&&"closed"!==i||(n&&this.emit(Jl.P2P_LOST),n=!1,this.reconnectPC(new wl(zd.ICE_FAILED)).catch((e=>{t(e)})))},this.pc.onConnectionStateChange=e=>{var i,r;Tl.info(Ir(i=Ir(r="[".concat(this.connectionId,"] connection-state: ")).call(r,this.type," p2p ")).call(i,e)),"failed"!==e&&"closed"!==e||(n&&this.emit(Jl.P2P_LOST),n=!1,this.reconnectPC(new wl(zd.PC_CLOSED)).catch((e=>{t(e)})))},this.removeAllListeners(Jl.GATEWAY_P2P_LOST),this.once(Jl.GATEWAY_P2P_LOST,(e=>{var i;if(this.pc.ID.toString()===e.toString()){if(Tl.info(Ir(i="[".concat(this.connectionId,"] ")).call(i,this.type," p2p gateway lost")),n&&this.emit(Jl.P2P_LOST),n=!1,this.pc.allCandidateReceived&&0===this.pc.localCandidateCount)return this.disconnectedReason=new wl(zd.NO_ICE_CANDIDATE,"can not get candidate in this pc"),void this.closeP2PConnection(!0);this.reconnectPC(new wl(zd.GATEWAY_P2P_LOST)).catch((e=>{t(e)}))}}))}))}}class Sg{constructor(e){this.freezeTimeCounterList=[],this.lastTimeUpdatedTime=this.playbackTime=this.freezeTime=this.timeUpdatedCount=0,this._videoElementStatus=Nl.NONE,this.isGettingVideoDimensions=!1,this.handleVideoEvents=e=>{switch(e.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=Nl.PLAYING;break;case"loadeddata":this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded();break;case"canplay":this.videoElementStatus=Nl.CANPLAY;break;case"stalled":this.videoElementStatus=Nl.STALLED;break;case"suspend":this.videoElementStatus=Nl.SUSPEND;break;case"pause":this.videoElementStatus=Nl.PAUSED,!re()&&!oe()&&this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(Tl.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=Nl.WAITING;break;case"abort":this.videoElementStatus=Nl.ABORT;break;case"ended":this.videoElementStatus=Nl.ENDED;break;case"emptied":this.videoElementStatus=Nl.EMPTIED;break;case"timeupdate":{if(e=el(),this.timeUpdatedCount+=1,10>this.timeUpdatedCount)return void(this.lastTimeUpdatedTime=e);let t=e-this.lastTimeUpdatedTime;for(this.lastTimeUpdatedTime=e,500<t&&(this.freezeTime+=t),this.playbackTime+=t;6e3<=this.playbackTime;)this.playbackTime-=6e3,this.freezeTimeCounterList.push(Math.min(6e3,this.freezeTime)),this.freezeTime=Math.max(0,this.freezeTime-6e3)}}},this.startGetVideoDimensions=()=>{let e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement&&4<this.videoElement.videoWidth*this.videoElement.videoHeight)return Tl.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);$d(e,500)};!this.isGettingVideoDimensions&&e()},this.autoResumeAfterInterruption=()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===Uh.curState&&(ae()?(Tl.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15")),this.videoElement.pause(),this.videoElement.play()):(Tl.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play()))},this.autoResumeAfterInterruptionOnIOS15=()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(Tl.debug("[track-".concat(this.trackId,"] video element paused, auto resume on iOS 15")),this.videoElement.pause(),this.videoElement.play())},this.slot=e.element,this.trackId=e.trackId,this.updateConfig(e),Uh.on(Dh.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Uh.on(Dh.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){var t,n;e!==this._videoElementStatus&&(Tl.debug(Ir(t=Ir(n="[".concat(this.trackId,"] video-element-status change ")).call(n,this._videoElementStatus," => ")).call(t,e)),this._videoElementStatus=e)}updateConfig(e){this.config=e,this.trackId=e.trackId,(e=e.element)!==this.slot&&(this.destroy(),this.slot=e),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(){if(this.videoElement){let e=this.videoElement.play();e&&e.catch&&e.catch((e=>{"NotAllowedError"===e.name?(Tl.warning("detected video element autoplay failed",e),this.handleAutoPlayFailed()):Tl.warning("[".concat(this.trackId,"] play warning: "),e)}));let t=X();("Safari"===t.name&&15===Number(t.version)||ae())&&e&&e.finally&&e.finally((()=>{this.config.mirror&&this.videoElement&&(this.videoElement.style.transform="rotateY(180deg)")}))}}getCurrentFrame(){if(!this.videoElement)return new ImageData(2,2);let e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;var t=e.getContext("2d");return t?(t.drawImage(this.videoElement,0,0,e.width,e.height),t=t.getImageData(0,0,e.width,e.height),e.remove(),t):(Tl.error("create canvas context failed!"),new ImageData(2,2))}destroy(){if(Uh.off(Dh.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Uh.off(Dh.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=void 0),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(al){}this.container=void 0}this.freezeTimeCounterList=[]}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",this.createVideoElement(),this.container.appendChild(this.videoElement)):this.removeVideoElement(),this.slot.appendChild(this.container)}createVideoElement(){this.videoElement||(this.videoElementStatus=Nl.INIT,this.videoElement=document.createElement("video"),this.videoElement.onerror=()=>this.videoElementStatus=Nl.ERROR,this.container&&this.container.appendChild(this.videoElement),No(Rg).call(Rg,(e=>{this.videoElement&&this.videoElement.addEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval=window.setInterval((()=>{!document.getElementById("video_".concat(this.trackId))&&this.videoElement&&(this.videoElementStatus=Nl.DESTROYED)}),1e3)),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),this.videoElement.style.left="0",this.videoElement.style.top="0";var e=X();"Safari"===e.name&&15===Number(e.version)||ae()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,ie()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,ie()&&this.videoElement.load()),void 0!==(e=this.videoElement.play())&&e.catch((e=>{Tl.debug("[".concat(this.trackId,"] playback interrupted"),e.toString())}))}removeVideoElement(){if(this.videoElement){No(Rg).call(Rg,(e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0);try{this.container&&this.container.removeChild(this.videoElement)}catch(al){}this.videoElement=void 0,this.videoElementStatus=Nl.NONE}}handleAutoPlayFailed(){if(this.videoElement){let e=t=>{t.preventDefault(),this.videoElement&&(this.videoElement.play().then((()=>{var e;Tl.debug(Ir(e="[".concat(this.trackId,"] Video element for trackId:")).call(e,this.trackId," autoplay resumed."))})).catch((e=>{Tl.error(e)})),document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0),ht()}}}let Rg="play playing loadeddata canplay pause stalled suspend waiting abort emptied ended timeupdate".split(" ");var Tg;!document.documentMode&&window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(Tg=HTMLCanvasElement.prototype.getContext,function(){let e=arguments;return"webgl"===e[0]&&(e=jc([]).call(arguments),e[0]="experimental-webgl"),Tg.apply(null,e)}));let wg=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189],bg=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];class Ng{constructor(e,t){this.gl=e,this.kernel=t||bg,e=this.gl,t=_n(this.kernel),t=gn(e,[_n(wg),t]);var n=e.getAttribLocation(t,"a_position"),i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),n=e.getAttribLocation(t,"a_texCoord"),i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),this.program=e=t}setUniforms(){let e=this.gl.getUniformLocation(this.program,"u_flipY");this.gl.uniform1f(e,1)}}class kg extends Ng{constructor(e,t,n,i){super(e,t),this.denoiseLevel=5,this.xOffset=1/n,this.yOffset=1/i}setUniforms(){let e=this.gl.getUniformLocation(this.program,"u_flipY"),t=this.gl.getUniformLocation(this.program,"u_singleStepOffset"),n=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform2f(t,this.xOffset,this.yOffset),this.gl.uniform1f(n,this.denoiseLevel),this.gl.uniform1f(e,1)}setParameters(e){void 0!==e.denoiseLevel&&(this.denoiseLevel=e.denoiseLevel)}setSize(e,t){this.xOffset=1/e,this.yOffset=1/t}}let Og=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];class Dg extends kg{constructor(e,t,n){super(e,Og,t,n)}}let Bg=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];class Lg extends kg{constructor(e,t,n){super(e,Bg,t,n)}}let Ug=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];class xg extends kg{constructor(e,t,n){super(e,Ug,t,n)}}let Mg=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144],Qg=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],Pg=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],Fg=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];class Gg extends kg{constructor(e,t,n,i){super(e,Mg,n,i),this.lightLevel=.1,this.rednessLevel=.5,this.mskin_he_max=175/180*3.141593,this.mskin_he_min=115/180*3.141593,this.mskin_hc_max=173/180*3.141593,this.mskin_hc_min=116/180*3.141593,this.mskin_hc_axis=2.04203545,this.mfacts_rotate_ge=this.mfacts_rotate_le=this.mfacts_rotate_c=0,this.tab_addr=null,this.lutTextures=[],this.inputTexture=t,this.init()}setUniforms(){var e=this.gl.getUniformLocation(this.program,"u_flipY"),t=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform1f(t,this.denoiseLevel),this.gl.uniform1f(e,1),e=this.gl.getUniformLocation(this.program,"light"),this.gl.uniform1f(e,this.lightLevel),e=this.gl.getUniformLocation(this.program,"redness"),this.gl.uniform1f(e,this.rednessLevel),e=this.gl.getUniformLocation(this.program,"skin_he_max"),t=this.gl.getUniformLocation(this.program,"skin_he_min");var n=this.gl.getUniformLocation(this.program,"skin_hc_max"),i=this.gl.getUniformLocation(this.program,"skin_hc_min");let r=this.gl.getUniformLocation(this.program,"skin_hc_axis"),a=this.gl.getUniformLocation(this.program,"facts_rotate_c"),o=this.gl.getUniformLocation(this.program,"facts_rotate_le"),s=this.gl.getUniformLocation(this.program,"facts_rotate_ge");for(this.gl.uniform1f(e,this.mskin_he_max),this.gl.uniform1f(t,this.mskin_he_min),this.gl.uniform1f(n,this.mskin_hc_max),this.gl.uniform1f(i,this.mskin_hc_min),this.gl.uniform1f(r,this.mskin_hc_axis),this.gl.uniform1f(a,this.mfacts_rotate_c),this.gl.uniform1f(o,this.mfacts_rotate_le),this.gl.uniform1f(s,this.mfacts_rotate_ge),e=this.gl.getUniformLocation(this.program,"u_originImage"),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.uniform1i(e,2),e=["lighten_lut"],t=[this.gl.TEXTURE3],n=0;n<e.length;n++)i=this.gl.getUniformLocation(this.program,e[n]),this.gl.activeTexture(t[n]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[n]),this.gl.uniform1i(i,n+3)}setParameters(e){void 0!==e.denoiseLevel&&(this.denoiseLevel=e.denoiseLevel),void 0!==e.lightLevel&&(this.lightLevel=e.lightLevel),void 0!==e.rednessLevel&&(this.rednessLevel=e.rednessLevel,this.updateRedness(this.rednessLevel)),e.lighteningContrastLevel&&this.updateLut(e.lighteningContrastLevel)}init(){this.tab_addr=new Uint8Array(Pg);let e=[this.tab_addr],t=[256],n=[1];for(let i=0;i<e.length;i++){let r=this.gl.createTexture();if(!r)throw new wl(zd.WEBGL_INTERNAL_ERROR,"create lut texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,t[i],n[i],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,e[i]),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.lutTextures.push(r)}}updateRedness(e){var t=e;1<e&&(e=1),0>e&&(e=0),1<t&&(t=1),0>t&&(t=0),this.mfacts_rotate_c=.8*e,.8>t&&(t=0),this.mskin_he_max=175/180*3.141593,this.mskin_hc_max=173/180*3.141593,this.mskin_he_min=(115-4*t)/180*3.141593,this.mskin_hc_min=(116-4*t)/180*3.141593,this.mskin_hc_axis=(117-4*t)/180*3.141593,this.mskin_hc_axis<this.mskin_hc_min&&(this.mskin_hc_axis=this.mskin_hc_min),1.5707965>this.mskin_hc_min&&(this.mskin_hc_min=1.5707965),1.5707965>this.mskin_hc_axis&&(this.mskin_hc_axis=1.5707965),1.5707965>this.mskin_he_min&&(this.mskin_he_min=1.5707965),3.141593<this.mskin_hc_max&&(this.mskin_hc_max=3.141593),3.141593<this.mskin_hc_axis&&(this.mskin_hc_axis=3.141593),3.141593<this.mskin_he_max&&(this.mskin_he_max=3.141593),e=this.mskin_he_max-this.mskin_hc_max,t=this.mskin_hc_max-this.mskin_hc_axis,this.mfacts_rotate_ge=.01<e?this.mfacts_rotate_c*t/e:this.mfacts_rotate_c,e=this.mskin_hc_min-this.mskin_he_min,t=this.mskin_hc_axis-this.mskin_hc_min,this.mfacts_rotate_le=.01<e?this.mfacts_rotate_c*t/e:this.mfacts_rotate_c}updateLut(e){var t=null;if(0===e&&(t=Pg),1===e&&(t=Fg),2===e&&(t=Qg),!t)throw new wl(zd.WEBGL_INTERNAL_ERROR,"invalid ylut_table value:"+e);this.tab_addr=new Uint8Array(t),e=[this.tab_addr],t=[256];let n=[1];for(let i=0;i<e.length;i++)this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[i]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,t[i],n[i],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,e[i])}}class jg{constructor(){this.canvas=this.gl=null,this.programs=[],this.inputTexture=this.commonProgram=null,this.outputTextures=[],this.fbos=[],this.originalFrameHeight=this.originalFrameWidth=0,this.enableBeauty=!1,this.denoiseLevel=5,this.lightLevel=.35,this.rednessLevel=.5,this.lighteningContrastLevel=1}setEnableBeauty(e){this.enableBeauty=!!e}init(e,t,n){if(!Tu.supportWebGL)throw new wl(zd.NOT_SUPPORTED,"your browser is not support webGL");if(this.gl=n.getContext("webgl"),!this.gl)throw new wl(zd.WEBGL_INTERNAL_ERROR,"can not get webgl context");if(this.initGL(e,t),!this.inputTexture)throw new wl(zd.WEBGL_INTERNAL_ERROR,"can not find input texture");this.canvas=n,this.programs.push(new Ng(this.gl)),this.programs.push(new Dg(this.gl,e,t)),this.programs.push(new Lg(this.gl,e,t)),this.programs.push(new xg(this.gl,e,t)),this.programs.push(new Gg(this.gl,this.inputTexture,e,t)),this.commonProgram=this.programs[0].program,this.setDenoiseLevel(this.denoiseLevel),this.setLightLevel(this.lightLevel),this.setRednessLevel(this.rednessLevel),this.setContrastLevel(this.lighteningContrastLevel)}render(e){if(this.gl&&this.commonProgram&&this.canvas){var t=0;if(this.originalFrameHeight===e.videoWidth&&this.originalFrameWidth===e.videoHeight)t=2;else if(this.originalFrameHeight!==e.videoHeight||this.originalFrameWidth!==e.videoWidth){var n,i,r;if(Tl.debug(Ir(n=Ir(i=Ir(r="beauty effect: resolution changed ".concat(this.originalFrameWidth,"x")).call(r,this.originalFrameHeight," -> ")).call(i,e.videoWidth,"x")).call(n,e.videoHeight)),0===e.videoHeight||0===e.videoWidth)return void Tl.debug("beauty effect: skip 0 resolution frame");this.canvas.width=e.videoWidth,this.canvas.height=e.videoHeight,e.setAttribute("width",e.videoWidth.toString()),e.setAttribute("height",e.videoHeight.toString()),this.release(),this.init(e.videoWidth,e.videoHeight,this.canvas)}for(this.gl.viewport(0,0,e.videoWidth,e.videoHeight),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),e=this.enableBeauty?this.programs.length-1:0,n=0;n<=e;n++)i=this.programs[n].program,this.gl.useProgram(i),i=this.gl.getUniformLocation(i,"u_image"),this.programs[n].setUniforms(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[t+n%2]),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.outputTextures[t+n%2]),this.gl.uniform1i(i,0);this.gl.useProgram(this.commonProgram),t=this.gl.getUniformLocation(this.commonProgram,"u_flipY"),this.gl.uniform1f(t,-1),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}else Tl.warning("video effect manager is not init!")}setDenoiseLevel(e){var t;No(t=this.programs).call(t,(t=>{t instanceof kg&&t.setParameters({denoiseLevel:e})})),this.denoiseLevel=e}setLightLevel(e){var t;No(t=this.programs).call(t,(t=>{t instanceof kg&&t.setParameters({lightLevel:e})})),this.lightLevel=e}setRednessLevel(e){var t;No(t=this.programs).call(t,(t=>{t instanceof kg&&t.setParameters({rednessLevel:e})})),this.rednessLevel=e}setContrastLevel(e){var t;No(t=this.programs).call(t,(t=>{t instanceof kg&&t.setParameters({lighteningContrastLevel:e})})),this.lighteningContrastLevel=e}setSize(e,t){var n;No(n=this.programs).call(n,(n=>{n instanceof kg&&n.setSize(e,t)}))}release(){this.inputTexture=this.commonProgram=this.gl=null,this.programs=[],this.outputTextures=[],this.fbos=[]}initGL(e,t){if(!this.gl)throw new wl(zd.WEBGL_INTERNAL_ERROR,"can not find webgl context");this.inputTexture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);for(let n=0;4>n;n++){let i=this.gl.createTexture();if(!i)throw new wl(zd.WEBGL_INTERNAL_ERROR,"create texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),2>n?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,t,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null):this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,t,e,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);let r=this.gl.createFramebuffer();if(!r)throw new wl(zd.WEBGL_INTERNAL_ERROR,"create frame buffer failed");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,r),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,i,0),this.outputTextures.push(i),this.fbos.push(r)}this.gl.viewport(0,0,e,t),this.originalFrameWidth=e,this.originalFrameHeight=t}}class Vg{constructor(){this.recordedFrameCount=this.targetFrameRate=0,this.recordingTime=2}async startRecordBeautyEffectOutput(e,t=4){if(this.recordID)throw new wl(zd.UNEXPECTED_ERROR,"another beauty effect recording is in progress");let n=Bt(6,"");return this.recordID=n,this.targetFrameRate=e,this.recordedFrameCount=0,this.recordingTime=t,await Ot(1e3*this.recordingTime),this.recordID!==n?(this.recordID=void 0,!0):(this.recordID=void 0,this.recordedFrameCount<this.targetFrameRate*this.recordingTime/2?(Tl.warning("detect beauty effect overload, current framerate",this.recordedFrameCount/2),!1):(Tl.debug("beauty effect current framerate",this.recordedFrameCount/2),!0))}stopRecordBeautyEffectOutput(){this.recordedFrameCount=this.targetFrameRate=0,this.recordID=void 0}addFrame(){this.recordID&&(this.recordedFrameCount+=1)}}class Yg extends class{get output(){return this._output}async setInput(e){if(e!==this.input){if(e.kind!==this.kind)throw new wl(zd.UNEXPECTED_ERROR);this.input&&this.removeInput(),this.input=e,await this._setInput(e)}}removeInput(){this.input=void 0,this._removeInput()}async updateOutput(e){this.output!==e&&(this._output=e,this.onOutputChange&&await this.onOutputChange())}replaceOriginMediaStream(e,t){var n,i;let r=Kc(n=e.getTracks()).call(n,(e=>e.kind===this.kind));r&&e.removeTrack(r),t=Kc(i=t.getTracks()).call(i,(e=>e.kind===this.kind)),void 0===this.output&&t&&e.addTrack(t),this.output&&(Tl.debug("replace ".concat(this.output.kind," track to origin media stream")),e.addTrack(this.output))}}{constructor(){super(),this.kind="video",this.fps=15,this.overloadDetector=new Vg,this.enabled=!1,this.stopChromeBackgroundLoop=null,this.lastRenderTime=0,this.fps=30,this.manager=new jg}async setBeautyEffectOptions(e,t){void 0!==t.smoothnessLevel&&De(t.smoothnessLevel,"options.smoothnessLevel",0,1,!1),void 0!==t.lighteningLevel&&De(t.lighteningLevel,"options.lighteningLevel",0,1,!1),void 0!==t.rednessLevel&&De(t.rednessLevel,"options.rednessLevel",0,1,!1),void 0!==t.lighteningContrastLevel&&Oe(t.lighteningContrastLevel,"options.lighteningContrastLevel",[0,1,2]),void 0!==t.smoothnessLevel&&this.manager.setDenoiseLevel(Math.max(.1,10*t.smoothnessLevel)),void 0!==t.lighteningLevel&&this.manager.setLightLevel(Math.max(.1,t.lighteningLevel/2)),void 0!==t.rednessLevel&&this.manager.setRednessLevel(Math.max(.01,t.rednessLevel)),void 0!==t.lighteningContrastLevel&&this.manager.setContrastLevel(t.lighteningContrastLevel),this.enabled!==e&&(this.manager.setEnableBeauty(e),this.enabled=e,e?this.input&&await this.startEffect():await this.stopEffect())}destroy(){this.onOutputChange=void 0,this.stopEffect(),this.enabled=!1}async startEffect(){let e=X();if(!this.input)return void Tl.warning("video track is null, fail to start video effect!");if(this.input&&this.output&&this.input!==this.output)return void Tl.warning("video effect is already enabled");let t=await this.renderWithWebGL();await this.updateOutput(t),Tl.info("start video effect, output:",this.output),this.overloadDetector.startRecordBeautyEffectOutput(this.fps).then((e=>{e||this.onOverload&&this.onOverload()}));let n=()=>{this.enabled&&requestAnimationFrame(n);const e=el(),t=1e3/this.fps,i=this.lastRenderTime?e-this.lastRenderTime:t;i<t||(this.lastRenderTime=e-(i-t),this.video&&this.video.paused&&this.video.play(),this.enabled&&this.video&&(this.manager.render(this.video),this.output&&this.output.requestFrame&&this.output.requestFrame(),this.overloadDetector.addFrame()))};requestAnimationFrame(n),e.name===fd.CHROME&&document.addEventListener("visibilitychange",(()=>{document.hidden?this.stopChromeBackgroundLoop=it((()=>{this.enabled&&this.video&&this.manager.render(this.video),this.output&&this.output.requestFrame&&this.output.requestFrame(),this.overloadDetector.addFrame()}),this.fps):this.stopChromeBackgroundLoop&&(this.stopChromeBackgroundLoop(),this.stopChromeBackgroundLoop=null)}),!1)}async stopEffect(){Tl.info("stop video effect"),this.overloadDetector.stopRecordBeautyEffectOutput(),this.manager.release(),this.canvas&&this.canvas.remove(),this.video&&this.video.remove(),this.video=this.canvas=void 0,await this.updateOutput(this.input)}async _setInput(e){this.enabled&&!this.video&&await this.startEffect()}_removeInput(){this.stopEffect()}async renderWithWebGL(){var e;if(!this.input)throw new wl(zd.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not renderWithWebGL, no input");this.canvas&&(this.canvas.remove(),this.canvas=void 0),this.video&&(this.video.remove(),this.video=void 0),this.canvas=document.createElement("canvas"),this.video=document.createElement("video"),this.video.setAttribute("autoplay",""),this.video.setAttribute("muted",""),this.video.muted=!0,this.video.setAttribute("playsinline",""),this.video.setAttribute("style","display:none"),this.video.srcObject=new MediaStream([this.input]);var t=new Cc((e=>{const t=()=>{this.video&&this.video.removeEventListener("playing",t),e(void 0)};this.video&&this.video.addEventListener("playing",t)}));this.video.play(),await t;let n=(t=this.input.getSettings()).width||this.video.videoWidth,i=t.height||this.video.videoHeight;if(t.frameRate&&this.fps!==t.frameRate&&(this.fps=t.frameRate,Tl.debug("beauty video processor: set fps to",this.fps)),Tl.debug(Ir(e="beauty video processor: width ".concat(n," height ")).call(e,i)),!n||!i)throw new wl(zd.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not get track resolution");return this.canvas.width=n,this.canvas.height=i,this.video.setAttribute("width",n.toString()),this.video.setAttribute("height",i.toString()),this.manager.init(n,i,this.canvas),this.canvas.captureStream(Tu.supportRequestFrame?0:this.fps).getVideoTracks()[0]}}var Hg=function(e,t,n,i){var r,a=arguments.length,o=3>a?t:null===i?i=ts(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(o=(3>a?r(o):3<a?r(t,n,o):r(t,n))||o);return 3<a&&o&&jo(t,n,o),o},Kg=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class Wg extends Oh{constructor(e,t,n,i,r){super(e,r),this.trackMediaType="video",this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1},this._enabled=!0,this.updateMediaStreamTrackResolution(),this._encoderConfig=t,this._scalabiltyMode=n,this._optimizationMode=i}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Nl.PLAYING)}play(e,t={}){let n=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.LOCAL_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof e?e:"HTMLElement",t]});if(!(e instanceof HTMLElement)){let t=document.getElementById(e.toString());var i;t?e=t:(Tl.warning(Ir(i="[".concat(this.getTrackId(),'] can not find "#')).call(i,e,'" element, use document.body')),e=document.body)}Tl.debug("[".concat(this.getTrackId(),"] start video playback"),Pi(t)),e=vn({},this._getDefaultPlayerConfig(),{},t,{trackId:this.getTrackId(),element:e}),this._player?this._player.updateConfig(e):(this._player=new Sg(e),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),n.onSuccess()}stop(){let e=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.LOCAL_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return e.onSuccess();this._player.destroy(),this._player=void 0,Tl.debug("[".concat(this.getTrackId(),"] stop video playback")),e.onSuccess()}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}Tl.info("[".concat(this.getTrackId(),"] start setEnabled"),e);let n=await this._enabledMutex.lock();if(!e){this._originMediaStreamTrack.enabled=!1;try{await Mt(this,fu.NEED_REMOVE_TRACK,this)}catch(i){throw Tl.error("[".concat(this.getTrackId(),"] setEnabled to false error"),i.toString()),n(),i}return t||(this._enabled=!1),Tl.info("[".concat(this.getTrackId(),"] setEnabled to false success")),n()}this._originMediaStreamTrack.enabled=!0;try{await Mt(this,fu.NEED_ADD_TRACK,this)}catch(i){throw Tl.error("[".concat(this.getTrackId(),"] setEnabled to true error"),i.toString()),n(),i}Tl.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0),n()}async setMuted(e){var t;if(e!==this._muted){if(this.stateCheck("muted",e),this._muted=e,X().name===fd.FIREFOX)return Tl.debug("[".concat(this.getTrackId(),"] firefox set mute fallback to set enabled")),void await this.setEnabled(!e,!0);this._mediaStreamTrack.enabled=!e,Tl.debug(Ir(t="[".concat(this.getTrackId(),"] start set muted: ")).call(t,e)),await Mt(this,fu.SET_VIDEO_TRACK_MUTED,{track:this,muted:e})}}getStats(){return Vt((()=>{Tl.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")}),"localVideoTrackGetStatsWarning"),Qt(this,fu.GET_STATS)||vn({},$l)}async setBeautyEffect(e,t={}){let n=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.LOCAL_VIDEO_TRACK_BEAUTY,options:[this.getTrackId(),e,t]});if(e||this._videoBeautyProcessor){if(X().os===pd.IOS||X().os===pd.ANDROID)throw e=new wl(zd.INVALID_OPERATION,"can not enable beauty effect on mobile device"),n.onError(e),e;if(!this._enabled&&e)throw e=new wl(zd.TRACK_IS_DISABLED,"can not enable beauty effect when track is disabled"),n.onError(e),e;Tl.info("[".concat(this.getTrackId(),"] start setBeautyEffect"),e,Pi(t));try{this._videoBeautyProcessor?await this._videoBeautyProcessor.setBeautyEffectOptions(e,t):(this._videoBeautyProcessor=new Yg,this._videoBeautyProcessor.onOverload=()=>{jt((()=>this.emit(_u.BEAUTY_EFFECT_OVERLOAD)))},await this._videoBeautyProcessor.setBeautyEffectOptions(e,t),await this._registerTrackProcessor(this._videoBeautyProcessor))}catch(i){throw Tl.error("[".concat(this.getTrackId(),"] setBeautyEffect error"),i.toString()),n.onError(i),i}Tl.info("[".concat(this.getTrackId(),"] setBeautyEffect success")),n.onSuccess()}}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}clone(e,t,n,i){let r=this._mediaStreamTrack.clone();return new Wg(r,e,t,n,i)}async setBitrateLimit(e){var t;if(Tl.debug(Ir(t="[".concat(this.getTrackId(),"] set bitrate limit, ")).call(t,Pi(e))),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await Mt(this,fu.NEED_RESET_REMOTE_SDP)}catch(n){return n.throw()}}}async setOptimizationMode(e){var t;if("motion"===e||"detail"===e||"balanced"===e){try{this._optimizationMode=e,await Mt(this,fu.SET_OPTIMIZATION_MODE,e)}catch(n){throw Tl.error("[".concat(this.getTrackId(),"] set optimization mode failed"),n.toString()),n}Tl.info(Ir(t="[".concat(this.getTrackId(),"] set optimization mode success (")).call(t,e,")"))}else Tl.error(zd.INVALID_PARAMS,"optimization mode must be motion, detail or balanced")}setScalabiltyMode(e){var t;if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return Tl.error(zd.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=e,Tl.info(Ir(t="[".concat(this.getTrackId(),"] set scalability mode success (")).call(t,e,")"))}updateMediaStreamTrackResolution(){Lt(this._originMediaStreamTrack).then((([e,t])=>{this._videoHeight=t,this._videoWidth=e})).catch(cA)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async renewMediaStreamTrack(){}}Hg([At(),Kg("design:type",Function),Kg("design:paramtypes",[Object,Object]),Kg("design:returntype",void 0)],Wg.prototype,"play",null),Hg([At(),Kg("design:type",Function),Kg("design:paramtypes",[Boolean,Boolean]),Kg("design:returntype",Cc)],Wg.prototype,"setEnabled",null),Hg([At(),$e({report:wh}),Kg("design:type",Function),Kg("design:paramtypes",[Boolean]),Kg("design:returntype",Cc)],Wg.prototype,"setMuted",null),Hg([At(),Kg("design:type",Function),Kg("design:paramtypes",[]),Kg("design:returntype",Object)],Wg.prototype,"getStats",null),Hg([At(),Kg("design:type",Function),Kg("design:paramtypes",[Boolean,Object]),Kg("design:returntype",Cc)],Wg.prototype,"setBeautyEffect",null),Hg([At(),Kg("design:type",Function),Kg("design:paramtypes",[]),Kg("design:returntype",ImageData)],Wg.prototype,"getCurrentFrameData",null),Hg([At(),Kg("design:type",Function),Kg("design:paramtypes",[Object]),Kg("design:returntype",Cc)],Wg.prototype,"setBitrateLimit",null),Hg([At(),Kg("design:type",Function),Kg("design:paramtypes",[String]),Kg("design:returntype",Cc)],Wg.prototype,"setOptimizationMode",null),Hg([At(),Kg("design:type",Function),Kg("design:paramtypes",[Object]),Kg("design:returntype",void 0)],Wg.prototype,"setScalabiltyMode",null),Hg([At(),Kg("design:type",Function),Kg("design:paramtypes",[]),Kg("design:returntype",void 0)],Wg.prototype,"updateMediaStreamTrackResolution",null);class zg extends Wg{constructor(e,t,n,i,r,a){super(e,t.encoderConfig?de(t.encoderConfig):{},i,r,a),this._enabled=!0,this._deviceName="default",this.tryResumeVideoForIOS15WeChat=async()=>{ae()&&X().name===fd.WECHAT&&this._mediaStreamTrack.muted&&this._enabled&&!this._isClosed&&(Tl.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.setEnabled(!1),await this.setEnabled(!0))},this._config=t,this._constraints=n,this._deviceName=e.label,this._config.encoderConfig&&(this._encoderConfig=de(this._config.encoderConfig)),Uh.on(Dh.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}async setDevice(e){var t;let n=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.CAM_VIDEO_TRACK_SET_DEVICE,options:[this.getTrackId(),e]});if(Tl.info(Ir(t="[".concat(this.getTrackId(),"] set device to ")).call(t,e)),this._enabled)try{let n=await Vh.getDeviceById(e);(t={}).video=vn({},this._constraints),t.video.deviceId={exact:e},t.video.facingMode=void 0,this._originMediaStreamTrack.stop();let r=null;try{r=await ct(t,this.getTrackId())}catch(i){throw Tl.error("[".concat(this.getTrackId(),"] setDevice failed"),i.toString()),r=await ct({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),i}await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=n.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(r){throw n.onError(r),Tl.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{this._deviceName=(await Vh.getDeviceById(e)).label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(r){throw n.onError(r),Tl.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}Tl.info("[".concat(this.getTrackId(),"] setDevice success")),n.onSuccess()}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}Tl.info("[".concat(this.getTrackId(),"] start setEnabled"),e);let n=await this._enabledMutex.lock();if(!e){this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),t||(this._enabled=!1);try{await Mt(this,fu.NEED_REMOVE_TRACK,this)}catch(r){throw Tl.error("[".concat(this.getTrackId(),"] setEnabled to false error"),r.toString()),n(),r}return Tl.info("[".concat(this.getTrackId(),"] setEnabled to false success")),n()}e=vn({},this._constraints);let i=Vh.searchDeviceIdByName(this._deviceName);i&&!e.deviceId&&(e.deviceId={exact:i});try{let e=await ct({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),await Mt(this,fu.NEED_ADD_TRACK,this)}catch(r){throw Tl.error("[".concat(this.getTrackId(),"] setEnabled true error"),r.toString()),n(),r}this.updateMediaStreamTrackResolution(),Tl.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0),n()}async setEncoderConfiguration(e,t){if(t=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,options:[this.getTrackId(),e]}),!this._enabled)throw e=new wl(zd.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled"),t.onError(e),e;e=de(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin);let n=(i=this._config,JSON.parse(Pi(i)));var i;n.encoderConfig=e,i=mn(n),Tl.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),Pi(e),Pi(i));try{await this._originMediaStreamTrack.applyConstraints(i),this.updateMediaStreamTrackResolution()}catch(r){throw e=new wl(zd.UNEXPECTED_ERROR,r.toString()),Tl.error("[".concat(this.getTrackId(),"] applyConstraints error"),e.toString()),t.onError(e),e}this._config=n,this._constraints=i,this._encoderConfig=e;try{await Mt(this,fu.NEED_RENEGOTIATE)}catch(r){return t.onError(r),r.throw()}t.onSuccess()}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((re()||oe())&&this._enabled&&!this._isClosed&&Uh.duringInterruption){let e=async()=>{Uh.off(Dh.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Tl.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Uh.on(Dh.IOS_INTERRUPTION_END,e)}else Tl.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(_u.TRACK_ENDED)}async renewMediaStreamTrack(){var e=vn({},this._constraints);let t=Vh.searchDeviceIdByName(this._deviceName);t&&!e.deviceId&&(e.deviceId={exact:t}),e=await ct({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}close(){super.close(),Uh.off(Dh.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}}Hg([At(),Kg("design:type",Function),Kg("design:paramtypes",[String]),Kg("design:returntype",Cc)],zg.prototype,"setDevice",null),Hg([At(),Kg("design:type",Function),Kg("design:paramtypes",[Boolean,Boolean]),Kg("design:returntype",Cc)],zg.prototype,"setEnabled",null),Hg([At(),Kg("design:type",Function),Kg("design:paramtypes",[Object,Boolean]),Kg("design:returntype",Cc)],zg.prototype,"setEncoderConfiguration",null);var qg=!0;"findIndex"in[]&&Array(1).findIndex((function(){qg=!1})),bi({target:"Array",proto:!0,forced:qg},{findIndex:function(e){return Jr(this,e,1<arguments.length?arguments[1]:void 0)}});var Jg=_r("Array").findIndex,Xg=Array.prototype,Zg=function(e){var t=e.findIndex;return e===Xg||e instanceof Array&&t===Xg.findIndex?Jg:t};let $g=(e,t)=>{let n=null;if("h264"===t?n=e.match(/a=rtpmap:(\d+) H264.*\r\n/)||e.match(/a=rtpmap:(\d+) H264.*\n/):"vp8"===t?n=e.match(/a=rtpmap:(\d+) VP8.*\r\n/)||e.match(/a=rtpmap:(\d+) VP8.*\n/):"vp9"===t?n=e.match(/a=rtpmap:(\d+) VP9.*\r\n/)||e.match(/a=rtpmap:(\d+) VP9.*\n/):"av1"===t&&(n=e.match(/a=rtpmap:(\d+) AV1.*\r\n/)||e.match(/a=rtpmap:(\d+) AV1.*\n/)),n&&n[1])return n[1]};class e_ extends yg{constructor(e,t,n,i){super(t,t.stringUid||t.uid),this.suspendTracks=[],this.type="pub",this._waitingSuccessResponse=this.detecting=!1,this.handleMuteVideoTrack=({muted:e},t,n)=>{this.setVideoTrackMuteState(e).then(t).catch(n)},this.handleMuteAudioTrack=({track:e,muted:t},n,i)=>{this.setAudioTrackMuteState(t,e).then(n).catch(i)},this.renegotiateWithGateway=async()=>(Tl.debug("[pc-".concat(this.pc.ID,"] renegotiate start")),new Cc((async(e,t)=>{this.connectionState="connecting";let n=i=>{"connected"===i&&(this.off(Jl.CONNECTION_STATE_CHANGE,n),e()),"disconnected"===i&&(this.off(Jl.CONNECTION_STATE_CHANGE,n),t(new wl(zd.OPERATION_ABORTED,"renegotiate abort")))};this.on(Jl.CONNECTION_STATE_CHANGE,n),ie()&&xd.SIMULCAST&&this.videoTrack&&this.videoTrack._scalabiltyMode&&await this.addSimulcast4Firefox(this.videoTrack._scalabiltyMode);var i=await this.pc.createOfferSDP();this.audioTrack&&this.audioTrack._encoderConfig&&(i=yn(i,this.audioTrack._encoderConfig)),this.videoTrack&&this.videoTrack._scalabiltyMode&&("vp9"!==this.codec&&"vp8"!==this.codec?(this.videoTrack._scalabiltyMode.numSpatialLayers=1,this.videoTrack._scalabiltyMode.numTemporalLayers=1):(1<this.videoTrack._scalabiltyMode.numSpatialLayers||1<this.videoTrack._scalabiltyMode.numTemporalLayers)&&(i=Rn(i,this.codec,this.videoTrack._scalabiltyMode)),Tl.debug("renegoation spatial layers: ",this.videoTrack._scalabiltyMode.numSpatialLayers)),await this.pc.setOfferSDP(i),this.audioTrack instanceof iA&&this.pc.onOfferSettled({videoActive:this.videoTrack&&!this.videoTrack.muted,audioActive:this.audioTrack&&this.audioTrack.isActive});let r=await xt(this,Jl.NEED_RENEGOTIATE,i);this.videoTrack&&!ie()&&xd.SIMULCAST&&this.videoTrack._scalabiltyMode&&this.setSimulcastVideoRtpEncodingParameters(this.videoTrack._scalabiltyMode),i=function(e,t){var n,i,r;const a=Xc(n=RegExp.prototype.test).call(n,/^([a-z])=(.*)/);e=rs(i=e.split(/(\r\n|\r|\n)/)).call(i,a),t=rs(r=t.split(/(\r\n|\r|\n)/)).call(r,a);let o=null;const s=new Ao;return No(e).call(e,(e=>{const t=e.match(/m=(audio|video)/);t&&t[1]?o=t[1]:o&&(e=e.match(/=(sendrecv|recvonly|sendonly|inactive)/))&&e[1]&&s.set(o,e[1])})),o=null,Rc(t).call(t,(e=>{var t=e.match(/m=(audio|video)/);if(t&&t[1])return o=t[1],e;if(!o)return e;if((t=e.match(/=(sendrecv|recvonly|sendonly|inactive)/))&&t[1]){const n=s.get(o);if(n&&n!==t[1])return e.replace(t[1],n)}return e})).join("\r\n")+"\r\n"}(i,this.updateAnswerSDP(r.sdp)),await this.pc.setAnswerSDP(i),Tl.debug("[pc-".concat(this.pc.ID,"] renegotiate success")),this.connectionState="connected"}))),this.handleStreamRenegotiate=(e,t)=>{"connected"===this.connectionState?this.renegotiateWithGateway().then(e).catch(t):e()},this.handleReplaceTrack=(e,t,n)=>{if(this.audioTrack instanceof iA&&"audio"===e.kind)return t();this.pc.replaceTrack(e).then((e=>e?this.renegotiateWithGateway():Cc.resolve())).then(t).catch(n)},this.handleCloseAudioTrack=e=>{},this.handleCloseVideoTrack=()=>{this.lowStreamConnection&&this.lowStreamConnection.videoTrack&&this.lowStreamConnection.videoTrack.close()},this.handleGetSessionID=e=>{e(this.joinInfo.sid)},this.handleGetLocalVideoStats=e=>{e(this.statsCollector.getLocalVideoTrackStats(this.connectionId))},this.handleGetLocalAudioStats=e=>{e(this.statsCollector.getLocalAudioTrackStats(this.connectionId))},this.handleSetOptimizationMode=(e,t,n)=>{this.videoTrack&&this.setRtpSenderParametersByTrackConfig(this.videoTrack).then(t).catch(n)},this.isLowStreamConnection=!!i,this.codec=n,this.statsCollector=e,this.statsCollector.addLocalConnection(this)}getAllTracks(){let e=[];return this.videoTrack&&e.push(this.videoTrack),this.audioTrack&&this.audioTrack instanceof iA?e=Ir(e).call(e,this.audioTrack.trackList):this.audioTrack&&e.push(this.audioTrack),e.push(...this.suspendTracks),e}async addTracks(e){let t=Tu;if("connecting"===this.connectionState)try{return await this.createWaitConnectionConnectedPromise(),await this.addTracks(e)}catch(a){throw new wl(zd.OPERATION_ABORTED,"publish abort")}var n=!1;let i=this.getAllTracks();e=Gt(e=rs(e).call(e,(e=>-1===xc(i).call(i,e))));for(let o=0;o<e.length;o+=1){var r=e[o];if(!(r instanceof Oh))return new wl(zd.INVALID_LOCAL_TRACK).throw();if(r instanceof Wg&&this.disabledVideoTrack){if(this.disabledVideoTrack!==r)return new wl(zd.EXIST_DISABLED_VIDEO_TRACK).throw();this.disabledVideoTrack=void 0}if(r instanceof Wg&&this.videoTrack)return new wl(zd.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw();if(r instanceof eA){if(this.audioTrack&&this.audioTrack._bypassWebAudio)throw Tl.error("One of the audio track was created with config bypassWebAudio set to true, there is no way to publish multiple audio tracks."),new wl(zd.CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS);if(this.audioTrack instanceof iA)0===this.audioTrack.trackList.length&&await this.pc.setAudioRtpEncodingParameters({active:!0}),this.audioTrack.addAudioTrack(r);else if(t.webAudioMediaStreamDest)if(r._bypassWebAudio){if(this.audioTrack)throw Tl.error("Can not publish another audio track with bypassWebAudio set to true."),new wl(zd.CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS);Tl.debug("[".concat(this.connectionId,"] audio track doesn't not pass through WebAudio, use original audio track to publish")),n=await this.addTrackWithPC(r)}else n=new iA,r.muted?this.suspendTracks.push(r):n.addAudioTrack(r),n=await this.addTrackWithPC(n);else Tl.debug("[".concat(this.connectionId,"] your browser does not support mixing track, use original audio track to publish")),n=await this.addTrackWithPC(r)}else r instanceof Wg&&this.isLowStreamConnection?(n=Nn({},{width:160,height:120,framerate:15,bitrate:50},{},this.lowStreamParameter),t.supportDualStreamEncoding?(Tl.debug("[".concat(this.connectionId,"] creating low stream using rtp encoding.")),this.lowStreamEncoding=Rt(n,r),r=r.clone({bitrateMax:n.bitrate,bitrateMin:n.bitrate})):(Tl.debug("[".concat(this.connectionId,"] creating low stream using canvas.")),r=wn(r,n),r=new Wg(r,{bitrateMax:n.bitrate,bitrateMin:n.bitrate})),r._hints.push(gu.LOW_STREAM),n=await this.addTrackWithPC(r),this.bindTrackEvents(r)):(this.detecting=!0,$d((()=>{this.detecting=!1}),8e3),n=await this.addTrackWithPC(r))}await this.updateControlMessage(),n&&await this.renegotiateWithGateway(),No(e).call(e,(e=>this.bindTrackEvents(e)))}async removeTracks(e,t){let n=this.getAllTracks();e=Gt(e=rs(e).call(e,(e=>-1!==xc(n).call(n,e)||e===this.disabledVideoTrack)));let i=[];for(let o=0;o<e.length;o+=1){let n=e[o];if(this.unbindTrackEvents(n),this.audioTrack instanceof iA&&n instanceof eA)this.audioTrack.removeAudioTrack(n),Ft(this.suspendTracks,n),0===this.audioTrack.trackList.length&&(i.push(this.audioTrack),this.audioTrack=void 0);else if(n instanceof eA)i.push(n),this.audioTrack=void 0;else if(n instanceof Wg){if(t){if(this.disabledVideoTrack===n)return void(this.disabledVideoTrack=void 0)}else this.disabledVideoTrack=this.videoTrack;i.push(n),this.isLowStreamConnection&&n.close(),this.videoTrack=void 0}}if(this.videoTrack||this.audioTrack){if(0!==i.length){if("connecting"===this.connectionState)try{await this.createWaitConnectionConnectedPromise()}catch(a){return}for(let t of i){var r;Tl.debug(Ir(r="[".concat(this.connectionId,"] remove ")).call(r,t.trackMediaType," from pc")),await this.pc.removeTrack(t._mediaStreamTrack),"Safari"===(e=X()).name&&"11"===e.version&&await t.renewMediaStreamTrack()}await this.renegotiateWithGateway()}}else await this.closeP2PConnection()}async updateControlMessage(){this.audioTrack instanceof iA&&"connected"===this.connectionState&&(this.audioTrack&&await xt(this,Jl.NEED_CONTROL,{type:"audio",muted:!this.audioTrack.isActive}),this.videoTrack&&await xt(this,Jl.NEED_CONTROL,{type:"video",muted:this.videoTrack.muted}))}async setSimulcastVideoRtpEncodingParameters(e){let t=this.pc.getSender("video");if(!t)throw new wl(zd.LOW_STREAM_ENCODING_ERROR,"Low stream has no video sender.");let n=t.getParameters();if(!n.encodings||!n.encodings[0])throw new wl(zd.LOW_STREAM_ENCODING_ERROR,"Low stream RtpEncodingParameters is empty.");this.videoTrack&&this.videoTrack._encoderConfig&&this.videoTrack._encoderConfig.bitrateMax&&200<this.videoTrack._encoderConfig.bitrateMax&&1<e.numSpatialLayers&&(n.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:1e3*(this.videoTrack._encoderConfig.bitrateMax-50)},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:5e4,scaleResolutionDownBy:4}]),await t.setParameters(n)}startP2PConnection(){return new Cc((async(e,t)=>{if(!this.audioTrack&&!this.videoTrack)return t(new wl(zd.UNEXPECTED_ERROR,"no track to publish"));let n=i=>{if("connected"===i&&(this.off(Jl.CONNECTION_STATE_CHANGE,n),e()),"disconnected"===i){if(this.off(Jl.CONNECTION_STATE_CHANGE,n),this.disconnectedReason)return t(this.disconnectedReason);t(new wl(zd.OPERATION_ABORTED,"publish abort"))}};this.on(Jl.CONNECTION_STATE_CHANGE,n),this.disconnectedReason=void 0,this.connectionState="connecting",this._waitingSuccessResponse=!0,this.startTime=el();try{var i;!this.pc.audioTrack&&this.audioTrack&&await this.pc.addTrack(this.audioTrack._mediaStreamTrack),!this.pc.videoTrack&&this.videoTrack&&await this.pc.addTrack(this.videoTrack._mediaStreamTrack),ie()&&xd.SIMULCAST&&this.videoTrack&&this.videoTrack._scalabiltyMode&&await this.addSimulcast4Firefox(this.videoTrack._scalabiltyMode);let e=await this.pc.createOfferSDP();xd.REMOVE_NEW_CODECS&&(e="vp9"===this.codec?Tn(e,["av1"]):"av1"===this.codec?Tn(e,["vp9"]):Tn(e,["vp9","av1"]));let t=Cn(e);this.videoTrack&&!nd(i=t.video).call(i,this.codec.toUpperCase())&&Tl.warning("current codec is not supported, support list: ".concat(t.video.join(","))),this.audioTrack&&this.audioTrack._encoderConfig&&(e=yn(e,this.audioTrack._encoderConfig)),this.videoTrack&&!ie()&&this.videoTrack._scalabiltyMode&&("vp9"!==this.codec&&"vp8"!==this.codec?(this.videoTrack._scalabiltyMode.numSpatialLayers=1,this.videoTrack._scalabiltyMode.numTemporalLayers=1):(1<this.videoTrack._scalabiltyMode.numSpatialLayers||1<this.videoTrack._scalabiltyMode.numTemporalLayers)&&(e=Rn(e,this.codec,this.videoTrack._scalabiltyMode)),Tl.debug("spatial layers: ",this.videoTrack._scalabiltyMode.numSpatialLayers)),await this.pc.setOfferSDP(e),this.audioTrack instanceof iA&&this.pc.onOfferSettled({videoActive:this.videoTrack&&!this.videoTrack.muted,audioActive:this.audioTrack&&this.audioTrack.isActive}),this.videoTrack&&this.setRtpSenderParametersByTrackConfig(this.videoTrack),Tl.debug("[".concat(this.connectionId,"] create and set offer success")),i={messageType:"OFFER",sdp:e,offererSessionId:104,retry:!0},Tu.supportDualStreamEncoding&&this.isLowStreamConnection&&this.lowStreamEncoding&&this.videoTrack&&await this.setLowStreamEncoding(this.lowStreamEncoding,this.videoTrack),this.videoTrack&&!ie()&&xd.SIMULCAST&&this.videoTrack._scalabiltyMode&&this.setSimulcastVideoRtpEncodingParameters(this.videoTrack._scalabiltyMode);let n=await xt(this,Jl.NEED_ANSWER,i),r=this.updateAnswerSDP(n.sdp);await this.pc.setAnswerSDP(r),Tl.debug("[".concat(this.connectionId,"] set answer success")),await this.icePromise,this.connectionState="connected",this.startUploadStats()}catch(r){this.off(Jl.CONNECTION_STATE_CHANGE,n),this.connectionState="disconnected",this.reportPublishEvent(!1,r.code),Tl.error("[".concat(this.connectionId,"] connection error"),r.toString()),t(r)}}))}reportPublishEvent(e,t,n){var i;this._waitingSuccessResponse=!1,wh.publish(this.joinInfo.sid,{lts:this.startTime,succ:e,ec:t,audioName:this.audioTrack&&(this.audioTrack instanceof iA?this.audioTrack.getSubTrackLabels().join(","):this.audioTrack.getTrackLabel()),videoName:this.videoTrack&&this.videoTrack.getTrackLabel(),screenshare:!(!this.videoTrack||-1===xc(i=this.videoTrack._hints).call(i,gu.SCREEN_TRACK)),audio:!!this.audioTrack,video:!!this.videoTrack,p2pid:this.pc.ID,publishRequestid:this.ID,extend:n})}async closeP2PConnection(e){let t=this.getAllTracks();var n;No(t).call(t,(e=>{this.unbindTrackEvents(e)})),this.isLowStreamConnection&&this.videoTrack&&this.videoTrack.close(),this.videoTrack=void 0,this.audioTrack instanceof iA&&(No(n=this.audioTrack.trackList).call(n,(e=>{this.audioTrack.removeAudioTrack(e)})),this.audioTrack.close()),this.audioTrack=void 0,this.stopUploadStats(),this.statsCollector.removeConnection(this.connectionId),await this.closePC(e),this.connectionState="disconnected",this.removeAllListeners()}getNetworkQuality(){var e,t=this.pc.getStats();if(!t.videoSend[0]&&!t.audioSend[0])return 1;var n=Qt(this,Jl.NEED_SIGNAL_RTT),i=t.videoSend[0]?t.videoSend[0].rttMs:void 0;let r=t.audioSend[0]?t.audioSend[0].rttMs:void 0;return i=i&&r?(i+r)/2:i||r,n=.17>(n=70*t.sendPacketLossRate/50+.3*((i&&n?(i+n)/2:i||n)||0)/1500)?1:.36>n?2:.59>n?3:.1>n?4:5,this.videoTrack&&this.videoTrack._encoderConfig&&-1===xc(e=this.videoTrack._hints).call(e,gu.SCREEN_TRACK)&&(e=this.videoTrack._encoderConfig.bitrateMax,t=t.bitrate.actualEncoded,e&&t)?Md[.15>(t=(1e3*e-t)/(1e3*e))?0:.3>t?1:.45>t?2:.6>t?3:4][n]:n}handleUpdateBitrateLimit(e){this.videoTrack&&this.videoTrack.setBitrateLimit(e)}async setAudioTrackMuteState(e,t){if(!(this.audioTrack instanceof iA))return void Tl.debug("[".concat(this.connectionId,"] set audio mute in unsupported environment"));let n=this.audioTrack;try{var i;e?(n.removeAudioTrack(t),0===n.trackList.length&&(Tl.debug(Ir(i="[".concat(this.connectionId,"] set audio encoding active, id: ")).call(i,t.getTrackId(),", state: ",!1)),await this.pc.setAudioRtpEncodingParameters({active:!1})),this.suspendTracks.push(t)):(await this.pc.setAudioRtpEncodingParameters({active:!0}),n.addAudioTrack(t),Ft(this.suspendTracks,t))}catch(a){var r;Tl.warning(Ir(r="[".concat(this.connectionId,"] set audio muted error ")).call(r,a,", fallback to set enabled"))}await xt(this,Jl.NEED_CONTROL,{type:"audio",muted:!(!this.audioTrack||this.audioTrack.isActive)})}async setVideoTrackMuteState(e){let t=!e,n=!1;if(X().name===fd.FIREFOX)n=!0;else try{var i,r;Tl.debug(Ir(i=Ir(r="[".concat(this.connectionId,"] set video encoding active, id: ")).call(r,this.videoTrack&&this.videoTrack.getTrackId(),", state: ")).call(i,t)),await this.pc.setVideoRtpEncodingParameters({active:t})}catch(c){var a;Tl.warning(Ir(a="[".concat(this.connectionId,"] set video encoding active error ")).call(a,c,", fallback to set enabled")),n=!0}var o,s;n&&this.videoTrack&&(Tl.debug(Ir(o=Ir(s="[".concat(this.connectionId,"] set video encoding active fallback to enabled on firefox, type: ")).call(s,this.videoTrack&&this.videoTrack.getTrackId(),", state: ")).call(o,t)),this.videoTrack.getMediaStreamTrack().enabled=t),this.lowStreamConnection&&this.lowStreamConnection.setVideoTrackMuteState(e),!this.isLowStreamConnection&&await xt(this,Jl.NEED_CONTROL,{type:"video",muted:e})}uploadStats(e,t){let n=this.audioTrack?function(e,t){const n=e.audioSend[0];return n?((e={id:Bt(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:n.ssrc.toString()}).A_astd=t._originMediaStreamTrack.enabled&&t._mediaStreamTrack.enabled?"0":"1",n.inputLevel?e.A_ail=Math.round(100*n.inputLevel).toString():e.A_ail=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),e.A_apil=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),e):null}(e,this.audioTrack):void 0,i=this.videoTrack?function(e,t){const n=e.videoSend[0];if(!n)return null;switch((e={id:Bt(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:n.ssrc.toString()}).A_vstd=t._originMediaStreamTrack&&!t._originMediaStreamTrack.enabled||!t._mediaStreamTrack.enabled?"1":"0",n.sentFrame&&(e.A_fhs=n.sentFrame.height.toString(),e.A_frs=n.sentFrame.frameRate.toString(),e.A_fws=n.sentFrame.width.toString()),n.adaptionChangeReason){case"none":e.A_ac="0";break;case"cpu":e.A_ac="1";break;case"bandwidth":e.A_ac="2";break;case"other":e.A_ac="3"}return e.A_nr=n.nacksCount.toString(),n.avgEncodeMs&&(e.A_aem=n.avgEncodeMs.toFixed(0).toString()),e}(e,this.videoTrack):void 0,r=yt(e,t),a=function(e){const t={id:"bweforvideo",timestamp:new Date(e.timestamp).toISOString(),type:"VideoBwe"};return e.bitrate.retransmit&&(t.A_rb=e.bitrate.retransmit.toString()),e.bitrate.targetEncoded&&(t.A_teb=e.bitrate.targetEncoded.toString()),t.A_aeb=e.bitrate.actualEncoded.toString(),t.A_tb=e.bitrate.transmit.toString(),void 0!==e.sendBandwidth&&(t.A_asb=e.sendBandwidth.toString()),t}(e);n&&jt((()=>this.emit(Jl.NEED_UPLOAD,zl.PUBLISH_STATS,n))),i&&jt((()=>this.emit(Jl.NEED_UPLOAD,zl.PUBLISH_STATS,Nn({},i,{},r)))),a&&jt((()=>this.emit(Jl.NEED_UPLOAD,zl.PUBLISH_STATS,a)))}uploadSlowStats(e){let t=yt(e);t&&jt((()=>this.emit(Jl.NEED_UPLOAD,zl.PUBLISH_STATS,t)))}uploadRelatedStats(e){let t=function(e){return(e=e.videoSend[0])?{mediaType:"video",isVideoMute:!1,frameRateInput:e.inputFrame&&e.inputFrame.frameRate.toString(),frameRateSent:e.sentFrame&&e.sentFrame.frameRate.toString(),googRtt:e.rttMs.toString()}:null}(e);t&&(t.isVideoMute=!(!this.videoTrack||!this.videoTrack.muted),jt((()=>{this.emit(Jl.NEED_UPLOAD,zl.PUBLISH_RELATED_STATS,t)})))}async addSimulcast4Firefox(e){if(ie()&&this.videoTrack&&this.videoTrack._encoderConfig&&this.videoTrack._encoderConfig.bitrateMax&&200<this.videoTrack._encoderConfig.bitrateMax&&1<e.numSpatialLayers&&"vp8"===this.codec&&(e=this.pc.getSender("video"))){let t=e.getParameters();Tl.debug("getParameters : ",t),t||Tl.error("[".concat(this.connectionId,"] get sender parameter error.")),t.encodings=[{rid:"m",active:!0,maxBitrate:5e4,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:1e3*(this.videoTrack._encoderConfig.bitrateMax-50)}],await e.setParameters(t),Tl.debug("setParameters : ",t)}}bindTrackEvents(e){var t;e.addListener(fu.NEED_RESET_REMOTE_SDP,Xc(t=this.handleResetRemoteSdp).call(t,this)),this.isLowStreamConnection||(e instanceof eA?(e.addListener(fu.GET_STATS,this.handleGetLocalAudioStats),e.addListener(fu.NEED_CLOSE,this.handleCloseAudioTrack),e.addListener(fu.SET_AUDIO_TRACK_MUTED,this.handleMuteAudioTrack)):e instanceof Wg&&(e.addListener(fu.GET_STATS,this.handleGetLocalVideoStats),e.addListener(fu.NEED_CLOSE,this.handleCloseVideoTrack),e.addListener(fu.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),e.addListener(fu.SET_VIDEO_TRACK_MUTED,this.handleMuteVideoTrack)),e.addListener(fu.NEED_RENEGOTIATE,this.handleStreamRenegotiate),e.addListener(fu.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(fu.NEED_SESSION_ID,this.handleGetSessionID))}unbindTrackEvents(e){this.isLowStreamConnection||(e instanceof eA?(e.off(fu.GET_STATS,this.handleGetLocalAudioStats),e.off(fu.NEED_CLOSE,this.handleCloseAudioTrack),e.off(fu.SET_AUDIO_TRACK_MUTED,this.handleMuteAudioTrack)):e instanceof Wg&&(e.off(fu.GET_STATS,this.handleGetLocalVideoStats),e.off(fu.NEED_CLOSE,this.handleCloseVideoTrack),e.off(fu.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),e.off(fu.SET_VIDEO_TRACK_MUTED,this.handleMuteVideoTrack)),e.off(fu.NEED_RENEGOTIATE,this.handleStreamRenegotiate),e.off(fu.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(fu.NEED_SESSION_ID,this.handleGetSessionID))}async addTrackWithPC(e){if("connecting"===this.connectionState)return new wl(zd.INVALID_OPERATION,"last publish operation has not finished").throw();let t=this.videoTrack,n=!1;return this.audioTrack&&e instanceof iA?(this.audioTrack=e,Tl.debug("[".concat(this.connectionId,"] replace pc audio track")),n=await this.pc.replaceTrack(e._mediaStreamTrack)):this.videoTrack&&e instanceof Wg?(this.videoTrack=e,Tl.debug("[".concat(this.connectionId,"] replace pc video track")),n=await this.pc.replaceTrack(e._mediaStreamTrack)):e instanceof eA?(this.audioTrack=e,Tl.debug("[".concat(this.connectionId,"] add audio track to pc")),await this.pc.addTrack(e._mediaStreamTrack),n=!0):e instanceof Wg&&(this.videoTrack=e,Tl.debug("[".concat(this.connectionId,"] add video track to pc")),await this.pc.addTrack(e._mediaStreamTrack),n=!0),"connected"===this.connectionState&&this.videoTrack!==t&&this.videoTrack&&await this.setRtpSenderParametersByTrackConfig(this.videoTrack),"disconnected"!==this.connectionState&&n}handleResetRemoteSdp(){return new Cc(((e,t)=>{var n;Tl.info("[pc-".concat(this.pc.ID,"] start reset remote sdp"));let i=this.pc.getOfferSDP();var r=this.pc.getAnswerSDP();if(!r||!i)return e();let a;r=r.sdp,this.videoTrack&&this.videoTrack._encoderConfig&&-1===xc(n=this.videoTrack._hints).call(n,gu.SCREEN_TRACK)&&(a=function(e,t){var n,i;let r=t.bitrateMin;t=t.bitrateMax;let a=Xc(n=RegExp.prototype.test).call(n,/^([a-z])=(.*)/);if(e=rs(i=e.split(/(\r\n|\r|\n)/)).call(i,a),t){let n="AS";var o;X().name===fd.FIREFOX&&(t=1e3*(t>>>0),n="TIAS"),i=Zg(e).call(e,(e=>nd(e).call(e,n))),0<i&&(e[i]=Ir(o="b=".concat(n,":")).call(o,t))}return r&&0<(o=Zg(e).call(e,(e=>nd(e).call(e,"x-google-min-bitrate"))))&&(e[o]=e[o].replace(/x-google-min-bitrate=(.*)/,"x-google-min-bitrate=".concat(r))),e.join("\r\n")+"\r\n"}(r,this.videoTrack._encoderConfig)),r!==a?this.pc.setOfferSDP(i.sdp).then((()=>{if(a)return this.pc.setAnswerSDP(a)})).then(e).catch((e=>{var n;Tl.error(Ir(n="[pc-".concat(this.pc.ID,"] reset remote sdp error, ")).call(n,e)),t(e)})):Tl.debug("[pc-".concat(this.pc.ID,"] remote sdp have no not changed"))}))}async setRtpSenderParametersByTrackConfig(e){if(!Tu.supportSetRtpSenderParameters)return void Tl.debug("[".concat(this.connectionId,"] do not support set pc rtp sender, skip"));let t={},n="balanced";"motion"===e._optimizationMode?n="maintain-framerate":"detail"===e._optimizationMode&&(n="maintain-resolution"),Tl.debug("[".concat(this.connectionId,"] set pc rtp sender"),t,n),await this.pc.setRtpSenderParameters(t,n)}updateAnswerSDP(e){var t,n;return e=e.replace(/a=x-google-flag:conference\r\n/g,""),this.videoTrack&&xc(t=this.videoTrack._hints).call(t,gu.SCREEN_TRACK),this.videoTrack&&this.videoTrack._encoderConfig&&-1===xc(n=this.videoTrack._hints).call(n,gu.SCREEN_TRACK)&&(e=function(e,t,n){let i=Tu;var r=n.bitrateMin;n=n.bitrateMax;let a=e.match(/m=video.*\r\n/)||e.match(/m=video.*\n/);if(a&&0<a.length&&i.supportMinBitrate&&r&&(t=$g(e,t)))if(xd.SIMULCAST){var o,s;r=n?.7*n:300,e=e.replace(a[0],Ir(o=Ir(s="".concat(a[0],"a=fmtp:")).call(s,t," x-google-start-bitrate=")).call(o,r,"\r\n"))}else{var c,d;e=e.replace(a[0],Ir(c=Ir(d="".concat(a[0],"a=fmtp:")).call(d,t," x-google-min-bitrate=")).call(c,r,"\r\n"))}var l,u;return a&&0<a.length&&n&&(o="AS",X().name===fd.FIREFOX&&(n=1e3*(n>>>0),o="TIAS"),e=e.replace(a[0],Ir(l=Ir(u="".concat(a[0],"b=")).call(u,o,":")).call(l,n,"\r\n"))),e}(e,this.codec,this.videoTrack._encoderConfig)),this.audioTrack&&this.audioTrack._encoderConfig&&(e=yn(e,this.audioTrack._encoderConfig)),function(e){let t=X();return t.name!==fd.SAFARI&&t.os!==pd.IOS?e:e.replace(/a=.*video-orientation\r\n/g,"")}(e)}createPC(){this.pc=new Eg({turnServer:this.joinInfo.turnServer}),this.updateICEPromise()}async closePC(e){return this.pc.onICEConnectionStateChange=void 0,this.pc.close(),!e&&await xt(this,Jl.NEED_UNPUB)}onPCDisconnected(e){this.reportPublishEvent(!1,e.code)}async setLowStreamEncoding(e,t){try{let n=await this.pc.setVideoRtpEncodingParameters(e),i=t.getMediaStreamTrack();if(e.scaleResolutionDownBy&&n.encodings[0].scaleResolutionDownBy!==e.scaleResolutionDownBy){let n=t._videoHeight||i.getSettings().height,r=t._videoWidth||i.getSettings().width;n&&r&&await i.applyConstraints({height:n/e.scaleResolutionDownBy,width:r/e.scaleResolutionDownBy})}e.maxFramerate&&n.encodings[0].maxFramerate!==e.maxFramerate&&await i.applyConstraints({frameRate:e.maxFramerate})}catch(n){if(n instanceof wl)throw n;throw new wl(zd.LOW_STREAM_ENCODING_ERROR,n.message)}}}class t_ extends bh{constructor(e,t,n,i){var r,a;super(e,Ir(r=Ir(a="track-".concat(e.kind,"-")).call(a,t,"-")).call(r,i)),this._isDestroyed=!1,this._userId=t,this._uintId=n}getUserId(){return this._userId}_updateOriginMediaStreamTrack(e){this._mediaStreamTrack=this._originMediaStreamTrack=e,this._updatePlayerSource()}_destroy(){this._isDestroyed=!0,Tl.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}}class n_ extends t_{constructor(e,t,n,i){super(e,t,n,i),this.trackMediaType="video",this.updateMediaStreamTrackResolution()}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Nl.PLAYING)}getStats(){return Vt((()=>{Tl.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")}),"remoteVideoTrackGetStatsWarning"),Qt(this,fu.GET_STATS)||On({},nu)}play(e,t={}){let n=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.REMOTE_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof e?e:"HTMLElement",t]});if("string"==typeof e){let t=document.getElementById(e);var i;t?e=t:(Tl.warning(Ir(i="[".concat(this.getTrackId(),'] can not find "#')).call(i,e,'" element, use document.body')),e=document.body)}Tl.debug("[".concat(this.getTrackId(),"] start video playback"),Pi(t)),e=On({fit:"cover"},t,{trackId:this.getTrackId(),element:e}),this._player?this._player.updateConfig(e):(this._player=new Sg(e),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.emit(mu.FIRST_FRAME_DECODED)}),this._player.play(),n.onSuccess()}stop(){let e=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.REMOTE_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return e.onSuccess();this._player.destroy(),this._player=void 0,Tl.debug("[".concat(this.getTrackId(),"] stop video playback")),e.onSuccess()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){Lt(this._originMediaStreamTrack).then((([e,t])=>{this._videoHeight=t,this._videoWidth=e})).catch(cA)}_updatePlayerSource(){Tl.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}}class i_ extends t_{constructor(e,t,n,i){super(e,t,n,i),this.trackMediaType="audio",this._useAudioElement=!0,this._volume=100,this._source=new Qh(e,!0),this._source.once(Xl.RECEIVE_TRACK_BUFFER,(()=>{this.emit(mu.FIRST_FRAME_DECODED)}))}get isPlaying(){return this._useAudioElement?Xh.isPlaying(this.getTrackId()):this._source.isPlayed}setAudioFrameCallback(e,t=4096){if(!e)return this._source.removeAllListeners(Xl.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Xl.ON_AUDIO_BUFFER),this._source.on(Xl.ON_AUDIO_BUFFER,(t=>e(t)))}setVolume(e){let t=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.REMOTE_AUDIO_SET_VOLUME,options:[this.getTrackId(),e]},300);this._volume=e,this._useAudioElement?Xh.setVolume(this.getTrackId(),e):this._source.setVolume(e/100),t.onSuccess()}async setPlaybackDevice(e){let t=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[this.getTrackId(),e]});if(!this._useAudioElement)throw new wl(zd.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{await Xh.setSinkID(this.getTrackId(),e)}catch(n){throw t.onError(n),n}t.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Vt((()=>{Tl.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")}),"remoteAudioTrackGetStatsWarning"),Qt(this,fu.GET_STATS)||On({},eu)}play(){let e=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.REMOTE_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});Tl.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(Tl.debug("[".concat(this.getTrackId(),"] use audio element to play")),Xh.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),e.onSuccess()}stop(){let e=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.REMOTE_AUDIO_TRACK_STOP,options:[this.getTrackId()]});Tl.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Xh.stop(this.getTrackId()):this._source.stop(),e.onSuccess()}_destroy(){super._destroy(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){Tl.debug("[".concat(this.getTrackId(),"] update player source track")),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Xh.updateTrack(this.getTrackId(),this._mediaStreamTrack)}}class r_ extends yg{constructor(e,t,n,i){super(n,e.uid),this.type="sub",this.unusedTracks=[],this.onTrack=e=>{var t,n,i,r;if("audio"===e.kind&&!this.subscribeOptions.audio||"video"===e.kind&&!this.subscribeOptions.video)return this.unusedTracks.push(e),void Tl.debug(Ir(n="[".concat(this.connectionId,"] unused ontrack event, kind: ")).call(n,e.kind));Tl.debug(Ir(t="[".concat(this.connectionId,"] emit pc ontrack after subscribe ")).call(t,e.kind),e),(t="audio"===e.kind?this.user._audioTrack:this.user._videoTrack)?t._updateOriginMediaStreamTrack(e):"audio"===e.kind?(this.pc._statsFilter.setIsFirstAudioDecoded(!1),this.user._audioTrack=new i_(e,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Tl.info(Ir(i="[".concat(this.connectionId,"] create remote audio track: ")).call(i,this.user._audioTrack.getTrackId())),this.bindTrackEvents(this.user._audioTrack)):(this.user._videoTrack=new n_(e,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Tl.info(Ir(r="[".concat(this.connectionId,"] create remote video track: ")).call(r,this.user._videoTrack.getTrackId())),this.bindTrackEvents(this.user._videoTrack))},this.handleGetRemoteAudioStats=e=>{e(this.statsCollector.getRemoteAudioTrackStats(this.connectionId))},this.handleGetRemoteVideoStats=e=>{e(this.statsCollector.getRemoteVideoTrackStats(this.connectionId))},this.handleGetSessionID=e=>{e(this.joinInfo.sid)},this.user=e,this.statsCollector=t,this.statsCollector.addRemoteConnection(this),this.subscribeOptions=i}async startP2PConnection(){return new Cc((async(e,t)=>{let n=i=>{if("connected"===i&&(wh.subscribe(this.joinInfo.sid,{lts:this.startTime,succ:!0,video:this.subscribeOptions.video,audio:this.subscribeOptions.audio,peerid:this.user.uid,ec:null,subscribeRequestid:this.ID,p2pid:this.pc.ID}),this.off(Jl.CONNECTION_STATE_CHANGE,n),e()),"disconnected"===i){if(this.off(Jl.CONNECTION_STATE_CHANGE,n),this.disconnectedReason)return t(this.disconnectedReason);t(new wl(zd.OPERATION_ABORTED,"subscribe abort"))}};if(this.on(Jl.CONNECTION_STATE_CHANGE,n),this.disconnectedReason=void 0,this.connectionState="connecting",this.startTime=el(),!this.subscribeOptions)return void t(new wl(zd.UNEXPECTED_ERROR,"no subscribe options"));let i=new MediaStream,r=new Cc((e=>{this.pc.onTrack=(t,n)=>{var r,a;if("audio"===t.kind&&!this.subscribeOptions.audio||"video"===t.kind&&!this.subscribeOptions.video)return this.unusedTracks.push(t),void Tl.debug(Ir(a="[".concat(this.connectionId,"] unused ontrack event ")).call(a,t.kind));i.addTrack(t),a={audio:0<i.getAudioTracks().length,video:0<i.getVideoTracks().length},Tl.debug(Ir(r="[".concat(this.connectionId,"] subscribe ontrack: ")).call(r,t.kind),n,t);e:{var o,s;for(t=this.subscribeOptions,n=Wd(o=Uo(a)).call(o),o=Wd(s=Uo(t)).call(s),s=0;s<n.length;s+=1){if(n[s]!==o[s]){a=!1;break e}if(a[n[s]]!==t[n[s]]){a=!1;break e}}a=!0}a&&(this.pc.onTrack=this.onTrack,Tl.debug("[".concat(this.connectionId,"] get all subscribed tracks")),e(i))}}));try{let e=function(e){return X().name!==fd.FIREFOX?e:e.replace("/recvonly http://www.webrtc.org/experiments/rtp-hdrext/playout-delay"," http://www.webrtc.org/experiments/rtp-hdrext/playout-delay")}(Sn(await this.pc.createOfferSDP()));await this.pc.setOfferSDP(e),Tl.debug("[".concat(this.connectionId,"] create and set offer success"));let t=await xt(this,Jl.NEED_ANSWER,{messageType:"OFFER",sdp:e,offererSessionId:104,retry:!0});await this.pc.setAnswerSDP(Sn(t.sdp)),Tl.debug("[".concat(this.connectionId,"] set answer success"));let n=await Cc.all([r,this.icePromise]),i=n[0].getAudioTracks()[0],s=n[0].getVideoTracks()[0];var a,o;i&&(this.user._audioTrack?this.user._audioTrack._updateOriginMediaStreamTrack(i):(this.user._audioTrack=new i_(i,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Tl.info(Ir(a="[".concat(this.connectionId,"] create remote audio track: ")).call(a,this.user._audioTrack.getTrackId())),this.bindTrackEvents(this.user._audioTrack))),s&&(this.user._videoTrack?this.user._videoTrack._updateOriginMediaStreamTrack(s):(this.user._videoTrack=new n_(s,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Tl.info(Ir(o="[".concat(this.connectionId,"] create remote video track: ")).call(o,this.user._videoTrack.getTrackId())),this.bindTrackEvents(this.user._videoTrack))),this.connectionState="connected",this.startUploadStats()}catch(s){this.off(Jl.CONNECTION_STATE_CHANGE,n),this.connectionState="disconnected",wh.subscribe(this.joinInfo.sid,{lts:this.startTime,succ:!1,video:this.subscribeOptions.video,audio:this.subscribeOptions.audio,peerid:this.user.uid,ec:s.code,subscribeRequestid:this.ID,p2pid:this.pc.ID}),t(s)}}))}async closeP2PConnection(e){"disconnected"!==this.connectionState&&(this.stopUploadStats(),this.statsCollector.removeConnection(this.connectionId),this.connectionState="disconnected",await this.setSubscribeOptions({audio:!1,video:!1}),await this.closePC(e),this.removeAllListeners())}getNetworkQuality(){var e=this.pc.getStats();if(!e.audioRecv[0]&&!e.videoRecv[0])return 1;var t=Qt(this,Jl.NEED_SIGNAL_RTT),n=e.rtt;t=(n&&t?(n+t)/2:n||t)||0,n=e.audioRecv[0]?e.audioRecv[0].jitterMs:void 0;let i=70*(e=e.recvPacketLossRate)/50+.3*t/1500;return n&&(i=60*e/50+.2*t/1500+.2*n/400),.1>i?1:.17>i?2:.36>i?3:.59>i?4:5}uploadStats(e){let t=this.user.audioTrack?function(e,t){const n=e.audioRecv[0];return n?((e={id:Bt(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:n.ssrc.toString()}).bytesReceived=n.bytes.toString(),e.packetsLost=n.packetsLost.toString(),e.packetsReceived=n.packets.toString(),n.outputLevel?e.A_aol=Math.round(100*n.outputLevel).toString():e.A_aol=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),e.A_apol=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),t&&(e.A_artd=t._originMediaStreamTrack.enabled&&t._mediaStreamTrack.enabled?"0":"1"),e.A_jr=n.jitterMs.toString(),e.A_jbm=Math.floor(n.jitterBufferMs).toString(),e.A_cdm=Math.floor(n.jitterBufferMs).toString(),e):null}(e,this.user.audioTrack):void 0,n=this.user.videoTrack?function(e,t){const n=e.videoRecv[0];return n?((e={id:Bt(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:n.ssrc.toString()}).bytesReceived=n.bytes.toString(),e.packetsLost=n.packetsLost.toString(),e.packetsReceived=n.packets.toString(),n.framesRateFirefox&&(e.A_frr=n.framesRateFirefox.toString()),n.receivedFrame&&(e.A_frr=n.receivedFrame.frameRate.toString()),e.A_frd=n.decodeFrameRate.toString(),n.outputFrame&&(e.A_fro=n.outputFrame.frameRate.toString()),void 0!==n.jitterBufferMs&&(e.A_jbm=Math.floor(n.jitterBufferMs).toString()),void 0!==n.currentDelayMs&&(e.A_cdm=Math.floor(n.currentDelayMs).toString()),e.A_fs=n.firsCount.toString(),e.A_ns=n.nacksCount.toString(),e.A_ps=n.plisCount.toString(),t&&(e.A_vrtd=t._originMediaStreamTrack.enabled&&t._mediaStreamTrack.enabled?"0":"1"),t._player&&0<t._player.freezeTimeCounterList.length&&(e.A_vrft=kc(i=t._player.freezeTimeCounterList).call(i,0,1)[0].toString()),e):null;var i}(e,this.user.videoTrack):void 0;t&&jt((()=>this.emit(Jl.NEED_UPLOAD,zl.SUBSCRIBE_STATS,t))),n&&jt((()=>this.emit(Jl.NEED_UPLOAD,zl.SUBSCRIBE_STATS,n)))}uploadSlowStats(e){}uploadRelatedStats(e,t){let n=!0===this.pc._statsFilter.videoIsReady,i=function(e,t,n){return(e=e.audioRecv[0])?(n=oA.isRemoteAudioFreeze(n),{mediaType:"audio",isAudioMute:!1,peerId:t,googJitterReceived:e.jitterMs.toString(),isFreeze:n,bytesReceived:e.bytes.toString(),packetsReceived:e.packets.toString(),packetsLost:e.packetsLost.toString(),frameReceived:e.receivedFrames.toString(),frameDropped:e.droppedFrames.toString()}):null}(e,this.getUserId(),this.user.audioTrack),r=function(e,t,n,i,r){return(t=t.videoRecv[0])?(e=oA.isRemoteVideoFreeze(r,t,i?i.videoRecv[0]:void 0)&&e,n={mediaType:"video",isVideoMute:!1,peerId:n,frameRateReceived:t.receivedFrame&&t.receivedFrame.frameRate.toString(),frameRateDecoded:t.decodedFrame&&t.decodedFrame.frameRate.toString(),isFreeze:e,bytesReceived:t.bytes.toString(),packetsReceived:t.packets.toString(),packetsLost:t.packetsLost.toString()},t.framesRateFirefox&&(n.frameRateDecoded=t.framesRateFirefox.toString(),n.frameRateReceived=t.framesRateFirefox.toString()),n):null}(n,e,this.getUserId(),t,this.user.videoTrack);i&&jt((()=>{this.emit(Jl.NEED_UPLOAD,zl.SUBSCRIBE_RELATED_STATS,i)})),r&&jt((()=>{this.emit(Jl.NEED_UPLOAD,zl.SUBSCRIBE_RELATED_STATS,r)}))}emitOnTrackFromUnusedTracks(){if(this.subscribeOptions){var e,t=this.subscribeOptions.video;if(this.subscribeOptions.audio){var n;let e=Kc(n=this.unusedTracks).call(n,(e=>"audio"===e.kind&&"live"===e.readyState));Ft(this.unusedTracks,e),e&&this.onTrack(e)}t&&(t=Kc(e=this.unusedTracks).call(e,(e=>"video"===e.kind&&"live"===e.readyState)),Ft(this.unusedTracks,t),t&&this.onTrack(t))}}async setSubscribeOptions(e){var t,n,i,r;if(e.audio!==this.subscribeOptions.audio||e.video!==this.subscribeOptions.video){if("connecting"===this.connectionState)try{await this.createWaitConnectionConnectedPromise()}catch(a){throw new wl(zd.OPERATION_ABORTED,"can not update subscribe options, operation abort")}e.audio===this.subscribeOptions.audio&&e.video===this.subscribeOptions.video||(Tl.debug(Ir(t=Ir(n=Ir(i=Ir(r="[".concat(this.connectionId,"] update subscribe options [a: ")).call(r,this.subscribeOptions.audio,", v: ")).call(i,this.subscribeOptions.video,"] -> [a: ")).call(n,e.audio,", v: ")).call(t,e.video,"]")),this.subscribeOptions=e,!e.audio&&this.user._audioTrack&&(this.unusedTracks.push(this.user._audioTrack._originMediaStreamTrack),this.user._audioTrack._destroy(),this.unbindTrackEvents(this.user._audioTrack),this.user._audioTrack=void 0),!e.video&&this.user._videoTrack&&(this.unusedTracks.push(this.user._videoTrack._originMediaStreamTrack),this.user._videoTrack._destroy(),this.unbindTrackEvents(this.user._videoTrack),this.user._videoTrack=void 0),this.emitOnTrackFromUnusedTracks())}}createPC(){this.pc=new Ig({turnServer:this.joinInfo.turnServer}),this.pc.onFirstAudioDecoded=()=>{this.user.audioTrack&&this.user.audioTrack.emit(mu.FIRST_FRAME_DECODED),wh.firstRemoteFrame(this.joinInfo.sid,Ol.FIRST_AUDIO_DECODE,Dl.FIRST_AUDIO_DECODE,{peer:this.user._uintid,subscribeElapse:el()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.pc.onFirstAudioReceived=()=>{wh.firstRemoteFrame(this.joinInfo.sid,Ol.FIRST_AUDIO_RECEIVED,Dl.FIRST_AUDIO_RECEIVED,{peer:this.user._uintid,subscribeElapse:el()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.pc.onFirstVideoDecoded=(e,t)=>{wh.firstRemoteFrame(this.joinInfo.sid,Ol.FIRST_VIDEO_DECODE,Dl.FIRST_VIDEO_DECODE,{peer:this.user._uintid,videowidth:e,videoheight:t,subscribeElapse:el()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.pc.onFirstVideoReceived=()=>{wh.firstRemoteFrame(this.joinInfo.sid,Ol.FIRST_VIDEO_RECEIVED,Dl.FIRST_VIDEO_RECEIVED,{peer:this.user._uintid,subscribeElapse:el()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.updateICEPromise()}async closePC(e){return this.pc.audioTrack&&this.pc.audioTrack.stop(),this.pc.videoTrack&&this.pc.videoTrack.stop(),this.pc.onTrack=void 0,this.pc.onICEConnectionStateChange=void 0,this.pc.close(),!e&&await xt(this,Jl.NEED_UNSUB)}onPCDisconnected(e){wh.subscribe(this.joinInfo.sid,{lts:this.startTime,succ:!1,video:this.subscribeOptions.video,audio:this.subscribeOptions.audio,peerid:this.user.uid,ec:e.code,subscribeRequestid:this.ID,p2pid:this.pc.ID})}bindTrackEvents(e){e instanceof i_?e.addListener(fu.GET_STATS,this.handleGetRemoteAudioStats):e instanceof n_&&e.addListener(fu.GET_STATS,this.handleGetRemoteVideoStats)}unbindTrackEvents(e){e instanceof i_?e.off(fu.GET_STATS,this.handleGetRemoteAudioStats):e instanceof n_&&e.off(fu.GET_STATS,this.handleGetRemoteVideoStats)}}class a_ extends Ch{constructor(e,t,n,i){super(),this.reconnectMode="retry",this.commandReqId=this.reqId=0,this.handleWebSocketOpen=()=>{this.reconnectMode="retry",this.startPingPong()},this.handleWebSocketMessage=e=>{var t;e.data&&((e=JSON.parse(e.data)).requestId?this.emit(Ir(t="@".concat(e.requestId,"-")).call(t,e.sid),e):this.serviceMode===ru.INJECT?this.emit(du.INJECT_STREAM_STATUS,e):(wh.workerEvent(this.spec.sid,{actionType:"status",serverCode:e.code,workerType:this.serviceMode===ru.TRANSCODE?1:2}),this.emit(du.PUBLISH_STREAM_STATUS,e)))},this.spec=t,this.token=e,this.serviceMode=i,this.websocket=new qA("live-streaming",n),this.websocket.on(iu.CONNECTED,this.handleWebSocketOpen),this.websocket.on(iu.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(iu.REQUEST_NEW_URLS,((e,t)=>{xt(this,du.REQUEST_NEW_ADDRESS).then(e).catch(t)})),this.websocket.on(iu.RECONNECTING,(()=>{this.websocket.reconnectMode=this.reconnectMode}))}init(e){return this.websocket.init(e)}async request(e,t,n,i){this.reqId+=1,"request"===e&&(this.commandReqId+=1);let r=this.commandReqId,a=this.reqId;if(!a||!this.websocket)throw new wl(zd.UNEXPECTED_ERROR);var o=Bn({command:e,sdkVersion:"4.7.2"===bd?"0.0.1":bd,seq:a,requestId:a,allocate:n,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(el()/1e3)},t);if("closed"===this.websocket.state)throw new wl(zd.WS_DISCONNECT);let s=()=>new Cc(((e,t)=>{this.websocket.once(iu.CLOSED,(()=>t(new wl(zd.WS_ABORT)))),this.websocket.once(iu.CONNECTED,e)}));"connected"!==this.websocket.state&&await s(),o.clientRequest&&(o.clientRequest.workerToken=this.token);let c=new Cc(((e,t)=>{var n;const i=()=>{t(new wl(zd.WS_ABORT))};this.websocket.once(iu.RECONNECTING,i),this.websocket.once(iu.CLOSED,i),this.once(Ir(n="@".concat(a,"-")).call(n,this.spec.sid),(t=>{e(t)}))}));i&&wh.workerEvent(this.spec.sid,Bn({},i,{requestId:r,actionType:"request",payload:Pi(t.clientRequest),serverCode:0,code:0}));let d=el();this.websocket.sendMessage(o),o=null;try{o=await c}catch(l){if("closed"===this.websocket.state)throw l;return await s(),await this.request(e,t,n)}return i&&wh.workerEvent(this.spec.sid,Bn({},i,{requestId:r,actionType:"response",payload:Pi(o.serverResponse),serverCode:o.code,success:200===o.code,responseTime:el()-d})),200!==o.code&&this.handleResponseError(o),o}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){let e="4.7.2"===bd?"0.0.1":bd;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(el()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case uu.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void Tl.warning("live stream response already exists stream");case uu.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case uu.LIVE_STREAM_RESPONSE_BAD_STREAM:case uu.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new wl(zd.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case uu.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)break;throw new wl(zd.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case uu.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new wl(zd.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case uu.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:var t=new wl(zd.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(du.WARNING,t,e.serverResponse.url);case uu.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:return t=new wl(zd.LIVE_STREAMING_WARN_FREQUENT_REQUEST),this.emit(du.WARNING,t,e.serverResponse.url);case uu.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new wl(zd.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case uu.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new wl(zd.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case uu.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:return t=new wl(zd.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT),this.emit(du.WARNING,t,e.serverResponse.url);case uu.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new wl(zd.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case uu.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new wl(zd.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case uu.LIVE_STREAM_RESPONSE_WORKER_LOST:case uu.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)break;throw new wl(zd.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case uu.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)break;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new wl(zd.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new wl(zd.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case uu.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case uu.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case uu.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case uu.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new wl(zd.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(cA)}),6e3)}}class o_ extends Ch{constructor(e,t=Th,n=Th){super(),this.retryTimeout=1e4,this.streamingTasks=new Ao,this.isStartingStreamingTask=!1,this.taskMutex=new kh("live-streaming"),this.cancelToken=Cl.CancelToken.source(),this.injectConfig=Un({},cu),this.injectLoopTimes=0,this.lastTaskId=1,this.statusError=new Ao,this.spec=e,this.httpRetryConfig=n,this.wsRetryConfig=t}async setTranscodingConfig(e){var t;let n=Un({},su,{},e);var i,r,a,o;if(66!==n.videoCodecProfile&&77!==n.videoCodecProfile&&100!==n.videoCodecProfile&&(Tl.debug(Ir(i="[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ")).call(i,n.videoCodecProfile," -> 100")),n.videoCodecProfile=100),n.transcodingUsers||(n.transcodingUsers=n.userConfigs),n.transcodingUsers&&(n.transcodingUsers=Rc(r=n.transcodingUsers).call(r,(e=>Un({},au,{},e,{zOrder:e.zOrder?e.zOrder+1:1})))),function(e){var t,n;null==e.width||De(e.width,"config.width",0,1e4),null==e.height||De(e.height,"config.height",0,1e4),null==e.videoBitrate||De(e.videoBitrate,"config.videoBitrate",1,1e6),null==e.videoFrameRate||De(e.videoFrameRate,"config.videoFrameRate"),null==e.lowLatency||ke(e.lowLatency,"config.lowLatency"),null==e.audioSampleRate||Oe(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),null==e.audioBitrate||De(e.audioBitrate,"config.audioBitrate",1,128),null==e.audioChannels||Oe(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),null==e.videoGop||De(e.videoGop,"config.videoGop"),null==e.videoCodecProfile||Oe(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),null==e.userCount||De(e.userCount,"config.userCount",0,17),null==e.backgroundColor||De(e.backgroundColor,"config.backgroundColor",0,16777215),null==e.userConfigExtraInfo||Be(e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),e.transcodingUsers&&null!=e.transcodingUsers&&(Le(e.transcodingUsers,"config.transcodingUsers"),No(t=e.transcodingUsers).call(t,((e,t)=>{xe(e.uid),null==e.x||De(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),null==e.y||De(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),null==e.width||De(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),null==e.height||De(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),null==e.zOrder||De(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),null==e.alpha||De(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)}))),null==e.watermark||Ve(e.watermark,"watermark"),null==e.backgroundImage||Ve(e.backgroundImage,"backgroundImage"),e.images&&null!=e.images&&(Le(e.images,"config.images"),No(n=e.images).call(n,((e,t)=>{Ve(e,"images[".concat(t,"]"))})))}(n),e=[],n.images&&e.push(...Rc(a=n.images).call(a,(e=>Un({},ou,{},e,{zOrder:255})))),n.backgroundImage&&(e.push(Un({},ou,{},n.backgroundImage,{zOrder:0})),delete n.backgroundImage),n.watermark&&(e.push(Un({},ou,{},n.watermark,{zOrder:255})),delete n.watermark),n.images=e,n.transcodingUsers&&(n.userConfigs=Rc(o=n.transcodingUsers).call(o,(e=>Un({},e))),n.userCount=n.transcodingUsers.length,delete n.transcodingUsers),a=Rc(t=n.userConfigs||[]).call(t,(e=>"number"==typeof e.uid?Cc.resolve(e.uid):rn(e.uid,this.spec,this.cancelToken.token,this.httpRetryConfig))),t=await Cc.all(a),No(t).call(t,((e,t)=>{n.userConfigs&&n.userConfigs[t]&&(n.userConfigs[t].uid=e)})),this.transcodingConfig=n,this.connection)try{var s,c,d;let e=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Rc(s=vh(mh(c=this.streamingTasks).call(c))).call(s,(e=>e.taskId)).join("#")});Tl.debug(Ir(d="[".concat(this.spec.clientId,"] update live transcoding config success, code: ")).call(d,e.code,", config:"),Pi(this.transcodingConfig))}catch(u){var l;if(!u.data||!u.data.retry)throw u;u.data.changeAddress&&this.connection.tryNextAddress(),No(l=this.streamingTasks).call(l,(e=>{Tl.warning("[".concat(this.spec.clientId,"] live streaming receive error"),u.toString(),"try to republish",e.url),this.startLiveStreamingTask(e.url,e.mode,u).then((()=>{var t;Tl.debug(Ir(t="[".concat(this.spec.clientId,"] live streaming republish ")).call(t,e.url," success"))})).catch((t=>{Tl.error("[".concat(this.spec.clientId,"] live streaming republish failed"),e.url,t.toString()),this.onLiveStreamError&&this.onLiveStreamError(e.url,t)}))}))}}setInjectStreamConfig(e,t){this.injectConfig=Bo({},this.injectConfig,e),this.injectLoopTimes=t}async startLiveStreamingTask(e,t,n){var i,r,a,o;if(Kc(i=vh(mh(r=this.streamingTasks).call(r))).call(i,(e=>e.mode===ru.INJECT))&&t===ru.INJECT)return new wl(zd.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&t===ru.TRANSCODE)throw new wl(zd.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");if(i={command:"PublishStream",ts:el(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0},Tl.debug(Ir(a=Ir(o="[".concat(this.spec.clientId,"] start live streaming ")).call(o,e,", mode: ")).call(a,t)),a=await this.taskMutex.lock(),this.connection||!n){if(this.streamingTasks.get(e)&&!n)return a(),new wl(zd.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(c){throw a(),c}switch(t){case ru.TRANSCODE:i.transcodingConfig=Un({},this.transcodingConfig);break;case ru.INJECT:i={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:el(),url:e,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(i.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0,o=this.lastTaskId++;try{var s;let r=new Cc(((t,i)=>{Ot(this.retryTimeout).then((()=>{if(n)return i(n);const t=this.statusError.get(e);return t?(this.statusError.delete(e),i(t)):void 0}))})),c=await Cc.race([this.connection.request("request",{clientRequest:i},!0,{url:e,command:"PublishStream",workerType:t===ru.TRANSCODE?1:2,requestByUser:!n,tid:o.toString()}),r]);this.isStartingStreamingTask=!1,Tl.debug(Ir(s="[".concat(this.spec.clientId,"] live streaming started, code: ")).call(s,c.code)),this.streamingTasks.set(e,{clientRequest:i,mode:t,url:e,taskId:o}),a()}catch(c){if(a(),this.isStartingStreamingTask=!1,!c.data||!c.data.retry||n)throw c;return c.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,c)):await this.startLiveStreamingTask(e,t,c)}}else a()}stopLiveStreamingTask(e){return new Cc(((t,n)=>{let i=this.streamingTasks.get(e);if(!i||!this.connection)return new wl(zd.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();let r=i.mode;i.abortTask=()=>{Tl.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:r===ru.INJECT?"UninjectStream":"UnpublishStream",url:i.url}},!1,{url:e,command:"UnPublishStream",workerType:r===ru.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then((n=>{var i;Tl.debug(Ir(i="[".concat(this.spec.clientId,"] stop live streaming success, code: ")).call(i,n.code)),this.streamingTasks.delete(e),0===this.streamingTasks.size&&r!==ru.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),t(),r===ru.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(5,this.spec.uid,e)})).catch(n)}))}async controlInjectStream(e,t,n,i){let r=this.streamingTasks.get(e);if(!r||!this.connection||r.mode!==ru.INJECT)throw new wl(zd.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:e,control:t,audioVolume:n,position:i}})).serverResponse}resetAllTask(){var e;let t=vh(mh(e=this.streamingTasks).call(e));this.terminate();for(let n of t)this.startLiveStreamingTask(n.url,n.mode).catch((e=>{this.onLiveStreamError&&this.onLiveStreamError(n.url,e)}))}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Ao,this.isStartingStreamingTask=!1,this.statusError=new Ao,this.cancelToken=Cl.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new wl(zd.UNEXPECTED_ERROR,"live streaming connection has already connected");let t=await xt(this,lu.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new a_(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(du.WARNING,((e,t)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e))),this.connection.on(du.PUBLISH_STREAM_STATUS,(e=>this.handlePublishStreamServer(e))),this.connection.on(du.INJECT_STREAM_STATUS,(e=>this.handleInjectStreamServerStatus(e))),this.connection.on(du.REQUEST_NEW_ADDRESS,((t,n)=>{if(!this.connection)return n(new wl(zd.UNEXPECTED_ERROR,"can not get new live streaming address list"));xt(this,lu.REQUEST_WORKER_MANAGER_LIST,e).then((e=>{this.uapResponse=e,t(e.addressList)})).catch(n)})),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){var t=e.serverStatus&&e.serverStatus.url||"empty_url";let n=this.streamingTasks.get(t),i=e.reason;switch(e.code){case uu.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case uu.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case uu.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case uu.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:if(e=new wl(zd.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}),n)return Tl.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,e);if(!this.isStartingStreamingTask)break;this.statusError.set(t,e);case uu.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:return e=new wl(zd.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,i),this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e);case uu.LIVE_STREAM_RESPONSE_WORKER_LOST:case uu.LIVE_STREAM_RESPONSE_WORKER_QUIT:var r;if(this.connection){this.connection.tryNextAddress(),t=vh(mh(r=this.streamingTasks).call(r));for(let n of t)n.abortTask?n.abortTask():(Tl.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",n.url),this.startLiveStreamingTask(n.url,n.mode,new wl(zd.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((()=>{Tl.debug("[".concat(this.spec.clientId,"] republish live stream success"),n.url)})).catch((e=>{Tl.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(n.url,e)})))}}}handleInjectStreamServerStatus(e){let t=Number(e.uid),n=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(0,t,n));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(1,t,n),void this.streamingTasks.delete(n);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(2,t,n),void this.streamingTasks.delete(n);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(10,t,n),void this.streamingTasks.delete(n);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(3,t,n),void this.streamingTasks.delete(n);default:return void Tl.debug("inject stream server status",e)}}hasUrl(e){return this.streamingTasks.has(e)}}class s_{constructor(){this.destChannelMediaInfos=new Ao}setSrcChannelInfo(e){Ye(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){Ye(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){Ue(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}class c_ extends Ch{constructor(e,t,n){super(),this.requestId=1,this.onOpen=()=>{this.emit("open"),this.startHeartBeatCheck()},this.onClose=e=>{this.emit("close"),this.dispose()},this.onMessage=e=>{if(!(e=JSON.parse(e.data))||"serverResponse"!==e.command||!e.requestId)return e&&"serverStatus"===e.command&&e.serverStatus&&e.serverStatus.command?(this.emit("status",e.serverStatus),void this.emit(e.serverStatus.command,e.serverStatus)):void 0;this.emit("req_".concat(e.requestId),e)},this.joinInfo=e,this.clientId=t,this.ws=new qA("cross-channel-".concat(this.clientId),n),this.ws.on(iu.RECONNECTING,(()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")})),this.ws.on(iu.CONNECTED,this.onOpen),this.ws.on(iu.ON_MESSAGE,this.onMessage),this.ws.on(iu.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(e){let t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new Cc(((t,n)=>{let i=window.setTimeout((()=>{n(new wl(zd.TIMEOUT,"wait status timeout, status: ".concat(e)))}),5e3);this.once(e,(r=>{window.clearTimeout(i),r.state&&0!==r.state?n(new wl(zd.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)})),this.once("dispose",(()=>{window.clearTimeout(i),n(new wl(zd.WS_ABORT))}))}))}async request(e){if("closed"===this.ws.state)throw new wl(zd.WS_DISCONNECT);let t=()=>new Cc(((e,t)=>{this.ws.once(iu.CLOSED,(()=>t(new wl(zd.WS_ABORT)))),this.ws.once(iu.CONNECTED,e)}));"connected"!==this.ws.state&&await t();let n=this.sendMessage(e);if(e=await new Cc(((e,t)=>{const i=()=>{t(new wl(zd.WS_ABORT))};this.ws.once(iu.RECONNECTING,i),this.ws.once(iu.CLOSED,i),this.once("req_".concat(n),e),Ot(3e3).then((()=>{this.removeAllListeners("req_".concat(n)),this.ws.off(iu.RECONNECTING,i),this.ws.off(iu.CLOSED,i),t(new wl(zd.TIMEOUT,"cross channel ws request timeout"))}))})),!e||200!==e.code)throw new wl(zd.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(Pi(e)));return e}async connect(e){this.ws.removeAllListeners(iu.REQUEST_NEW_URLS),this.ws.on(iu.REQUEST_NEW_URLS,(t=>{t(e)})),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){let t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer=window.setInterval((()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})}),3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class d_ extends Ch{constructor(e,t,n,i){super(),this.cancelToken=Cl.CancelToken.source(),this.requestId=0,this._state="RELAY_STATE_IDLE",this.errorCode="RELAY_OK",this.onStatus=e=>{var t;Tl.debug(Ir(t="[".concat(this.clientId,"] ChannelMediaStatus: ")).call(t,Pi(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&this.emit("event","PACKET_RECEIVED_AUDIO_FROM_SRC"),"onVideoPacketReceived"===e.command&&this.emit("event","PACKET_RECEIVED_VIDEO_FROM_SRC"),"onSrcTokenPrivilegeDidExpire"===e.command&&(this.errorCode="SRC_TOKEN_EXPIRED",this.state="RELAY_STATE_FAILURE"),"onDestTokenPrivilegeDidExpire"===e.command&&(this.errorCode="DEST_TOKEN_EXPIRED",this.state="RELAY_STATE_FAILURE"))},this.onReconnect=async()=>{Tl.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event","NETWORK_DISCONNECTED"),this.state="RELAY_STATE_IDLE",this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch((e=>{"RELAY_STATE_IDLE"!==this.state&&(Tl.error("auto restart channel media relay failed",e.toString()),this.errorCode="SERVER_CONNECTION_LOST",this.state="RELAY_STATE_FAILURE")}))},this.joinInfo=e,this.clientId=t,this.signal=new c_(this.joinInfo,this.clientId,n),this.httpRetryConfig=i}set state(e){e!==this._state&&("RELAY_STATE_FAILURE"!==e&&(this.errorCode="RELAY_OK"),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}async startChannelMediaRelay(e){if("RELAY_STATE_IDLE"!==this.state)throw new wl(zd.INVALID_OPERATION);this.state="RELAY_STATE_CONNECTING",await this.connect(),Tl.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(t){if(t.data&&t.data.serverResponse&&"SetSourceChannel"===t.data.serverResponse.command)throw new wl(zd.CROSS_CHANNEL_FAILED_JOIN_SRC);if(t.data&&t.data.serverResponse&&"SetDestChannelStatus"===t.serverResponse.command)throw new wl(zd.CROSS_CHANNEL_FAILED_JOIN_DEST);if(t.data&&t.data.serverResponse&&"StartPacketTransfer"===t.serverResponse.command)throw new wl(zd.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);throw t}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if("RELAY_STATE_RUNNING"!==this.state)throw new wl(zd.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),Tl.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state="RELAY_STATE_IDLE",this.dispose()}dispose(){Tl.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Cl.CancelToken.source(),this.state="RELAY_STATE_IDLE",this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){let e=await cn(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event","NETWORK_CONNECTED"),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){var t=this.genMessage(Au.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),Tl.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success")),t=this.genMessage(Au.SetSdkProfile,e),await this.signal.request(t),Tl.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success")),t=this.genMessage(Au.SetSourceChannel,e),await this.signal.request(t),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event","PACKET_JOINED_SRC_CHANNEL"),Tl.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success")),t=this.genMessage(Au.SetSourceUserId,e),await this.signal.request(t),Tl.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success")),t=this.genMessage(Au.SetDestChannel,e),await this.signal.request(t),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event","PACKET_JOINED_DEST_CHANNEL"),Tl.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success")),e=this.genMessage(Au.StartPacketTransfer,e),await this.signal.request(e),this.emit("event","PACKET_SENT_TO_DEST_CHANNEL"),this.state="RELAY_STATE_RUNNING",Tl.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success"))}async sendUpdateMessage(e){e=this.genMessage(Au.UpdateDestChannel,e),await this.signal.request(e),this.emit("event","PACKET_UPDATE_DEST_CHANNEL"),Tl.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){let e=this.genMessage(Au.StopPacketTransfer);await this.signal.request(e),Tl.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){let n=[],i=[],r=[];this.requestId+=1;let a={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:bd,sid:this.joinInfo.sid,ts:el(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.7.2"===a.sdkVersion&&(a.sdkVersion="0.0.1");let o=null,s=null;switch(e){case Au.SetSdkProfile:return a.clientRequest={command:"SetSdkProfile",type:"multi_channel"},a;case Au.SetSourceChannel:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new wl(zd.UNEXPECTED_ERROR,"can not find source config");return a.clientRequest={command:"SetSourceChannel",uid:"0",channelName:s.channelName,token:s.token||this.joinInfo.appId},a;case Au.SetSourceUserId:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new wl(zd.UNEXPECTED_ERROR,"can not find source config");return a.clientRequest={command:"SetSourceUserId",uid:s.uid+""},a;case Au.SetDestChannel:if(o=t&&t.getDestChannelMediaInfo(),!o)throw new wl(zd.UNEXPECTED_ERROR,"can not find dest config");return No(o).call(o,(e=>{n.push(e.channelName),i.push(e.uid+""),r.push(e.token||this.joinInfo.appId)})),a.clientRequest={command:"SetDestChannel",channelName:n,uid:i,token:r},a;case Au.StartPacketTransfer:return a.clientRequest={command:"StartPacketTransfer"},a;case Au.Reconnect:return a.clientRequest={command:"Reconnect"},a;case Au.StopPacketTransfer:return a.clientRequest={command:"StopPacketTransfer"},a;case Au.UpdateDestChannel:if(o=t&&t.getDestChannelMediaInfo(),!o)throw new wl(zd.UNEXPECTED_ERROR,"can not find dest config");return No(o).call(o,(e=>{n.push(e.channelName),i.push(e.uid+""),r.push(e.token||this.joinInfo.appId)})),a.clientRequest={command:"UpdateDestChannel",channelName:n,uid:i,token:r},a}return a}}class l_{constructor(e,t){this._trust_stream_added_state_=this._trust_video_mute_state_=this._trust_audio_mute_state_=this._trust_video_enabled_state_=this._trust_audio_enabled_state_=this._trust_in_room_=!0,this._video_muted_=this._audio_muted_=!1,this._video_enabled_=this._audio_enabled_=!0,this._video_added_=this._audio_added_=!1,this.uid=e,this._uintid=t}get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}}let u_,h_=async e=>{var t,n=Yt("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB");return n=await window.crypto.subtle.importKey("spki",n,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),t=e,e=(new TextEncoder).encode(t),t=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,e),Ht(new Uint8Array(t))};class A_{constructor(e,t){var n;this.name=e,this.time=performance.now(),this.sequence=xc(n=Ru[t]).call(n,e)}setElapse(e){this.elapse=e}}let p_=new Ao;class f_{constructor(e,t){this.records=[],this._id=e,this._group=t,this._localTimeStamp=el(),this._performanceTimeStamp=performance.now()}checkPoint(e){var t;let n=new A_(e,this._group);-1===n.sequence&&Tl.warning("[".concat(this._id,"] check point record failed, cannot get the sequence")),this.records.push(n),(e=Kc(t=this.records).call(t,(e=>e.sequence===n.sequence-1)))&&n.setElapse(n.time-e.time)}getRecord(e){var t;return Kc(t=this.records).call(t,(t=>t&&t.name===e))}resetRecords(){this.records.length=0}}var g_=function(e,t,n,i){var r,a=arguments.length,o=3>a?t:null===i?i=ts(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(o=(3>a?r(o):3<a?r(t,n,o):r(t,n))||o);return 3<a&&o&&jo(t,n,o),o},__=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class m_ extends Ch{constructor(e){var t,n,i,r;let a;if(super(),this._users=[],this._sessionId=null,this._bindEnabledTracks=[],this._leaveMutex=new kh("client-leave"),this._publishMutex=new kh("client-publish"),this._subscribeMutex=new Ao,this._remoteStream=new Ao,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._turnServer={servers:[],mode:"auto"},this._cloudProxyServerMode="disabled",this._isDualStreamEnabled=!1,this._streamFallbackTypeCacheMap=new Ao,this._remoteStreamTypeCacheMap=new Ao,this._axiosCancelSource=Cl.CancelToken.source(),this._networkQualitySensitivity="normal",this._useLocalAccessPoint=!1,this._handleLocalTrackEnable=(e,t,n)=>{this.publish(e,!1).then(t).catch(n)},this._handleLocalTrackDisable=(e,t,n)=>{this.unpublish(e,!1).then(t).catch(n)},this._handleUserOnline=e=>{var t;this.isStringUID&&"string"!=typeof e.uid&&Tl.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));let n=Kc(t=this._users).call(t,(t=>t.uid===e.uid));n?n._trust_in_room_=!0:(t=new l_(e.uid,e.uint_id||e.uid),this._users.push(t),Tl.debug("[".concat(this._clientId,"] user online"),e.uid),this.emit(Vl.USER_JOINED,t))},this._handleUserOffline=e=>{var t;let n=Kc(t=this._users).call(t,(t=>t.uid===e.uid));n&&(this._handleRemoveStream(e),Ft(this._users,n),this._remoteStreamTypeCacheMap.delete(n.uid),this._streamFallbackTypeCacheMap.delete(n.uid),Tl.debug("[".concat(this._clientId,"] user offline"),e.uid,"reason:",e.reason),this.emit(Vl.USER_LEAVED,n,e.reason))},this._handleAddAudioOrVideoStream=(e,t,n)=>{var i,r,a;let o=Kc(i=this._users).call(i,(e=>e.uid===t));var s,c;o?(Tl.debug(Ir(r=Ir(a="[".concat(this._clientId,"] stream added with uid ")).call(a,t,", type ")).call(r,e)),i="audio"===e?o.hasAudio:o.hasVideo,o._uintid||(o._uintid=n||t),o._trust_stream_added_state_=!0,"audio"===e?o._audio_added_=!0:o._video_added_=!0,("audio"===e?o.hasAudio:o.hasVideo)&&!i&&(Tl.info(Ir(s=Ir(c="[".concat(this._clientId,"] remote user ")).call(c,o.uid," published ")).call(s,e)),this.emit(Vl.USER_PUBLISHED,o,e)),"video"===e?wh.onGatewayStream(this._sessionId,Ol.ON_ADD_VIDEO_STREAM,Dl.ON_ADD_VIDEO_STREAM,{peer:n||t}):wh.onGatewayStream(this._sessionId,Ol.ON_ADD_AUDIO_STREAM,Dl.ON_ADD_AUDIO_STREAM,{peer:n||t}),(e=this._remoteStream.get(t))&&e.readyToReconnect&&"connecting"===e.connectionState&&e.reconnectPC().catch((e=>{Tl.error("[".concat(this._clientId,"] resubscribe error"),e.toString())}))):Tl.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"))},this._handleRemoveStream=e=>{var t,n;let i=Kc(t=this._users).call(t,(t=>t.uid===e.uid));i?(Tl.debug(Ir(n="[".concat(this._clientId,"] stream removed with uid ")).call(n,e.uid)),t=()=>{},i.hasAudio&&i.hasVideo?t=()=>{var e,t;Tl.info(Ir(e="[".concat(this._clientId,"] remote user ")).call(e,i.uid," unpublished audio track")),this.emit(Vl.USER_UNPUBLISHED,i,"audio"),Tl.info(Ir(t="[".concat(this._clientId,"] remote user ")).call(t,i.uid," unpublished video track")),this.emit(Vl.USER_UNPUBLISHED,i,"video")}:i.hasVideo?t=()=>{var e;Tl.info(Ir(e="[".concat(this._clientId,"] remote user ")).call(e,i.uid," unpublished video track")),this.emit(Vl.USER_UNPUBLISHED,i,"video")}:i.hasAudio&&(t=()=>{var e;Tl.info(Ir(e="[".concat(this._clientId,"] remote user ")).call(e,i.uid," unpublished audio track")),this.emit(Vl.USER_UNPUBLISHED,i,"audio")}),i._trust_stream_added_state_=!0,i._audio_added_=!1,i._video_added_=!1,(n=this._remoteStream.get(i.uid))&&(n.closeP2PConnection(),this._remoteStream.delete(i.uid)),wh.onGatewayStream(this._sessionId,Ol.ON_REMOVE_STREAM,Dl.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),t()):Tl.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"))},this._handleSetStreamLocalEnable=(e,t,n)=>{var i,r,a,o,s,c;let d=Kc(i=this._users).call(i,(e=>e.uid===t));if(d){if(Tl.debug(Ir(r=Ir(a=Ir(o="[".concat(this._clientId,"] local ")).call(o,e," ")).call(a,n?"enabled":"disabled"," with uid ")).call(r,t)),i="audio"===e?d.hasAudio:d.hasVideo,"audio"===e){d._trust_audio_enabled_state_=!0;var l,u,h=d._audio_enabled_;if(d._audio_enabled_=n,d._audio_enabled_===h)return;n=d._audio_enabled_?"enable-local-audio":"disable-local-audio",Tl.debug(Ir(l=Ir(u="[".concat(this._clientId,"] user-info-updated, uid: ")).call(u,t,", msg: ")).call(l,n)),this.emit(Vl.USER_INFO_UPDATED,t,n)}else{if(d._trust_video_enabled_state_=!0,l=d._video_enabled_,d._video_enabled_=n,d._video_enabled_===l)return;var A;n=d._video_enabled_?"enable-local-video":"disable-local-video",Tl.debug(Ir(h=Ir(A="[".concat(this._clientId,"] user-info-update, uid: ")).call(A,t,", msg: ")).call(h,n)),this.emit(Vl.USER_INFO_UPDATED,t,n)}if(i!==(n="audio"===e?d.hasAudio:d.hasVideo)){var p,f;if(!i&&n)return Tl.info(Ir(p=Ir(f="[".concat(this._clientId,"] remote user ")).call(f,t," published ")).call(p,e)),void this.emit(Vl.USER_PUBLISHED,d,e);(p=this._remoteStream.get(t))&&((f=Qn({},p.subscribeOptions)).audio=!!d.hasAudio&&f.audio,f.video=!!d.hasVideo&&f.video,f.audio||f.video?p.setSubscribeOptions(f):(p.closeP2PConnection().catch((e=>{Tl.warning("close sub pc error",e)})),this._remoteStream.delete(d.uid))),Tl.info(Ir(s=Ir(c="[".concat(this._clientId,"] remote user ")).call(c,d.uid," unpublished ")).call(s,e)),this.emit(Vl.USER_UNPUBLISHED,d,e)}}else Tl.error("[".concat(this._clientId,"] can not find target user!(disable_local)"))},this._handleMuteStream=(e,t,n)=>{var i,r,a;Tl.debug("[".concat(this._clientId,"] receive mute message"),e,t,n);let o=Kc(i=this._users).call(i,(t=>t.uid===e));var s;if(o){if(i="audio"===t?o.hasAudio:o.hasVideo,"audio"===t){o._trust_audio_mute_state_=!0;var c,d,l=o._audio_muted_;if(o._audio_muted_=n,o._audio_muted_===l)return;n=o._audio_muted_?"mute-audio":"unmute-audio",Tl.debug(Ir(c=Ir(d="[".concat(this._clientId,"] user-info-update, uid: ")).call(d,e,", msg: ")).call(c,n)),this.emit(Vl.USER_INFO_UPDATED,e,n)}else{if(o._trust_video_mute_state_=!0,c=o._video_muted_,o._video_muted_=n,o._video_muted_===c)return;var u;n=o._video_muted_?"mute-video":"unmute-video",Tl.debug(Ir(l=Ir(u="[".concat(this._clientId,"] user-info-update, uid: ")).call(u,e,", msg: ")).call(l,n)),this.emit(Vl.USER_INFO_UPDATED,e,n)}if(i!==(n="audio"===t?o.hasAudio:o.hasVideo)){var h,A;if(!i&&n)return Tl.info(Ir(h=Ir(A="[".concat(this._clientId,"] remote user ")).call(A,e," published ")).call(h,t)),void this.emit(Vl.USER_PUBLISHED,o,t);(h=this._remoteStream.get(e))&&((A=Qn({},h.subscribeOptions)).audio=!!o.hasAudio&&A.audio,A.video=!!o.hasVideo&&A.video,"video"===t&&h.pc._statsFilter.setVideoIsReady(!1),A.audio||A.video?h.setSubscribeOptions(A):(h.closeP2PConnection().catch((e=>{Tl.warning("close sub pc error",e)})),this._remoteStream.delete(o.uid))),Tl.info(Ir(r=Ir(a="[".concat(this._clientId,"] remote user ")).call(a,e," unpublished ")).call(r,t)),this.emit(Vl.USER_UNPUBLISHED,o,t)}}else Tl.warning(Ir(s="[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ")).call(s,e))},this._handleP2PLost=e=>{Tl.debug("[".concat(this._clientId,"] receive p2p lost"),e);let t=null;if(this._highStream&&this._highStream.pc.ID===e.p2pid)t=this._highStream;else if(this._lowStream&&this._lowStream.pc.ID===e.p2pid)t=this._lowStream;else{var n;No(n=this._remoteStream).call(n,(n=>{n.pc.ID===e.p2pid&&(t=n)}))}t?t.emit(Jl.GATEWAY_P2P_LOST,e.p2pid):Tl.warning("P2PLost stream not found",e)},this._handleTokenWillExpire=()=>{Tl.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.emit(Vl.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)},this._handleBeforeUnload=e=>{void 0!==e.returnValue&&""!==e.returnValue||(this.leave(),Tl.info("[".concat(this._clientId,"] auto leave onbeforeunload")))},this._handleUpdateNetworkQuality=()=>{var e;if("normal"!==this._networkQualitySensitivity){if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.emit(Vl.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});var t={downlinkNetworkQuality:0,uplinkNetworkQuality:0};this._highStream&&!this._highStream.detecting&&(t.uplinkNetworkQuality=this._highStream.getNetworkQuality());var n=0;No(e=this._remoteStream).call(e,(e=>n+=e.getNetworkQuality())),0<this._remoteStream.size&&(t.downlinkNetworkQuality=Math.round(n/this._remoteStream.size)),this.emit(Vl.NETWORK_QUALITY,t)}},this._codec=e.codec,this._mode=e.mode,e.proxyServer&&(this._proxyServer=e.proxyServer,wh.setProxyServer(this._proxyServer),Tl.setProxyServer(this._proxyServer)),e.turnServer&&(this._turnServer=Qn({},this._turnServer,{mode:"manual"},e.turnServer)),this._clientId=Bt(5,"client-"),Tl.info(Ir(t=Ir(n=Ir(i=Ir(r="[".concat(this._clientId,"] Initializing AgoraRTC client v")).call(r,bd," build: ")).call(i,"v4.7.2-0-gf83f608b(10/13/2021, 5:32:13 PM)",", mode: ")).call(n,this._mode,", codec: ")).call(t,this._codec)),this._performanceRecorder=function(e,t){return t=new f_(e,t),p_.set(e,t),t}(this._clientId,"join"),e.clientRoleOptions)try{je(e.clientRoleOptions),a=Bo({},e.clientRoleOptions)}catch(s){var o;Tl.warning(Ir(o="[".concat(this._clientId,"] ")).call(o,s.toString()))}this._statsCollector=new oA(this._clientId),this._statsCollector.onStatsException=(e,t,n)=>{var i,r,a;Tl.debug(Ir(i=Ir(r=Ir(a="[".concat(this._clientId,"] receive exception msg, code: ")).call(a,e,", msg: ")).call(r,t,", uid: ")).call(i,n)),this.emit(Vl.EXCEPTION,{code:e,msg:t,uid:n})},this._statsCollector.onUploadPublishDuration=(e,t,n,i)=>{var r;let a=Kc(r=this._users).call(r,(t=>t.uid===e));a&&wh.peerPublishStatus(this._sessionId,{subscribeElapse:i,audioPublishDuration:t,videoPublishDuration:n,peer:a._uintid})},this._gateway=new $A({clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:e.websocketRetryConfig||Th,httpRetryConfig:e.httpRetryConfig||Th,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:a}),this._config=e,this._configDistribute=new rg,this._handleGatewayEvents()}get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._highStream?this._highStream.getAllTracks():[]}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}async join(e,t,n,i,r){var a;this._performanceRecorder.checkPoint("startJoin");var o="HTTPS"===(u_||u_||(u_=(window.location.protocol.split(":")[0]||"").toUpperCase(),u_));let s=void 0!==window.isSecureContext?window.isSecureContext:"Browser Not Support",c=()=>{Tl.warning("The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser")};void 0!==window.isSecureContext?window.isSecureContext||c():o||c(),o=wh.reportApiInvoke(this._sessionId,{name:Ll.JOIN,options:[e,t,n,i],states:{isHttps:o,isSecureContext:s},tag:Ul.TRACER});try{if(!n&&null!==n)throw new wl(zd.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&Be(n,"token",1,2047),Be(e,"appid",1,2047),Ue(t),i&&xe(i),r&&Be(r,"optionalInfo",1,2047)}catch(A){throw o.onError(A),A}if(Tl.info(Ir(a="[".concat(this._clientId,"] start join channel ")).call(a,t)),this._leaveMutex.isLocked&&(Tl.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),Tl.debug("[".concat(this._clientId,"] join: continue"))),"DISCONNECTED"!==this.connectionState)throw e=new wl(zd.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state")),o.onError(e),e;this._sessionId||(this._sessionId=Bt(32,"").toUpperCase()),this._gateway.state="CONNECTING",r={clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:"string"!=typeof i?i:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:n||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:r,useLocalAccessPoint:this._useLocalAccessPoint},"string"==typeof i&&(r.stringUid=i,this._uintUid?(r.uid=this._uintUid,this._uintUid=void 0):r.uid=0),"none"!==this._encryptionMode&&this._encryptionSecret&&(r.aesmode=this._encryptionMode,r.aespassword=await h_(this._encryptionSecret),this._encryptionSalt&&(r.aessalt=this._encryptionSalt)),this._startSession(this._sessionId,{channel:t,appId:e}),$d((()=>{"CONNECTING"===this.connectionState&&wh.joinChannelTimeout(this._sessionId,5)}),5e3);try{var d;let i;if("443only"===r.cloudProxyServer)r.proxyServer=xd.PROXY_SERVER_TYPE2;else if("proxy3"===r.cloudProxyServer||"proxy4"===r.cloudProxyServer||"proxy5"===r.cloudProxyServer){let e=xd.PROXY_SERVER_TYPE3;qd(e)?r.proxyServer=e[0]:r.proxyServer=e}if(wh.setProxyServer(r.proxyServer),Tl.setProxyServer(r.proxyServer),this._performanceRecorder.checkPoint("startRequestAp"),r.stringUid&&!r.uid&&"normal"===r.cloudProxyServer){var l;await nn(r,this._axiosCancelSource.token,this._config.httpRetryConfig||Th,!1);let e=await rn(r.stringUid,r,this._axiosCancelSource.token,this._config.httpRetryConfig||Th);Tl.debug(Ir(l="getUserAccount Success ".concat(r.stringUid," => ")).call(l,e)),r.uid=e,i=await tn(r,this._axiosCancelSource.token,this._config.httpRetryConfig||Th)}else{if(r.stringUid&&!r.uid){var u;let e=await rn(r.stringUid,r,this._axiosCancelSource.token,this._config.httpRetryConfig||Th);Tl.debug(Ir(u="getUserAccount Success ".concat(r.stringUid," => ")).call(u,e)),r.uid=e}i=await nn(r,this._axiosCancelSource.token,this._config.httpRetryConfig||Th,!0)}this._performanceRecorder.checkPoint("startJoinGateway"),this._configDistribute.startGetConfigDistribute(r,this._axiosCancelSource.token),this._configDistribute.on(Cu.UPDATE_BITRATE_LIMIT,(e=>{this._highStream&&this._highStream.handleUpdateBitrateLimit(e.uplink),e.low_stream_uplink&&this._lowStream&&this._lowStream.handleUpdateBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})})),this._key=n||e,this._joinInfo=Qn({},r,{cid:i.gatewayInfo.cid,uid:r.uid?r.uid:i.gatewayInfo.uid,vid:i.gatewayInfo.vid,apResponse:i.gatewayInfo.res,uni_lbs_ip:i.gatewayInfo.uni_lbs_ip,gatewayAddrs:i.gatewayInfo.gatewayAddrs});let a=await this._gateway.join(this._joinInfo,this._key);return o.onSuccess(a),this._appId=e,this._channelName=r.cname,this._uid=a,this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener("beforeunload",this._handleBeforeUnload),Tl.info(Ir(d="[".concat(this._clientId,"] Joining channel success: ")).call(d,t)),$d((()=>{Tl.startUpload()}),5e3),this._performanceRecorder.checkPoint("finishJoin"),h=this,nd(Qd).call(Qd,h)||Qd.push(h),a}catch(A){throw e=qd(A)?A[0]:A,Tl.error("[".concat(this._clientId,"] Joining channel failed, rollback"),e),e.code!==zd.OPERATION_ABORTED&&(this._gateway.state="DISCONNECTED",this._reset()),o.onError(e),e}var h}async leave(){let e=wh.reportApiInvoke(this._sessionId,{name:Ll.LEAVE,options:[],tag:Ul.TRACER});Tl.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener("beforeunload",this._handleBeforeUnload),this._reset();var t=xc(Qd).call(Qd,this);if(-1!==t&&kc(Qd).call(Qd,t,1),t=await this._leaveMutex.lock(),"DISCONNECTED"===this.connectionState)return Tl.info("[".concat(this._clientId,"] Leaving channel repeated, success")),t(),e.onSuccess();await this._gateway.leave("CONNECTED"!==this.connectionState),Tl.info("[".concat(this._clientId,"] Leaving channel success")),t(),e.onSuccess()}async publish(e,t=!0){var n,i;qd(e)||(e=[e]);let r=wh.reportApiInvoke(this._sessionId,{name:Ll.PUBLISH,options:Rc(e).call(e,(e=>e?Object(e).toString():"null")),tag:Ul.TRACER});if(0===e.length)return e=new wl(zd.INVALID_PARAMS,"track list is empty"),r.onError(e),e.throw();if("audience"===this._gateway.role)return e=new wl(zd.INVALID_OPERATION,"audience can not publish stream"),r.onError(e),e.throw();for(let o of e){if(!(o instanceof Oh))return e=new wl(zd.INVALID_PARAMS,"pamameter is not local track"),r.onError(e),e.throw();if(!o._enabled&&t)return e=new wl(zd.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(o.getTrackId())),r.onError(e),e.throw()}if(Tl.info(Ir(n="[".concat(this._clientId,"] Publishing tracks, id ")).call(n,Rc(e).call(e,(e=>"".concat(e.getTrackId()," "))))),await this._configDistribute.awaitConfigDistributeComplete(),t&&No(e).call(e,(e=>{var t;let n=this._configDistribute.getBitrateLimit();var i;e instanceof Wg&&n&&e.setBitrateLimit(n.uplink),-1===xc(t=this._bindEnabledTracks).call(t,e)&&(e.addListener(fu.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.addListener(fu.NEED_REMOVE_TRACK,this._handleLocalTrackDisable),this._bindEnabledTracks.push(e),ie()&&e.muted&&Tl.debug(Ir(i="[".concat(this._clientId,"] on firefox publish a muted track ")).call(i,e.getTrackId(),", skip the pub operation and wait unmute")))})),ie()&&0===(e=rs(e).call(e,(e=>!e.muted))).length)r.onSuccess(Rc(e).call(e,(e=>e.trackMediaType+":"+e.getTrackLabel())).toString());else{n=await this._publishMutex.lock();try{let t=await this._publishHighStream(e),i=(t.audioTrack,t.videoTrack);this._isDualStreamEnabled&&i&&!this._lowStream&&await this._publishLowStream(i),n(),r.onSuccess(Rc(e).call(e,(e=>e.trackMediaType+":"+e.getTrackLabel())).toString())}catch(a){throw n(),t&&No(e).call(e,(e=>{var t,n;let i=xc(t=this._bindEnabledTracks).call(t,e);-1!==i&&(e.off(fu.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.off(fu.NEED_REMOVE_TRACK,this._handleLocalTrackDisable),kc(n=this._bindEnabledTracks).call(n,i,1))})),r.onError(a),Tl.error("[".concat(this._clientId,"] publish error"),a.toString()),a}Tl.info(Ir(i="[".concat(this._clientId,"] Publish success, id ")).call(i,Rc(e).call(e,(e=>"".concat(e.getTrackId()," ")))))}}async unpublish(e,t=!0){var n;let i,r,a,o=await this._publishMutex.lock();try{var s,c;if(!this._highStream||(i=this._highStream.getAllTracks(),e?qd(e)||(e=[e]):e=this._highStream.getAllTracks(),r=function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1){let i=e[n];if(rs(e).call(e,(e=>e===i)).length!==rs(t).call(t,(e=>e===i)).length)return!1}return!0}(i,e),a=wh.reportApiInvoke(this._sessionId,{name:Ll.UNPUBLISH,options:Rc(e).call(e,(e=>e.getTrackId())),tag:Ul.TRACER}),Tl.info(Ir(s=Ir(c="[".concat(this._clientId,"] Unpublish tracks, tracks ")).call(c,Rc(e).call(e,(e=>"".concat(e.getTrackId()," "))),", isClosePC: ")).call(s,r)),!this._highStream))return Tl.warning("[".concat(this._clientId,"] Could not find tracks to unpublish")),void(o&&o())}catch(d){throw o&&o(),d}try{this._lowStream&&0<rs(e).call(e,(e=>"video"===e.trackMediaType)).length&&(await this._lowStream.closeP2PConnection(),this._lowStream=void 0),r?await this._highStream.closeP2PConnection():await this._highStream.removeTracks(e,t),o&&o()}catch(d){if(d.code!==zd.OPERATION_ABORTED)throw a.onError(d),Tl.error("[".concat(this._clientId,"] unpublish error"),d.toString()),o&&o(),d;Tl.debug("[".concat(this._clientId,"] ignore unpub operation abort")),o&&o()}this._highStream&&"disconnected"===this._highStream.connectionState&&(this._highStream=void 0,this._lowStream=void 0),t&&No(e).call(e,(e=>{var t,n;let i=xc(t=this._bindEnabledTracks).call(t,e);-1!==i&&(e.off(fu.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.off(fu.NEED_REMOVE_TRACK,this._handleLocalTrackDisable),kc(n=this._bindEnabledTracks).call(n,i,1))})),Tl.info(Ir(n="[".concat(this._clientId,"] Unpublish success,tracks ")).call(n,Rc(e).call(e,(e=>"".concat(e.getTrackId()))))),a.onSuccess()}async subscribe(e,t){var n,i,r,a;Oe(t,"mediaType",["audio","video"]);let o=wh.reportApiInvoke(this._sessionId,{name:Ll.SUBSCRIBE,options:[e.uid,t],tag:Ul.TRACER});if(!this._joinInfo)throw t=new wl(zd.INVALID_OPERATION,"Can't subscribe stream, not joined"),o.onError(t),t;if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw t=new wl(zd.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state")),o.onError(t),t;var s,c;if(!Kc(n=this._users).call(n,(t=>t===e)))throw t=new wl(zd.INVALID_REMOTE_USER,"user is not in the channel"),Tl.error(Ir(s="[".concat(this._clientId,"] can not subscribe ")).call(s,e.uid,", this user is not in the channel")),o.onError(t),t;if(!e.hasAudio&&!e.hasVideo)throw t=new wl(zd.INVALID_REMOTE_USER,"user is not published"),Tl.error(Ir(c="[".concat(this._clientId,"] can not subscribe ")).call(c,e.uid,", user is not published")),o.onError(t),t;if(s={audio:"audio"===t,video:"video"===t},!e.hasAudio&&s.audio||!e.hasVideo&&s.video){var d,l,u=new wl(zd.REMOTE_USER_IS_NOT_PUBLISHED);throw Tl.error(Ir(d=Ir(l="[".concat(this._clientId,"] can not subscribe ")).call(l,e.uid," with mediaType ")).call(d,t,", remote track is not published")),o.onError(u),u}(d=this._subscribeMutex.get(e.uid))||(d=new kh("sub-".concat(e.uid)),this._subscribeMutex.set(e.uid,d)),Tl.info(Ir(i=Ir(r="[".concat(this._clientId,"] subscribe user ")).call(r,e.uid,", mediaType: ")).call(i,t)),i=await d.lock(),r=this._remoteStream.get(e.uid);try{if(r)s.audio=s.audio||r.subscribeOptions.audio,s.video=s.video||r.subscribeOptions.video,await this._gateway.subscribeChange(r,s);else{r=new r_(e,this._statsCollector,this._joinInfo,s),this._remoteStream.set(e.uid,r);try{await this._gateway.subscribe(r)}catch(A){throw this._remoteStream.delete(e.uid),A}r.on(Jl.CONNECTION_STATE_CHANGE,((t,n)=>{"connecting"===t?this.emit(Vl.MEDIA_RECONNECT_START,e.uid):"connected"===t&&this.emit(Vl.MEDIA_RECONNECT_END,e.uid)}))}i()}catch(A){var h;throw o.onError(A),i(),Tl.error(Ir(h="[".concat(this._clientId,"] subscribe user ")).call(h,e.uid," error"),A),A}return Tl.info(Ir(u=Ir(a="[".concat(this._clientId,"] subscribe success user ")).call(a,e.uid,", mediaType: ")).call(u,t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{Tl.warning("[".concat(this._clientId,"] auto set fallback failed"),e)})),(t="audio"===t?e.audioTrack:e.videoTrack)?(o.onSuccess(t.getTrackId()),t):(t=new wl(zd.UNEXPECTED_ERROR,"can not find remote track in user object"),o.onError(t),t.throw())}async unsubscribe(e,t){var n,i,r,a,o;t&&Oe(t,"mediaType",["audio","video"]);let s=wh.reportApiInvoke(this._sessionId,{name:Ll.UNSUBSCRIBE,options:[e.uid,t],tag:Ul.TRACER});var c,d;if(!Kc(n=this._users).call(n,(t=>t===e)))throw t=new wl(zd.INVALID_REMOTE_USER,"user is not in the channel"),Tl.error(Ir(c="[".concat(this._clientId,"] can not subscribe ")).call(c,e.uid,", user is not in the channel")),s.onError(t),t;if(Tl.info(Ir(i=Ir(r="[".concat(this._clientId,"] unsubscribe uid: ")).call(r,e.uid,", mediaType: ")).call(i,t)),(c=this._subscribeMutex.get(e.uid))||(c=new kh("sub-".concat(e.uid)),this._subscribeMutex.set(e.uid,c)),c=await c.lock(),!(n=this._remoteStream.get(e.uid)))return Tl.warning(Ir(d="[".concat(this._clientId,"]: you have not subscribe the remote user ")).call(d,e.uid)),s.onSuccess(),void c();d=Qn({},n.subscribeOptions),"audio"===t?d.audio=!1:"video"===t?(d.video=!1,n.pc._statsFilter.setVideoIsReady(!1)):(d.audio=!1,d.video=!1);try{d.audio||d.video?await this._gateway.subscribeChange(n,d):(await n.closeP2PConnection(),this._remoteStream.delete(e.uid)),c()}catch(u){var l;if(u.code!==zd.OPERATION_ABORTED)throw s.onError(u),c(),Tl.error(Ir(l="[".concat(this._clientId,"] unsubscribe user ")).call(l,e.uid," error"),u.toString()),u;c(),Tl.debug("[".concat(this._clientId,"] ignore unsub operation abort"))}Tl.info(Ir(a=Ir(o="[".concat(this._clientId,"] unsubscribe success uid: ")).call(o,e.uid,", mediaType: ")).call(a,t)),s.onSuccess()}setLowStreamParameter(e){if(!e)throw new wl(zd.INVALID_PARAMS);null==e.width||De(e.width,"streamParameter.width"),null==e.height||De(e.height,"streamParameter.height"),null==e.framerate||De(e.framerate,"streamParameter.framerate"),null==e.bitrate||De(e.bitrate,"streamParameter.bitrate");let t=wh.reportApiInvoke(this._sessionId,{name:Ll.SET_LOW_STREAM_PARAMETER,options:[e],tag:Ul.TRACER});(!e.width&&e.height||e.width&&!e.height)&&Tl.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),Tl.info("[".concat(this._clientId,"] set low stream parameter to"),Pi(e));let n=this._configDistribute.getLowStreamConfigDistribute();n&&n.bitrate&&e.bitrate&&n.bitrate<e.bitrate&&(e.bitrate=n.bitrate),this._lowStreamParameter=e,t.onSuccess()}async enableDualStream(){let e=wh.reportApiInvoke(this._sessionId,{name:Ll.ENABLE_DUAL_STREAM,options:[],tag:Ul.TRACER});if(!Tu.supportDualStream){wh.streamSwitch(this._sessionId,{lts:el(),isdual:!0,succ:!1});var t=new wl(zd.NOT_SUPPORTED,"Your browser is not support dual stream");throw e.onError(t),t}if(this._isDualStreamEnabled)throw t=new wl(zd.INVALID_OPERATION,"Dual stream is already enabled"),e.onError(t),t;if(this._highStream&&"connected"===this._highStream.connectionState&&this._highStream.videoTrack)try{await this._publishLowStream(this._highStream.videoTrack)}catch(n){throw wh.streamSwitch(this._sessionId,{lts:el(),isdual:!0,succ:!1}),e.onError(n),n}this._isDualStreamEnabled=!0,wh.streamSwitch(this._sessionId,{lts:el(),isdual:!0,succ:!0}),Tl.info("[".concat(this._clientId,"] enable dual stream")),e.onSuccess()}async disableDualStream(){let e=wh.reportApiInvoke(this._sessionId,{name:Ll.DISABLE_DUAL_STREAM,options:[],tag:Ul.TRACER});if(this._lowStream)try{await this._lowStream.closeP2PConnection()}catch(t){throw wh.streamSwitch(this._sessionId,{lts:el(),isdual:!1,succ:!1}),e.onError(t),t}this._lowStream=void 0,this._isDualStreamEnabled=!1,this._highStream&&(this._highStream.lowStreamConnection=void 0),wh.streamSwitch(this._sessionId,{lts:el(),isdual:!1,succ:!0}),Tl.info("[".concat(this._clientId,"] disable dual stream")),e.onSuccess()}async setClientRole(e,t){Oe(e,"role",["audience","host"]),t&&je(t);let n=wh.reportApiInvoke(this._sessionId,{name:Ll.SET_CLIENT_ROLE,options:[e,t],tag:Ul.TRACER});if("rtc"===this._mode)return Tl.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole")),e=new wl(zd.INVALID_OPERATION,"rtc mode can not use setClientRole"),n.onError(e),e.throw();if(t&&t.level&&"host"===e)return e=new wl(zd.INVALID_OPERATION,"host mode can not set audience latency level"),n.onError(e),e.throw();try{var i,r;if("audience"===e&&this._highStream){let e=new wl(zd.INVALID_OPERATION,"can not set client role to audience when publishing stream");return n.onError(e),e.throw()}await this._gateway.setClientRole(e,t),Tl.info(Ir(i=Ir(r="[".concat(this._clientId,"] set client role to ")).call(r,e,", level: ")).call(i,t&&t.level)),n.onSuccess()}catch(a){throw n.onError(a),a}}setProxyServer(e){if(Be(e,"proxyServer"),"DISCONNECTED"!==this.connectionState)throw new wl(zd.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new wl(zd.INVALID_OPERATION,"You have already set the proxy");this._proxyServer=e,wh.setProxyServer(this._proxyServer),Tl.setProxyServer(this._proxyServer)}setTurnServer(e){if(qd(e)||(e=[e]),"DISCONNECTED"!==this.connectionState)throw new wl(zd.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new wl(zd.INVALID_OPERATION,"You have already set the proxy");var t;if(Fe(e))return this._turnServer={servers:e,mode:"original-manual"},void Tl.info(Ir(t="[".concat(this._clientId,"] Set original turnserver success: ")).call(t,Rc(e).call(e,(e=>e.urls)).join(","),"."));No(e).call(e,(e=>Ge(e))),this._turnServer={servers:e,mode:"manual"},Tl.info("[".concat(this._clientId,"] Set turnserver success."))}startProxyServer(e){let t=wh.reportApiInvoke(this._sessionId,{name:Ll.START_PROXY_SERVER,options:[],tag:Ul.TRACER});if("DISCONNECTED"!==this.connectionState)throw e=new wl(zd.INVALID_OPERATION,"Start proxy server before join channel"),t.onError(e),e;if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint)throw e=new wl(zd.INVALID_OPERATION,"You have already set the proxy"),t.onError(e),e;let n=[1,2,3,4,5];switch(void 0===e&&(e=1),e){case 1:this._cloudProxyServerMode="normal";break;case 2:this._cloudProxyServerMode="443only";break;case 3:this._cloudProxyServerMode="proxy3";break;case 4:this._cloudProxyServerMode="proxy4";break;case 5:this._cloudProxyServerMode="proxy5";break;default:throw e=new wl(zd.INVALID_PARAMS,"proxy server mode must be ".concat(n.join("|"))),t.onError(e),e}Tl.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),t.onSuccess()}stopProxyServer(){let e=wh.reportApiInvoke(this._sessionId,{name:Ll.STOP_PROXY_SERVER,options:[],tag:Ul.TRACER});if("DISCONNECTED"!==this.connectionState)throw new wl(zd.INVALID_OPERATION,"Stop proxy server after leave channel");wh.setProxyServer(),Tl.setProxyServer(),this._cloudProxyServerMode="disabled",Tl.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]},e.onSuccess()}setLocalAccessPoints(e,t){if(Le(e,"serverList"),Be(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new wl(zd.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");let n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=Rc(e).call(e,(e=>{var i;return n.test(e)?Ir(i="".concat(e.replace(/\./g,"-"),".")).call(i,t):e})),this._useLocalAccessPoint=!0,Ae("WEBCS_DOMAIN",e),Ae("WEBCS_DOMAIN_BACKUP_LIST",e),Ae("GATEWAY_DOMAINS",[t]),Ae("EVENT_REPORT_DOMAIN",e[0]),Ae("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),Ae("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),Tl.info("set local access point success")}async setRemoteVideoStreamType(e,t){var n,i;Oe(t,"streamType",[0,1]);let r=wh.reportApiInvoke(this._sessionId,{name:Ll.SET_REMOTE_VIDEO_STREAM_TYPE,options:[e,t],tag:Ul.TRACER});try{await this._gateway.setRemoteVideoStreamType(e,t),$d((()=>{var t;let n=Kc(t=this._users).call(t,(t=>t.uid===e));n&&n.videoTrack&&n.videoTrack.updateMediaStreamTrackResolution()}),2e3)}catch(a){throw r.onError(a),Tl.error("[".concat(this._clientId,"] set remote video stream type error"),a.toString()),a}Tl.info(Ir(n=Ir(i="[".concat(this._clientId,"] set remote ")).call(i,e," video stream type to ")).call(n,t)),this._remoteStreamTypeCacheMap.set(e,t),r.onSuccess()}async setStreamFallbackOption(e,t){var n,i;Oe(t,"fallbackType",[0,1,2]);let r=wh.reportApiInvoke(this._sessionId,{name:Ll.SET_STREAM_FALLBACK_OPTION,options:["too long to show",t],tag:Ul.TRACER});try{await this._gateway.setStreamFallbackOption(e,t)}catch(a){throw r.onError(a),Tl.error("[".concat(this._clientId,"] set stream fallback option"),a.toString()),a}Tl.info(Ir(n=Ir(i="[".concat(this._clientId,"] set remote ")).call(i,e," stream fallback type to ")).call(n,t)),this._streamFallbackTypeCacheMap.set(e,t),r.onSuccess()}setEncryptionConfig(e,t,n){Oe(e,"encryptionMode","aes-128-xts aes-256-xts aes-128-ecb sm4-128-ecb aes-128-gcm aes-256-gcm aes-128-gcm2 aes-256-gcm2 none".split(" ")),Be(t,"secret");let i=["aes-128-gcm2","aes-256-gcm2"];if(nd(i).call(i,e)){if(!(n&&n instanceof Uint8Array&&32===n.length))throw new wl(zd.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new wl(zd.INVALID_PARAMS,"current encrypt mode does not need salt");/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\[\]])(?=.{8,})/.test(t)||Tl.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=Ht(n))}async renewToken(e){Be(e,"token",1,2047);let t=wh.reportApiInvoke(this._sessionId,{name:Ll.RENEW_TOKEN,options:[e],tag:Ul.TRACER});if(!this._key)return e=new wl(zd.INVALID_OPERATION,"renewToken should not be called before user join"),t.onError(e),e.throw();this._key=e;try{await this._gateway.renewToken(e)}catch(n){throw t.onError(n),Tl.error("[".concat(this._clientId,"] renewToken failed"),n.toString()),n}Tl.debug("[".concat(this._clientId,"] renewToken success")),t.onSuccess()}enableAudioVolumeIndicator(){let e=wh.reportApiInvoke(this._sessionId,{name:Ll.ENABLE_AUDIO_VOLUME_INDICATOR,options:[],tag:Ul.TRACER});if(this._audioVolumeIndicationInterval)return Tl.warning("you have already enabled audio volume indicator!"),e.onSuccess();this._audioVolumeIndicationInterval=window.setInterval((()=>{var e,t,n;let i=Wd(e=Rc(t=vh(mh(n=this._remoteStream).call(n))).call(t,(e=>({level:e.user.audioTrack?100*e.user.audioTrack._source.getAccurateVolumeLevel():0,uid:e.getUserId()})))).call(e,((e,t)=>e.level-t.level));this._highStream&&this._highStream.audioTrack&&(i.push({level:100*this._highStream.audioTrack._source.getAccurateVolumeLevel(),uid:this._highStream._userId}),i=Wd(i).call(i,((e,t)=>e.level-t.level))),this.emit(Vl.VOLUME_INDICATOR,i)}),xd.AUDIO_VOLUME_INDICATION_INTERVAL||2e3),e.onSuccess()}getRTCStats(){let e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}startLiveStreaming(e,t){let n=wh.reportApiInvoke(this._sessionId,{name:Ll.START_LIVE_STREAMING,options:[e,t],tag:Ul.TRACER});if(!t){if("h264"!==this._codec)return e=new wl(zd.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264"),n.onError(e),Cc.reject(e);if(!this._highStream)return e=new wl(zd.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming"),n.onError(e),Cc.reject(e)}return this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e)?(e=new wl(zd.LIVE_STREAMING_TASK_CONFLICT),n.onError(e),Cc.reject(e)):(t=t?ru.TRANSCODE:ru.RAW,this._createLiveStreamingClient(t).startLiveStreamingTask(e,t).then((()=>n.onSuccess())).catch((e=>{throw n.onError(e),e})))}setLiveTranscoding(e){let t=wh.reportApiInvoke(this._sessionId,{name:Ll.SET_LIVE_TRANSCODING,options:[e],tag:Ul.TRACER});return this._createLiveStreamingClient(ru.TRANSCODE).setTranscodingConfig(e).then((()=>t.onSuccess())).catch((e=>{throw t.onError(e),e}))}stopLiveStreaming(e){var t;let n=wh.reportApiInvoke(this._sessionId,{name:Ll.STOP_LIVE_STREAMING,options:[e],tag:Ul.TRACER}),i=rs(t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient]).call(t,(t=>t&&t.hasUrl(e)));return i.length?Cc.all(Rc(i).call(i,(t=>t&&t.stopLiveStreamingTask(e)))).then((()=>n.onSuccess())).catch((e=>{throw n.onError(e),e})):(t=new wl(zd.INVALID_PARAMS,"can not find live streaming url to stop"),n.onError(t),Cc.reject(t))}async addInjectStreamUrl(e,t){let n=wh.reportApiInvoke(this._sessionId,{name:Ll.ADD_INJECT_STREAM_URL,options:[e,t],tag:Ul.TRACER});try{if(!this._joinInfo)throw new wl(zd.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");let n=this._createLiveStreamingClient(ru.INJECT);n.setInjectStreamConfig(t,0),await n.startLiveStreamingTask(e,ru.INJECT)}catch(i){throw n.onError(i),i}n.onSuccess()}async removeInjectStreamUrl(){let e=wh.reportApiInvoke(this._sessionId,{name:Ll.REMOVE_INJECT_STREAM_URL,options:[],tag:Ul.TRACER});try{var t,n;let e=this._createLiveStreamingClient(ru.INJECT),i=Kc(t=vh(mh(n=e.streamingTasks).call(n))).call(t,(e=>e.mode===ru.INJECT));if(!this._joinInfo||!i)throw new wl(zd.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await e.stopLiveStreamingTask(i.url)}catch(i){throw e.onError(i),i}e.onSuccess()}async startChannelMediaRelay(e){let t=wh.reportApiInvoke(this._sessionId,{name:Ll.START_CHANNEL_MEDIA_RELAY,options:[e],tag:Ul.TRACER});try{xn(e),await this._createChannelMediaRelayClient().startChannelMediaRelay(e)}catch(n){return t.onError(n),n.throw()}t.onSuccess()}async updateChannelMediaRelay(e){let t=wh.reportApiInvoke(this._sessionId,{name:Ll.UPDATE_CHANNEL_MEDIA_RELAY,options:[e],tag:Ul.TRACER});try{xn(e),await this._createChannelMediaRelayClient().updateChannelMediaRelay(e)}catch(n){return t.onError(n),n.throw()}t.onSuccess()}async stopChannelMediaRelay(){let e=wh.reportApiInvoke(this._sessionId,{name:Ll.STOP_CHANNEL_MEDIA_RELAY,options:[],tag:Ul.TRACER});try{await this._createChannelMediaRelayClient().stopChannelMediaRelay()}catch(t){return e.onError(t),t.throw()}e.onSuccess()}sendStreamMessage(e,t=!0){if(!this._joinInfo)throw new wl(zd.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof e&&(e=(new TextEncoder).encode(e)),1024<new Blob([e]).size)throw new wl(zd.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(Wl.DATA_STREAM,{payload:Ht(e)},!t)}sendMetadata(e){if(!this._joinInfo)throw new wl(zd.INVALID_OPERATION,"can not send metadata, not joined");if(1024<new Blob([e]).size)throw new wl(zd.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Wl.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Ht(e)})}async sendCustomReportMessage(e){qd(e)||(e=[e]),No(e).call(e,Qe);let t=wh.reportApiInvoke(this._sessionId,{name:Ll.SEND_CUSTOM_REPORT_MESSAGE,options:[Pi(e)],tag:Ul.TRACER});if(!this._joinInfo)return e=new wl(zd.INVALID_OPERATION,"can not send custom report, not joined"),t.onError(e),e.throw();await wh.sendCustomReportMessage(this._joinInfo.sid,e),t.onSuccess()}getLocalAudioStats(){if(!this._highStream)return Zl;let e=this._statsCollector.getLocalAudioTrackStats(this._highStream.connectionId);return ne()&&this._highStream&&this._highStream.audioTrack&&(this._highStream.audioTrack instanceof iA?!this._highStream.audioTrack.isActive:!this._highStream.audioTrack.enabled)&&(e.sendVolumeLevel=0),e}getRemoteAudioStats(){var e;let t={};return No(e=this._remoteStream).call(e,((e,n)=>{t[n]=this._statsCollector.getRemoteAudioTrackStats(e.connectionId)})),t}getLocalVideoStats(){return this._highStream?this._statsCollector.getLocalVideoTrackStats(this._highStream.connectionId):$l}getRemoteVideoStats(){var e;let t={};return No(e=this._remoteStream).call(e,((e,n)=>{t[n]=this._statsCollector.getRemoteVideoTrackStats(e.connectionId)})),t}getRemoteNetworkQuality(){var e;let t={};return No(e=this._remoteStream).call(e,((e,n)=>{t[n]=this._statsCollector.getRemoteNetworkQualityStats(e.connectionId)})),t}async pickSVCLayer(e,t){Oe(t.spatialLayer,"spatialLayer",[0,1,2,3]),Oe(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(n){throw Tl.error("[".concat(this._clientId,"] pick SVC layer failed"),n.toString()),n}}_reset(){var e,t,n;Tl.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=Cl.CancelToken.source(),this._streamFallbackTypeCacheMap=new Ao,this._remoteStreamTypeCacheMap=new Ao,this._configDistribute.stopGetConfigDistribute(),this._defaultStreamFallbackType=this._proxyServer=this._joinInfo=void 0,this._sessionId=null,this._statsCollector.reset(),this._channelName=this._uid=this._appId=this._key=void 0,this._encryptionMode="none",this._encryptionSalt=this._encryptionSecret=null,No(e=this._users).call(e,(e=>{e.audioTrack&&(e.audioTrack.stop(),e.audioTrack._isDestroyed=!0),e.videoTrack&&(e.videoTrack.stop(),e.videoTrack._isDestroyed=!0)})),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._highStream&&(this._highStream.closeP2PConnection(!0),this._highStream=void 0),No(t=this._bindEnabledTracks).call(t,(e=>{e.off(fu.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.off(fu.NEED_REMOVE_TRACK,this._handleLocalTrackDisable)})),this._bindEnabledTracks=[],this._lowStream&&(this._lowStream.closeP2PConnection(!0),this._lowStream=void 0),No(n=this._remoteStream).call(n,(e=>{e.closeP2PConnection(!0)})),this._remoteStream=new Ao,this._publishMutex=new kh("client-publish"),this._subscribeMutex=new Ao,this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0)}_startSession(e,t){var n,i,r;let a=e||Bt(32,"").toUpperCase();e?Tl.debug(Ir(n="[".concat(this._clientId,"] new Session ")).call(n,a)):Tl.debug(Ir(i=Ir(r="[".concat(this._clientId,"] renewSession ")).call(r,this._sessionId," => ")).call(i,a)),this._sessionId=a,t?wh.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:t.channel,appid:t.appId,mode:this._mode}):this._joinInfo?wh.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&wh.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=a),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=a)}async _publishHighStream(e){if(!this._joinInfo)throw new wl(zd.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new wl(zd.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&xd.FORCE_TURN&&!xd.TURN_ENABLE_TCP&&!xd.TURN_ENABLE_UDP)throw new wl(zd.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");if(Tl.debug("[".concat(this._clientId,"] publish high stream")),this._highStream)return await this._highStream.addTracks(e),this._highStream;this._highStream=new e_(this._statsCollector,this._joinInfo,this._codec),this._highStream.on(Jl.P2P_LOST,(()=>{this._highStream&&this.emit(Vl.P2P_LOST,this._highStream.getUserId())})),await this._highStream.addTracks(e);try{await this._gateway.publish(this._highStream,"high")}catch(t){throw this._highStream=void 0,t}return this._highStream.on(Jl.CONNECTION_STATE_CHANGE,((e,t)=>{this._highStream&&("connected"===e?this.emit(Vl.MEDIA_RECONNECT_END,this._highStream.getUserId()):"connecting"===e&&this.emit(Vl.MEDIA_RECONNECT_START,this._highStream.getUserId()))})),this._highStream}async _publishLowStream(e){if(!this._joinInfo)throw new wl(zd.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new wl(zd.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(!this._highStream||"connected"!==this._highStream.connectionState)throw new wl(zd.UNEXPECTED_ERROR,"Could not find high stream");if(this._lowStream)return new wl(zd.UNEXPECTED_ERROR,"[".concat(this._clientId,"] Can't publish low stream when stream already publish")).throw();Tl.debug("[".concat(this._clientId,"] publish low stream")),this._lowStream=new e_(this._statsCollector,this._joinInfo,this._codec,!0);let t=this._configDistribute.getLowStreamConfigDistribute();t&&t.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&t.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=t.bitrate)),this._lowStream.lowStreamParameter=this._lowStreamParameter,await this._lowStream.addTracks([e]);try{await this._gateway.publish(this._lowStream,"low")}catch(n){throw this._lowStream=void 0,n}this._highStream.lowStreamConnection=this._lowStream}_createLiveStreamingClient(e){if(!this._joinInfo||!this._appId)return new wl(zd.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();let t=()=>new o_(this._joinInfo,this._config.websocketRetryConfig||Th,this._config.httpRetryConfig||Th),n=e=>{e.onLiveStreamError=(e,t)=>{wh.reportApiInvoke(this._sessionId,{name:Ll.ON_LIVE_STREAM_ERROR,options:[e,t],tag:Ul.TRACER}).onSuccess(),this.emit(Vl.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{wh.reportApiInvoke(this._sessionId,{name:Ll.ON_LIVE_STREAM_WARNING,options:[e,t],tag:Ul.TRACER}).onSuccess(),this.emit(Vl.LIVE_STREAMING_WARNING,e,t)},e.on(lu.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new wl(zd.INVALID_OPERATION,"can not find join info to get worker manager"));sn(e,this._joinInfo,this._axiosCancelSource.token,Th).then(t).catch(n)}))};switch(e){case ru.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=t(),n(this._liveRawStreamingClient)),this._liveRawStreamingClient;case ru.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=t(),n(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case ru.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=t(),this._injectStreamingClient.on(lu.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new wl(zd.INVALID_OPERATION,"can not find join info to get worker manager"));sn(e,this._joinInfo,this._axiosCancelSource.token,Th).then(t).catch(n)})),this._injectStreamingClient.onInjectStatusChange=(e,t,n)=>{this.emit(Vl.INJECT_STREAM_STATUS,e,t,n)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new d_(this._joinInfo,this._clientId,this._config.websocketRetryConfig||Th,this._config.httpRetryConfig||Th),this._channelMediaRelayClient.on("state",(e=>{"RELAY_STATE_FAILURE"===e&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(Vl.CHANNEL_MEDIA_RELAY_STATE,e)})),this._channelMediaRelayClient.on("event",(e=>{this.emit(Vl.CHANNEL_MEDIA_RELAY_EVENT,e)}))),this._channelMediaRelayClient):new wl(zd.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){this._gateway.on(pu.DISCONNECT_P2P,(()=>{var e;Tl.debug("[".concat(this._clientId,"] start full reconnect")),this._highStream&&"disconnected"!==this._highStream.connectionState&&(Tl.debug("[".concat(this._clientId,"] ready to reconnect high stream")),this._highStream.readyToReconnectPC()),this._lowStream&&"disconnected"!==this._lowStream.connectionState&&(Tl.debug("[".concat(this._clientId,"] ready to reconnect low stream")),this._lowStream.readyToReconnectPC()),No(e=this._remoteStream).call(e,((e,t)=>{var n;Tl.debug(Ir(n="[".concat(this._clientId,"] ready to reconnect remote stream ")).call(n,t)),e.readyToReconnectPC()}))})),this._gateway.on(pu.CONNECTION_STATE_CHANGE,((e,t,n)=>{var i,r;let a=()=>{this.emit(Vl.CONNECTION_STATE_CHANGE,e,t,n)};if(Tl.info(Ir(i=Ir(r="[".concat(this._clientId,"] connection state change: ")).call(r,t," -> ")).call(i,e)),"DISCONNECTED"===e)return this._reset(),void a();var o,s;if("RECONNECTING"===e)this._highStream&&"connecting"===this._highStream.connectionState&&(Tl.debug("[".concat(this._clientId,"] ready to reconnect high stream")),this._highStream.readyToReconnectPC()),this._lowStream&&"connecting"===this._lowStream.connectionState&&(Tl.debug("[".concat(this._clientId,"] ready to reconnect low stream")),this._lowStream.readyToReconnectPC()),No(o=this._remoteStream).call(o,((e,t)=>{var n;"connecting"===e.connectionState&&(Tl.debug(Ir(n="[".concat(this._clientId,"] ready to reconnect remote stream ")).call(n,t)),e.readyToReconnectPC())})),No(s=this._users).call(s,(e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_stream_added_state_=!1})),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._streamRemovedTimeout=this._userOfflineTimeout=void 0;else if("CONNECTED"===e){var c,d;No(c=this._streamFallbackTypeCacheMap).call(c,((e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch((e=>Tl.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),e)))})),No(d=this._remoteStreamTypeCacheMap).call(d,((e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch((e=>Tl.warning("[".concat(this._clientId,"] auto set remote stream type failed"),e)))})),this._highStream&&"connecting"===this._highStream.connectionState?this._highStream.reconnectPC().then((()=>{this._lowStream&&"connecting"===this._lowStream.connectionState&&this._lowStream.reconnectPC().catch((e=>{Tl.error("[".concat(this._clientId,"] republish low stream error"),e.toString()),this.emit(Vl.ERROR,{reason:e})}))})).catch((e=>{Tl.error("[".concat(this._clientId,"] republish high stream error"),e.toString()),this.emit(Vl.ERROR,{reason:e})})):this._lowStream&&"connecting"===this._lowStream.connectionState&&this._lowStream.reconnectPC().catch((e=>{Tl.error("[".concat(this._clientId,"] republish low stream error"),e.toString()),this.emit(Vl.ERROR,{reason:e})})),this._userOfflineTimeout=window.setTimeout((()=>{var e;if("CONNECTED"===this.connectionState){this._userOfflineTimeout=void 0;var t=rs(e=this._users).call(e,(e=>!e._trust_in_room_));No(t).call(t,(e=>{var t;Tl.debug(Ir(t="[".concat(this._clientId,"] user offline timeout, emit user offline ")).call(t,e.uid)),this._handleUserOffline({uid:e.uid})}))}}),3e3),this._streamRemovedTimeout=window.setTimeout((()=>{var e;"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,No(e=this._users).call(e,(e=>{var t,n,i,r,a;e._trust_audio_mute_state_||(Tl.debug(Ir(t="[".concat(this._clientId,"] auto dispatch audio unmute event ")).call(t,e.uid)),this._handleMuteStream(e.uid,"audio",!1)),e._trust_video_mute_state_||(Tl.debug(Ir(n="[".concat(this._clientId,"] auto dispatch video unmute event ")).call(n,e.uid)),this._handleMuteStream(e.uid,"video",!1)),e._trust_audio_enabled_state_||(Tl.debug(Ir(i="[".concat(this._clientId,"] auto dispatch enable local audio ")).call(i,e.uid)),this._handleSetStreamLocalEnable("audio",e.uid,!0)),!e._trust_video_enabled_state_&&e._video_enabled_&&(Tl.debug(Ir(r="[".concat(this._clientId,"] auto dispatch enable local video ")).call(r,e.uid)),this._handleSetStreamLocalEnable("video",e.uid,!0)),e._trust_stream_added_state_||(Tl.debug(Ir(a="[".concat(this._clientId,"] auto dispatch stream remove ")).call(a,e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))})))}),1e3)}a()})),this._gateway.on(pu.REQUEST_NEW_GATEWAY_LIST,((e,t)=>{if(!this._joinInfo)return t(new wl(zd.UNEXPECTED_ERROR,"can not recover, no join info"));tn(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Th).then((t=>{var n;this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res),e(Rc(n=t.gatewayInfo.gatewayAddrs).call(n,(e=>{var t,n;return this._joinInfo&&this._joinInfo.proxyServer?(e=e.split(":"),Ir(t=Ir(n="wss://".concat(this._joinInfo.proxyServer,"/ws/?h=")).call(n,e[0],"&p=")).call(t,e[1])):"wss://".concat(e)})))})).catch(t)})),this._gateway.on(pu.NETWORK_QUALITY,(e=>{"normal"===this._networkQualitySensitivity&&this.emit(Vl.NETWORK_QUALITY,e)})),this._gateway.on(pu.STREAM_TYPE_CHANGE,((e,t)=>{this.emit(Vl.STREAM_TYPE_CHANGED,e,t),wh.reportApiInvoke(this._sessionId,{name:Ll.STREAM_TYPE_CHANGE,options:[e,t],tag:Ul.TRACER}).onSuccess(Pi({uid:e,streamType:t}))})),this._gateway.on(pu.IS_P2P_DISCONNECTED,(e=>{var t,n,i;let r=[];return this._highStream&&r.push(this._highStream),No(t=this._remoteStream).call(t,(e=>r.push(e))),0===r.length||0===rs(r).call(r,(e=>"connected"===e.connectionState)).length?e(!0):(Tl.debug(Ir(n="[".concat(this._clientId,"] ")).call(n,Rc(i=rs(r).call(r,(e=>"connected"===e.connectionState))).call(i,(e=>e.connectionId))," is connected")),void e(!1))})),this._gateway.on(pu.NEED_RENEW_SESSION,(()=>{this._startSession()})),this._gateway.signal.on(ql.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(ql.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(ql.ON_ADD_AUDIO_STREAM,(e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.uint_id))),this._gateway.signal.on(ql.ON_ADD_VIDEO_STREAM,(e=>this._handleAddAudioOrVideoStream("video",e.uid,e.uint_id))),this._gateway.signal.on(ql.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(ql.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(ql.MUTE_AUDIO,(e=>this._handleMuteStream(e.uid,"audio",!0))),this._gateway.signal.on(ql.UNMUTE_AUDIO,(e=>this._handleMuteStream(e.uid,"audio",!1))),this._gateway.signal.on(ql.MUTE_VIDEO,(e=>this._handleMuteStream(e.uid,"video",!0))),this._gateway.signal.on(ql.UNMUTE_VIDEO,(e=>this._handleMuteStream(e.uid,"video",!1))),this._gateway.signal.on(ql.RECEIVE_METADATA,(e=>{let t=Yt(e.metadata);this.emit(Vl.RECEIVE_METADATA,e.uid,t)})),this._gateway.signal.on(ql.ON_DATA_STREAM,(e=>{e.seq&&delete e.seq,e.payload=Yt(e.payload),this.emit(Vl.STREAM_MESSAGE,e.uid,e.payload),this.onStreamMessage&&this.onStreamMessage(e)})),this._gateway.signal.on(ql.ON_CRYPT_ERROR,(()=>{Vt((()=>{Tl.warning("[".concat(this._clientId,"] on crypt error")),this.emit(Vl.CRYPT_ERROR)}),this._sessionId)})),this._gateway.signal.on(ql.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(ql.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{Tl.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._reset(),this._gateway.leave(!0),this.emit(Vl.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})),this._gateway.signal.on(ql.ON_STREAM_FALLBACK_UPDATE,(e=>{var t,n;Tl.debug(Ir(t=Ir(n="[".concat(this._clientId,"] stream fallback peerId: ")).call(n,e.stream_id,", attr: ")).call(t,e.stream_type)),this.emit(Vl.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")})),this._gateway.signal.on(ql.ON_PUBLISH_STREAM,(e=>{var t;this.uid===this._uid&&(this._highStream&&this._highStream._waitingSuccessResponse&&"connected"===this._highStream.connectionState?(this._highStream.reportPublishEvent(!0,null,Pi({proxy:e.proxy})),Tl.info(Ir(t="[".concat(this._clientId,"] on publish stream, ")).call(t,Pi(e))),void 0!==e.proxy&&this.emit(Vl.IS_USING_CLOUD_PROXY,!!e.proxy)):this._lowStream?this._lowStream.reportPublishEvent(!0,null,Pi({proxy:e.proxy})):Tl.warning("get on_publish_stream message but cannot handle"))})),this._gateway.signal.on(ql.ENABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)})),this._gateway.signal.on(ql.DISABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)})),this._gateway.signal.on(Kl.REQUEST_TIMEOUT,((e,t)=>{if(this._joinInfo)switch(e){case Wl.PUBLISH:var n;if(!t)break;if(!(e="high"===t.stream_type?this._highStream:this._lowStream))break;"offer"===t.state&&wh.publish(this._joinInfo.sid,{lts:e.startTime,succ:!1,ec:zd.TIMEOUT,audio:t.audio,video:t.video,p2pid:t.p2p_id,publishRequestid:e.ID,screenshare:!(!e.videoTrack||-1===xc(n=e.videoTrack._hints).call(n,gu.SCREEN_TRACK)),audioName:e.audioTrack&&(e.audioTrack instanceof iA?e.audioTrack.getSubTrackLabels().join(","):e.audioTrack.getTrackLabel()),videoName:e.videoTrack&&e.videoTrack.getTrackLabel()});break;case Wl.SUBSCRIBE:(n=this._remoteStream.get(t.stream_id))&&t&&wh.subscribe(this._joinInfo.sid,{lts:n.startTime,succ:!1,ec:zd.TIMEOUT,audio:!!t.audio,video:!!t.video,peerid:t.stream_id,subscribeRequestid:n.ID,p2pid:n.pc.ID})}}))}}g_([Ze({report:wh}),__("design:type",Function),__("design:paramtypes",[String]),__("design:returntype",void 0)],m_.prototype,"setProxyServer",null),g_([Ze(),__("design:type",Function),__("design:paramtypes",[Object]),__("design:returntype",void 0)],m_.prototype,"setTurnServer",null),g_([Ze({report:wh}),__("design:type",Function),__("design:paramtypes",[Array,String]),__("design:returntype",void 0)],m_.prototype,"setLocalAccessPoints",null),g_([Ze({report:wh}),__("design:type",Function),__("design:paramtypes",[String,String,Uint8Array]),__("design:returntype",void 0)],m_.prototype,"setEncryptionConfig",null),g_([$e({report:wh}),__("design:type",Function),__("design:paramtypes",[Object,Object]),__("design:returntype",Cc)],m_.prototype,"pickSVCLayer",null);class E_ extends Mh{constructor(e,t={}){super(),this.currentLoopCount=this.pausePlayTime=this.startPlayOffset=this.startPlayTime=0,this._currentState="stopped",this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}set currentState(e){e!==this._currentState&&(this._currentState=e,this.emit(Xl.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):Tl.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(al){}this.reset()}}startSourceNode(){var e;this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=Xc(e=this.handleSourceNodeEnded).call(e,this))}createSourceNode(){let e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}let I_=new Ao;var v_=Ei.setInterval;let C_=X().name;class y_{constructor(e,t){this.id=0,y_.count+=1,this.id=y_.count,this.element=e,this.context=t}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{let t=document.createElement("audio");t.srcObject=new MediaStream([e.track]),t.play(),this.audioPlayerElement=t}}async switchSdp(){if(this.peerPair){var e=async(e,t)=>(t="offer"===t?await e.createOffer():await e.createAnswer(),await e.setLocalDescription(t),"complete"===e.iceGatheringState?e.localDescription:new Cc((t=>{e.onicegatheringstatechange=()=>{"complete"===e.iceGatheringState&&t(e.localDescription)}}))),t=async(e,t)=>await e.setRemoteDescription(t);try{let n=await e(this.peerPair[0],"offer");await t(this.peerPair[1],n);let i=await e(this.peerPair[1],"answer");await t(this.peerPair[0],i)}catch(n){throw new wl(zd.LOCAL_AEC_ERROR,n.toString()).print()}}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let t;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),t=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(e).connect(t)}catch(n){throw new wl(zd.LOCAL_AEC_ERROR,n.toString()).print()}if(!t)throw new wl(zd.LOCAL_AEC_ERROR,"no dest node when local aec").print();return e=t.stream.getAudioTracks()[0],this.audioTrack=e,e}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();let e=await this.getTracksFromMediaElement(this.element);this.peerPair&&this.peerPair[0].addTrack(e),await this.switchSdp()}close(){var e;Tl.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&No(e=this.peerPair).call(e,(e=>{e.close()})),this.audioPlayerElement=this.peerPair=void 0}}y_.count=0;var S_=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let R_=window.AudioContext||window.webkitAudioContext;class T_{constructor(){this.units=[]}processExternalMediaAEC(e){var t;if(!this._doesEnvironmentNeedAEC())return Tl.debug("the system does not need to process local aec"),-1;this.context||(this.context=new R_);let n=Kc(t=this.units).call(t,(t=>t&&t.getElement()===e));return n||(n=new y_(e,this.context),this.units.push(n)),n.startEchoCancellation(),Tl.debug("start processing local audio echo cancellation, id is",n.id),n.id}_doesEnvironmentNeedAEC(){return X().name!==fd.SAFARI}}!function(e,t,n,i){var r,a=arguments.length,o=3>a?t:null===i?i=ts(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(o=(3>a?r(o):3<a?r(t,n,o):r(t,n))||o);3<a&&o&&jo(t,n,o)}([Ze({report:wh}),S_("design:type",Function),S_("design:paramtypes",[HTMLAudioElement]),S_("design:returntype",Number)],T_.prototype,"processExternalMediaAEC",null);let w_=new T_;var b_,N_,k_,O_;Ae("PROCESS_ID",Ir(b_=Ir(N_=Ir(k_=Ir(O_="process-".concat(Bt(8,""),"-")).call(O_,Bt(4,""),"-")).call(k_,Bt(4,""),"-")).call(N_,Bt(4,""),"-")).call(b_,Bt(12,""))),function(){let e=X();var t=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia);Tu.getDisplayMedia=t,Tu.getStreamFromExtension=e.name===fd.CHROME&&34<Number(e.version),Tu.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let e=new RTCPeerConnection,t=!1;try{e.addTransceiver("audio"),t=!0}catch(n){}return e.close(),t}(),Tu.supportMinBitrate=e.name===fd.CHROME||e.name===fd.EDGE,Tu.supportSetRtpSenderParameters=function(){let e=X();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!ce()||!(!ne()&&!$())||e.name===fd.FIREFOX&&64<=Number(e.version))}(),e.name===fd.SAFARI&&(14<=Number(e.version)?Tu.supportDualStream=!0:Tu.supportDualStream=!1),Tu.webAudioMediaStreamDest=function(){let e=X();return!(e.name===fd.SAFARI&&12>Number(e.version))}(),Tu.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,Tu.supportWebGL="undefined"!=typeof WebGLRenderingContext,Tu.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,ce()||(Tu.webAudioWithAEC=!0),Tu.supportShareAudio=function(){let e=X();return(e.os===pd.WIN_10||e.os===pd.WIN_81||e.os===pd.WIN_7||e.os===pd.LINUX||e.os===pd.MAC_OS)&&e.name===fd.CHROME&&74<=Number(e.version)}(),Tu.supportDualStreamEncoding=function(){let e=X();return"Safari"===e.name&&14<=Number(e.version)}(),Tl.info("browser compatibility",Pi(Tu),Pi(e))}();let D_={__CLIENT_LIST__:Qd,__TRACK_LIST__:Pd,VERSION:bd,BUILD:"v4.7.2-0-gf83f608b(10/13/2021, 5:32:13 PM)",setParameter:Ae,getParameter:function(e){return xd[e]},getSupportedCodec:async function(e){let t=null;return e?(t=new Eg({}),t.addStream(e)):t=new Ig({}),e=Cn(await t.createOfferSDP()),t.close(),e},checkSystemRequirements:function(){const e=wh.reportApiInvoke(null,{name:Ll.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Ul.TRACER});var t=!1;try{var n=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,i=window.WebSocket;t=!!(window.RTCPeerConnection&&n&&i)}catch(r){return Tl.error("check system requirement failed: ",r),!1}return n=!1,(i=X()).name===fd.CHROME&&58<=Number(i.version)&&("WebKit"!==wd.engine.name||ee())&&(n=!0),i.name===fd.FIREFOX&&56<=Number(i.version)&&(n=!0),i.name===fd.OPERA&&45<=Number(i.version)&&(n=!0),i.name===fd.SAFARI&&11<=Number(i.version)&&(n=!0),X().name!==fd.WECHAT&&X().name!==fd.QQ||(n=!0),Tl.debug("checkSystemRequirements, api:",t,"browser",n),t=t&&n,e.onSuccess(t),t},getDevices:function(e){return Vh.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return Vh.getRecordingDevices(e)},getCameras:function(e){return Vh.getCamerasDevices(e)},getElectronScreenSources:ot,getPlaybackDevices:function(e){return Vh.getSpeakers(e)},createClient:function(e={codec:"vp8",mode:"rtc"}){const t=wh.reportApiInvoke(null,{name:Ll.CREATE_CLIENT,options:[e],tag:Ul.TRACER});try{Oe(e.codec,"config.codec",["vp8","vp9","av1","h264"]),Oe(e.mode,"config.mode",["rtc","live"]),void 0!==e.proxyServer&&Be(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&Ge(e.turnServer),void 0!==e.httpRetryConfig&&Pe(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&Pe(e.websocketRetryConfig)}catch(n){throw t.onError(n),n}return t.onSuccess(),new m_(Qn({forceWaitGatewayResponse:!0},e,{role:"rtc"===e.mode?"host":e.role}))},createCameraVideoTrack:async function(e={encoderConfig:"480p_1"}){const t=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.CREATE_CAM_VIDEO_TRACK,options:[Gn({},e)]}),n=mn(e);var i=Bt(8,"track-cam-");let r=null;Tl.info("start create camera video track with config",Pi(e),"trackId",i);try{r=(await ct({video:n},i)).getVideoTracks()[0]||null}catch(a){throw t.onError(a),a}return r?(e.optimizationMode&&jn(i,r,e,e.encoderConfig&&de(e.encoderConfig)),e=new zg(r,e,n,e.scalabiltyMode?ue(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i),t.onSuccess(e.getTrackId()),Tl.info("create camera video success, trackId:",i),e):(i=new wl(zd.UNEXPECTED_ERROR,"can not find track in media stream"),t.onError(i),i.throw())},createCustomVideoTrack:function(e){const t=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),n=new Wg(e.mediaStreamTrack,{bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?ue(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode);return t.onSuccess(n.getTrackId()),Tl.info("create custom video track success with config",e,"trackId",n.getTrackId()),n},createScreenVideoTrack:async function(e={},t="disable"){const n=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.CREATE_SCREEN_VIDEO_TRACK,options:[Gn({},e),t]});e.encoderConfig?"string"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";var i={};e.screenSourceType&&(i.mediaSource=e.screenSourceType),e.extensionId&&te()&&(i.extensionId=e.extensionId),e.electronScreenSourceId&&(i.sourceId=e.electronScreenSourceId);var r=e.encoderConfig?le(e.encoderConfig):null;i.mandatory={chromeMediaSource:"desktop",maxWidth:r?r.width:void 0,maxHeight:r?r.height:void 0},r&&r.frameRate&&("number"==typeof r.frameRate?(i.mandatory.maxFrameRate=r.frameRate,i.mandatory.minFrameRate=r.frameRate):(i.mandatory.maxFrameRate=r.frameRate.max||r.frameRate.ideal||r.frameRate.exact||void 0,i.mandatory.minFrameRate=r.frameRate.min||r.frameRate.ideal||r.frameRate.exact||void 0),i.frameRate=r.frameRate),r&&r.width&&(i.width=r.width),r&&r.height&&(i.height=r.height),r=i;const a=Bt(8,"track-scr");let o=null;i=null;const s=Tu;if(!s.supportShareAudio&&"enable"===t)return e=new wl(zd.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio"),n.onError(e),e.throw();Tl.info("start create screen video track with config",e,"withAudio",t,"trackId",a);try{const e=await ct({screen:r,screenAudio:"auto"===t?s.supportShareAudio:"enable"===t},a);o=e.getVideoTracks()[0]||null,i=e.getAudioTracks()[0]||null}catch(c){throw n.onError(c),c}return o?i||"enable"!==t?(e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(jn(a,o,e,e.encoderConfig&&le(e.encoderConfig)),e.encoderConfig&&"string"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax)),(e=new Wg(o,e.encoderConfig?le(e.encoderConfig):{},e.scalabiltyMode?ue(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,a))._hints.push(gu.SCREEN_TRACK),i?(t=new eA(i),n.onSuccess([e.getTrackId(),t.getTrackId()]),Tl.info("create screen video track success","video:",e.getTrackId(),"audio:",t.getTrackId()),[e,t]):(n.onSuccess(e.getTrackId()),Tl.info("create screen video track success","video:",e.getTrackId()),e)):(o&&o.stop(),e=new wl(zd.SHARE_AUDIO_NOT_ALLOWED),n.onError(e),e.throw()):(e=new wl(zd.UNEXPECTED_ERROR,"can not find track in media stream"),n.onError(e),e.throw())},createMicrophoneAndCameraTracks:async function(e={},t={encoderConfig:"480p_1"}){var n,i,r;const a=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.CREATE_MIC_AND_CAM_TRACKS,options:[e,t]}),o=mn(t),s=En(e),c=Bt(8,"track-mic-"),d=Bt(8,"track-cam-");let l=null,u=null;Tl.info(Ir(n=Ir(i=Ir(r="start create camera video track(".concat(d,") and microphone audio track(")).call(r,c,") with config, audio: ")).call(i,Pi(e),", video: ")).call(n,Pi(t)));try{var h;const e=await ct({audio:s,video:o},Ir(h="".concat(c,"-")).call(h,d));l=e.getAudioTracks()[0],u=e.getVideoTracks()[0]}catch(p){throw a.onError(p),p}if(!l||!u){var A=new wl(zd.UNEXPECTED_ERROR,"can not find tracks in media stream");return a.onError(A),A.throw()}return t.optimizationMode&&jn(d,u,t,t.encoderConfig&&de(t.encoderConfig)),e=new tA(l,e,s,c),t=new zg(u,t,o,t.scalabiltyMode?ue(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,d),a.onSuccess([e.getTrackId(),t.getTrackId()]),Tl.info(Ir(A="create camera video track(".concat(d,") and microphone audio track(")).call(A,c,") success")),[e,t]},createMicrophoneAudioTrack:async function(e={}){const t=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.CREATE_MIC_AUDIO_TRACK,options:[e]}),n=En(e);var i=Bt(8,"track-mic-");let r=null;Tl.info("start create microphone audio track with config",Pi(e),"trackId",i);try{r=(await ct({audio:n},i)).getAudioTracks()[0]||null}catch(a){throw t.onError(a),a}return r?(e=new tA(r,e,n,i),t.onSuccess(e.getTrackId()),Tl.info("create microphone audio track success, trackId:",i),e):(i=new wl(zd.UNEXPECTED_ERROR,"can not find track in media stream"),t.onError(i),i.throw())},createCustomAudioTrack:function(e){const t=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),n=new eA(e.mediaStreamTrack,e.encoderConfig?he(e.encoderConfig):{});return Tl.info("create custom audio track success with config",e,"trackId",n.getTrackId()),t.onSuccess(n.getTrackId()),n},createBufferSourceAudioTrack:async function(e){const t=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.CREATE_BUFFER_AUDIO_TRACK,options:[e]}),n=Bt(8,"track-buf-");Tl.info("start create buffer source audio track with config",Pi(e),"trackId",n);const i=e.source;if(!(e.source instanceof AudioBuffer))try{e.source=await Pn(e.source,e.cacheOnlineFile)}catch(a){return t.onError(a),a.throw()}const r=new E_(e.source);return e=new nA(i,r,e.encoderConfig?he(e.encoderConfig):{},n),Tl.info("create buffer source audio track success, trackId:",n),t.onSuccess(e.getTrackId()),e},setLogLevel:function(e){Tl.setLogLevel(e)},enableLogUpload:function(){Tl.enableLogUpload()},disableLogUpload:function(){Tl.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new s_},checkAudioTrackIsActive:async function(e,t=5e3){const n=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof eA||e instanceof i_)){var i=new wl(zd.INVALID_TRACK,"the parameter is not a audio track");return n.onError(i),i.throw()}t&&1e3>t&&(t=1e3);const r=e instanceof eA?e.getTrackLabel():"remote_track";let a=i=e.getVolumeLevel(),o=i;const s=el();return new Cc((i=>{const c=v_((()=>{var d=e.getVolumeLevel();a=d>a?d:a,o=d<o?d:o,d=1e-4<a-o;var l,u=el()-s;(d||u>t)&&(clearInterval(c),u={duration:u,deviceLabel:r,maxVolumeLevel:a,result:d},Tl.info(Ir(l="[track-".concat(e.getTrackId(),"] check audio track active completed. ")).call(l,Pi(u))),n.onSuccess(u),i(d))}),200)}))},checkVideoTrackIsActive:async function(e,t=5e3){var n;const i=wh.reportApiInvoke(null,{tag:Ul.TRACER,name:Ll.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof Wg||e instanceof n_))return e=new wl(zd.INVALID_TRACK,"the parameter is not a video track"),i.onError(e),e.throw();t&&1e3>t&&(t=1e3);var r=e instanceof Wg?e.getTrackLabel():"remote_track",a=e.getMediaStreamTrack(!0);const o=document.createElement("video");o.style.width="1px",o.style.height="1px",o.setAttribute("muted",""),o.muted=!0,o.setAttribute("playsinline",""),o.controls=!1,(ne()||$())&&(o.style.opacity="0.01",o.style.position="fixed",o.style.left="0",o.style.top="0",document.body.appendChild(o)),o.srcObject=new MediaStream([a]),o.play();const s=document.createElement("canvas");s.width=160,s.height=120;let c=a=0;try{const e=el();a=await function(e,t,n,i){let r,a=0,o=null;return new Cc(((s,c)=>{$d((()=>{r&&(r(),s(a))}),t),r=it((()=>{e:{a>i&&r&&(r(),s(a));var t=n.getContext("2d");if(t){t.drawImage(e,0,0,160,120),t=t.getImageData(0,0,n.width,n.height);var d=Math.floor(t.data.length/3);if(o)for(let e=0;e<d;e+=3)if(t.data[e]!==o[e]){a+=1,o=t.data;break e}o=t.data}else t=new wl(zd.UNEXPECTED_ERROR,"can not get canvas 2d context."),Tl.error(t.toString()),c(t)}}),30)}))}(o,t,s,4),c=el()-e}catch(d){throw i.onError(d),d}return C_===fd.SAFARI&&(o.pause(),o.remove()),o.srcObject=null,r={duration:c,changedPicNum:a,deviceLabel:r,result:t=4<a},Tl.info(Ir(n="[track-".concat(e.getTrackId(),"] check video track active completed. ")).call(n,Pi(r))),i.onSuccess(r),t},setArea:function(e){const t=wh.reportApiInvoke(null,{name:Ll.SET_AREA,options:e,tag:Ul.TRACER});try{var n;let t=[];if("string"==typeof e&&(t=[e]),qd(e)&&(No(e).call(e,(e=>{if(!nd(Eu).call(Eu,e))throw new wl(zd.INVALID_PARAMS,"invalid area code")})),t=e),"[object Object]"===Object.prototype.toString.call(e)){const{areaCode:n,excludedArea:i}=e;if(!n)throw new wl(zd.INVALID_PARAMS,"area code is needed");e=n,"string"==typeof n&&(e=[n]),t=i?ig(e,i):e}Ae("AREAS",t);const i=(e=>{const t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return Rc(e).call(e,(e=>{const n=vu[e];(e=Uo(n))&&Rc(e).call(e,(e=>{var i;"CODE"!==e&&(t[e]=Ir(i=t[e]).call(i,n[e]))}))})),t})(t);Rc(n=Uo(i)).call(n,(e=>{Ae(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?i[e][0]:i[e])})),Tl.debug("set area success:",t.join(","))}catch(i){throw t.onError(i),i}t.onSuccess()},loadModule:async function(e,t){var n;if(Tl.debug(Ir(n="loadModule: ".concat(e.name,", loadOption: ")).call(n,Pi(t))),!e.moduleInit)throw Tl.debug("Invalid Plugin"),new wl(zd.INVALID_PLUGIN,"invalid plugin");try{await e.moduleInit({logger:Tl,report:wh},t)}catch(i){throw new wl(zd.UNEXPECTED_ERROR,"unexpected error in loadModule",i)}},processExternalMediaAEC:function(e){w_.processExternalMediaAEC(e)}};return Vh.on(Ml.CAMERA_DEVICE_CHANGED,(e=>{Tl.info("camera device changed",Pi(e)),D_.onCameraChanged&&D_.onCameraChanged(e)})),Vh.on(Ml.RECORDING_DEVICE_CHANGED,(e=>{Tl.info("microphone device changed",Pi(e)),D_.onMicrophoneChanged&&D_.onMicrophoneChanged(e)})),Vh.on(Ml.PLAYOUT_DEVICE_CHANGED,(e=>{Tl.debug("playout device changed",Pi(e)),D_.onPlaybackDeviceChanged&&D_.onPlaybackDeviceChanged(e)})),Xh.onAutoplayFailed=()=>{Tl.info("detect audio element autoplay failed"),D_.onAudioAutoplayFailed&&D_.onAudioAutoplayFailed()},Uh.on("autoplay-failed",(()=>{Tl.info("detect webaudio autoplay failed"),D_.onAudioAutoplayFailed&&D_.onAudioAutoplayFailed()})),qh.on("autoplay-failed",(()=>{Tl.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),D_.onAutoplayFailed?D_.onAutoplayFailed():D_.onAudioAutoplayFailed?Tl.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\nPlease refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):Tl.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\nIt will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\nPlease refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .")})),window&&(window.__ARTC__=D_),D_}()}).call(this,n(151),n(156))},1981:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const i=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function r(e){const t=e.match(i);if(!e||!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}},223:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o}));var i=n(177);function r(e){const t=Object(i.b)().getClient(),n=e||t&&t.getOptions();return!!n&&("tracesSampleRate"in n||"tracesSampler"in n)}function a(e){const t=(e||Object(i.b)()).getScope();return t&&t.getTransaction()}function o(e){return e/1e3}},2299:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(1285),r=n(149),a=n(295),o=n(179),s=n(715),c=n(2311),d=n(619),l=n(1164),u=n(711),h=n(889),A=n(999);var p=n(1156),f=n(611),g=n(606);const _="Not capturing exception because it's already been captured.";class m{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}constructor(e){if(m.prototype.__init.call(this),m.prototype.__init2.call(this),m.prototype.__init3.call(this),m.prototype.__init4.call(this),this._options=e,e.dsn){this._dsn=Object(i.b)(e.dsn);const t=Object(A.a)(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.warn("No DSN provided, client will not do anything.")}captureException(e,t,n){if(Object(a.d)(e))return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log(_));let i=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{i=e}))),i}captureMessage(e,t,n,i){let r=n&&n.event_id;const a=Object(o.j)(e)?this.eventFromMessage(String(e),t,n):this.eventFromException(e,n);return this._process(a.then((e=>this._captureEvent(e,n,i))).then((e=>{r=e}))),r}captureEvent(e,t,n){if(t&&t.originalException&&Object(a.d)(t.originalException))return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log(_));let i=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((e=>{i=e}))),i}captureSession(e){this._isEnabled()?"string"!==typeof e.release?("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Object(g.c)(e,{init:!1})):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getTransport(){return this._transport}flush(e){const t=this._transport;return t?this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e)))):Object(s.c)(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,e)))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=Object(p.b)(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}sendEvent(e,t={}){if(this._dsn){let n=function(e,t,n,i){const r=Object(c.g)(n),a=e.type||"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const o=Object(c.d)(e,r,i,t);delete e.sdkProcessingMetadata;const s=[{type:a},e];return Object(c.c)(o,[s])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=Object(c.a)(n,Object(c.b)(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));this._sendEnvelope(n)}}sendSession(e){if(this._dsn){const t=function(e,t,n,r){const a=Object(c.g)(n),o={sent_at:(new Date).toISOString(),...a&&{sdk:a},...!!r&&{dsn:Object(i.a)(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e];return Object(c.c)(o,[s])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const n=`${e}:${t}`;("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}_updateSessionFromEvent(e,t){let n=!1,i=!1;const r=t.exception&&t.exception.values;if(r){i=!0;for(const e of r){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const a="ok"===e.status;(a&&0===e.errors||a&&n)&&(Object(g.c)(e,{...n&&{status:"crashed"},errors:e.errors||Number(i||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new s.a((t=>{let n=0;const i=setInterval((()=>{0==this._numProcessing?(clearInterval(i),t(!0)):(n+=1,e&&n>=e&&(clearInterval(i),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(e,t,n){const{normalizeDepth:i=3,normalizeMaxBreadth:r=1e3}=this.getOptions(),o={...e,event_id:e.event_id||t.event_id||Object(a.f)(),timestamp:e.timestamp||Object(d.b)()};this._applyClientOptions(o),this._applyIntegrationsMetadata(o);let c=n;t.captureContext&&(c=f.a.clone(c).update(t.captureContext));let l=Object(s.c)(o);if(c&&c.getAttachments){const e=[...t.attachments||[],...c.getAttachments()];e.length&&(t.attachments=e),l=c.applyToEvent(o,t)}return l.then((e=>"number"===typeof i&&i>0?this._normalizeEvent(e,i,r):e))}_normalizeEvent(e,t,n){if(!e)return null;const i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Object(l.a)(e.data,t,n)}})))},...e.user&&{user:Object(l.a)(e.user,t,n)},...e.contexts&&{contexts:Object(l.a)(e.contexts,t,n)},...e.extra&&{extra:Object(l.a)(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=Object(l.a)(e.contexts.trace.data,t,n))),e.spans&&(i.spans=e.spans.map((e=>(e.data&&(e.data=Object(l.a)(e.data,t,n)),e)))),i}_applyClientOptions(e){const t=this.getOptions(),{environment:n,release:i,dist:r,maxValueLength:a=250}=t;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==i&&(e.release=i),void 0===e.dist&&void 0!==r&&(e.dist=r),e.message&&(e.message=Object(u.d)(e.message,a));const o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=Object(u.d)(o.value,a));const s=e.request;s&&s.url&&(s.url=Object(u.d)(s.url,a))}_applyIntegrationsMetadata(e){const t=Object.keys(this._integrations);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const t=e;"log"===t.logLevel?r.c.log(t.message):r.c.warn(t)}}))}_processEvent(e,t,n){const i=this.getOptions(),{sampleRate:r}=i;if(!this._isEnabled())return Object(s.b)(new h.a("SDK not enabled, will not capture event.","log"));const a=I(e),c=E(e),d=e.type||"error",l=`before send for type \`${d}\``;return c&&"number"===typeof r&&Math.random()>r?(this.recordDroppedEvent("sample_rate","error",e),Object(s.b)(new h.a(`Discarding event because it's not included in the random sample (sampling rate = ${r})`,"log"))):this._prepareEvent(e,t,n).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",d,e),new h.a("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const r=function(e,t,n){const{beforeSend:i,beforeSendTransaction:r}=e;if(E(t)&&i)return i(t,n);if(I(t)&&r)return r(t,n);return t}(i,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Object(o.n)(e))return e.then((e=>{if(!Object(o.i)(e)&&null!==e)throw new h.a(n);return e}),(e=>{throw new h.a(`${t} rejected with ${e}`)}));if(!Object(o.i)(e)&&null!==e)throw new h.a(n);return e}(r,l)})).then((i=>{if(null===i)throw this.recordDroppedEvent("before_send",e.type||"error",e),new h.a(`${l} returned \`null\`, will not send event.`,"log");const r=n&&n.getSession();!a&&r&&this._updateSessionFromEvent(r,i);const o=i.transaction_info;if(a&&o&&i.transaction!==e.transaction){const e="custom";i.transaction_info={...o,source:e,changes:[...o.changes,{source:e,timestamp:i.timestamp,propagations:o.propagations}]}}return this.sendEvent(i,t),i})).then(null,(e=>{if(e instanceof h.a)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new h.a(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){this._transport&&this._dsn?this._transport.send(e).then(null,(e=>{("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.error("Error while sending event:",e)})):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,i]=t.split(":");return{reason:n,category:i,quantity:e[t]}}))}}function E(e){return void 0===e.type}function I(e){return"transaction"===e.type}},2309:function(e,t,n){"use strict";function i(){const e="function"===typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++){if(t[e]===n)return!0}return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}n.d(t,"a",(function(){return i}))},2310:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(1184),r=n(149),a=n(223);function o(){Object(i.a)("error",s),Object(i.a)("unhandledrejection",s)}function s(){const e=Object(a.a)();if(e){const t="internal_error";("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}},2311:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return A})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return l}));var i=n(1285),r=n(1164),a=n(214);function o(e,t=[]){return[e,t]}function s(e,t){const[n,i]=e;return[n,[...i,t]]}function c(e,t){e[1].forEach((e=>{const n=e[0].type;t(e,n)}))}function d(e,t){return(t||new TextEncoder).encode(e)}function l(e,t){const[n,i]=e;let a=JSON.stringify(n);function o(e){"string"===typeof a?a="string"===typeof e?a+e:[d(a,t),e]:a.push("string"===typeof e?d(e,t):e)}for(const c of i){const[e,t]=c;if(o(`\n${JSON.stringify(e)}\n`),"string"===typeof t||t instanceof Uint8Array)o(t);else{let e;try{e=JSON.stringify(t)}catch(s){e=JSON.stringify(Object(r.a)(t))}o(e)}}return"string"===typeof a?a:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let i=0;for(const r of e)n.set(r,i),i+=r.length;return n}(a)}function u(e,t){const n="string"===typeof e.data?d(e.data,t):e.data;return[Object(a.c)({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const h={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile"};function A(e){return h[e]}function p(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function f(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&{dsn:Object(i.a)(r)},..."transaction"===e.type&&o&&{trace:Object(a.c)({...o})}}}},2312:function(e,t,n){"use strict";function i(){return"undefined"!==typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}n.d(t,"a",(function(){return i}))},2313:function(e,t,n){"use strict";function i(){const e="function"===typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++){if(t[e]===n)return!0}return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}n.d(t,"a",(function(){return i}))},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s}));var i=n(314);const r=["debug","info","warn","error","log","assert","trace"];function a(e){if(!("console"in i.a))return e();const t=i.a.console,n={};r.forEach((e=>{const i=t[e]&&t[e].__sentry_original__;e in t&&i&&(n[e]=t[e],t[e]=i)}));try{return e()}finally{Object.keys(n).forEach((e=>{t[e]=n[e]}))}}function o(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1}};return"undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?r.forEach((n=>{t[n]=(...t)=>{e&&a((()=>{i.a.console[n](`Sentry Logger [${n}]:`,...t)}))}})):r.forEach((e=>{t[e]=()=>{}})),t}let s;s="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?Object(i.c)("logger",o):o()},2340:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var i,r=n(285);function a(e){return new o((t=>{t(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(i||(i={}));class o{__init(){this._state=i.PENDING}__init2(){this._handlers=[]}constructor(e){o.prototype.__init.call(this),o.prototype.__init2.call(this),o.prototype.__init3.call(this),o.prototype.__init4.call(this),o.prototype.__init5.call(this),o.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(t){this._reject(t)}}then(e,t){return new o(((n,i)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(r){i(r)}else n(t)},e=>{if(t)try{n(t(e))}catch(r){i(r)}else i(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new o(((t,n)=>{let i,r;return this.then((t=>{r=!1,i=t,e&&e()}),(t=>{r=!0,i=t,e&&e()})).then((()=>{r?n(i):t(i)}))}))}__init3(){this._resolve=e=>{this._setResult(i.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(i.REJECTED,e)}}__init5(){this._setResult=(e,t)=>{this._state===i.PENDING&&(Object(r.k)(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init6(){this._executeHandlers=()=>{if(this._state===i.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===i.RESOLVED&&e[1](this._value),this._state===i.REJECTED&&e[2](this._value),e[0]=!0)}))}}}},285:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return o})),n.d(t,"j",(function(){return A})),n.d(t,"k",(function(){return h}));const i=Object.prototype.toString;function r(e){switch(i.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return f(e,Error)}}function a(e,t){return i.call(e)===`[object ${t}]`}function o(e){return a(e,"String")}function s(e){return null===e||"object"!==typeof e&&"function"!==typeof e}function c(e){return a(e,"Object")}function d(e){return"undefined"!==typeof Event&&f(e,Event)}function l(e){return"undefined"!==typeof Element&&f(e,Element)}function u(e){return a(e,"RegExp")}function h(e){return Boolean(e&&e.then&&"function"===typeof e.then)}function A(e){return c(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function p(e){return"number"===typeof e&&e!==e}function f(e,t){try{return e instanceof t}catch(n){return!1}}},289:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={};n.r(i),n.d(i,"FunctionToString",(function(){return r.a})),n.d(i,"InboundFilters",(function(){return a.a}));var r=n(1214),a=n(1215)},314:function(e,t,n){"use strict";(function(e){function i(e){return e&&e.Math==Math?e:void 0}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));const r="object"==typeof globalThis&&i(globalThis)||"object"==typeof window&&i(window)||"object"==typeof self&&i(self)||"object"==typeof e&&i(e)||function(){return this}()||{};function a(){return r}function o(e,t,n){const i=n||r,a=i.__SENTRY__=i.__SENTRY__||{};return a[e]||(a[e]=t())}}).call(this,n(151))},338:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(896),r=n(1030),a=n(232),o=n(314),s=n(1181),c=n(951),d=n(1023);const l=100;class u{__init(){this._stack=[{}]}constructor(e,t=new c.a,n=4){this._version=n,u.prototype.__init.call(this),this.getStackTop().scope=t,e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=c.a.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:Object(i.b)(),r=new Error("Sentry syntheticException");return this._withClient(((i,a)=>{i.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},a)})),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Object(i.b)(),a=new Error(e);return this._withClient(((i,o)=>{i.captureMessage(e,t,{originalException:e,syntheticException:a,...n,event_id:r},o)})),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Object(i.b)();return e.type||(this._lastEventId=n),this._withClient(((i,r)=>{i.captureEvent(e,{...t,event_id:n},r)})),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:i}=this.getStackTop();if(!n||!i)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:s=l}=i.getOptions&&i.getOptions()||{};if(s<=0)return;const c={timestamp:Object(r.b)(),...e},d=o?Object(a.b)((()=>o(c,t))):c;null!==d&&n.addBreadcrumb(d,s)}setUser(e){const t=this.getScope();t&&t.setUser(e)}setTags(e){const t=this.getScope();t&&t.setTags(e)}setExtras(e){const t=this.getScope();t&&t.setExtras(e)}setTag(e,t){const n=this.getScope();n&&n.setTag(e,t)}setExtra(e,t){const n=this.getScope();n&&n.setExtra(e,t)}setContext(e,t){const n=this.getScope();n&&n.setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();t&&n&&e(t)}run(e){const t=A(this);try{e(this)}finally{A(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(n){return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.c.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){return this._callExtensionMethod("startTransaction",e,t)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop(),t=e&&e.scope,n=t&&t.getSession();n&&Object(d.a)(n),this._sendSessionUpdate(),t&&t.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:i,environment:r}=n&&n.getOptions()||{},{userAgent:a}=o.a.navigator||{},s=Object(d.b)({release:i,environment:r,...t&&{user:t.getUser()},...a&&{userAgent:a},...e});if(t){const e=t.getSession&&t.getSession();e&&"ok"===e.status&&Object(d.c)(e,{status:"exited"}),this.endSession(),t.setSession(s)}return s}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop();if(!e)return;const n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_withClient(e){const{scope:t,client:n}=this.getStackTop();n&&e(n,t)}_callExtensionMethod(e,...t){const n=h().__SENTRY__;if(n&&n.extensions&&"function"===typeof n.extensions[e])return n.extensions[e].apply(this,t);("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.c.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function h(){return o.a.__SENTRY__=o.a.__SENTRY__||{extensions:{},hub:void 0},o.a}function A(e){const t=h(),n=g(t);return _(t,e),n}function p(){const e=h();return f(e)&&!g(e).isOlderThan(4)||_(e,new u),Object(s.b)()?function(e){try{const t=h().__SENTRY__,n=t&&t.extensions&&t.extensions.domain&&t.extensions.domain.active;if(!n)return g(e);if(!f(n)||g(n).isOlderThan(4)){const t=g(e).getStackTop();_(n,new u(t.client,c.a.clone(t.scope)))}return g(n)}catch(t){return g(e)}}(e):g(e)}function f(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function g(e){return Object(o.c)("hub",(()=>new u),e)}function _(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}},3440:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(896),r=n(1030),a=n(2340),o=n(712),s=n(893),c=n(951);function d(e,t,n,d){const{normalizeDepth:l=3,normalizeMaxBreadth:u=1e3}=e,h={...t,event_id:t.event_id||n.event_id||Object(i.b)(),timestamp:t.timestamp||Object(r.b)()};!function(e,t){const{environment:n,release:i,dist:r,maxValueLength:a=250}=t;"environment"in e||(e.environment="environment"in t?n:"production");void 0===e.release&&void 0!==i&&(e.release=i);void 0===e.dist&&void 0!==r&&(e.dist=r);e.message&&(e.message=Object(o.b)(e.message,a));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=Object(o.b)(s.value,a));const c=e.request;c&&c.url&&(c.url=Object(o.b)(c.url,a))}(h,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(h,e.integrations.map((e=>e.name)));let A=d;n.captureContext&&(A=c.a.clone(A).update(n.captureContext));let p=Object(a.b)(h);if(A){if(A.getAttachments){const e=[...n.attachments||[],...A.getAttachments()];e.length&&(n.attachments=e)}p=A.applyToEvent(h,n)}return p.then((e=>"number"===typeof l&&l>0?function(e,t,n){if(!e)return null;const i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Object(s.a)(e.data,t,n)}})))},...e.user&&{user:Object(s.a)(e.user,t,n)},...e.contexts&&{contexts:Object(s.a)(e.contexts,t,n)},...e.extra&&{extra:Object(s.a)(e.extra,t,n)}};e.contexts&&e.contexts.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=Object(s.a)(e.contexts.trace.data,t,n)));e.spans&&(i.spans=e.spans.map((e=>(e.data&&(e.data=Object(s.a)(e.data,t,n)),e))));return i}(e,l,u):e))}},359:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return a}));var i=n(1675),r=n(285);n(712);function a(e,t,n){if(!(t in e))return;const i=e[t],r=n(i);if("function"===typeof r)try{!function(e,t){const n=t.prototype||{};e.prototype=t.prototype=n,o(e,"__sentry_original__",t)}(r,i)}catch(a){}e[t]=r}function o(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function s(e){if(Object(r.b)(e))return{message:e.message,name:e.name,stack:e.stack,...d(e)};if(Object(r.c)(e)){const t={type:e.type,target:c(e.target),currentTarget:c(e.currentTarget),...d(e)};return"undefined"!==typeof CustomEvent&&Object(r.d)(e,CustomEvent)&&(t.detail=e.detail),t}return e}function c(e){try{return Object(r.a)(e)?Object(i.a)(e):Object.prototype.toString.call(e)}catch(t){return"<unknown>"}}function d(e){if("object"===typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function l(e){return u(e,new Map)}function u(e,t){if(Object(r.f)(e)){const n=t.get(e);if(void 0!==n)return n;const i={};t.set(e,i);for(const r of Object.keys(e))"undefined"!==typeof e[r]&&(i[r]=u(e[r],t));return i}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const i=[];return t.set(e,i),e.forEach((e=>{i.push(u(e,t))})),i}return e}},551:function(e,t,n){"use strict";n.r(t);var i=n(653);n.d(t,"FunctionToString",(function(){return i.d})),n.d(t,"Hub",(function(){return i.g})),n.d(t,"InboundFilters",(function(){return i.h})),n.d(t,"SDK_VERSION",(function(){return i.l})),n.d(t,"Scope",(function(){return i.m})),n.d(t,"addBreadcrumb",(function(){return i.p})),n.d(t,"addGlobalEventProcessor",(function(){return i.q})),n.d(t,"captureEvent",(function(){return i.r})),n.d(t,"captureException",(function(){return i.s})),n.d(t,"captureMessage",(function(){return i.t})),n.d(t,"configureScope",(function(){return i.w})),n.d(t,"createTransport",(function(){return i.x})),n.d(t,"getCurrentHub",(function(){return i.G})),n.d(t,"getHubFromCarrier",(function(){return i.H})),n.d(t,"makeMain",(function(){return i.K})),n.d(t,"setContext",(function(){return i.P})),n.d(t,"setExtra",(function(){return i.Q})),n.d(t,"setExtras",(function(){return i.R})),n.d(t,"setTag",(function(){return i.S})),n.d(t,"setTags",(function(){return i.T})),n.d(t,"setUser",(function(){return i.U})),n.d(t,"startTransaction",(function(){return i.W})),n.d(t,"withScope",(function(){return i.Y})),n.d(t,"WINDOW",(function(){return i.o})),n.d(t,"Replay",(function(){return i.k})),n.d(t,"BrowserClient",(function(){return i.b})),n.d(t,"makeFetchTransport",(function(){return i.J})),n.d(t,"makeXHRTransport",(function(){return i.L})),n.d(t,"chromeStackLineParser",(function(){return i.u})),n.d(t,"defaultStackLineParsers",(function(){return i.z})),n.d(t,"defaultStackParser",(function(){return i.A})),n.d(t,"geckoStackLineParser",(function(){return i.F})),n.d(t,"opera10StackLineParser",(function(){return i.N})),n.d(t,"opera11StackLineParser",(function(){return i.O})),n.d(t,"winjsStackLineParser",(function(){return i.X})),n.d(t,"eventFromException",(function(){return i.B})),n.d(t,"eventFromMessage",(function(){return i.C})),n.d(t,"close",(function(){return i.v})),n.d(t,"defaultIntegrations",(function(){return i.y})),n.d(t,"flush",(function(){return i.D})),n.d(t,"forceLoad",(function(){return i.E})),n.d(t,"lastEventId",(function(){return i.I})),n.d(t,"onLoad",(function(){return i.M})),n.d(t,"showReportDialog",(function(){return i.V})),n.d(t,"wrap",(function(){return i.Z})),n.d(t,"GlobalHandlers",(function(){return i.e})),n.d(t,"TryCatch",(function(){return i.n})),n.d(t,"Breadcrumbs",(function(){return i.a})),n.d(t,"LinkedErrors",(function(){return i.j})),n.d(t,"HttpContext",(function(){return i.f})),n.d(t,"Dedupe",(function(){return i.c})),n.d(t,"Integrations",(function(){return i.i}));var r=n(949);n.d(t,"init",(function(){return r.a}));var a=n(950);n.d(t,"vueRouterInstrumentation",(function(){return a.a}));var o=n(1245);n.d(t,"attachErrorHandler",(function(){return o.a}));var s=n(1e3);n.d(t,"createTracingMixins",(function(){return s.a}))},645:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r}));n(895);function i(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const i=[];for(const r of e.split("\n").slice(n)){const e=r.replace(/\(error: (.*)\)/,"$1");for(const n of t){const t=n(e);if(t){i.push(t);break}}}return function(e){if(!e.length)return[];let t=e;const n=t[0].function||"",i=t[t.length-1].function||"";-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1));-1!==i.indexOf("sentryWrapped")&&(t=t.slice(0,-1));return t.slice(0,50).map((e=>({...e,filename:e.filename||t[0].filename,function:e.function||"?"}))).reverse()}(i)}}function r(e){return Array.isArray(e)?i(...e):e}const a="<anonymous>";function o(e){try{return e&&"function"===typeof e&&e.name||a}catch(t){return a}}},653:function(e,t,n){"use strict";n.d(t,"d",(function(){return r.a})),n.d(t,"g",(function(){return a.a})),n.d(t,"h",(function(){return o.a})),n.d(t,"l",(function(){return s.a})),n.d(t,"m",(function(){return c.a})),n.d(t,"p",(function(){return d.a})),n.d(t,"q",(function(){return c.b})),n.d(t,"r",(function(){return d.b})),n.d(t,"s",(function(){return d.c})),n.d(t,"t",(function(){return d.d})),n.d(t,"w",(function(){return d.e})),n.d(t,"x",(function(){return l.a})),n.d(t,"G",(function(){return a.b})),n.d(t,"H",(function(){return a.c})),n.d(t,"K",(function(){return a.e})),n.d(t,"P",(function(){return d.f})),n.d(t,"Q",(function(){return d.g})),n.d(t,"R",(function(){return d.h})),n.d(t,"S",(function(){return d.i})),n.d(t,"T",(function(){return d.j})),n.d(t,"U",(function(){return d.k})),n.d(t,"W",(function(){return d.l})),n.d(t,"Y",(function(){return d.m})),n.d(t,"o",(function(){return u.a})),n.d(t,"k",(function(){return en})),n.d(t,"b",(function(){return tn.a})),n.d(t,"J",(function(){return nn.a})),n.d(t,"L",(function(){return rn.a})),n.d(t,"u",(function(){return an.a})),n.d(t,"z",(function(){return an.b})),n.d(t,"A",(function(){return an.c})),n.d(t,"F",(function(){return an.d})),n.d(t,"N",(function(){return an.e})),n.d(t,"O",(function(){return an.f})),n.d(t,"X",(function(){return an.g})),n.d(t,"B",(function(){return on.a})),n.d(t,"C",(function(){return on.b})),n.d(t,"v",(function(){return sn.a})),n.d(t,"y",(function(){return sn.b})),n.d(t,"D",(function(){return sn.c})),n.d(t,"E",(function(){return sn.d})),n.d(t,"I",(function(){return sn.f})),n.d(t,"M",(function(){return sn.g})),n.d(t,"V",(function(){return sn.h})),n.d(t,"Z",(function(){return sn.i})),n.d(t,"e",(function(){return cn.a})),n.d(t,"n",(function(){return dn.a})),n.d(t,"a",(function(){return ln.b})),n.d(t,"j",(function(){return un.a})),n.d(t,"f",(function(){return hn.a})),n.d(t,"c",(function(){return An.a})),n.d(t,"i",(function(){return fn}));var i=n(289),r=n(1214),a=n(177),o=n(1215),s=n(1253),c=n(611),d=n(512),l=n(1671),u=n(144),h=n(1667);const A=n(300).a,p="sentryReplaySession",f="replay_event",g="Unable to send Replay",_=3e5,m=_,E=36e5;var I=n(895),v=n(149),C=n(1184),y=n(1180),S=/^\s+|\s+$/g,R=/^[-+]0x[0-9a-f]+$/i,T=/^0b[01]+$/i,w=/^0o[0-7]+$/i,b=parseInt,N="object"==typeof y.a&&y.a&&y.a.Object===Object&&y.a,k="object"==typeof self&&self&&self.Object===Object&&self,O=N||k,D=Object.prototype.toString,B=Math.max,L=Math.min,U=function(){return O.Date.now()};function x(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function M(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==D.call(e)}(e))return NaN;if(x(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=x(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(S,"");var n=T.test(e);return n||w.test(e)?b(e.slice(2),n?2:8):R.test(e)?NaN:+e}var Q=function(e,t,n){var i,r,a,o,s,c,d=0,l=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function A(t){var n=i,a=r;return i=r=void 0,d=t,o=e.apply(a,n)}function p(e){return d=e,s=setTimeout(g,t),l?A(e):o}function f(e){var n=e-c;return void 0===c||n>=t||n<0||u&&e-d>=a}function g(){var e=U();if(f(e))return _(e);s=setTimeout(g,function(e){var n=t-(e-c);return u?L(n,a-(e-d)):n}(e))}function _(e){return s=void 0,h&&i?A(e):(i=r=void 0,o)}function m(){var e=U(),n=f(e);if(i=arguments,r=this,c=e,n){if(void 0===s)return p(c);if(u)return s=setTimeout(g,t),A(c)}return void 0===s&&(s=setTimeout(g,t)),o}return t=M(t)||0,x(n)&&(l=!!n.leading,a=(u="maxWait"in n)?B(M(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),m.cancel=function(){void 0!==s&&clearTimeout(s),d=0,i=c=r=s=void 0},m.flush=function(){return void 0===s?o:_(U())},m},P=n(1674);function F(e){return{timestamp:(new Date).getTime()/1e3,type:"default",...e}}var G,j=function(){return j=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},j.apply(this,arguments)};function V(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function H(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function K(e){return e.nodeType===e.ELEMENT_NODE}function W(e){var t,n=null===(t=e)||void 0===t?void 0:t.host;return Boolean(n&&n.shadowRoot&&n.shadowRoot===e)}function z(e){var t=e.maskInputOptions,n=e.tagName,i=e.type,r=e.value,a=e.maskInputFn,o=r||"";return(t[n.toLowerCase()]||t[i])&&(o=a?a(o):"*".repeat(o.length)),o}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(G||(G={}));var q="__rrweb_original__";var J,X,Z=1,$=new RegExp("[^a-z0-9-_:]");function ee(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(te).join(""):null}catch(n){return null}}function te(e){var t=e.cssText;if(function(e){return"styleSheet"in e}(e))try{t=ee(e.styleSheet)||t}catch(n){}return t}var ne=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,ie=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,re=/^(data:)([^,]*),(.*)/i;function ae(e,t){return(e||"").replace(ne,(function(e,n,i,r,a,o){var s,c=i||a||o,d=n||r||"";if(!c)return e;if(!ie.test(c))return"url("+d+c+d+")";if(re.test(c))return"url("+d+c+d+")";if("/"===c[0])return"url("+d+(((s=t).indexOf("//")>-1?s.split("/").slice(0,3).join("/"):s.split("/")[0]).split("?")[0]+c)+d+")";var l=t.split("/"),u=c.split("/");l.pop();for(var h=0,A=u;h<A.length;h++){var p=A[h];"."!==p&&(".."===p?l.pop():l.push(p))}return"url("+d+l.join("/")+d+")"}))}var oe=/^[^ \t\n\r\u000c]+/,se=/^[, \t\n\r\u000c]+/;function ce(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function de(){var e=document.createElement("a");return e.href="",e.href}function le(e,t,n,i){return"src"===n||"href"===n&&i||"xlink:href"===n&&i&&"#"!==i[0]?ce(e,i):"background"!==n||!i||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n&&i?function(e,t){if(""===t.trim())return t;var n=0;function i(e){var i,r=e.exec(t.substring(n));return r?(i=r[0],n+=i.length,i):""}for(var r=[];i(se),!(n>=t.length);){var a=i(oe);if(","===a.slice(-1))a=ce(e,a.substring(0,a.length-1)),r.push(a);else{var o="";a=ce(e,a);for(var s=!1;;){var c=t.charAt(n);if(""===c){r.push((a+o).trim());break}if(s)")"===c&&(s=!1);else{if(","===c){n+=1,r.push((a+o).trim());break}"("===c&&(s=!0)}o+=c,n+=1}}}return r.join(", ")}(e,i):"style"===n&&i?ae(i,de()):"object"===t&&"data"===n&&i?ce(e,i):i:ce(e,i)}function ue(e,t,n){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){if("string"===typeof t){if(e.classList.contains(t))return!0}else for(var i=0;i<e.classList.length;i++){var r=e.classList[i];if(t.test(r))return!0}return!(!n||!e.matches(n))||ue(e.parentNode,t,n)}return e.nodeType,e.TEXT_NODE,ue(e.parentNode,t,n)}function he(e,t){var n,i,r,a,o=t.doc,s=t.blockClass,c=t.blockSelector,d=t.maskTextClass,l=t.maskTextSelector,u=t.inlineStylesheet,h=t.maskInputOptions,A=void 0===h?{}:h,p=t.maskTextFn,f=t.maskInputFn,g=t.dataURLOptions,_=void 0===g?{}:g,m=t.inlineImages,E=t.recordCanvas,I=t.keepIframeSrcFn;if(o.__sn){var v=o.__sn.id;i=1===v?void 0:v}switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:G.Document,childNodes:[],compatMode:e.compatMode,rootId:i}:{type:G.Document,childNodes:[],rootId:i};case e.DOCUMENT_TYPE_NODE:return{type:G.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:i};case e.ELEMENT_NODE:for(var C=function(e,t,n){if("string"===typeof t){if(e.classList.contains(t))return!0}else for(var i=0;i<e.classList.length;i++){var r=e.classList[i];if(t.test(r))return!0}return!!n&&e.matches(n)}(e,s,c),y=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return $.test(t)?"div":t}(e),S={},R=0,T=Array.from(e.attributes);R<T.length;R++){var w=T[R],b=w.name,N=w.value;S[b]=le(o,y,b,N)}if("link"===y&&u){var k=Array.from(o.styleSheets).find((function(t){return t.href===e.href})),O=null;k&&(O=ee(k)),O&&(delete S.rel,delete S.href,S._cssText=ae(O,k.href))}if("style"===y&&e.sheet&&!(e.innerText||e.textContent||"").trim().length)(O=ee(e.sheet))&&(S._cssText=ae(O,de()));if("input"===y||"textarea"===y||"select"===y){N=e.value;"radio"!==S.type&&"checkbox"!==S.type&&"submit"!==S.type&&"button"!==S.type&&N?S.value=z({type:S.type,tagName:y,value:N,maskInputOptions:A,maskInputFn:f}):e.checked&&(S.checked=e.checked)}if("option"===y&&(e.selected&&!A.select?S.selected=!0:delete S.selected),"canvas"===y&&E)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var i=0;i<e.height;i+=50){var r=t.getImageData,a=q in r?r.__rrweb_original__:r;if(new Uint32Array(a.call(t,n,i,Math.min(50,e.width-n),Math.min(50,e.height-i)).data.buffer).some((function(e){return 0!==e})))return!1}return!0})(e)||(S.rr_dataURL=e.toDataURL(_.type,_.quality));else if(!("__context"in e)){var D=e.toDataURL(_.type,_.quality),B=document.createElement("canvas");B.width=e.width,B.height=e.height,D!==B.toDataURL(_.type,_.quality)&&(S.rr_dataURL=D)}if("img"===y&&m){J||(J=o.createElement("canvas"),X=J.getContext("2d"));var L=e,U=L.crossOrigin;L.crossOrigin="anonymous";var x=function(){try{J.width=L.naturalWidth,J.height=L.naturalHeight,X.drawImage(L,0,0),S.rr_dataURL=J.toDataURL(_.type,_.quality)}catch(e){console.warn("Cannot inline img src="+L.currentSrc+"! Error: "+e)}U?S.crossOrigin=U:delete S.crossOrigin};L.complete&&0!==L.naturalWidth?x():L.onload=x}if("audio"!==y&&"video"!==y||(S.rr_mediaState=e.paused?"paused":"played",S.rr_mediaCurrentTime=e.currentTime),e.scrollLeft&&(S.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(S.rr_scrollTop=e.scrollTop),C){var M=e.getBoundingClientRect(),Q=M.width,P=M.height;S={class:S.class,rr_width:Q+"px",rr_height:P+"px"}}return"iframe"!==y||I(S.src)||(e.contentDocument||(S.rr_src=S.src),delete S.src),{type:G.Element,tagName:y,attributes:S,childNodes:[],isSVG:(a=e,Boolean("svg"===a.tagName||a.ownerSVGElement)||void 0),needBlock:C,rootId:i};case e.TEXT_NODE:var F=e.parentNode&&e.parentNode.tagName,j=e.textContent,V="STYLE"===F||void 0,Y="SCRIPT"===F||void 0;if(V&&j){try{e.nextSibling||e.previousSibling||(null===(n=e.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(j=(r=e.parentNode.sheet).cssRules?Array.from(r.cssRules).map((function(e){return e.cssText||""})).join(""):"")}catch(H){console.warn("Cannot get CSS styles from text's parentNode. Error: "+H,e)}j=ae(j,de())}return Y&&(j="SCRIPT_PLACEHOLDER"),!V&&!Y&&ue(e,d,l)&&j&&(j=p?p(j):j.replace(/[\S]/g,"*")),{type:G.Text,textContent:j||"",isStyle:V,rootId:i};case e.CDATA_SECTION_NODE:return{type:G.CDATA,textContent:"",rootId:i};case e.COMMENT_NODE:return{type:G.Comment,textContent:e.textContent||"",rootId:i};default:return!1}}function Ae(e){return void 0===e?"":e.toLowerCase()}function pe(e,t){var n,i=t.doc,r=t.map,a=t.blockClass,o=t.blockSelector,s=t.maskTextClass,c=t.maskTextSelector,d=t.skipChild,l=void 0!==d&&d,u=t.inlineStylesheet,h=void 0===u||u,A=t.maskInputOptions,p=void 0===A?{}:A,f=t.maskTextFn,g=t.maskInputFn,_=t.slimDOMOptions,m=t.dataURLOptions,E=void 0===m?{}:m,I=t.inlineImages,v=void 0!==I&&I,C=t.recordCanvas,y=void 0!==C&&C,S=t.onSerialize,R=t.onIframeLoad,T=t.iframeLoadTimeout,w=void 0===T?5e3:T,b=t.keepIframeSrcFn,N=void 0===b?function(){return!1}:b,k=t.preserveWhiteSpace,O=void 0===k||k,D=he(e,{doc:i,blockClass:a,blockSelector:o,maskTextClass:s,maskTextSelector:c,inlineStylesheet:h,maskInputOptions:p,maskTextFn:f,maskInputFn:g,dataURLOptions:E,inlineImages:v,recordCanvas:y,keepIframeSrcFn:N});if(!D)return console.warn(e,"not serialized"),null;n="__sn"in e?e.__sn.id:!function(e,t){if(t.comment&&e.type===G.Comment)return!0;if(e.type===G.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"===typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Ae(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Ae(e.attributes.name)||"icon"===Ae(e.attributes.rel)||"apple-touch-icon"===Ae(e.attributes.rel)||"shortcut icon"===Ae(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Ae(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Ae(e.attributes.property).match(/^(og|twitter|fb):/)||Ae(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Ae(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Ae(e.attributes.name)||"googlebot"===Ae(e.attributes.name)||"bingbot"===Ae(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Ae(e.attributes.name)||"generator"===Ae(e.attributes.name)||"framework"===Ae(e.attributes.name)||"publisher"===Ae(e.attributes.name)||"progid"===Ae(e.attributes.name)||Ae(e.attributes.property).match(/^article:/)||Ae(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Ae(e.attributes.name)||"yandex-verification"===Ae(e.attributes.name)||"csrf-token"===Ae(e.attributes.name)||"p:domain_verify"===Ae(e.attributes.name)||"verify-v1"===Ae(e.attributes.name)||"verification"===Ae(e.attributes.name)||"shopify-checkout-api-token"===Ae(e.attributes.name)))return!0}}return!1}(D,_)&&(O||D.type!==G.Text||D.isStyle||D.textContent.replace(/^\s+|\s+$/gm,"").length)?Z++:-2;var B=Object.assign(D,{id:n});if(e.__sn=B,-2===n)return null;r[n]=e,S&&S(e);var L=!l;if(B.type===G.Element&&(L=L&&!B.needBlock,delete B.needBlock,e.shadowRoot&&(B.isShadowHost=!0)),(B.type===G.Document||B.type===G.Element)&&L){_.headWhitespace&&D.type===G.Element&&"head"===D.tagName&&(O=!1);for(var U={doc:i,map:r,blockClass:a,blockSelector:o,maskTextClass:s,maskTextSelector:c,skipChild:l,inlineStylesheet:h,maskInputOptions:p,maskTextFn:f,maskInputFn:g,slimDOMOptions:_,dataURLOptions:E,inlineImages:v,recordCanvas:y,preserveWhiteSpace:O,onSerialize:S,onIframeLoad:R,iframeLoadTimeout:w,keepIframeSrcFn:N},x=0,M=Array.from(e.childNodes);x<M.length;x++){(F=pe(M[x],U))&&B.childNodes.push(F)}if(K(e)&&e.shadowRoot)for(var Q=0,P=Array.from(e.shadowRoot.childNodes);Q<P.length;Q++){var F;(F=pe(P[Q],U))&&(F.isShadow=!0,B.childNodes.push(F))}}return e.parentNode&&W(e.parentNode)&&(B.isShadow=!0),B.type===G.Element&&"iframe"===B.tagName&&function(e,t,n){var i=e.contentWindow;if(i){var r,a=!1;try{r=i.document.readyState}catch(c){return}if("complete"===r){var o="about:blank";i.location.href===o&&e.src!==o&&""!==e.src?e.addEventListener("load",t):setTimeout(t,0)}else{var s=setTimeout((function(){a||(t(),a=!0)}),n);e.addEventListener("load",(function(){clearTimeout(s),a=!0,t()}))}}}(e,(function(){var t=e.contentDocument;if(t&&R){var n=pe(t,{doc:t,map:r,blockClass:a,blockSelector:o,maskTextClass:s,maskTextSelector:c,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskTextFn:f,maskInputFn:g,slimDOMOptions:_,dataURLOptions:E,inlineImages:v,recordCanvas:y,preserveWhiteSpace:O,onSerialize:S,onIframeLoad:R,iframeLoadTimeout:w,keepIframeSrcFn:N});n&&R(e,n)}}),w),B}var fe,ge,_e,me,Ee,Ie,ve=/([^\\]):hover/;new RegExp(ve.source,"g");function Ce(e,t,n){void 0===n&&(n=document);var i={capture:!0,passive:!0};return n.addEventListener(e,t,i),function(){return n.removeEventListener(e,t,i)}}!function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin"}(fe||(fe={})),function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration"}(ge||(ge={})),function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel"}(_e||(_e={})),function(e){e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2"}(me||(me={})),function(e){e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange"}(Ee||(Ee={})),function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back"}(Ie||(Ie={}));var ye="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",Se={map:{},getId:function(){return console.error(ye),-1},getNode:function(){return console.error(ye),null},removeNodeFromMap:function(){console.error(ye)},has:function(){return console.error(ye),!1},reset:function(){console.error(ye)}};function Re(e,t,n){void 0===n&&(n={});var i=null,r=0;return function(a){var o=Date.now();r||!1!==n.leading||(r=o);var s=t-(o-r),c=this,d=arguments;s<=0||s>t?(i&&(clearTimeout(i),i=null),r=o,e.apply(c,d)):i||!1===n.trailing||(i=setTimeout((function(){r=!1===n.leading?0:Date.now(),i=null,e.apply(c,d)}),s))}}function Te(e,t,n,i,r){void 0===r&&(r=window);var a=r.Object.getOwnPropertyDescriptor(e,t);return r.Object.defineProperty(e,t,i?n:{set:function(e){var t=this;setTimeout((function(){n.set.call(t,e)}),0),a&&a.set&&a.set.call(this,e)}}),function(){return Te(e,t,a||{},!0)}}function we(e,t,n){try{if(!(t in e))return function(){};var i=e[t],r=n(i);return"function"===typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:i}})),e[t]=r,function(){e[t]=i}}catch(a){return function(){}}}function be(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Ne(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ke(e,t){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){var n=!1;if("string"===typeof t){if(void 0!==e.closest)return null!==e.closest("."+t);n=e.classList.contains(t)}else e.classList.forEach((function(e){t.test(e)&&(n=!0)}));return n||ke(e.parentNode,t)}return e.nodeType,e.TEXT_NODE,ke(e.parentNode,t)}function Oe(e){return"__sn"in e&&-2===e.__sn.id}function De(e,t){if(W(e))return!1;var n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||De(e.parentNode,t))}function Be(e){return Boolean(e.changedTouches)}"undefined"!==typeof window&&window.Proxy&&window.Reflect&&(Se=new Proxy(Se,{get:function(e,t,n){return"map"===t&&console.error(ye),Reflect.get(e,t,n)}}));!function(){function e(){this.reset()}e.prototype.add=function(e){var t=this.indexes.get(e.parentId),n={id:e.node.id,mutation:e,children:[],texts:[],attributes:[]};t?(n.parent=t,t.children[n.id]=n):this.tree[n.id]=n,this.indexes.set(n.id,n)},e.prototype.remove=function(e,t){var n=this,i=this.indexes.get(e.parentId),r=this.indexes.get(e.id),a=function(e){n.removeIdSet.add(e);var i=t.getNode(e);null===i||void 0===i||i.childNodes.forEach((function(e){"__sn"in e&&a(e.__sn.id)}))},o=function(t){n.removeIdSet.add(t.id),Object.values(t.children).forEach((function(e){return o(e)}));var i=n.indexes.get(t.id);if(i){var r=i.parent;r&&(delete i.parent,delete r.children[i.id],n.indexes.delete(e.id))}};r?i?(delete r.parent,delete i.children[r.id],this.indexes.delete(e.id),o(r)):(delete this.tree[r.id],this.indexes.delete(r.id),o(r)):(this.removeNodeMutations.push(e),a(e.id))},e.prototype.text=function(e){var t=this.indexes.get(e.id);t?t.texts.push(e):this.textMutations.push(e)},e.prototype.attribute=function(e){var t=this.indexes.get(e.id);t?t.attributes.push(e):this.attributeMutations.push(e)},e.prototype.scroll=function(e){this.scrollMap.set(e.id,e)},e.prototype.input=function(e){this.inputMap.set(e.id,e)},e.prototype.flush=function(){var e,t,n,i,r=this,a=this,o=a.tree,s=a.removeNodeMutations,c=a.textMutations,d=a.attributeMutations,l={source:ge.Mutation,removes:s,texts:c,attributes:d,adds:[]},u=function(e,t){t&&r.removeIdSet.add(e.id),l.texts=l.texts.concat(t?[]:e.texts).filter((function(e){return!r.removeIdSet.has(e.id)})),l.attributes=l.attributes.concat(t?[]:e.attributes).filter((function(e){return!r.removeIdSet.has(e.id)})),r.removeIdSet.has(e.id)||r.removeIdSet.has(e.mutation.parentId)||t?Object.values(e.children).forEach((function(e){return u(e,!0)})):(l.adds.push(e.mutation),e.children&&Object.values(e.children).forEach((function(e){return u(e,!1)})))};Object.values(o).forEach((function(e){return u(e,!1)}));try{for(var h=V(this.scrollMap.keys()),A=h.next();!A.done;A=h.next()){var p=A.value;this.removeIdSet.has(p)&&this.scrollMap.delete(p)}}catch(E){e={error:E}}finally{try{A&&!A.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}try{for(var f=V(this.inputMap.keys()),g=f.next();!g.done;g=f.next()){p=g.value;this.removeIdSet.has(p)&&this.inputMap.delete(p)}}catch(I){n={error:I}}finally{try{g&&!g.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}var _=new Map(this.scrollMap),m=new Map(this.inputMap);return this.reset(),{mutationData:l,scrollMap:_,inputMap:m}},e.prototype.reset=function(){this.tree=[],this.indexes=new Map,this.removeNodeMutations=[],this.textMutations=[],this.attributeMutations=[],this.removeIdSet=new Set,this.scrollMap=new Map,this.inputMap=new Map},e.prototype.idRemoved=function(e){return this.removeIdSet.has(e)}}();function Le(e){return"__sn"in e&&(e.__sn.type===G.Element&&"iframe"===e.__sn.tagName)}function Ue(e){return Boolean(null===e||void 0===e?void 0:e.shadowRoot)}function xe(e){return"__ln"in e}var Me=function(){function e(){this.length=0,this.head=null}return e.prototype.get=function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var t=this.head,n=0;n<e;n++)t=(null===t||void 0===t?void 0:t.next)||null;return t},e.prototype.addNode=function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&xe(e.previousSibling)){var n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&xe(e.nextSibling)&&e.nextSibling.__ln.previous){n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;this.length++},e.prototype.removeNode=function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)},e}(),Qe=function(e,t){return"".concat(e,"@").concat(t)};function Pe(e){return"__sn"in e}var Fe=function(){function e(){var e=this;this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(t){t.forEach(e.processMutation),e.emit()},this.emit=function(){var t,n,i,r;if(!e.frozen&&!e.locked){for(var a=[],o=new Me,s=function(t){for(var n=t,i=-2;-2===i;)i=(n=n&&n.nextSibling)&&e.mirror.getId(n);return i},c=function(t){for(var n,i,r,c,d,l=t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null,u=l;null===(r=null===(i=null===u||void 0===u?void 0:u.getRootNode)||void 0===i?void 0:i.call(u))||void 0===r?void 0:r.host;)u=(null===(d=null===(c=null===u||void 0===u?void 0:u.getRootNode)||void 0===c?void 0:c.call(u))||void 0===d?void 0:d.host)||null;var h=!e.doc.contains(t)&&(null===u||!e.doc.contains(u));if(t.parentNode&&!h){var A=W(t.parentNode)?e.mirror.getId(l):e.mirror.getId(t.parentNode),p=s(t);if(-1===A||-1===p)return o.addNode(t);var f=pe(t,{doc:e.doc,map:e.mirror.map,blockClass:e.blockClass,blockSelector:e.blockSelector,maskTextClass:e.maskTextClass,maskTextSelector:e.maskTextSelector,skipChild:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskTextFn:e.maskTextFn,maskInputFn:e.maskInputFn,slimDOMOptions:e.slimDOMOptions,recordCanvas:e.recordCanvas,inlineImages:e.inlineImages,onSerialize:function(n){Le(n)&&e.iframeManager.addIframe(n),Ue(t)&&e.shadowDomManager.addShadowRoot(t.shadowRoot,document)},onIframeLoad:function(t,n){e.iframeManager.attachIframe(t,n),e.shadowDomManager.observeAttachShadow(t)}});f&&a.push({parentId:A,nextId:p,node:f})}};e.mapRemoves.length;)e.mirror.removeNodeFromMap(e.mapRemoves.shift());try{for(var d=V(e.movedSet),l=d.next();!l.done;l=d.next()){var u=l.value;je(e.removes,u,e.mirror)&&!e.movedSet.has(u.parentNode)||c(u)}}catch(v){t={error:v}}finally{try{l&&!l.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}try{for(var h=V(e.addedSet),A=h.next();!A.done;A=h.next()){u=A.value;Ve(e.droppedSet,u)||je(e.removes,u,e.mirror)?Ve(e.movedSet,u)?c(u):e.droppedSet.add(u):c(u)}}catch(C){i={error:C}}finally{try{A&&!A.done&&(r=h.return)&&r.call(h)}finally{if(i)throw i.error}}for(var p=null;o.length;){var f=null;if(p){var g=e.mirror.getId(p.value.parentNode),_=s(p.value);-1!==g&&-1!==_&&(f=p)}if(!f)for(var m=o.length-1;m>=0;m--){var E=o.get(m);if(E){g=e.mirror.getId(E.value.parentNode),_=s(E.value);if(-1!==g&&-1!==_){f=E;break}}}if(!f){for(;o.head;)o.removeNode(o.head.value);break}p=f.previous,o.removeNode(f.value),c(f.value)}var I={texts:e.texts.map((function(t){return{id:e.mirror.getId(t.node),value:t.value}})).filter((function(t){return e.mirror.has(t.id)})),attributes:e.attributes.map((function(t){return{id:e.mirror.getId(t.node),attributes:t.attributes}})).filter((function(t){return e.mirror.has(t.id)})),removes:e.removes,adds:a};(I.texts.length||I.attributes.length||I.removes.length||I.adds.length)&&(e.texts=[],e.attributes=[],e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.mutationCb(I))}},this.processMutation=function(t){var n,i,r,a;if(!Oe(t.target))switch(t.type){case"characterData":var o=t.target.textContent;ke(t.target,e.blockClass)||o===t.oldValue||e.texts.push({value:ue(t.target,e.maskTextClass,e.maskTextSelector)&&o?e.maskTextFn?e.maskTextFn(o):o.replace(/[\S]/g,"*"):o,node:t.target});break;case"attributes":var s=t.target;o=t.target.getAttribute(t.attributeName);if("value"===t.attributeName&&(o=z({maskInputOptions:e.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:o,maskInputFn:e.maskInputFn})),ke(t.target,e.blockClass)||o===t.oldValue)return;var c=e.attributes.find((function(e){return e.node===t.target}));if(c||(c={node:t.target,attributes:{}},e.attributes.push(c)),"style"===t.attributeName){var d=e.doc.createElement("span");t.oldValue&&d.setAttribute("style",t.oldValue),void 0!==c.attributes.style&&null!==c.attributes.style||(c.attributes.style={});var l=c.attributes.style;try{for(var u=V(Array.from(s.style)),h=u.next();!h.done;h=u.next()){var A=h.value,p=s.style.getPropertyValue(A),f=s.style.getPropertyPriority(A);p===d.style.getPropertyValue(A)&&f===d.style.getPropertyPriority(A)||(l[A]=""===f?p:[p,f])}}catch(m){n={error:m}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}try{for(var g=V(Array.from(d.style)),_=g.next();!_.done;_=g.next()){A=_.value;""===s.style.getPropertyValue(A)&&(l[A]=!1)}}catch(E){r={error:E}}finally{try{_&&!_.done&&(a=g.return)&&a.call(g)}finally{if(r)throw r.error}}}else c.attributes[t.attributeName]=le(e.doc,t.target.tagName,t.attributeName,o);break;case"childList":t.addedNodes.forEach((function(n){return e.genAdds(n,t.target)})),t.removedNodes.forEach((function(n){var i=e.mirror.getId(n),r=W(t.target)?e.mirror.getId(t.target.host):e.mirror.getId(t.target);ke(t.target,e.blockClass)||Oe(n)||(e.addedSet.has(n)?(Ge(e.addedSet,n),e.droppedSet.add(n)):e.addedSet.has(t.target)&&-1===i||De(t.target,e.mirror)||(e.movedSet.has(n)&&e.movedMap[Qe(i,r)]?Ge(e.movedSet,n):e.removes.push({parentId:r,id:i,isShadow:!!W(t.target)||void 0})),e.mapRemoves.push(n))}))}},this.genAdds=function(t,n){if(!n||!ke(n,e.blockClass)){if(Pe(t)){if(Oe(t))return;e.movedSet.add(t);var i=null;n&&Pe(n)&&(i=n.__sn.id),i&&(e.movedMap[Qe(t.__sn.id,i)]=!0)}else e.addedSet.add(t),e.droppedSet.delete(t);ke(t,e.blockClass)||t.childNodes.forEach((function(t){return e.genAdds(t)}))}}}return e.prototype.init=function(e){var t=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","shadowDomManager","canvasManager"].forEach((function(n){t[n]=e[n]}))},e.prototype.freeze=function(){this.frozen=!0,this.canvasManager.freeze()},e.prototype.unfreeze=function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()},e.prototype.isFrozen=function(){return this.frozen},e.prototype.lock=function(){this.locked=!0,this.canvasManager.lock()},e.prototype.unlock=function(){this.locked=!1,this.canvasManager.unlock(),this.emit()},e.prototype.reset=function(){this.shadowDomManager.reset(),this.canvasManager.reset()},e}();function Ge(e,t){e.delete(t),t.childNodes.forEach((function(t){return Ge(e,t)}))}function je(e,t,n){var i=t.parentNode;if(!i)return!1;var r=n.getId(i);return!!e.some((function(e){return e.id===r}))||je(e,i,n)}function Ve(e,t){var n=t.parentNode;return!!n&&(!!e.has(n)||Ve(e,n))}var Ye=[],He="undefined"!==typeof CSSGroupingRule,Ke="undefined"!==typeof CSSMediaRule,We="undefined"!==typeof CSSSupportsRule,ze="undefined"!==typeof CSSConditionRule;function qe(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch(n){return e.target}}function Je(e,t){var n,i,r=new Fe;Ye.push(r),r.init(e);var a=window.MutationObserver||window.__rrMutationObserver,o=null===(i=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===i?void 0:i.call(n,"MutationObserver");o&&window[o]&&(a=window[o]);var s=new a(r.processMutations.bind(r));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Xe(e){var t=e.mouseInteractionCb,n=e.doc,i=e.mirror,r=e.blockClass,a=e.sampling;if(!1===a.mouseInteraction)return function(){};var o=!0===a.mouseInteraction||void 0===a.mouseInteraction?{}:a.mouseInteraction,s=[];return Object.keys(_e).filter((function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==o[e]})).forEach((function(e){var a=e.toLowerCase(),o=function(e){return function(n){var a=qe(n);if(!ke(a,r)){var o=Be(n)?n.changedTouches[0]:n;if(o){var s=i.getId(a),c=o.clientX,d=o.clientY;t({type:_e[e],id:s,x:c,y:d})}}}}(e);s.push(Ce(a,o,n))})),function(){s.forEach((function(e){return e()}))}}function Ze(e){var t=e.scrollCb,n=e.doc,i=e.mirror,r=e.blockClass;return Ce("scroll",Re((function(e){var a=qe(e);if(a&&!ke(a,r)){var o=i.getId(a);if(a===n){var s=n.scrollingElement||n.documentElement;t({id:o,x:s.scrollLeft,y:s.scrollTop})}else t({id:o,x:a.scrollLeft,y:a.scrollTop})}}),e.sampling.scroll||100),n)}function $e(e,t){var n=j({},e);return t||delete n.userTriggered,n}var et=["INPUT","TEXTAREA","SELECT"],tt=new WeakMap;function nt(e){return function(e,t){if(He&&e.parentRule instanceof CSSGroupingRule||Ke&&e.parentRule instanceof CSSMediaRule||We&&e.parentRule instanceof CSSSupportsRule||ze&&e.parentRule instanceof CSSConditionRule){var n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else{n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function it(e,t){var n,i;void 0===t&&(t={});var r=e.doc.defaultView;if(!r)return function(){};!function(e,t){var n=e.mutationCb,i=e.mousemoveCb,r=e.mouseInteractionCb,a=e.scrollCb,o=e.viewportResizeCb,s=e.inputCb,c=e.mediaInteractionCb,d=e.styleSheetRuleCb,l=e.styleDeclarationCb,u=e.canvasMutationCb,h=e.fontCb;e.mutationCb=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.mutation&&t.mutation.apply(t,H([],Y(e),!1)),n.apply(void 0,H([],Y(e),!1))},e.mousemoveCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mousemove&&t.mousemove.apply(t,H([],Y(e),!1)),i.apply(void 0,H([],Y(e),!1))},e.mouseInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mouseInteraction&&t.mouseInteraction.apply(t,H([],Y(e),!1)),r.apply(void 0,H([],Y(e),!1))},e.scrollCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.scroll&&t.scroll.apply(t,H([],Y(e),!1)),a.apply(void 0,H([],Y(e),!1))},e.viewportResizeCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.viewportResize&&t.viewportResize.apply(t,H([],Y(e),!1)),o.apply(void 0,H([],Y(e),!1))},e.inputCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.input&&t.input.apply(t,H([],Y(e),!1)),s.apply(void 0,H([],Y(e),!1))},e.mediaInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mediaInteaction&&t.mediaInteaction.apply(t,H([],Y(e),!1)),c.apply(void 0,H([],Y(e),!1))},e.styleSheetRuleCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.styleSheetRule&&t.styleSheetRule.apply(t,H([],Y(e),!1)),d.apply(void 0,H([],Y(e),!1))},e.styleDeclarationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.styleDeclaration&&t.styleDeclaration.apply(t,H([],Y(e),!1)),l.apply(void 0,H([],Y(e),!1))},e.canvasMutationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.canvasMutation&&t.canvasMutation.apply(t,H([],Y(e),!1)),u.apply(void 0,H([],Y(e),!1))},e.fontCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.font&&t.font.apply(t,H([],Y(e),!1)),h.apply(void 0,H([],Y(e),!1))}}(e,t);var a=Je(e,e.doc),o=function(e){var t=e.mousemoveCb,n=e.sampling,i=e.doc,r=e.mirror;if(!1===n.mousemove)return function(){};var a,o="number"===typeof n.mousemove?n.mousemove:50,s="number"===typeof n.mousemoveCallback?n.mousemoveCallback:500,c=[],d=Re((function(e){var n=Date.now()-a;t(c.map((function(e){return e.timeOffset-=n,e})),e),c=[],a=null}),s),l=Re((function(e){var t=qe(e),n=Be(e)?e.changedTouches[0]:e,i=n.clientX,o=n.clientY;a||(a=Date.now()),c.push({x:i,y:o,id:r.getId(t),timeOffset:Date.now()-a}),d("undefined"!==typeof DragEvent&&e instanceof DragEvent?ge.Drag:e instanceof MouseEvent?ge.MouseMove:ge.TouchMove)}),o,{trailing:!1}),u=[Ce("mousemove",l,i),Ce("touchmove",l,i),Ce("drag",l,i)];return function(){u.forEach((function(e){return e()}))}}(e),s=Xe(e),c=Ze(e),d=function(e){var t=e.viewportResizeCb,n=-1,i=-1;return Ce("resize",Re((function(){var e=be(),r=Ne();n===e&&i===r||(t({width:Number(r),height:Number(e)}),n=e,i=r)}),200),window)}(e),l=function(e){var t=e.inputCb,n=e.doc,i=e.mirror,r=e.blockClass,a=e.ignoreClass,o=e.maskInputOptions,s=e.maskInputFn,c=e.sampling,d=e.userTriggeredOnInput;function l(e){var t=qe(e),i=e.isTrusted;if(t&&"OPTION"===t.tagName&&(t=t.parentElement),t&&t.tagName&&!(et.indexOf(t.tagName)<0)&&!ke(t,r)){var c=t.type;if(!t.classList.contains(a)){var l=t.value,h=!1;"radio"===c||"checkbox"===c?h=t.checked:(o[t.tagName.toLowerCase()]||o[c])&&(l=z({maskInputOptions:o,tagName:t.tagName,type:c,value:l,maskInputFn:s})),u(t,$e({text:l,isChecked:h,userTriggered:i},d));var A=t.name;"radio"===c&&A&&h&&n.querySelectorAll('input[type="radio"][name="'.concat(A,'"]')).forEach((function(e){e!==t&&u(e,$e({text:e.value,isChecked:!h,userTriggered:!1},d))}))}}}function u(e,n){var r=tt.get(e);if(!r||r.text!==n.text||r.isChecked!==n.isChecked){tt.set(e,n);var a=i.getId(e);t(j(j({},n),{id:a}))}}var h=("last"===c.input?["change"]:["input","change"]).map((function(e){return Ce(e,l,n)})),A=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),p=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];return A&&A.set&&h.push.apply(h,H([],Y(p.map((function(e){return Te(e[0],e[1],{set:function(){l({target:this})}})}))),!1)),function(){h.forEach((function(e){return e()}))}}(e),u=function(e){var t=e.mediaInteractionCb,n=e.blockClass,i=e.mirror,r=e.sampling,a=function(e){return Re((function(r){var a=qe(r);if(a&&!ke(a,n)){var o=a,s=o.currentTime,c=o.volume,d=o.muted;t({type:e,id:i.getId(a),currentTime:s,volume:c,muted:d})}}),r.media||500)},o=[Ce("play",a(0)),Ce("pause",a(1)),Ce("seeked",a(2)),Ce("volumechange",a(3))];return function(){o.forEach((function(e){return e()}))}}(e),h=function(e,t){var n=e.styleSheetRuleCb,i=e.mirror,r=t.win,a=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=function(e,t){var r=i.getId(this.ownerNode);return-1!==r&&n({id:r,adds:[{rule:e,index:t}]}),a.apply(this,arguments)};var o=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=function(e){var t=i.getId(this.ownerNode);return-1!==t&&n({id:t,removes:[{index:e}]}),o.apply(this,arguments)};var s={};He?s.CSSGroupingRule=r.CSSGroupingRule:(Ke&&(s.CSSMediaRule=r.CSSMediaRule),ze&&(s.CSSConditionRule=r.CSSConditionRule),We&&(s.CSSSupportsRule=r.CSSSupportsRule));var c={};return Object.entries(s).forEach((function(e){var t=Y(e,2),r=t[0],a=t[1];c[r]={insertRule:a.prototype.insertRule,deleteRule:a.prototype.deleteRule},a.prototype.insertRule=function(e,t){var a=i.getId(this.parentStyleSheet.ownerNode);return-1!==a&&n({id:a,adds:[{rule:e,index:H(H([],Y(nt(this)),!1),[t||0],!1)}]}),c[r].insertRule.apply(this,arguments)},a.prototype.deleteRule=function(e){var t=i.getId(this.parentStyleSheet.ownerNode);return-1!==t&&n({id:t,removes:[{index:H(H([],Y(nt(this)),!1),[e],!1)}]}),c[r].deleteRule.apply(this,arguments)}})),function(){r.CSSStyleSheet.prototype.insertRule=a,r.CSSStyleSheet.prototype.deleteRule=o,Object.entries(s).forEach((function(e){var t=Y(e,2),n=t[0],i=t[1];i.prototype.insertRule=c[n].insertRule,i.prototype.deleteRule=c[n].deleteRule}))}}(e,{win:r}),A=function(e,t){var n=e.styleDeclarationCb,i=e.mirror,r=t.win,a=r.CSSStyleDeclaration.prototype.setProperty;r.CSSStyleDeclaration.prototype.setProperty=function(e,t,r){var o,s,c=i.getId(null===(s=null===(o=this.parentRule)||void 0===o?void 0:o.parentStyleSheet)||void 0===s?void 0:s.ownerNode);return-1!==c&&n({id:c,set:{property:e,value:t,priority:r},index:nt(this.parentRule)}),a.apply(this,arguments)};var o=r.CSSStyleDeclaration.prototype.removeProperty;return r.CSSStyleDeclaration.prototype.removeProperty=function(e){var t,r,a=i.getId(null===(r=null===(t=this.parentRule)||void 0===t?void 0:t.parentStyleSheet)||void 0===r?void 0:r.ownerNode);return-1!==a&&n({id:a,remove:{property:e},index:nt(this.parentRule)}),o.apply(this,arguments)},function(){r.CSSStyleDeclaration.prototype.setProperty=a,r.CSSStyleDeclaration.prototype.removeProperty=o}}(e,{win:r}),p=e.collectFonts?function(e){var t=e.fontCb,n=e.doc,i=n.defaultView;if(!i)return function(){};var r=[],a=new WeakMap,o=i.FontFace;i.FontFace=function(e,t,n){var i=new o(e,t,n);return a.set(i,{family:e,buffer:"string"!==typeof t,descriptors:n,fontSource:"string"===typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),i};var s=we(n.fonts,"add",(function(e){return function(n){return setTimeout((function(){var e=a.get(n);e&&(t(e),a.delete(n))}),0),e.apply(this,[n])}}));return r.push((function(){i.FontFace=o})),r.push(s),function(){r.forEach((function(e){return e()}))}}(e):function(){},f=[];try{for(var g=V(e.plugins),_=g.next();!_.done;_=g.next()){var m=_.value;f.push(m.observer(m.callback,r,m.options))}}catch(E){n={error:E}}finally{try{_&&!_.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}return function(){Ye.forEach((function(e){return e.reset()})),a.disconnect(),o(),s(),c(),d(),l(),u(),h(),A(),p(),f.forEach((function(e){return e()}))}}var rt=function(){function e(e){this.iframes=new WeakMap,this.mutationCb=e.mutationCb}return e.prototype.addIframe=function(e){this.iframes.set(e,!0)},e.prototype.addLoadListener=function(e){this.loadListener=e},e.prototype.attachIframe=function(e,t){var n;this.mutationCb({adds:[{parentId:e.__sn.id,nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,e)},e}(),at=function(){function e(e){this.restorePatches=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror;var t=this;this.restorePatches.push(we(HTMLElement.prototype,"attachShadow",(function(e){return function(){var n=e.apply(this,arguments);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,this.ownerDocument),n}})))}return e.prototype.addShadowRoot=function(e,t){Je(j(j({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e),Ze(j(j({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))},e.prototype.observeAttachShadow=function(e){if(e.contentWindow){var t=this;this.restorePatches.push(we(e.contentWindow.HTMLElement.prototype,"attachShadow",(function(n){return function(){var i=n.apply(this,arguments);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,e.contentDocument),i}})))}},e.prototype.reset=function(){this.restorePatches.forEach((function(e){return e()}))},e}();for(var ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",st="undefined"===typeof Uint8Array?[]:new Uint8Array(256),ct=0;ct<ot.length;ct++)st[ot.charCodeAt(ct)]=ct;var dt=new Map;var lt=function(e,t,n){if(e&&(At(e,t)||"object"===typeof e)){var i=function(e,t){var n=dt.get(e);return n||(n=new Map,dt.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name),r=i.indexOf(e);return-1===r&&(r=i.length,i.push(e)),r}};function ut(e,t,n){if(e instanceof Array)return e.map((function(e){return ut(e,t,n)}));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){var i=e.constructor.name,r=function(e){var t,n=new Uint8Array(e),i=n.length,r="";for(t=0;t<i;t+=3)r+=ot[n[t]>>2],r+=ot[(3&n[t])<<4|n[t+1]>>4],r+=ot[(15&n[t+1])<<2|n[t+2]>>6],r+=ot[63&n[t+2]];return i%3===2?r=r.substring(0,r.length-1)+"=":i%3===1&&(r=r.substring(0,r.length-2)+"=="),r}(e);return{rr_type:i,base64:r}}return e instanceof DataView?{rr_type:e.constructor.name,args:[ut(e.buffer,t,n),e.byteOffset,e.byteLength]}:e instanceof HTMLImageElement?{rr_type:e.constructor.name,src:e.src}:e instanceof ImageData?{rr_type:e.constructor.name,args:[ut(e.data,t,n),e.width,e.height]}:At(e,t)||"object"===typeof e?{rr_type:e.constructor.name,index:lt(e,t,n)}:e}var ht=function(e,t,n){return H([],Y(e),!1).map((function(e){return ut(e,t,n)}))},At=function(e,t){var n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((function(e){return"function"===typeof t[e]}));return Boolean(n.find((function(n){return e instanceof t[n]})))};function pt(e,t,n,i,r,a){var o,s,c=[],d=Object.getOwnPropertyNames(e),l=function(o){try{if("function"!==typeof e[o])return"continue";var s=we(e,o,(function(s){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var l=s.apply(this,c);if(lt(l,a,e),!ke(this.canvas,i)){r.getId(this.canvas);var u=ht(H([],Y(c),!1),a,e),h={type:t,property:o,args:u};n(this.canvas,h)}return l}}));c.push(s)}catch(l){var d=Te(e,o,{set:function(e){n(this.canvas,{type:t,property:o,args:[e],setter:!0})}});c.push(d)}};try{for(var u=V(d),h=u.next();!h.done;h=u.next()){l(h.value)}}catch(A){o={error:A}}finally{try{h&&!h.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}return c}var ft,gt,_t=function(){function e(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=function(e,t){!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)},this.mutationCb=e.mutationCb,this.mirror=e.mirror,!0===e.recordCanvas&&this.initCanvasMutationObserver(e.win,e.blockClass)}return e.prototype.reset=function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()},e.prototype.freeze=function(){this.frozen=!0},e.prototype.unfreeze=function(){this.frozen=!1},e.prototype.lock=function(){this.locked=!0},e.prototype.unlock=function(){this.locked=!1},e.prototype.initCanvasMutationObserver=function(e,t){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var n=function(e,t){var n=[];try{var i=we(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(n){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return ke(this,t)||"__context"in this||(this.__context=n),e.apply(this,H([n],Y(i),!1))}}));n.push(i)}catch(r){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){n.forEach((function(e){return e()}))}}(e,t),i=function(e,t,n,i){var r,a,o=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype),c=function(i){try{if("function"!==typeof t.CanvasRenderingContext2D.prototype[i])return"continue";var r=we(t.CanvasRenderingContext2D.prototype,i,(function(t){return function(){for(var r=this,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return ke(this.canvas,n)||setTimeout((function(){var t=H([],Y(a),!1);if("drawImage"===i&&t[0]&&t[0]instanceof HTMLCanvasElement){var n=t[0],o=n.getContext("2d"),s=null===o||void 0===o?void 0:o.getImageData(0,0,n.width,n.height),c=null===s||void 0===s?void 0:s.data;t[0]=JSON.stringify(c)}e(r.canvas,{type:me["2D"],property:i,args:t})}),0),t.apply(this,a)}}));o.push(r)}catch(s){var a=Te(t.CanvasRenderingContext2D.prototype,i,{set:function(t){e(this.canvas,{type:me["2D"],property:i,args:[t],setter:!0})}});o.push(a)}};try{for(var d=V(s),l=d.next();!l.done;l=d.next())c(l.value)}catch(u){r={error:u}}finally{try{l&&!l.done&&(a=d.return)&&a.call(d)}finally{if(r)throw r.error}}return function(){o.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,this.mirror),r=function(e,t,n,i){var r=[];return r.push.apply(r,H([],Y(pt(t.WebGLRenderingContext.prototype,me.WebGL,e,n,i,t)),!1)),"undefined"!==typeof t.WebGL2RenderingContext&&r.push.apply(r,H([],Y(pt(t.WebGL2RenderingContext.prototype,me.WebGL2,e,n,i,t)),!1)),function(){r.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,this.mirror);this.resetObservers=function(){n(),i(),r()}},e.prototype.startPendingCanvasMutationFlusher=function(){var e=this;requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))},e.prototype.startRAFTimestamping=function(){var e=this,t=function(n){e.rafStamps.latestId=n,requestAnimationFrame(t)};requestAnimationFrame(t)},e.prototype.flushPendingCanvasMutations=function(){var e=this;this.pendingCanvasMutations.forEach((function(t,n){var i=e.mirror.getId(n);e.flushPendingCanvasMutationFor(n,i)})),requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))},e.prototype.flushPendingCanvasMutationFor=function(e,t){if(!this.frozen&&!this.locked){var n=this.pendingCanvasMutations.get(e);if(n&&-1!==t){var i=n.map((function(e){e.type;var t=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["type"]);return t})),r=n[0].type;this.mutationCb({id:t,type:r,commands:i}),this.pendingCanvasMutations.delete(e)}}},e}();function mt(e){return j(j({},e),{timestamp:Date.now()})}var Et={map:{},getId:function(e){return e&&e.__sn?e.__sn.id:-1},getNode:function(e){return this.map[e]||null},removeNodeFromMap:function(e){var t=this,n=e.__sn&&e.__sn.id;delete this.map[n],e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},has:function(e){return this.map.hasOwnProperty(e)},reset:function(){this.map={}}};function It(e){void 0===e&&(e={});var t=e.emit,n=e.checkoutEveryNms,i=e.checkoutEveryNth,r=e.blockClass,a=void 0===r?"rr-block":r,o=e.blockSelector,s=void 0===o?null:o,c=e.ignoreClass,d=void 0===c?"rr-ignore":c,l=e.maskTextClass,u=void 0===l?"rr-mask":l,h=e.maskTextSelector,A=void 0===h?null:h,p=e.inlineStylesheet,f=void 0===p||p,g=e.maskAllInputs,_=e.maskInputOptions,m=e.slimDOMOptions,E=e.maskInputFn,I=e.maskTextFn,v=e.hooks,C=e.packFn,y=e.sampling,S=void 0===y?{}:y,R=e.mousemoveWait,T=e.recordCanvas,w=void 0!==T&&T,b=e.userTriggeredOnInput,N=void 0!==b&&b,k=e.collectFonts,O=void 0!==k&&k,D=e.inlineImages,B=void 0!==D&&D,L=e.plugins,U=e.keepIframeSrcFn,x=void 0===U?function(){return!1}:U;if(!t)throw new Error("emit function is required");void 0!==R&&void 0===S.mousemove&&(S.mousemove=R);var M,Q,P=!0===g?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==_?_:{password:!0},F=!0===m||"all"===m?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===m,headMetaDescKeywords:"all"===m}:m||{};void 0===M&&(M=window),"NodeList"in M&&!M.NodeList.prototype.forEach&&(M.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in M&&!M.DOMTokenList.prototype.forEach&&(M.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(e){if(!(0 in arguments))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1});var G=0;ft=function(e,r){var a;if(!(null===(a=Ye[0])||void 0===a?void 0:a.isFrozen())||e.type===fe.FullSnapshot||e.type===fe.IncrementalSnapshot&&e.data.source===ge.Mutation||Ye.forEach((function(e){return e.unfreeze()})),t(function(e){var t,n;try{for(var i=V(L||[]),r=i.next();!r.done;r=i.next()){var a=r.value;a.eventProcessor&&(e=a.eventProcessor(e))}}catch(o){t={error:o}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return C&&(e=C(e)),e}(e),r),e.type===fe.FullSnapshot)Q=e,G=0;else if(e.type===fe.IncrementalSnapshot){if(e.data.source===ge.Mutation&&e.data.isAttachIframe)return;G++;var o=i&&G>=i,s=n&&e.timestamp-Q.timestamp>n;(o||s)&&gt(!0)}};var H=function(e){ft(mt({type:fe.IncrementalSnapshot,data:j({source:ge.Mutation},e)}))},K=function(e){return ft(mt({type:fe.IncrementalSnapshot,data:j({source:ge.Scroll},e)}))},W=function(e){return ft(mt({type:fe.IncrementalSnapshot,data:j({source:ge.CanvasMutation},e)}))},z=new rt({mutationCb:H}),q=new _t({recordCanvas:w,mutationCb:W,win:window,blockClass:a,mirror:Et}),J=new at({mutationCb:H,scrollCb:K,bypassOptions:{blockClass:a,blockSelector:s,maskTextClass:u,maskTextSelector:A,inlineStylesheet:f,maskInputOptions:P,maskTextFn:I,maskInputFn:E,recordCanvas:w,inlineImages:B,sampling:S,slimDOMOptions:F,iframeManager:z,canvasManager:q},mirror:Et});gt=function(e){var t,n,i,r;void 0===e&&(e=!1),ft(mt({type:fe.Meta,data:{href:window.location.href,width:Ne(),height:be()}}),e),Ye.forEach((function(e){return e.lock()}));var o=Y(function(e,t){var n=t||{},i=n.blockClass,r=void 0===i?"rr-block":i,a=n.blockSelector,o=void 0===a?null:a,s=n.maskTextClass,c=void 0===s?"rr-mask":s,d=n.maskTextSelector,l=void 0===d?null:d,u=n.inlineStylesheet,h=void 0===u||u,A=n.inlineImages,p=void 0!==A&&A,f=n.recordCanvas,g=void 0!==f&&f,_=n.maskAllInputs,m=void 0!==_&&_,E=n.maskTextFn,I=n.maskInputFn,v=n.slimDOM,C=void 0!==v&&v,y=n.dataURLOptions,S=n.preserveWhiteSpace,R=n.onSerialize,T=n.onIframeLoad,w=n.iframeLoadTimeout,b=n.keepIframeSrcFn,N={};return[pe(e,{doc:e,map:N,blockClass:r,blockSelector:o,maskTextClass:c,maskTextSelector:l,skipChild:!1,inlineStylesheet:h,maskInputOptions:!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===m?{password:!0}:m,maskTextFn:E,maskInputFn:I,slimDOMOptions:!0===C||"all"===C?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===C,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===C?{}:C,dataURLOptions:y,inlineImages:p,recordCanvas:g,preserveWhiteSpace:S,onSerialize:R,onIframeLoad:T,iframeLoadTimeout:w,keepIframeSrcFn:void 0===b?function(){return!1}:b}),N]}(document,{blockClass:a,blockSelector:s,maskTextClass:u,maskTextSelector:A,inlineStylesheet:f,maskAllInputs:P,maskTextFn:I,slimDOM:F,recordCanvas:w,inlineImages:B,onSerialize:function(e){Le(e)&&z.addIframe(e),Ue(e)&&J.addShadowRoot(e.shadowRoot,document)},onIframeLoad:function(e,t){z.attachIframe(e,t),J.observeAttachShadow(e)},keepIframeSrcFn:x}),2),c=o[0],d=o[1];if(!c)return console.warn("Failed to snapshot the document");Et.map=d,ft(mt({type:fe.FullSnapshot,data:{node:c,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(n=null===(t=null===document||void 0===document?void 0:document.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===document||void 0===document?void 0:document.body.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(r=null===(i=null===document||void 0===document?void 0:document.body)||void 0===i?void 0:i.parentElement)||void 0===r?void 0:r.scrollTop)||(null===document||void 0===document?void 0:document.body.scrollTop)||0}}})),Ye.forEach((function(e){return e.unlock()}))};try{var X=[];X.push(Ce("DOMContentLoaded",(function(){ft(mt({type:fe.DomContentLoaded,data:{}}))})));var Z=function(e){var t;return it({mutationCb:H,mousemoveCb:function(e,t){return ft(mt({type:fe.IncrementalSnapshot,data:{source:t,positions:e}}))},mouseInteractionCb:function(e){return ft(mt({type:fe.IncrementalSnapshot,data:j({source:ge.MouseInteraction},e)}))},scrollCb:K,viewportResizeCb:function(e){return ft(mt({type:fe.IncrementalSnapshot,data:j({source:ge.ViewportResize},e)}))},inputCb:function(e){return ft(mt({type:fe.IncrementalSnapshot,data:j({source:ge.Input},e)}))},mediaInteractionCb:function(e){return ft(mt({type:fe.IncrementalSnapshot,data:j({source:ge.MediaInteraction},e)}))},styleSheetRuleCb:function(e){return ft(mt({type:fe.IncrementalSnapshot,data:j({source:ge.StyleSheetRule},e)}))},styleDeclarationCb:function(e){return ft(mt({type:fe.IncrementalSnapshot,data:j({source:ge.StyleDeclaration},e)}))},canvasMutationCb:W,fontCb:function(e){return ft(mt({type:fe.IncrementalSnapshot,data:j({source:ge.Font},e)}))},blockClass:a,ignoreClass:d,maskTextClass:u,maskTextSelector:A,maskInputOptions:P,inlineStylesheet:f,sampling:S,recordCanvas:w,inlineImages:B,userTriggeredOnInput:N,collectFonts:O,doc:e,maskInputFn:E,maskTextFn:I,blockSelector:s,slimDOMOptions:F,mirror:Et,iframeManager:z,shadowDomManager:J,canvasManager:q,plugins:(null===(t=null===L||void 0===L?void 0:L.filter((function(e){return e.observer})))||void 0===t?void 0:t.map((function(e){return{observer:e.observer,options:e.options,callback:function(t){return ft(mt({type:fe.Plugin,data:{plugin:e.name,payload:t}}))}}})))||[]},v)};z.addLoadListener((function(e){try{X.push(Z(e.contentDocument))}catch(t){console.warn("error in rrweb iframe observer",t)}}));var $=function(){gt(),X.push(Z(document))};return"interactive"===document.readyState||"complete"===document.readyState?$():X.push(Ce("load",(function(){ft(mt({type:fe.Load,data:{}})),$()}),window)),function(){X.forEach((function(e){return e()}))}}catch(ee){console.warn(ee)}}function vt(e){let t,n;try{n=function(e){if(t=e.event,t.target)return e.event.target;var t;return e.event}(e),t=Object(P.c)(n)}catch(i){t="<unknown>"}return 0===t.length?null:F({category:`ui.${e.name}`,message:t,data:{...n?{nodeId:It.mirror.getId(n)}:{}}})}It.addCustomEvent=function(e,t){if(!ft)throw new Error("please add custom event after start recording");ft(mt({type:fe.Custom,data:{tag:e,payload:t}}))},It.freezePage=function(){Ye.forEach((function(e){return e.freeze()}))},It.takeFullSnapshot=function(e){if(!gt)throw new Error("please take full snapshot after start recording");gt(e)},It.mirror=Et;let Ct=null;function yt(e,t){return"scope"===e?function(e){const t=e.getLastBreadcrumb();return Ct!==t&&t?(Ct=t,t.category&&(["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))?null:F(t)):null}(t):vt(t)}function St(e,t,n){if(!e.eventBuffer)return;if(e.isPaused())return;const i=t.timestamp>9999999999?t.timestamp:1e3*t.timestamp;if(i+_<(new Date).getTime())return;const r=e.getContext().earliestEvent;0===Object(I.a)([e,"access",e=>e.session,"optionalAccess",e=>e.segmentId])&&(!r||i<r)&&(e.getContext().earliestEvent=i),e.eventBuffer.addEvent(t,n)}function Rt(e,t){t.map((({type:t,start:n,end:i,name:r,data:a})=>St(e,{type:fe.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:r,startTimestamp:n,endTimestamp:i,data:a}}})))}function Tt(e,t){return("undefined"!==typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__||!Object(I.a)([e,"access",e=>e.getOptions,"call",e=>e(),"access",e=>e._experiments,"optionalAccess",e=>e.traceInternals]))&&!function(e){const t=Object(I.a)([a.b,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getDsn,"call",e=>e()]);return!!t&&e.includes(t.host)}(t)}function wt(e){return t=>{if(t.type===f)return delete t.breadcrumbs,t;if(function(e){return!(e.type||!Object(I.a)([e,"access",e=>e.exception,"optionalAccess",e=>e.values,"optionalAccess",e=>e.length]))&&e.exception.values.some((e=>!!Object(I.a)([e,"access",e=>e.stacktrace,"optionalAccess",e=>e.frames,"optionalAccess",e=>e.length])&&e.stacktrace.frames.some((e=>Object(I.a)([e,"access",e=>e.filename,"optionalAccess",e=>e.includes,"call",e=>e("/rrweb/src/")])))))}(t)&&!Object(I.a)([e,"access",e=>e.getOptions,"call",e=>e(),"access",e=>e._experiments,"optionalAccess",e=>e.captureExceptions]))return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.log("[Replay] Ignoring error from rrweb internals",t),null;if("transaction"===t.type&&"session"!==e.recordingMode||(t.tags={...t.tags,replayId:Object(I.a)([e,"access",e=>e.session,"optionalAccess",e=>e.id])}),"transaction"===t.type&&t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id)return e.getContext().traceIds.add(t.contexts.trace.trace_id),t;t.type||e.getContext().errorIds.add(t.event_id);const n=Object(I.a)([t,"access",e=>e.exception,"optionalAccess",e=>e.values,"optionalAccess",e=>e[0]]);return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Object(I.a)([e,"access",e=>e.getOptions,"call",e=>e(),"access",e=>e._experiments,"optionalAccess",e=>e.traceInternals])&&function(e){const{category:t,level:n,message:i,...r}=e;Object(d.a)({category:t||"console",level:n||"debug",message:`[debug]: ${i}`,...r})}({message:`Tagging event (${t.event_id}) - ${t.message} - ${Object(I.a)([n,"optionalAccess",e=>e.type])||"Unknown"}: ${Object(I.a)([n,"optionalAccess",e=>e.value])||"n/a"}`}),"error"===e.recordingMode&&t.exception&&t.message!==g&&setTimeout((async()=>{await e.flushImmediate(),e.stopRecording()&&(e.recordingMode="session",e.startRecording())})),t}}function bt(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,i=(new Date).getTime()/1e3;return{type:"navigation.push",start:i,end:i,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(Rt(e,[n]),!1))))}}function Nt(e){return t=>{if(!e.isEnabled())return;const n=function(e){if(e.xhr.__sentry_own_request__)return null;if(e.startTimestamp&&(e.xhr.__sentry_xhr__=e.xhr.__sentry_xhr__||{},e.xhr.__sentry_xhr__.startTimestamp=e.startTimestamp),!e.endTimestamp)return null;const{method:t,url:n,status_code:i}=e.xhr.__sentry_xhr__||{};return void 0===n?null:{type:"resource.xhr",name:n,start:(Object(I.a)([e,"access",e=>e.xhr,"access",e=>e.__sentry_xhr__,"optionalAccess",e=>e.startTimestamp])||0)/1e3||e.endTimestamp/1e3,end:e.endTimestamp/1e3,data:{method:t,statusCode:i}}}(t);null!==n&&(Tt(e,n.name)||e.addUpdate((()=>(Rt(e,[n]),!0))))}}const kt=["name","type","startTime","transferSize","duration"];function Ot(e){return function(t){return kt.every((n=>e[n]===t[n]))}}function Dt(e){const t=new PerformanceObserver((t=>{const n=function(e,t){const[n,i,r]=e.reduce(((e,t)=>("navigation"===t.entryType?e[0].push(t):"largest-contentful-paint"===t.entryType?e[1].push(t):e[2].push(t),e)),[[],[],[]]),a=[],o=[];let s=i.length?i[i.length-1]:void 0;return t.forEach((e=>{if("largest-contentful-paint"!==e.entryType)if("navigation"!==e.entryType)a.push(e);else{const t=e;e.duration>0&&!n.find(Ot(t))&&!o.find(Ot(t))&&o.push(t)}else(!s||s.startTime<e.startTime)&&(s=e)})),[...s?[s]:[],...n,...r,...a,...o].sort(((e,t)=>e.startTime-t.startTime))}(e.performanceEvents,t.getEntries());e.performanceEvents=n}));return["element","event","first-input","largest-contentful-paint","layout-shift","longtask","navigation","paint","resource"].forEach((e=>{try{t.observe({type:e,buffered:!0})}catch(n){}})),t}var Bt=n(619);const Lt={resource:function(e){const{entryType:t,initiatorType:n,name:i,responseEnd:r,startTime:a,encodedBodySize:o,transferSize:s}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:xt(a),end:xt(r),name:i,data:{size:s,encodedBodySize:o}}},paint:function(e){const{duration:t,entryType:n,name:i,startTime:r}=e,a=xt(r);return{type:n,name:i,start:a,end:a+t}},navigation:function(e){const{entryType:t,name:n,duration:i,domComplete:r,startTime:a,transferSize:o,type:s}=e;if(0===i)return null;return{type:`${t}.${s}`,start:xt(a),end:xt(r),name:n,data:{size:o,duration:i}}},"largest-contentful-paint":function(e){const{duration:t,entryType:n,startTime:i,size:r}=e,a=xt(i);return{type:n,name:n,start:a,end:a+t,data:{duration:t,size:r,nodeId:It.mirror.getId(e.element)}}}};function Ut(e){return void 0===Lt[e.entryType]?null:Lt[e.entryType](e)}function xt(e){return((Bt.a||A.performance.timeOrigin)+e)/1e3}class Mt{constructor(){this._events=[]}destroy(){this._events=[]}get length(){return this._events.length}addEvent(e,t){t?this._events=[e]:this._events.push(e)}finish(){return new Promise((e=>{const t=this._events;this._events=[],e(JSON.stringify(t))}))}}class Qt{__init(){this._eventBufferItemLength=0}__init2(){this._id=0}constructor(e){Qt.prototype.__init.call(this),Qt.prototype.__init2.call(this),this._worker=e}destroy(){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.log("[Replay] Destroying compression worker"),Object(I.a)([this,"access",e=>e._worker,"optionalAccess",e=>e.terminate,"call",e=>e()]),this._worker=null}get length(){return this._eventBufferItemLength}async addEvent(e,t){return t&&await this._postMessage({id:this._getAndIncrementId(),method:"init",args:[]}),this._sendEventToWorker(e)}finish(){return this._finishRequest(this._getAndIncrementId())}_postMessage({id:e,method:t,args:n}){return new Promise(((i,r)=>{const a=({data:n})=>{if(n.method===t&&n.id===e){if(Object(I.a)([this,"access",e=>e._worker,"optionalAccess",e=>e.removeEventListener,"call",e=>e("message",a)]),!n.success)return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.error("[Replay]",n.response),void r(new Error("Error in compression worker"));i(n.response)}};let o;try{o=JSON.stringify(n)}catch(s){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.error("[Replay] Error when trying to stringify args",s),o="[]"}Object(I.a)([this,"access",e=>e._worker,"optionalAccess",e=>e.addEventListener,"call",e=>e("message",a)]),Object(I.a)([this,"access",e=>e._worker,"optionalAccess",e=>e.postMessage,"call",n=>n({id:e,method:t,args:o})])}))}_sendEventToWorker(e){const t=this._postMessage({id:this._getAndIncrementId(),method:"addEvent",args:[e]});return this._eventBufferItemLength++,t}async _finishRequest(e){const t=this._postMessage({id:e,method:"finish",args:[]});return this._eventBufferItemLength=0,t}_getAndIncrementId(){return this._id++}}function Pt(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function Ft(e,t,n=+new Date){return Pt(e.started,E,n)||Pt(Object(I.a)([e,"optionalAccess",e=>e.lastActivity]),t,n)}function Gt(e){if("sessionStorage"in A)try{A.sessionStorage.setItem(p,JSON.stringify(e))}catch(t){}}var jt=n(295);function Vt(e){return void 0!==e&&Math.random()<e}function Yt(e){const t=(new Date).getTime();return{id:e.id||Object(jt.f)(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled}}function Ht({sessionSampleRate:e,errorSampleRate:t,stickySession:n=!1}){const i=function(e,t){return Vt(e)?"session":!!Vt(t)&&"error"}(e,t),r=Yt({sampled:i});return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.log(`[Replay] Creating new session: ${r.id}`),n&&Gt(r),r}function Kt({expiry:e,currentSession:t,stickySession:n,sessionSampleRate:i,errorSampleRate:r}){const a=t||n&&function(){if(!("sessionStorage"in A))return null;try{const e=A.sessionStorage.getItem(p);return e?Yt(JSON.parse(e)):null}catch(e){return null}}();if(a){if(!Ft(a,e))return{type:"saved",session:a};("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.log("[Replay] Session has expired")}return{type:"new",session:Ht({stickySession:n,sessionSampleRate:i,errorSampleRate:r})}}var Wt=n(2311);let zt;class qt{__init(){this.eventBuffer=null}__init2(){this.performanceEvents=[]}__init3(){this.recordingMode="session"}__init4(){this._performanceObserver=null}__init5(){this._retryCount=0}__init6(){this._retryInterval=5e3}__init7(){this._flushLock=null}__init8(){this._lastActivity=(new Date).getTime()}__init9(){this._isEnabled=!1}__init10(){this._isPaused=!1}__init11(){this._hasInitializedCoreListeners=!1}__init12(){this._stopRecording=null}__init13(){this._context={errorIds:new Set,traceIds:new Set,urls:[],earliestEvent:null,initialTimestamp:(new Date).getTime(),initialUrl:""}}constructor({options:e,recordingOptions:t}){qt.prototype.__init.call(this),qt.prototype.__init2.call(this),qt.prototype.__init3.call(this),qt.prototype.__init4.call(this),qt.prototype.__init5.call(this),qt.prototype.__init6.call(this),qt.prototype.__init7.call(this),qt.prototype.__init8.call(this),qt.prototype.__init9.call(this),qt.prototype.__init10.call(this),qt.prototype.__init11.call(this),qt.prototype.__init12.call(this),qt.prototype.__init13.call(this),qt.prototype.__init14.call(this),qt.prototype.__init15.call(this),qt.prototype.__init16.call(this),qt.prototype.__init17.call(this),qt.prototype.__init18.call(this),qt.prototype.__init19.call(this),this._recordingOptions=t,this._options=e,this._debouncedFlush=Q((()=>this.flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay})}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}getOptions(){return this._options}start(){this.setInitialState(),this.loadSession({expiry:_}),this.session?this.session.sampled&&("error"===this.session.sampled&&(this.recordingMode="error"),this.updateSessionActivity(),this.eventBuffer=function({useCompression:e}){if(e&&window.Worker){const e=new Blob(['/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */\nfunction t(t){let e=t.length;for(;--e>=0;)t[e]=0}const e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),a=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),n=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576);t(s);const r=new Array(60);t(r);const o=new Array(512);t(o);const l=new Array(256);t(l);const h=new Array(29);t(h);const d=new Array(30);function _(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}let f,c,u;function w(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}t(d);const m=t=>t<256?o[t]:o[256+(t>>>7)],b=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},g=(t,e,a)=>{t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},p=(t,e,a)=>{g(t,a[2*e],a[2*e+1])},k=(t,e)=>{let a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},v=(t,e,a)=>{const i=new Array(16);let n,s,r=0;for(n=1;n<=15;n++)r=r+a[n-1]<<1,i[n]=r;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=k(i[e]++,e))}},y=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},x=t=>{t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},z=(t,e,a,i)=>{const n=2*e,s=2*a;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[a]},A=(t,e,a)=>{const i=t.heap[a];let n=a<<1;for(;n<=t.heap_len&&(n<t.heap_len&&z(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!z(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i},E=(t,i,n)=>{let s,r,o,_,f=0;if(0!==t.sym_next)do{s=255&t.pending_buf[t.sym_buf+f++],s+=(255&t.pending_buf[t.sym_buf+f++])<<8,r=t.pending_buf[t.sym_buf+f++],0===s?p(t,r,i):(o=l[r],p(t,o+256+1,i),_=e[o],0!==_&&(r-=h[o],g(t,r,_)),s--,o=m(s),p(t,o,n),_=a[o],0!==_&&(s-=d[o],g(t,s,_)))}while(f<t.sym_next);p(t,256,i)},R=(t,e)=>{const a=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,s=e.stat_desc.elems;let r,o,l,h=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<s;r++)0!==a[2*r]?(t.heap[++t.heap_len]=h=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=h<2?++h:0,a[2*l]=1,t.depth[l]=0,t.opt_len--,n&&(t.static_len-=i[2*l+1]);for(e.max_code=h,r=t.heap_len>>1;r>=1;r--)A(t,a,r);l=s;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],A(t,a,1),o=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=o,a[2*l]=a[2*r]+a[2*o],t.depth[l]=(t.depth[r]>=t.depth[o]?t.depth[r]:t.depth[o])+1,a[2*r+1]=a[2*o+1]=l,t.heap[1]=l++,A(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const a=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let h,d,_,f,c,u,w=0;for(f=0;f<=15;f++)t.bl_count[f]=0;for(a[2*t.heap[t.heap_max]+1]=0,h=t.heap_max+1;h<573;h++)d=t.heap[h],f=a[2*a[2*d+1]+1]+1,f>l&&(f=l,w++),a[2*d+1]=f,d>i||(t.bl_count[f]++,c=0,d>=o&&(c=r[d-o]),u=a[2*d],t.opt_len+=u*(f+c),s&&(t.static_len+=u*(n[2*d+1]+c)));if(0!==w){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,w-=2}while(w>0);for(f=l;0!==f;f--)for(d=t.bl_count[f];0!==d;)_=t.heap[--h],_>i||(a[2*_+1]!==f&&(t.opt_len+=(f-a[2*_+1])*a[2*_],a[2*_+1]=f),d--)}})(t,e),v(a,h,t.bl_count)},Z=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=r,r=e[2*(i+1)+1],++o<l&&n===r||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4))},S=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),i=0;i<=a;i++)if(n=r,r=e[2*(i+1)+1],!(++o<l&&n===r)){if(o<h)do{p(t,n,t.bl_tree)}while(0!=--o);else 0!==n?(n!==s&&(p(t,n,t.bl_tree),o--),p(t,16,t.bl_tree),g(t,o-3,2)):o<=10?(p(t,17,t.bl_tree),g(t,o-3,3)):(p(t,18,t.bl_tree),g(t,o-11,7));o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4)}};let U=!1;const D=(t,e,a,i)=>{g(t,0+(i?1:0),3),x(t),b(t,a),b(t,~a),a&&t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a};var O=(t,e,a,i)=>{let o,l,h=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),R(t,t.l_desc),R(t,t.d_desc),h=(t=>{let e;for(Z(t,t.dyn_ltree,t.l_desc.max_code),Z(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*n[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),o=t.opt_len+3+7>>>3,l=t.static_len+3+7>>>3,l<=o&&(o=l)):o=l=a+5,a+4<=o&&-1!==e?D(t,e,a,i):4===t.strategy||l===o?(g(t,2+(i?1:0),3),E(t,s,r)):(g(t,4+(i?1:0),3),((t,e,a,i)=>{let s;for(g(t,e-257,5),g(t,a-1,5),g(t,i-4,4),s=0;s<i;s++)g(t,t.bl_tree[2*n[s]+1],3);S(t,t.dyn_ltree,e-1),S(t,t.dyn_dtree,a-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),E(t,t.dyn_ltree,t.dyn_dtree)),y(t),i&&x(t)},T={_tr_init:t=>{U||((()=>{let t,n,w,m,b;const g=new Array(16);for(w=0,m=0;m<28;m++)for(h[m]=w,t=0;t<1<<e[m];t++)l[w++]=m;for(l[w-1]=m,b=0,m=0;m<16;m++)for(d[m]=b,t=0;t<1<<a[m];t++)o[b++]=m;for(b>>=7;m<30;m++)for(d[m]=b<<7,t=0;t<1<<a[m]-7;t++)o[256+b++]=m;for(n=0;n<=15;n++)g[n]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,g[8]++;for(;t<=255;)s[2*t+1]=9,t++,g[9]++;for(;t<=279;)s[2*t+1]=7,t++,g[7]++;for(;t<=287;)s[2*t+1]=8,t++,g[8]++;for(v(s,287,g),t=0;t<30;t++)r[2*t+1]=5,r[2*t]=k(t,5);f=new _(s,e,257,286,15),c=new _(r,a,0,30,15),u=new _(new Array(0),i,0,19,7)})(),U=!0),t.l_desc=new w(t.dyn_ltree,f),t.d_desc=new w(t.dyn_dtree,c),t.bl_desc=new w(t.bl_tree,u),t.bi_buf=0,t.bi_valid=0,y(t)},_tr_stored_block:D,_tr_flush_block:O,_tr_tally:(t,e,a)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(l[a]+256+1)]++,t.dyn_dtree[2*m(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{g(t,2,3),p(t,256,s),(t=>{16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var N=(t,e,a,i)=>{let n=65535&t|0,s=t>>>16&65535|0,r=0;for(;0!==a;){r=a>2e3?2e3:a,a-=r;do{n=n+e[i++]|0,s=s+n|0}while(--r);n%=65521,s%=65521}return n|s<<16|0};const F=new Uint32Array((()=>{let t,e=[];for(var a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e})());var L=(t,e,a,i)=>{const n=F,s=i+a;t^=-1;for(let a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t},I={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},B={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:C,_tr_stored_block:H,_tr_flush_block:M,_tr_tally:j,_tr_align:K}=T,{Z_NO_FLUSH:P,Z_PARTIAL_FLUSH:Y,Z_FULL_FLUSH:G,Z_FINISH:X,Z_BLOCK:J,Z_OK:W,Z_STREAM_END:q,Z_STREAM_ERROR:Q,Z_DATA_ERROR:V,Z_BUF_ERROR:$,Z_DEFAULT_COMPRESSION:tt,Z_FILTERED:et,Z_HUFFMAN_ONLY:at,Z_RLE:it,Z_FIXED:nt,Z_DEFAULT_STRATEGY:st,Z_UNKNOWN:rt,Z_DEFLATED:ot}=B,lt=(t,e)=>(t.msg=I[e],e),ht=t=>2*t-(t>4?9:0),dt=t=>{let e=t.length;for(;--e>=0;)t[e]=0},_t=t=>{let e,a,i,n=t.w_size;e=t.hash_size,i=e;do{a=t.head[--i],t.head[i]=a>=n?a-n:0}while(--e);e=n,i=e;do{a=t.prev[--i],t.prev[i]=a>=n?a-n:0}while(--e)};let ft=(t,e,a)=>(e<<t.hash_shift^a)&t.hash_mask;const ct=t=>{const e=t.state;let a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},ut=(t,e)=>{M(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ct(t.strm)},wt=(t,e)=>{t.pending_buf[t.pending++]=e},mt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},bt=(t,e,a,i)=>{let n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,e.set(t.input.subarray(t.next_in,t.next_in+n),a),1===t.state.wrap?t.adler=N(t.adler,e,n,a):2===t.state.wrap&&(t.adler=L(t.adler,e,n,a)),t.next_in+=n,t.total_in+=n,n)},gt=(t,e)=>{let a,i,n=t.max_chain_length,s=t.strstart,r=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,h=t.window,d=t.w_mask,_=t.prev,f=t.strstart+258;let c=h[s+r-1],u=h[s+r];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(a=e,h[a+r]===u&&h[a+r-1]===c&&h[a]===h[s]&&h[++a]===h[s+1]){s+=2,a++;do{}while(h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&s<f);if(i=258-(f-s),s=f-258,i>r){if(t.match_start=e,r=i,i>=o)break;c=h[s+r-1],u=h[s+r]}}}while((e=_[e&d])>l&&0!=--n);return r<=t.lookahead?r:t.lookahead},pt=t=>{const e=t.w_size;let a,i,n;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)&&(t.window.set(t.window.subarray(e,e+e-i),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),_t(t),i+=e),0===t.strm.avail_in)break;if(a=bt(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=a,t.lookahead+t.insert>=3)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=ft(t,t.ins_h,t.window[n+1]);t.insert&&(t.ins_h=ft(t,t.ins_h,t.window[n+3-1]),t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},kt=(t,e)=>{let a,i,n,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r=0,o=t.strm.avail_in;do{if(a=65535,n=t.bi_valid+42>>3,t.strm.avail_out<n)break;if(n=t.strm.avail_out-n,i=t.strstart-t.block_start,a>i+t.strm.avail_in&&(a=i+t.strm.avail_in),a>n&&(a=n),a<s&&(0===a&&e!==X||e===P||a!==i+t.strm.avail_in))break;r=e===X&&a===i+t.strm.avail_in?1:0,H(t,0,0,r),t.pending_buf[t.pending-4]=a,t.pending_buf[t.pending-3]=a>>8,t.pending_buf[t.pending-2]=~a,t.pending_buf[t.pending-1]=~a>>8,ct(t.strm),i&&(i>a&&(i=a),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,a-=i),a&&(bt(t.strm,t.strm.output,t.strm.next_out,a),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a)}while(0===r);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),r?4:e!==P&&e!==X&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(n=t.window_size-t.strstart,t.strm.avail_in>n&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,n+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),n>t.strm.avail_in&&(n=t.strm.avail_in),n&&(bt(t.strm,t.window,t.strstart,n),t.strstart+=n,t.insert+=n>t.w_size-t.insert?t.w_size-t.insert:n),t.high_water<t.strstart&&(t.high_water=t.strstart),n=t.bi_valid+42>>3,n=t.pending_buf_size-n>65535?65535:t.pending_buf_size-n,s=n>t.w_size?t.w_size:n,i=t.strstart-t.block_start,(i>=s||(i||e===X)&&e!==P&&0===t.strm.avail_in&&i<=n)&&(a=i>n?n:i,r=e===X&&0===t.strm.avail_in&&a===i?1:0,H(t,t.block_start,a,r),t.block_start+=a,ct(t.strm)),r?3:1)},vt=(t,e)=>{let a,i;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a)),t.match_length>=3)if(i=j(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=ft(t,t.ins_h,t.window[t.strstart+1]);else i=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2},yt=(t,e)=>{let a,i,n;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a),t.match_length<=5&&(t.strategy===et||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-3,i=j(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(ut(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=j(t,0,t.window[t.strstart-1]),i&&ut(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=j(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2};function xt(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}const zt=[new xt(0,0,0,0,kt),new xt(4,4,8,4,vt),new xt(4,5,16,8,vt),new xt(4,6,32,32,vt),new xt(4,4,16,16,yt),new xt(8,16,32,32,yt),new xt(8,16,128,128,yt),new xt(8,32,128,256,yt),new xt(32,128,258,1024,yt),new xt(32,258,258,4096,yt)];function At(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ot,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),dt(this.dyn_ltree),dt(this.dyn_dtree),dt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),dt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),dt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Et=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||42!==e.status&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&113!==e.status&&666!==e.status?1:0},Rt=t=>{if(Et(t))return lt(t,Q);t.total_in=t.total_out=0,t.data_type=rt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=-2,C(e),W},Zt=t=>{const e=Rt(t);var a;return e===W&&((a=t.state).window_size=2*a.w_size,dt(a.head),a.max_lazy_match=zt[a.level].max_lazy,a.good_match=zt[a.level].good_length,a.nice_match=zt[a.level].nice_length,a.max_chain_length=zt[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0),e},St=(t,e,a,i,n,s)=>{if(!t)return Q;let r=1;if(e===tt&&(e=6),i<0?(r=0,i=-i):i>15&&(r=2,i-=16),n<1||n>9||a!==ot||i<8||i>15||e<0||e>9||s<0||s>nt||8===i&&1!==r)return lt(t,Q);8===i&&(i=9);const o=new At;return t.state=o,o.strm=t,o.status=42,o.wrap=r,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=s,o.method=a,Zt(t)};var Ut={deflateInit:(t,e)=>St(t,e,ot,15,8,st),deflateInit2:St,deflateReset:Zt,deflateResetKeep:Rt,deflateSetHeader:(t,e)=>Et(t)||2!==t.state.wrap?Q:(t.state.gzhead=e,W),deflate:(t,e)=>{if(Et(t)||e>J||e<0)return t?lt(t,Q):Q;const a=t.state;if(!t.output||0!==t.avail_in&&!t.input||666===a.status&&e!==X)return lt(t,0===t.avail_out?$:Q);const i=a.last_flush;if(a.last_flush=e,0!==a.pending){if(ct(t),0===t.avail_out)return a.last_flush=-1,W}else if(0===t.avail_in&&ht(e)<=ht(i)&&e!==X)return lt(t,$);if(666===a.status&&0!==t.avail_in)return lt(t,$);if(42===a.status&&0===a.wrap&&(a.status=113),42===a.status){let e=ot+(a.w_bits-8<<4)<<8,i=-1;if(i=a.strategy>=at||a.level<2?0:a.level<6?1:6===a.level?2:3,e|=i<<6,0!==a.strstart&&(e|=32),e+=31-e%31,mt(a,e),0!==a.strstart&&(mt(a,t.adler>>>16),mt(a,65535&t.adler)),t.adler=1,a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,W}if(57===a.status)if(t.adler=0,wt(a,31),wt(a,139),wt(a,8),a.gzhead)wt(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),wt(a,255&a.gzhead.time),wt(a,a.gzhead.time>>8&255),wt(a,a.gzhead.time>>16&255),wt(a,a.gzhead.time>>24&255),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(wt(a,255&a.gzhead.extra.length),wt(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=L(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69;else if(wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,3),a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,W;if(69===a.status){if(a.gzhead.extra){let e=a.pending,i=(65535&a.gzhead.extra.length)-a.gzindex;for(;a.pending+i>a.pending_buf_size;){let n=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+n),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>e&&(t.adler=L(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex+=n,ct(t),0!==a.pending)return a.last_flush=-1,W;e=0,i-=n}let n=new Uint8Array(a.gzhead.extra);a.pending_buf.set(n.subarray(a.gzindex,a.gzindex+i),a.pending),a.pending+=i,a.gzhead.hcrc&&a.pending>e&&(t.adler=L(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex=0}a.status=73}if(73===a.status){if(a.gzhead.name){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=L(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,W;i=0}e=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=L(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex=0}a.status=91}if(91===a.status){if(a.gzhead.comment){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=L(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,W;i=0}e=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=L(t.adler,a.pending_buf,a.pending-i,i))}a.status=103}if(103===a.status){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(ct(t),0!==a.pending))return a.last_flush=-1,W;wt(a,255&t.adler),wt(a,t.adler>>8&255),t.adler=0}if(a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,W}if(0!==t.avail_in||0!==a.lookahead||e!==P&&666!==a.status){let i=0===a.level?kt(a,e):a.strategy===at?((t,e)=>{let a;for(;;){if(0===t.lookahead&&(pt(t),0===t.lookahead)){if(e===P)return 1;break}if(t.match_length=0,a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):a.strategy===it?((t,e)=>{let a,i,n,s;const r=t.window;for(;;){if(t.lookahead<=258){if(pt(t),t.lookahead<=258&&e===P)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=t.strstart-1,i=r[n],i===r[++n]&&i===r[++n]&&i===r[++n])){s=t.strstart+258;do{}while(i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&n<s);t.match_length=258-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=j(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):zt[a.level].func(a,e);if(3!==i&&4!==i||(a.status=666),1===i||3===i)return 0===t.avail_out&&(a.last_flush=-1),W;if(2===i&&(e===Y?K(a):e!==J&&(H(a,0,0,!1),e===G&&(dt(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),ct(t),0===t.avail_out))return a.last_flush=-1,W}return e!==X?W:a.wrap<=0?q:(2===a.wrap?(wt(a,255&t.adler),wt(a,t.adler>>8&255),wt(a,t.adler>>16&255),wt(a,t.adler>>24&255),wt(a,255&t.total_in),wt(a,t.total_in>>8&255),wt(a,t.total_in>>16&255),wt(a,t.total_in>>24&255)):(mt(a,t.adler>>>16),mt(a,65535&t.adler)),ct(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?W:q)},deflateEnd:t=>{if(Et(t))return Q;const e=t.state.status;return t.state=null,113===e?lt(t,V):W},deflateSetDictionary:(t,e)=>{let a=e.length;if(Et(t))return Q;const i=t.state,n=i.wrap;if(2===n||1===n&&42!==i.status||i.lookahead)return Q;if(1===n&&(t.adler=N(t.adler,e,a,0)),i.wrap=0,a>=i.w_size){0===n&&(dt(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(a-i.w_size,a),0),e=t,a=i.w_size}const s=t.avail_in,r=t.next_in,o=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,pt(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=ft(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,pt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=r,t.input=o,t.avail_in=s,i.wrap=n,W},deflateInfo:"pako deflate (from Nodeca project)"};const Dt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Ot=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(const e in a)Dt(a,e)&&(t[e]=a[e])}}return t},Tt=t=>{let e=0;for(let a=0,i=t.length;a<i;a++)e+=t[a].length;const a=new Uint8Array(e);for(let e=0,i=0,n=t.length;e<n;e++){let n=t[e];a.set(n,i),i+=n.length}return a};let Nt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Nt=!1}const Ft=new Uint8Array(256);for(let t=0;t<256;t++)Ft[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Ft[254]=Ft[254]=1;var Lt=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,i,n,s,r=t.length,o=0;for(n=0;n<r;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(o),s=0,n=0;s<o;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),a<128?e[s++]=a:a<2048?(e[s++]=192|a>>>6,e[s++]=128|63&a):a<65536?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e},It=(t,e)=>{const a=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let i,n;const s=new Array(2*a);for(n=0,i=0;i<a;){let e=t[i++];if(e<128){s[n++]=e;continue}let r=Ft[e];if(r>4)s[n++]=65533,i+=r-1;else{for(e&=2===r?31:3===r?15:7;r>1&&i<a;)e=e<<6|63&t[i++],r--;r>1?s[n++]=65533:e<65536?s[n++]=e:(e-=65536,s[n++]=55296|e>>10&1023,s[n++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Nt)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let a="";for(let i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a})(s,n)},Bt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let a=e-1;for(;a>=0&&128==(192&t[a]);)a--;return a<0||0===a?e:a+Ft[t[a]]>e?a:e};var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ht=Object.prototype.toString,{Z_NO_FLUSH:Mt,Z_SYNC_FLUSH:jt,Z_FULL_FLUSH:Kt,Z_FINISH:Pt,Z_OK:Yt,Z_STREAM_END:Gt,Z_DEFAULT_COMPRESSION:Xt,Z_DEFAULT_STRATEGY:Jt,Z_DEFLATED:Wt}=B;function qt(t){this.options=Ot({level:Xt,method:Wt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Jt},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=Ut.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==Yt)throw new Error(I[a]);if(e.header&&Ut.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Lt(e.dictionary):"[object ArrayBuffer]"===Ht.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,a=Ut.deflateSetDictionary(this.strm,t),a!==Yt)throw new Error(I[a]);this._dict_set=!0}}function Qt(t,e){const a=new qt(e);if(a.push(t,!0),a.err)throw a.msg||I[a.err];return a.result}qt.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize;let n,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Pt:Mt,"string"==typeof t?a.input=Lt(t):"[object ArrayBuffer]"===Ht.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(s===jt||s===Kt)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if(n=Ut.deflate(a,s),n===Gt)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=Ut.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Yt;if(0!==a.avail_out){if(s>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},qt.prototype.onData=function(t){this.chunks.push(t)},qt.prototype.onEnd=function(t){t===Yt&&(this.result=Tt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Vt={Deflate:qt,deflate:Qt,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Qt(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Qt(t,e)},constants:B};var $t=function(t,e){let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z,A;const E=t.state;a=t.next_in,z=t.input,i=a+(t.avail_in-5),n=t.next_out,A=t.output,s=n-(e-t.avail_out),r=n+(t.avail_out-257),o=E.dmax,l=E.wsize,h=E.whave,d=E.wnext,_=E.window,f=E.hold,c=E.bits,u=E.lencode,w=E.distcode,m=(1<<E.lenbits)-1,b=(1<<E.distbits)-1;t:do{c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=u[f&m];e:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,0===p)A[n++]=65535&g;else{if(!(16&p)){if(0==(64&p)){g=u[(65535&g)+(f&(1<<p)-1)];continue e}if(32&p){E.mode=16191;break t}t.msg="invalid literal/length code",E.mode=16209;break t}k=65535&g,p&=15,p&&(c<p&&(f+=z[a++]<<c,c+=8),k+=f&(1<<p)-1,f>>>=p,c-=p),c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=w[f&b];a:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,!(16&p)){if(0==(64&p)){g=w[(65535&g)+(f&(1<<p)-1)];continue a}t.msg="invalid distance code",E.mode=16209;break t}if(v=65535&g,p&=15,c<p&&(f+=z[a++]<<c,c+=8,c<p&&(f+=z[a++]<<c,c+=8)),v+=f&(1<<p)-1,v>o){t.msg="invalid distance too far back",E.mode=16209;break t}if(f>>>=p,c-=p,p=n-s,v>p){if(p=v-p,p>h&&E.sane){t.msg="invalid distance too far back",E.mode=16209;break t}if(y=0,x=_,0===d){if(y+=l-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}else if(d<p){if(y+=l+d-p,p-=d,p<k){k-=p;do{A[n++]=_[y++]}while(--p);if(y=0,d<k){p=d,k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}}else if(y+=d-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}for(;k>2;)A[n++]=x[y++],A[n++]=x[y++],A[n++]=x[y++],k-=3;k&&(A[n++]=x[y++],k>1&&(A[n++]=x[y++]))}else{y=n-v;do{A[n++]=A[y++],A[n++]=A[y++],A[n++]=A[y++],k-=3}while(k>2);k&&(A[n++]=A[y++],k>1&&(A[n++]=A[y++]))}break}}break}}while(a<i&&n<r);k=c>>3,a-=k,c-=k<<3,f&=(1<<c)-1,t.next_in=a,t.next_out=n,t.avail_in=a<i?i-a+5:5-(a-i),t.avail_out=n<r?r-n+257:257-(n-r),E.hold=f,E.bits=c};const te=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ee=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ae=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ie=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ne=(t,e,a,i,n,s,r,o)=>{const l=o.bits;let h,d,_,f,c,u,w=0,m=0,b=0,g=0,p=0,k=0,v=0,y=0,x=0,z=0,A=null;const E=new Uint16Array(16),R=new Uint16Array(16);let Z,S,U,D=null;for(w=0;w<=15;w++)E[w]=0;for(m=0;m<i;m++)E[e[a+m]]++;for(p=l,g=15;g>=1&&0===E[g];g--);if(p>g&&(p=g),0===g)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(b=1;b<g&&0===E[b];b++);for(p<b&&(p=b),y=1,w=1;w<=15;w++)if(y<<=1,y-=E[w],y<0)return-1;if(y>0&&(0===t||1!==g))return-1;for(R[1]=0,w=1;w<15;w++)R[w+1]=R[w]+E[w];for(m=0;m<i;m++)0!==e[a+m]&&(r[R[e[a+m]]++]=m);if(0===t?(A=D=r,u=20):1===t?(A=te,D=ee,u=257):(A=ae,D=ie,u=0),z=0,m=0,w=b,c=s,k=p,v=0,_=-1,x=1<<p,f=x-1,1===t&&x>852||2===t&&x>592)return 1;for(;;){Z=w-v,r[m]+1<u?(S=0,U=r[m]):r[m]>=u?(S=D[r[m]-u],U=A[r[m]-u]):(S=96,U=0),h=1<<w-v,d=1<<k,b=d;do{d-=h,n[c+(z>>v)+d]=Z<<24|S<<16|U|0}while(0!==d);for(h=1<<w-1;z&h;)h>>=1;if(0!==h?(z&=h-1,z+=h):z=0,m++,0==--E[w]){if(w===g)break;w=e[a+r[m]]}if(w>p&&(z&f)!==_){for(0===v&&(v=p),c+=b,k=w-v,y=1<<k;k+v<g&&(y-=E[k+v],!(y<=0));)k++,y<<=1;if(x+=1<<k,1===t&&x>852||2===t&&x>592)return 1;_=z&f,n[_]=p<<24|k<<16|c-s|0}}return 0!==z&&(n[c+z]=w-v<<24|64<<16|0),o.bits=p,0};const{Z_FINISH:se,Z_BLOCK:re,Z_TREES:oe,Z_OK:le,Z_STREAM_END:he,Z_NEED_DICT:de,Z_STREAM_ERROR:_e,Z_DATA_ERROR:fe,Z_MEM_ERROR:ce,Z_BUF_ERROR:ue,Z_DEFLATED:we}=B,me=16209,be=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function ge(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const pe=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<16180||e.mode>16211?1:0},ke=t=>{if(pe(t))return _e;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=16180,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,le},ve=t=>{if(pe(t))return _e;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ke(t)},ye=(t,e)=>{let a;if(pe(t))return _e;const i=t.state;return e<0?(a=0,e=-e):(a=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_e:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,ve(t))},xe=(t,e)=>{if(!t)return _e;const a=new ge;t.state=a,a.strm=t,a.window=null,a.mode=16180;const i=ye(t,e);return i!==le&&(t.state=null),i};let ze,Ae,Ee=!0;const Re=t=>{if(Ee){ze=new Int32Array(512),Ae=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ne(1,t.lens,0,288,ze,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ne(2,t.lens,0,32,Ae,0,t.work,{bits:5}),Ee=!1}t.lencode=ze,t.lenbits=9,t.distcode=Ae,t.distbits=5},Ze=(t,e,a,i)=>{let n;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(e.subarray(a-s.wsize,a),0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),s.window.set(e.subarray(a-i,a-i+n),s.wnext),(i-=n)?(s.window.set(e.subarray(a-i,a),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0};var Se={inflateReset:ve,inflateReset2:ye,inflateResetKeep:ke,inflateInit:t=>xe(t,15),inflateInit2:xe,inflate:(t,e)=>{let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z=0;const A=new Uint8Array(4);let E,R;const Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(pe(t)||!t.output||!t.input&&0!==t.avail_in)return _e;a=t.state,16191===a.mode&&(a.mode=16192),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,_=o,f=l,x=le;t:for(;;)switch(a.mode){case 16180:if(0===a.wrap){a.mode=16192;break}for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(2&a.wrap&&35615===h){0===a.wbits&&(a.wbits=15),a.check=0,A[0]=255&h,A[1]=h>>>8&255,a.check=L(a.check,A,2,0),h=0,d=0,a.mode=16181;break}if(a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",a.mode=me;break}if((15&h)!==we){t.msg="unknown compression method",a.mode=me;break}if(h>>>=4,d-=4,y=8+(15&h),0===a.wbits&&(a.wbits=y),y>15||y>a.wbits){t.msg="invalid window size",a.mode=me;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=512&h?16189:16191,h=0,d=0;break;case 16181:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.flags=h,(255&a.flags)!==we){t.msg="unknown compression method",a.mode=me;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=me;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=L(a.check,A,2,0)),h=0,d=0,a.mode=16182;case 16182:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,A[2]=h>>>16&255,A[3]=h>>>24&255,a.check=L(a.check,A,4,0)),h=0,d=0,a.mode=16183;case 16183:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=L(a.check,A,2,0)),h=0,d=0,a.mode=16184;case 16184:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=L(a.check,A,2,0)),h=0,d=0}else a.head&&(a.head.extra=null);a.mode=16185;case 16185:if(1024&a.flags&&(c=a.length,c>o&&(c=o),c&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(i.subarray(s,s+c),y)),512&a.flags&&4&a.wrap&&(a.check=L(a.check,i,c,s)),o-=c,s+=c,a.length-=c),a.length))break t;a.length=0,a.mode=16186;case 16186:if(2048&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=L(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=16187;case 16187:if(4096&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=L(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.comment=null);a.mode=16188;case 16188:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(65535&a.check)){t.msg="header crc mismatch",a.mode=me;break}h=0,d=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=16191;break;case 16189:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}t.adler=a.check=be(h),h=0,d=0,a.mode=16190;case 16190:if(0===a.havedict)return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,de;t.adler=a.check=1,a.mode=16191;case 16191:if(e===re||e===oe)break t;case 16192:if(a.last){h>>>=7&d,d-=7&d,a.mode=16206;break}for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}switch(a.last=1&h,h>>>=1,d-=1,3&h){case 0:a.mode=16193;break;case 1:if(Re(a),a.mode=16199,e===oe){h>>>=2,d-=2;break t}break;case 2:a.mode=16196;break;case 3:t.msg="invalid block type",a.mode=me}h>>>=2,d-=2;break;case 16193:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",a.mode=me;break}if(a.length=65535&h,h=0,d=0,a.mode=16194,e===oe)break t;case 16194:a.mode=16195;case 16195:if(c=a.length,c){if(c>o&&(c=o),c>l&&(c=l),0===c)break t;n.set(i.subarray(s,s+c),r),o-=c,s+=c,l-=c,r+=c,a.length-=c;break}a.mode=16191;break;case 16196:for(;d<14;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=me;break}a.have=0,a.mode=16197;case 16197:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.lens[Z[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[Z[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,E={bits:a.lenbits},x=ne(0,a.lens,0,19,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid code lengths set",a.mode=me;break}a.have=0,a.mode=16198;case 16198:for(;a.have<a.nlen+a.ndist;){for(;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(g<16)h>>>=m,d-=m,a.lens[a.have++]=g;else{if(16===g){for(R=m+2;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(h>>>=m,d-=m,0===a.have){t.msg="invalid bit length repeat",a.mode=me;break}y=a.lens[a.have-1],c=3+(3&h),h>>>=2,d-=2}else if(17===g){for(R=m+3;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=3+(7&h),h>>>=3,d-=3}else{for(R=m+7;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=11+(127&h),h>>>=7,d-=7}if(a.have+c>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=me;break}for(;c--;)a.lens[a.have++]=y}}if(a.mode===me)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=me;break}if(a.lenbits=9,E={bits:a.lenbits},x=ne(1,a.lens,0,a.nlen,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid literal/lengths set",a.mode=me;break}if(a.distbits=6,a.distcode=a.distdyn,E={bits:a.distbits},x=ne(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,E),a.distbits=E.bits,x){t.msg="invalid distances set",a.mode=me;break}if(a.mode=16199,e===oe)break t;case 16199:a.mode=16200;case 16200:if(o>=6&&l>=258){t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,$t(t,f),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,16191===a.mode&&(a.back=-1);break}for(a.back=0;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(b&&0==(240&b)){for(p=m,k=b,v=g;z=a.lencode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,a.length=g,0===b){a.mode=16205;break}if(32&b){a.back=-1,a.mode=16191;break}if(64&b){t.msg="invalid literal/length code",a.mode=me;break}a.extra=15&b,a.mode=16201;case 16201:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=16202;case 16202:for(;z=a.distcode[h&(1<<a.distbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(0==(240&b)){for(p=m,k=b,v=g;z=a.distcode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,64&b){t.msg="invalid distance code",a.mode=me;break}a.offset=g,a.extra=15&b,a.mode=16203;case 16203:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=me;break}a.mode=16204;case 16204:if(0===l)break t;if(c=f-l,a.offset>c){if(c=a.offset-c,c>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=me;break}c>a.wnext?(c-=a.wnext,u=a.wsize-c):u=a.wnext-c,c>a.length&&(c=a.length),w=a.window}else w=n,u=r-a.offset,c=a.length;c>l&&(c=l),l-=c,a.length-=c;do{n[r++]=w[u++]}while(--c);0===a.length&&(a.mode=16200);break;case 16205:if(0===l)break t;n[r++]=a.length,l--,a.mode=16200;break;case 16206:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=i[s++]<<d,d+=8}if(f-=l,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?L(a.check,n,f,r-f):N(a.check,n,f,r-f)),f=l,4&a.wrap&&(a.flags?h:be(h))!==a.check){t.msg="incorrect data check",a.mode=me;break}h=0,d=0}a.mode=16207;case 16207:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=me;break}h=0,d=0}a.mode=16208;case 16208:x=he;break t;case me:x=fe;break t;case 16210:return ce;default:return _e}return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||f!==t.avail_out&&a.mode<me&&(a.mode<16206||e!==se))&&Ze(t,t.output,t.next_out,f-t.avail_out),_-=t.avail_in,f-=t.avail_out,t.total_in+=_,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?L(a.check,n,f,t.next_out-f):N(a.check,n,f,t.next_out-f)),t.data_type=a.bits+(a.last?64:0)+(16191===a.mode?128:0)+(16199===a.mode||16194===a.mode?256:0),(0===_&&0===f||e===se)&&x===le&&(x=ue),x},inflateEnd:t=>{if(pe(t))return _e;let e=t.state;return e.window&&(e.window=null),t.state=null,le},inflateGetHeader:(t,e)=>{if(pe(t))return _e;const a=t.state;return 0==(2&a.wrap)?_e:(a.head=e,e.done=!1,le)},inflateSetDictionary:(t,e)=>{const a=e.length;let i,n,s;return pe(t)?_e:(i=t.state,0!==i.wrap&&16190!==i.mode?_e:16190===i.mode&&(n=1,n=N(n,e,a,0),n!==i.check)?fe:(s=Ze(t,e,a,a),s?(i.mode=16210,ce):(i.havedict=1,le)))},inflateInfo:"pako inflate (from Nodeca project)"};var Ue=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const De=Object.prototype.toString,{Z_NO_FLUSH:Oe,Z_FINISH:Te,Z_OK:Ne,Z_STREAM_END:Fe,Z_NEED_DICT:Le,Z_STREAM_ERROR:Ie,Z_DATA_ERROR:Be,Z_MEM_ERROR:Ce}=B;function He(t){this.options=Ot({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=Se.inflateInit2(this.strm,e.windowBits);if(a!==Ne)throw new Error(I[a]);if(this.header=new Ue,Se.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Lt(e.dictionary):"[object ArrayBuffer]"===De.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=Se.inflateSetDictionary(this.strm,e.dictionary),a!==Ne)))throw new Error(I[a])}He.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize,n=this.options.dictionary;let s,r,o;if(this.ended)return!1;for(r=e===~~e?e:!0===e?Te:Oe,"[object ArrayBuffer]"===De.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),s=Se.inflate(a,r),s===Le&&n&&(s=Se.inflateSetDictionary(a,n),s===Ne?s=Se.inflate(a,r):s===Be&&(s=Le));a.avail_in>0&&s===Fe&&a.state.wrap>0&&0!==t[a.next_in];)Se.inflateReset(a),s=Se.inflate(a,r);switch(s){case Ie:case Be:case Le:case Ce:return this.onEnd(s),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(0===a.avail_out||s===Fe))if("string"===this.options.to){let t=Bt(a.output,a.next_out),e=a.next_out-t,n=It(a.output,t);a.next_out=e,a.avail_out=i-e,e&&a.output.set(a.output.subarray(t,t+e),0),this.onData(n)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(s!==Ne||0!==o){if(s===Fe)return s=Se.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},He.prototype.onData=function(t){this.chunks.push(t)},He.prototype.onEnd=function(t){t===Ne&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Tt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const{Deflate:Me,deflate:je,deflateRaw:Ke,gzip:Pe}=Vt;var Ye=Me,Ge=B;const Xe=new class{constructor(){this.added=0,this.init()}init(){this.added=0,this.deflate=new Ye,this.deflate.push("[",Ge.Z_NO_FLUSH)}addEvent(t){if(!t)return;const e=this.added>0?",":"";this.deflate.push(e+JSON.stringify(t),Ge.Z_NO_FLUSH),this.added++}finish(){if(this.deflate.push("]",Ge.Z_FINISH),this.deflate.err)throw this.deflate.err;const t=this.deflate.result;return this.init(),t}},Je={init:()=>(Xe.init(),""),addEvent:t=>(Xe.addEvent(t),""),finish:()=>Xe.finish()};addEventListener("message",(function(t){const e=t.data.method,a=t.data.id,[i]=t.data.args?JSON.parse(t.data.args):[];if(e in Je&&"function"==typeof Je[e])try{const t=Je[e](i);postMessage({id:a,method:e,success:!0,response:t})}catch(t){postMessage({id:a,method:e,success:!1,response:t}),console.error(t)}}));']),n=URL.createObjectURL(e);try{("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.log("[Replay] Using compression worker");const e=new Worker(n);if(e)return new Qt(e);Object(d.c)(new Error("Unable to create compression worker"))}catch(t){}("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.log("[Replay] Falling back to simple event buffer")}return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.log("[Replay] Using simple buffer"),new Mt}({useCompression:Boolean(this._options.useCompression)}),this.addListeners(),this._isEnabled=!0,this.startRecording()):this.handleException(new Error("No session found"))}startRecording(){try{this._stopRecording=It({...this._recordingOptions,..."error"===this.recordingMode&&{checkoutEveryNth:6e4},emit:this.handleRecordingEmit})}catch(e){this.handleException(e)}}stopRecording(){return!!this._stopRecording&&(this._stopRecording(),!0)}stop(){try{("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.log("[Replay] Stopping Replays"),this._isEnabled=!1,this.removeListeners(),Object(I.a)([this,"access",e=>e._stopRecording,"optionalCall",e=>e()]),Object(I.a)([this,"access",e=>e.eventBuffer,"optionalAccess",e=>e.destroy,"call",e=>e()]),this.eventBuffer=null}catch(e){this.handleException(e)}}pause(){this._isPaused=!0;try{this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0)}catch(e){this.handleException(e)}}resume(){this._isPaused=!1,this.startRecording()}handleException(e){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.error("[Replay]",e),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this._options._experiments&&this._options._experiments.captureExceptions&&Object(d.c)(e)}clearSession(){try{!function(){if("sessionStorage"in A)try{A.sessionStorage.removeItem(p)}catch(e){}}(),this.session=void 0}catch(e){this.handleException(e)}}loadSession({expiry:e}){const{type:t,session:n}=Kt({expiry:e,stickySession:Boolean(this._options.stickySession),currentSession:this.session,sessionSampleRate:this._options.sessionSampleRate,errorSampleRate:this._options.errorSampleRate});"new"===t&&this.setInitialState(),n.id!==Object(I.a)([this,"access",e=>e.session,"optionalAccess",e=>e.id])&&(n.previousSessionId=Object(I.a)([this,"access",e=>e.session,"optionalAccess",e=>e.id])),this.session=n}setInitialState(){const e=`${A.location.pathname}${A.location.hash}${A.location.search}`,t=`${A.location.origin}${e}`;this.performanceEvents=[],this.clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=(new Date).getTime(),this._context.urls.push(t)}addListeners(){try{if(A.document.addEventListener("visibilitychange",this.handleVisibilityChange),A.addEventListener("blur",this.handleWindowBlur),A.addEventListener("focus",this.handleWindowFocus),function(e){const t=Object(a.b)().getClient();if(!t)return;const n=t.recordDroppedEvent.bind(t);t.recordDroppedEvent=(t,i,r)=>(r&&r.event_id&&e.delete(r.event_id),n(t,i,r)),zt=n}(this._context.errorIds),!this._hasInitializedCoreListeners){const t=Object(a.b)().getScope();Object(I.a)([t,"optionalAccess",e=>e.addScopeListener,"call",e=>e(this.handleCoreBreadcrumbListener("scope"))]),Object(C.a)("dom",this.handleCoreBreadcrumbListener("dom")),Object(C.a)("fetch",(e=this,t=>{if(!e.isEnabled())return;const n=function(e){if(!e.endTimestamp)return null;const{startTimestamp:t,endTimestamp:n,fetchData:i,response:r}=e;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:i.url,data:{method:i.method,statusCode:r.status}}}(t);null!==n&&(Tt(e,n.name)||e.addUpdate((()=>(Rt(e,[n]),!0))))})),Object(C.a)("xhr",Nt(this)),Object(C.a)("history",bt(this)),Object(c.b)(wt(this)),this._hasInitializedCoreListeners=!0}}catch(t){this.handleException(t)}var e;"_performanceObserver"in A&&(this._performanceObserver=Dt(this))}removeListeners(){try{A.document.removeEventListener("visibilitychange",this.handleVisibilityChange),A.removeEventListener("blur",this.handleWindowBlur),A.removeEventListener("focus",this.handleWindowFocus),function(){const e=Object(a.b)().getClient();e&&zt&&(e.recordDroppedEvent=zt)}(),this._performanceObserver&&(this._performanceObserver.disconnect(),this._performanceObserver=null)}catch(e){this.handleException(e)}}addUpdate(e){const t=Object(I.a)([e,"optionalCall",e=>e()]);"error"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}__init14(){this.handleRecordingEmit=(e,t)=>{this.checkAndHandleExpiredSession()?this.addUpdate((()=>("error"===this.recordingMode&&2===e.type&&this.setInitialState(),St(this,e,t),2===e.type&&(Object(I.a)([this,"access",e=>e.session,"optionalAccess",e=>e.previousSessionId])||("error"===this.recordingMode&&this.session&&this._context.earliestEvent&&(this.session.started=this._context.earliestEvent,this._maybeSaveSession()),"session"===this.recordingMode&&this.flushImmediate()),!0)))):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.error("[Replay] Received replay event after session expired.")}}__init15(){this.handleVisibilityChange=()=>{"visible"===A.document.visibilityState?this.doChangeToForegroundTasks():this.doChangeToBackgroundTasks()}}__init16(){this.handleWindowBlur=()=>{const e=F({category:"ui.blur"});this.doChangeToBackgroundTasks(e)}}__init17(){this.handleWindowFocus=()=>{const e=F({category:"ui.focus"});this.doChangeToForegroundTasks(e)}}__init18(){this.handleCoreBreadcrumbListener=e=>t=>{if(!this._isEnabled)return;const n=yt(e,t);null!==n&&"sentry.transaction"!==n.category&&("ui.click"===n.category?this.triggerUserActivity():this.checkAndHandleExpiredSession(),this.addUpdate((()=>(St(this,{type:fe.Custom,timestamp:1e3*(n.timestamp||0),data:{tag:"breadcrumb",payload:n}}),"console"===n.category))))}}doChangeToBackgroundTasks(e){if(!this.session)return;const t=Ft(this.session,m);e&&!t&&this.createCustomBreadcrumb(e),this.conditionalFlush()}doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession({expiry:m})?e&&this.createCustomBreadcrumb(e):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.log("[Replay] Document has become active, but session has expired")}triggerFullSnapshot(){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.log("[Replay] Taking full rrweb snapshot"),It.takeFullSnapshot(!0)}updateUserActivity(e=(new Date).getTime()){this._lastActivity=e}updateSessionActivity(e=(new Date).getTime()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}triggerUserActivity(){if(this.updateUserActivity(),!this._stopRecording)return this.loadSession({expiry:_}),void this.resume();this.checkAndHandleExpiredSession(),this.updateSessionActivity()}createCustomBreadcrumb(e){this.addUpdate((()=>{St(this,{type:fe.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}addPerformanceEntries(){const e=[...this.performanceEvents];this.performanceEvents=[],Rt(this,function(e){return e.map(Ut).filter(Boolean)}(e))}checkAndHandleExpiredSession({expiry:e=3e5}={}){const t=Object(I.a)([this,"access",e=>e.session,"optionalAccess",e=>e.id]);if(this._lastActivity&&Pt(this._lastActivity,E))return void this.pause();this.loadSession({expiry:e});return t===Object(I.a)([this,"access",e=>e.session,"optionalAccess",e=>e.id])||(this.triggerFullSnapshot(),!1)}conditionalFlush(){"error"!==this.recordingMode&&this.flushImmediate()}clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[],this._context.earliestEvent=null}popEventContext(){this._context.earliestEvent&&this._context.earliestEvent<this._context.initialTimestamp&&(this._context.initialTimestamp=this._context.earliestEvent);const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds).filter(Boolean),traceIds:Array.from(this._context.traceIds).filter(Boolean),urls:this._context.urls};return this.clearContext(),e}async runFlush(){if(this.session){if(await this.addPerformanceEntries(),Object(I.a)([this,"access",e=>e.eventBuffer,"optionalAccess",e=>e.length])){await function(e){try{Rt(e,[createMemoryEntry(A.performance.memory)])}catch(t){}}(this);try{const e=await this.eventBuffer.finish(),t=this.session.id,n=this.popEventContext(),i=this.session.segmentId++;this._maybeSaveSession(),await this.sendReplay({replayId:t,events:e,segmentId:i,includeReplayStartTimestamp:0===i,eventContext:n})}catch(e){this.handleException(e)}}}else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.error("[Replay] No session found to flush.")}__init19(){this.flush=async()=>{if(this._isEnabled)if(this.checkAndHandleExpiredSession())if(Object(I.a)([this,"access",e=>e.session,"optionalAccess",e=>e.id])){if(Object(I.a)([this,"access",e=>e._debouncedFlush,"optionalAccess",e=>e.cancel,"call",e=>e()]),!this._flushLock)return this._flushLock=this.runFlush(),await this._flushLock,void(this._flushLock=null);try{await this._flushLock}catch(e){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.error(e)}finally{this._debouncedFlush()}}else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.error("[Replay] No session found to flush.");else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&v.c.error("[Replay] Attempting to finish replay event after session expired.")}}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}async sendReplayRequest({events:e,replayId:t,segmentId:n,includeReplayStartTimestamp:i,eventContext:r}){const o=function({events:e,headers:t}){let n;const i=`${JSON.stringify(t)}\n`;if("string"===typeof e)n=`${i}${e}`;else{const t=(new TextEncoder).encode(i);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({events:e,headers:{segment_id:n}}),{urls:s,errorIds:c,traceIds:d,initialTimestamp:l}=r,u=(new Date).getTime(),h=Object(a.b)(),A=h.getClient(),p=h.getScope(),_=A&&A.getTransport(),m=Object(I.a)([A,"optionalAccess",e=>e.getDsn,"call",e=>e()]);if(!A||!p||!_||!m)return;const E={type:f,...i?{replay_start_timestamp:l/1e3}:{},timestamp:u/1e3,error_ids:c,trace_ids:d,urls:s,replay_id:t,segment_id:n},v=await async function({client:e,scope:t,replayId:n,event:i}){const r=await e._prepareEvent(i,{event_id:n},t),a=e.getOptions()&&e.getOptions()._metadata,{name:o}=a&&a.sdk||{};return r.sdk={...r.sdk,version:"7.28.0",name:o},r}({scope:p,client:A,replayId:t,event:E});v.tags={...v.tags,sessionSampleRate:this._options.sessionSampleRate,errorSampleRate:this._options.errorSampleRate,replayType:Object(I.a)([this,"access",e=>e.session,"optionalAccess",e=>e.sampled])};const C=function(e,t,n,i){return Object(Wt.c)(Object(Wt.d)(e,Object(Wt.g)(e),i,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:t.length},t]])}(v,o,m,A.getOptions().tunnel);try{return _.send(C)}catch(y){throw new Error(g)}}resetRetries(){this._retryCount=0,this._retryInterval=5e3}async sendReplay({replayId:e,events:t,segmentId:n,includeReplayStartTimestamp:i,eventContext:r}){if(t.length)try{return await this.sendReplayRequest({events:t,replayId:e,segmentId:n,includeReplayStartTimestamp:i,eventContext:r}),this.resetRetries(),!0}catch(a){if(Object(d.f)("Replays",{_retryCount:this._retryCount}),this.handleException(a),this._retryCount>=3)throw new Error("Unable to send Replay - max retries exceeded");return this._retryCount=this._retryCount+1,this._retryInterval=this._retryCount*this._retryInterval,await new Promise(((o,s)=>{setTimeout((async()=>{try{await this.sendReplay({replayId:e,events:t,segmentId:n,includeReplayStartTimestamp:i,eventContext:r}),o(!0)}catch(a){s(a)}}),this._retryInterval)}))}}_maybeSaveSession(){this.session&&this._options.stickySession&&Gt(this.session)}}var Jt=n(714);function Xt(){return"undefined"!==typeof window&&!Object(Jt.b)()}const Zt="img,image,svg,path,rect,area,video,object,picture,embed,map,audio";let $t=!1;class en{static __initStatic(){this.id="Replay"}__init(){this.name=en.id}get _isInitialized(){return $t}set _isInitialized(e){$t=e}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=15e3,initialFlushDelay:n=5e3,stickySession:i=!0,useCompression:r=!0,sessionSampleRate:a,errorSampleRate:o,maskAllText:s=!0,maskAllInputs:c=!0,blockAllMedia:d=!0,_experiments:l={},blockClass:u="sentry-block",ignoreClass:h="sentry-ignore",maskTextClass:A="sentry-mask",blockSelector:p="[data-sentry-block]",...f}={}){if(en.prototype.__init.call(this),this.recordingOptions={maskAllInputs:c,blockClass:u,ignoreClass:h,maskTextClass:A,blockSelector:p,...f},this.options={flushMinDelay:e,flushMaxDelay:t,stickySession:i,initialFlushDelay:n,sessionSampleRate:.1,errorSampleRate:1,useCompression:r,maskAllText:s,blockAllMedia:d,_experiments:l},"number"===typeof a&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${a} })`),this.options.sessionSampleRate=a),"number"===typeof o&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${o} })`),this.options.errorSampleRate=o),this.options.maskAllText&&(this.recordingOptions.maskTextSelector="body *:not(style,script)"),this.options.blockAllMedia&&(this.recordingOptions.blockSelector=this.recordingOptions.blockSelector?`${this.recordingOptions.blockSelector},${Zt}`:Zt),Xt()&&this._isInitialized)throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}setupOnce(){Xt()&&(this._setup(),setTimeout((()=>this.start())))}start(){this._replay&&this._replay.start()}stop(){this._replay&&this._replay.stop()}_setup(){this._loadReplayOptionsFromClient(),this._replay=new qt({options:this.options,recordingOptions:this.recordingOptions})}_loadReplayOptionsFromClient(){const e=Object(a.b)().getClient(),t=e&&e.getOptions();t&&"number"===typeof t.replaysSessionSampleRate&&(this.options.sessionSampleRate=t.replaysSessionSampleRate),t&&"number"===typeof t.replaysOnErrorSampleRate&&(this.options.errorSampleRate=t.replaysOnErrorSampleRate)}}en.__initStatic();var tn=n(1247),nn=n(1248),rn=n(1244),an=n(674),on=n(657),sn=n(654),cn=n(987),dn=n(986),ln=n(857),un=n(988),hn=n(990),An=n(989);let pn={};u.a.Sentry&&u.a.Sentry.Integrations&&(pn=u.a.Sentry.Integrations);const fn={...pn,...i.a,...h}},654:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return R})),n.d(t,"f",(function(){return w})),n.d(t,"g",(function(){return N})),n.d(t,"h",(function(){return T})),n.d(t,"i",(function(){return D}));var i=n(289),r=n(1156),a=n(1666),o=n(177),s=n(999),c=n(645),d=n(1284),l=n(149),u=n(715),h=n(1184),A=n(1247),p=n(144),f=n(674),g=n(986),_=n(857),m=n(987),E=n(988),I=n(989),v=n(990),C=n(1248),y=n(1244);const S=[new i.a.InboundFilters,new i.a.FunctionToString,new g.a,new _.b,new m.a,new E.a,new I.a,new v.a];function R(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=S),void 0===e.release&&("string"===typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),p.a.SENTRY_RELEASE&&p.a.SENTRY_RELEASE.id&&(e.release=p.a.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:Object(c.c)(e.stackParser||f.c),integrations:Object(r.a)(e),transport:e.transport||(Object(d.b)()?C.a:y.a)};Object(a.a)(A.a,t),e.autoSessionTracking&&function(){if("undefined"===typeof p.a.document)return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));const e=Object(o.b)();if(!e.captureSession)return;B(e),Object(h.a)("history",(({from:e,to:t})=>{void 0!==e&&e!==t&&B(Object(o.b)())}))}()}function T(e={},t=Object(o.b)()){if(!p.a.document)return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.error("Global document not defined in showReportDialog call"));const{client:n,scope:i}=t.getStackTop(),r=e.dsn||n&&n.getDsn();if(!r)return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.error("DSN not configured for showReportDialog call"));i&&(e.user={...i.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const a=p.a.document.createElement("script");a.async=!0,a.src=Object(s.b)(r,e),e.onLoad&&(a.onload=e.onLoad);const c=p.a.document.head||p.a.document.body;c?c.appendChild(a):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.error("Not injecting report dialog. No injection point found in HTML")}function w(){return Object(o.b)().lastEventId()}function b(){}function N(e){e()}function k(e){const t=Object(o.b)().getClient();return t?t.flush(e):(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.warn("Cannot flush events. No client defined."),Object(u.c)(!1))}function O(e){const t=Object(o.b)().getClient();return t?t.close(e):(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.warn("Cannot flush events and disable SDK. No client defined."),Object(u.c)(!1))}function D(e){return Object(p.c)(e)()}function B(e){e.startSession({ignoreDuration:!0}),e.captureSession()}},657:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return d}));var i=n(177),r=n(179),a=n(214),o=n(1164),s=n(295),c=n(715);function d(e,t){const n=u(e,t),i={type:t&&t.name,value:A(t)};return n.length&&(i.stacktrace={frames:n}),void 0===i.type&&""===i.value&&(i.value="Unrecoverable error caught"),i}function l(e,t){return{exception:{values:[d(e,t)]}}}function u(e,t){const n=t.stacktrace||t.stack||"",i=function(e){if(e){if("number"===typeof e.framesToPop)return e.framesToPop;if(h.test(e.message))return 1}return 0}(t);try{return e(n,i)}catch(r){}return[]}const h=/Minified React error #\d+;/i;function A(e){const t=e&&e.message;return t?t.error&&"string"===typeof t.error.message?t.error.message:t:"No error message"}function p(e,t,n,i){const r=g(e,t,n&&n.syntheticException||void 0,i);return Object(s.a)(r),r.level="error",n&&n.event_id&&(r.event_id=n.event_id),Object(c.c)(r)}function f(e,t,n="info",i,r){const a=_(e,t,i&&i.syntheticException||void 0,r);return a.level=n,i&&i.event_id&&(a.event_id=i.event_id),Object(c.c)(a)}function g(e,t,n,c,d){let h;if(Object(r.e)(t)&&t.error){return l(e,t.error)}if(Object(r.a)(t)||Object(r.b)(t)){const i=t;if("stack"in t)h=l(e,t);else{const t=i.name||(Object(r.a)(i)?"DOMError":"DOMException"),a=i.message?`${t}: ${i.message}`:t;h=_(e,a,n,c),Object(s.b)(h,a)}return"code"in i&&(h.tags={...h.tags,"DOMException.code":`${i.code}`}),h}if(Object(r.d)(t))return l(e,t);if(Object(r.i)(t)||Object(r.f)(t)){return h=function(e,t,n,s){const c=Object(i.b)().getClient(),d=c&&c.getOptions().normalizeDepth,l={exception:{values:[{type:Object(r.f)(t)?t.constructor.name:s?"UnhandledRejection":"Error",value:`Non-Error ${s?"promise rejection":"exception"} captured with keys: ${Object(a.d)(t)}`}]},extra:{__serialized__:Object(o.b)(t,d)}};if(n){const t=u(e,n);t.length&&(l.exception.values[0].stacktrace={frames:t})}return l}(e,t,n,d),Object(s.a)(h,{synthetic:!0}),h}return h=_(e,t,n,c),Object(s.b)(h,`${t}`,void 0),Object(s.a)(h,{synthetic:!0}),h}function _(e,t,n,i){const r={message:t};if(i&&n){const i=u(e,n);i.length&&(r.exception={values:[{value:t,stacktrace:{frames:i}}]})}return r}},674:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return _})),n.d(t,"g",(function(){return A}));var i=n(645);const r="?";function a(e,t,n,i){const r={filename:e,function:t,in_app:!0};return void 0!==n&&(r.lineno=n),void 0!==i&&(r.colno=i),r}const o=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,s=/\((\S*)(?::(\d+))(?::(\d+))\)/,c=[30,e=>{const t=o.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=s.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=I(t[1]||r,t[2]);return a(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],d=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,l=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,u=[50,e=>{const t=d.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=l.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||r;return[n,e]=I(n,e),a(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],h=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,A=[40,e=>{const t=h.exec(e);return t?a(t[2],t[1]||r,+t[3],t[4]?+t[4]:void 0):void 0}],p=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,f=[10,e=>{const t=p.exec(e);return t?a(t[2],t[3]||r,+t[1]):void 0}],g=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,_=[20,e=>{const t=g.exec(e);return t?a(t[5],t[3]||t[4]||r,+t[1],+t[2]):void 0}],m=[c,u,A],E=Object(i.a)(...m),I=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),i=-1!==e.indexOf("safari-web-extension");return n||i?[-1!==e.indexOf("@")?e.split("@")[0]:r,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]}},700:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return jt}));var i=n(338),r=n(1286),a=n(951),o=n(3440),s=n(314),c=n(232),d=n(896),l=n(1675),u=n(1287),h=n(1030),A=n(1682),p=n(1681),f=n(1181),g=n(359);const _=s.a,m="sentryReplaySession",E="replay_event",I="Unable to send Replay",v=3e5,C=v,y=36e5;var S,R=function(){return R=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},R.apply(this,arguments)};function T(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function b(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function N(e){var t,n=null===(t=e)||void 0===t?void 0:t.host;return Boolean(n&&n.shadowRoot&&n.shadowRoot===e)}function k(e){var t=e.input,n=e.maskInputSelector,i=e.unmaskInputSelector,r=e.maskInputOptions,a=e.tagName,o=e.type,s=e.value,c=e.maskInputFn,d=s||"";return i&&t.matches(i)||(r[a.toLowerCase()]||r[o]||n&&t.matches(n))&&(d=c?c(d):"*".repeat(d.length)),d}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(S||(S={}));var O="__rrweb_original__";var D,B,L=1,U=new RegExp("[^a-z0-9-_:]");function x(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(M).join(""):null}catch(n){return null}}function M(e){var t=e.cssText;if(function(e){return"styleSheet"in e}(e))try{t=x(e.styleSheet)||t}catch(n){}return t}var Q=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,P=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,F=/^(data:)([^,]*),(.*)/i;function G(e,t){return(e||"").replace(Q,(function(e,n,i,r,a,o){var s,c=i||a||o,d=n||r||"";if(!c)return e;if(!P.test(c))return"url("+d+c+d+")";if(F.test(c))return"url("+d+c+d+")";if("/"===c[0])return"url("+d+(((s=t).indexOf("//")>-1?s.split("/").slice(0,3).join("/"):s.split("/")[0]).split("?")[0]+c)+d+")";var l=t.split("/"),u=c.split("/");l.pop();for(var h=0,A=u;h<A.length;h++){var p=A[h];"."!==p&&(".."===p?l.pop():l.push(p))}return"url("+d+l.join("/")+d+")"}))}var j,V,Y,H,K,W,z=/^[^ \t\n\r\u000c]+/,q=/^[, \t\n\r\u000c]+/;function J(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function X(){var e=document.createElement("a");return e.href="",e.href}function Z(e,t,n,i){return"src"===n||"href"===n&&i||"xlink:href"===n&&i&&"#"!==i[0]?J(e,i):"background"!==n||!i||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n&&i?function(e,t){if(""===t.trim())return t;var n=0;function i(e){var i,r=e.exec(t.substring(n));return r?(i=r[0],n+=i.length,i):""}for(var r=[];i(q),!(n>=t.length);){var a=i(z);if(","===a.slice(-1))a=J(e,a.substring(0,a.length-1)),r.push(a);else{var o="";a=J(e,a);for(var s=!1;;){var c=t.charAt(n);if(""===c){r.push((a+o).trim());break}if(s)")"===c&&(s=!1);else{if(","===c){n+=1,r.push((a+o).trim());break}"("===c&&(s=!0)}o+=c,n+=1}}}return r.join(", ")}(e,i):"style"===n&&i?G(i,X()):"object"===t&&"data"===n&&i?J(e,i):i:J(e,i)}function $(e,t,n,i){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){if(i&&(e.matches(i)||e.closest(i)))return!1;if("string"===typeof t){if(e.classList.contains(t))return!0}else for(var r=0;r<e.classList.length;r++){var a=e.classList[r];if(t.test(a))return!0}return!(!n||!e.matches(n))||$(e.parentNode,t,n,i)}return e.nodeType,e.TEXT_NODE,$(e.parentNode,t,n,i)}function ee(e,t){var n,i,r,a,o=t.doc,s=t.blockClass,c=t.blockSelector,d=t.unblockSelector,l=t.maskTextClass,u=t.maskTextSelector,h=t.unmaskTextSelector,A=t.inlineStylesheet,p=t.maskInputSelector,f=t.unmaskInputSelector,g=t.maskInputOptions,_=void 0===g?{}:g,m=t.maskTextFn,E=t.maskInputFn,I=t.dataURLOptions,v=void 0===I?{}:I,C=t.inlineImages,y=t.recordCanvas,R=t.keepIframeSrcFn;if(o.__sn){var T=o.__sn.id;i=1===T?void 0:T}switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:S.Document,childNodes:[],compatMode:e.compatMode,rootId:i}:{type:S.Document,childNodes:[],rootId:i};case e.DOCUMENT_TYPE_NODE:return{type:S.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:i};case e.ELEMENT_NODE:for(var w=function(e,t,n,i){if(i&&e.matches(i))return!1;if("string"===typeof t){if(e.classList.contains(t))return!0}else for(var r=0;r<e.classList.length;r++){var a=e.classList[r];if(t.test(a))return!0}return!!n&&e.matches(n)}(e,s,c,d),b=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return U.test(t)?"div":t}(e),N={},L=0,M=Array.from(e.attributes);L<M.length;L++){var Q=M[L],P=Q.name,F=Q.value;N[P]=Z(o,b,P,F)}if("link"===b&&A){var j=Array.from(o.styleSheets).find((function(t){return t.href===e.href})),V=null;j&&(V=x(j)),V&&(delete N.rel,delete N.href,N._cssText=G(V,j.href))}if("style"===b&&e.sheet&&!(e.innerText||e.textContent||"").trim().length)(V=x(e.sheet))&&(N._cssText=G(V,X()));if("input"===b||"textarea"===b||"select"===b){F=e.value;"radio"!==N.type&&"checkbox"!==N.type&&"submit"!==N.type&&"button"!==N.type&&F?N.value=k({input:e,type:N.type,tagName:b,value:F,maskInputSelector:p,unmaskInputSelector:f,maskInputOptions:_,maskInputFn:E}):e.checked&&(N.checked=e.checked)}if("option"===b&&(e.selected&&!_.select?N.selected=!0:delete N.selected),"canvas"===b&&y)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var i=0;i<e.height;i+=50){var r=t.getImageData,a=O in r?r.__rrweb_original__:r;if(new Uint32Array(a.call(t,n,i,Math.min(50,e.width-n),Math.min(50,e.height-i)).data.buffer).some((function(e){return 0!==e})))return!1}return!0})(e)||(N.rr_dataURL=e.toDataURL(v.type,v.quality));else if(!("__context"in e)){var Y=e.toDataURL(v.type,v.quality),H=document.createElement("canvas");H.width=e.width,H.height=e.height,Y!==H.toDataURL(v.type,v.quality)&&(N.rr_dataURL=Y)}if("img"===b&&C){D||(D=o.createElement("canvas"),B=D.getContext("2d"));var K=e,W=K.crossOrigin;K.crossOrigin="anonymous";var z=function(){try{D.width=K.naturalWidth,D.height=K.naturalHeight,B.drawImage(K,0,0),N.rr_dataURL=D.toDataURL(v.type,v.quality)}catch(e){console.warn("Cannot inline img src="+K.currentSrc+"! Error: "+e)}W?N.crossOrigin=W:delete N.crossOrigin};K.complete&&0!==K.naturalWidth?z():K.onload=z}if("audio"!==b&&"video"!==b||(N.rr_mediaState=e.paused?"paused":"played",N.rr_mediaCurrentTime=e.currentTime),e.scrollLeft&&(N.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(N.rr_scrollTop=e.scrollTop),w){var q=e.getBoundingClientRect(),J=q.width,ee=q.height;N={class:N.class,rr_width:J+"px",rr_height:ee+"px"}}return"iframe"!==b||R(N.src)||(e.contentDocument||(N.rr_src=N.src),delete N.src),{type:S.Element,tagName:b,attributes:N,childNodes:[],isSVG:(a=e,Boolean("svg"===a.tagName||a.ownerSVGElement)||void 0),needBlock:w,rootId:i};case e.TEXT_NODE:var te=e.parentNode&&e.parentNode.tagName,ne=e.textContent,ie="STYLE"===te||void 0,re="SCRIPT"===te||void 0;if(ie&&ne){try{e.nextSibling||e.previousSibling||(null===(n=e.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(ne=(r=e.parentNode.sheet).cssRules?Array.from(r.cssRules).map((function(e){return e.cssText||""})).join(""):"")}catch(ae){console.warn("Cannot get CSS styles from text's parentNode. Error: "+ae,e)}ne=G(ne,X())}return re&&(ne="SCRIPT_PLACEHOLDER"),!ie&&!re&&$(e,l,u,h)&&ne&&(ne=m?m(ne):ne.replace(/[\S]/g,"*")),{type:S.Text,textContent:ne||"",isStyle:ie,rootId:i};case e.CDATA_SECTION_NODE:return{type:S.CDATA,textContent:"",rootId:i};case e.COMMENT_NODE:return{type:S.Comment,textContent:e.textContent||"",rootId:i};default:return!1}}function te(e){return void 0===e?"":e.toLowerCase()}function ne(e,t){var n,i=t.doc,r=t.map,a=t.blockClass,o=t.blockSelector,s=t.unblockSelector,c=t.maskTextClass,d=t.maskTextSelector,l=t.unmaskTextSelector,u=t.skipChild,h=void 0!==u&&u,A=t.inlineStylesheet,p=void 0===A||A,f=t.maskInputSelector,g=t.unmaskInputSelector,_=t.maskInputOptions,m=void 0===_?{}:_,E=t.maskTextFn,I=t.maskInputFn,v=t.slimDOMOptions,C=t.dataURLOptions,y=void 0===C?{}:C,R=t.inlineImages,T=void 0!==R&&R,w=t.recordCanvas,b=void 0!==w&&w,k=t.onSerialize,O=t.onIframeLoad,D=t.iframeLoadTimeout,B=void 0===D?5e3:D,U=t.keepIframeSrcFn,x=void 0===U?function(){return!1}:U,M=t.preserveWhiteSpace,Q=void 0===M||M,P=ee(e,{doc:i,blockClass:a,blockSelector:o,unblockSelector:s,maskTextClass:c,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:p,maskInputSelector:f,unmaskInputSelector:g,maskInputOptions:m,maskTextFn:E,maskInputFn:I,dataURLOptions:y,inlineImages:T,recordCanvas:b,keepIframeSrcFn:x});if(!P)return console.warn(e,"not serialized"),null;n="__sn"in e?e.__sn.id:!function(e,t){if(t.comment&&e.type===S.Comment)return!0;if(e.type===S.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"===typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(te(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===te(e.attributes.name)||"icon"===te(e.attributes.rel)||"apple-touch-icon"===te(e.attributes.rel)||"shortcut icon"===te(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&te(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(te(e.attributes.property).match(/^(og|twitter|fb):/)||te(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===te(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===te(e.attributes.name)||"googlebot"===te(e.attributes.name)||"bingbot"===te(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===te(e.attributes.name)||"generator"===te(e.attributes.name)||"framework"===te(e.attributes.name)||"publisher"===te(e.attributes.name)||"progid"===te(e.attributes.name)||te(e.attributes.property).match(/^article:/)||te(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===te(e.attributes.name)||"yandex-verification"===te(e.attributes.name)||"csrf-token"===te(e.attributes.name)||"p:domain_verify"===te(e.attributes.name)||"verify-v1"===te(e.attributes.name)||"verification"===te(e.attributes.name)||"shopify-checkout-api-token"===te(e.attributes.name)))return!0}}return!1}(P,v)&&(Q||P.type!==S.Text||P.isStyle||P.textContent.replace(/^\s+|\s+$/gm,"").length)?L++:-2;var F=Object.assign(P,{id:n});if(e.__sn=F,-2===n)return null;r[n]=e,k&&k(e);var G=!h;if(F.type===S.Element&&(G=G&&!F.needBlock,delete F.needBlock,e.shadowRoot&&(F.isShadowHost=!0)),(F.type===S.Document||F.type===S.Element)&&G){v.headWhitespace&&P.type===S.Element&&"head"===P.tagName&&(Q=!1);for(var j={doc:i,map:r,blockClass:a,blockSelector:o,unblockSelector:s,maskTextClass:c,maskTextSelector:d,unmaskTextSelector:l,skipChild:h,inlineStylesheet:p,maskInputSelector:f,unmaskInputSelector:g,maskInputOptions:m,maskTextFn:E,maskInputFn:I,slimDOMOptions:v,dataURLOptions:y,inlineImages:T,recordCanvas:b,preserveWhiteSpace:Q,onSerialize:k,onIframeLoad:O,iframeLoadTimeout:B,keepIframeSrcFn:x},V=0,Y=Array.from(e.childNodes);V<Y.length;V++){(W=ne(Y[V],j))&&F.childNodes.push(W)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(var H=0,K=Array.from(e.shadowRoot.childNodes);H<K.length;H++){var W;(W=ne(K[H],j))&&(W.isShadow=!0,F.childNodes.push(W))}}return e.parentNode&&N(e.parentNode)&&(F.isShadow=!0),F.type===S.Element&&"iframe"===F.tagName&&function(e,t,n){var i=e.contentWindow;if(i){var r,a=!1;try{r=i.document.readyState}catch(c){return}if("complete"===r){var o="about:blank";i.location.href===o&&e.src!==o&&""!==e.src?e.addEventListener("load",t):setTimeout(t,0)}else{var s=setTimeout((function(){a||(t(),a=!0)}),n);e.addEventListener("load",(function(){clearTimeout(s),a=!0,t()}))}}}(e,(function(){var t=e.contentDocument;if(t&&O){var n=ne(t,{doc:t,map:r,blockClass:a,blockSelector:o,unblockSelector:s,maskTextClass:c,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputSelector:f,unmaskInputSelector:g,maskInputOptions:m,maskTextFn:E,maskInputFn:I,slimDOMOptions:v,dataURLOptions:y,inlineImages:T,recordCanvas:b,preserveWhiteSpace:Q,onSerialize:k,onIframeLoad:O,iframeLoadTimeout:B,keepIframeSrcFn:x});n&&O(e,n)}}),B),F}function ie(e,t,n){void 0===n&&(n=document);var i={capture:!0,passive:!0};return n.addEventListener(e,t,i),function(){return n.removeEventListener(e,t,i)}}!function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin"}(j||(j={})),function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration"}(V||(V={})),function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel"}(Y||(Y={})),function(e){e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2"}(H||(H={})),function(e){e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange"}(K||(K={})),function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back"}(W||(W={}));var re="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",ae={map:{},getId:function(){return console.error(re),-1},getNode:function(){return console.error(re),null},removeNodeFromMap:function(){console.error(re)},has:function(){return console.error(re),!1},reset:function(){console.error(re)}};function oe(e,t,n){void 0===n&&(n={});var i=null,r=0;return function(a){var o=Date.now();r||!1!==n.leading||(r=o);var s=t-(o-r),c=this,d=arguments;s<=0||s>t?(i&&(clearTimeout(i),i=null),r=o,e.apply(c,d)):i||!1===n.trailing||(i=setTimeout((function(){r=!1===n.leading?0:Date.now(),i=null,e.apply(c,d)}),s))}}function se(e,t,n,i,r){void 0===r&&(r=window);var a=r.Object.getOwnPropertyDescriptor(e,t);return r.Object.defineProperty(e,t,i?n:{set:function(e){var t=this;setTimeout((function(){n.set.call(t,e)}),0),a&&a.set&&a.set.call(this,e)}}),function(){return se(e,t,a||{},!0)}}function ce(e,t,n){try{if(!(t in e))return function(){};var i=e[t],r=n(i);return"function"===typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:i}})),e[t]=r,function(){e[t]=i}}catch(a){return function(){}}}function de(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function le(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ue(e,t){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){var n=!1;if("string"===typeof t){if(void 0!==e.closest)return null!==e.closest("."+t);n=e.classList.contains(t)}else e.classList.forEach((function(e){t.test(e)&&(n=!0)}));return n||ue(e.parentNode,t)}return e.nodeType,e.TEXT_NODE,ue(e.parentNode,t)}function he(e){return"__sn"in e&&-2===e.__sn.id}function Ae(e,t){if(N(e))return!1;var n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||Ae(e.parentNode,t))}function pe(e){return Boolean(e.changedTouches)}function fe(e){return"__sn"in e&&(e.__sn.type===S.Element&&"iframe"===e.__sn.tagName)}function ge(e){return Boolean(null===e||void 0===e?void 0:e.shadowRoot)}function _e(e){return"__ln"in e}"undefined"!==typeof window&&window.Proxy&&window.Reflect&&(ae=new Proxy(ae,{get:function(e,t,n){return"map"===t&&console.error(re),Reflect.get(e,t,n)}}));var me=function(){function e(){this.length=0,this.head=null}return e.prototype.get=function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var t=this.head,n=0;n<e;n++)t=(null===t||void 0===t?void 0:t.next)||null;return t},e.prototype.addNode=function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&_e(e.previousSibling)){var n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&_e(e.nextSibling)&&e.nextSibling.__ln.previous){n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;this.length++},e.prototype.removeNode=function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)},e}(),Ee=function(e,t){return"".concat(e,"@").concat(t)};function Ie(e){return"__sn"in e}function ve(e,t){e.delete(t),t.childNodes.forEach((function(t){return ve(e,t)}))}function Ce(e,t,n){var i=t.parentNode;if(!i)return!1;var r=n.getId(i);return!!e.some((function(e){return e.id===r}))||Ce(e,i,n)}function ye(e,t){var n=t.parentNode;return!!n&&(!!e.has(n)||ye(e,n))}const Se=function(){function e(){var e=this;this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(t){t.forEach(e.processMutation),e.emit()},this.emit=function(){var t,n,i,r;if(!e.frozen&&!e.locked){for(var a=[],o=new me,s=function(t){for(var n=t,i=-2;-2===i;)i=(n=n&&n.nextSibling)&&e.mirror.getId(n);return i},c=function(t){for(var n,i,r,c,d,l=t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null,u=l;null===(r=null===(i=null===u||void 0===u?void 0:u.getRootNode)||void 0===i?void 0:i.call(u))||void 0===r?void 0:r.host;)u=(null===(d=null===(c=null===u||void 0===u?void 0:u.getRootNode)||void 0===c?void 0:c.call(u))||void 0===d?void 0:d.host)||null;var h=!e.doc.contains(t)&&(null===u||!e.doc.contains(u));if(t.parentNode&&!h){var A=N(t.parentNode)?e.mirror.getId(l):e.mirror.getId(t.parentNode),p=s(t);if(-1===A||-1===p)return o.addNode(t);var f=ne(t,{doc:e.doc,map:e.mirror.map,blockClass:e.blockClass,blockSelector:e.blockSelector,unblockSelector:e.unblockSelector,maskTextClass:e.maskTextClass,maskTextSelector:e.maskTextSelector,unmaskTextSelector:e.unmaskTextSelector,maskInputSelector:e.maskInputSelector,unmaskInputSelector:e.unmaskInputSelector,skipChild:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskTextFn:e.maskTextFn,maskInputFn:e.maskInputFn,slimDOMOptions:e.slimDOMOptions,recordCanvas:e.recordCanvas,inlineImages:e.inlineImages,onSerialize:function(n){fe(n)&&e.iframeManager.addIframe(n),ge(t)&&e.shadowDomManager.addShadowRoot(t.shadowRoot,document)},onIframeLoad:function(t,n){e.iframeManager.attachIframe(t,n),e.shadowDomManager.observeAttachShadow(t)}});f&&a.push({parentId:A,nextId:p,node:f})}};e.mapRemoves.length;)e.mirror.removeNodeFromMap(e.mapRemoves.shift());try{for(var d=T(e.movedSet),l=d.next();!l.done;l=d.next()){var u=l.value;Ce(e.removes,u,e.mirror)&&!e.movedSet.has(u.parentNode)||c(u)}}catch(v){t={error:v}}finally{try{l&&!l.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}try{for(var h=T(e.addedSet),A=h.next();!A.done;A=h.next()){u=A.value;ye(e.droppedSet,u)||Ce(e.removes,u,e.mirror)?ye(e.movedSet,u)?c(u):e.droppedSet.add(u):c(u)}}catch(C){i={error:C}}finally{try{A&&!A.done&&(r=h.return)&&r.call(h)}finally{if(i)throw i.error}}for(var p=null;o.length;){var f=null;if(p){var g=e.mirror.getId(p.value.parentNode),_=s(p.value);-1!==g&&-1!==_&&(f=p)}if(!f)for(var m=o.length-1;m>=0;m--){var E=o.get(m);if(E){g=e.mirror.getId(E.value.parentNode),_=s(E.value);if(-1!==g&&-1!==_){f=E;break}}}if(!f){for(;o.head;)o.removeNode(o.head.value);break}p=f.previous,o.removeNode(f.value),c(f.value)}var I={texts:e.texts.map((function(t){return{id:e.mirror.getId(t.node),value:t.value}})).filter((function(t){return e.mirror.has(t.id)})),attributes:e.attributes.map((function(t){return{id:e.mirror.getId(t.node),attributes:t.attributes}})).filter((function(t){return e.mirror.has(t.id)})),removes:e.removes,adds:a};(I.texts.length||I.attributes.length||I.removes.length||I.adds.length)&&(e.texts=[],e.attributes=[],e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.mutationCb(I))}},this.processMutation=function(t){var n,i,r,a;if(!he(t.target))switch(t.type){case"characterData":var o=t.target.textContent;ue(t.target,e.blockClass)||o===t.oldValue||e.texts.push({value:$(t.target,e.maskTextClass,e.maskTextSelector,e.unmaskTextSelector)&&o?e.maskTextFn?e.maskTextFn(o):o.replace(/[\S]/g,"*"):o,node:t.target});break;case"attributes":var s=t.target;o=t.target.getAttribute(t.attributeName);if("value"===t.attributeName&&(o=k({input:s,maskInputSelector:e.maskInputSelector,unmaskInputSelector:e.unmaskInputSelector,maskInputOptions:e.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:o,maskInputFn:e.maskInputFn})),ue(t.target,e.blockClass)||o===t.oldValue)return;var c=e.attributes.find((function(e){return e.node===t.target}));if(c||(c={node:t.target,attributes:{}},e.attributes.push(c)),"style"===t.attributeName){var d=e.doc.createElement("span");t.oldValue&&d.setAttribute("style",t.oldValue),void 0!==c.attributes.style&&null!==c.attributes.style||(c.attributes.style={});try{var l=c.attributes.style;try{for(var u=T(Array.from(s.style)),h=u.next();!h.done;h=u.next()){var A=h.value,p=s.style.getPropertyValue(A),f=s.style.getPropertyPriority(A);p===d.style.getPropertyValue(A)&&f===d.style.getPropertyPriority(A)||(l[A]=""===f?p:[p,f])}}catch(m){n={error:m}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}try{for(var g=T(Array.from(d.style)),_=g.next();!_.done;_=g.next()){A=_.value;""===s.style.getPropertyValue(A)&&(l[A]=!1)}}catch(E){r={error:E}}finally{try{_&&!_.done&&(a=g.return)&&a.call(g)}finally{if(r)throw r.error}}}catch(I){console.warn("[rrweb] Error when parsing update to style attribute:",I)}}else c.attributes[t.attributeName]=Z(e.doc,t.target.tagName,t.attributeName,o);break;case"childList":t.addedNodes.forEach((function(n){return e.genAdds(n,t.target)})),t.removedNodes.forEach((function(n){var i=e.mirror.getId(n),r=N(t.target)?e.mirror.getId(t.target.host):e.mirror.getId(t.target);ue(t.target,e.blockClass)||he(n)||(e.addedSet.has(n)?(ve(e.addedSet,n),e.droppedSet.add(n)):e.addedSet.has(t.target)&&-1===i||Ae(t.target,e.mirror)||(e.movedSet.has(n)&&e.movedMap[Ee(i,r)]?ve(e.movedSet,n):e.removes.push({parentId:r,id:i,isShadow:!!N(t.target)||void 0})),e.mapRemoves.push(n))}))}},this.genAdds=function(t,n){if(!n||!ue(n,e.blockClass)){if(Ie(t)){if(he(t))return;e.movedSet.add(t);var i=null;n&&Ie(n)&&(i=n.__sn.id),i&&(e.movedMap[Ee(t.__sn.id,i)]=!0)}else e.addedSet.add(t),e.droppedSet.delete(t);ue(t,e.blockClass)||t.childNodes.forEach((function(t){return e.genAdds(t)}))}}}return e.prototype.init=function(e){var t=this;["mutationCb","blockClass","blockSelector","unblockSelector","maskTextClass","maskTextSelector","unmaskTextSelector","maskInputSelector","unmaskInputSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","shadowDomManager","canvasManager"].forEach((function(n){t[n]=e[n]}))},e.prototype.freeze=function(){this.frozen=!0,this.canvasManager.freeze()},e.prototype.unfreeze=function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()},e.prototype.isFrozen=function(){return this.frozen},e.prototype.lock=function(){this.locked=!0,this.canvasManager.lock()},e.prototype.unlock=function(){this.locked=!1,this.canvasManager.unlock(),this.emit()},e.prototype.reset=function(){this.shadowDomManager.reset(),this.canvasManager.reset()},e}();var Re=[],Te="undefined"!==typeof CSSGroupingRule,we="undefined"!==typeof CSSMediaRule,be="undefined"!==typeof CSSSupportsRule,Ne="undefined"!==typeof CSSConditionRule;function ke(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(n){}return e&&e.target}function Oe(e,t){var n,i,r=new Se;Re.push(r),r.init(e);var a=window.MutationObserver||window.__rrMutationObserver,o=null===(i=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===i?void 0:i.call(n,"MutationObserver");o&&window[o]&&(a=window[o]);var s=new a(r.processMutations.bind(r));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function De(e){var t=e.mouseInteractionCb,n=e.doc,i=e.mirror,r=e.blockClass,a=e.sampling;if(!1===a.mouseInteraction)return function(){};var o=!0===a.mouseInteraction||void 0===a.mouseInteraction?{}:a.mouseInteraction,s=[];return Object.keys(Y).filter((function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==o[e]})).forEach((function(e){var a=e.toLowerCase(),o=function(e){return function(n){var a=ke(n);if(!ue(a,r)){var o=pe(n)?n.changedTouches[0]:n;if(o){var s=i.getId(a),c=o.clientX,d=o.clientY;t({type:Y[e],id:s,x:c,y:d})}}}}(e);s.push(ie(a,o,n))})),function(){s.forEach((function(e){return e()}))}}function Be(e){var t=e.scrollCb,n=e.doc,i=e.mirror,r=e.blockClass;return ie("scroll",oe((function(e){var a=ke(e);if(a&&!ue(a,r)){var o=i.getId(a);if(a===n){var s=n.scrollingElement||n.documentElement;t({id:o,x:s.scrollLeft,y:s.scrollTop})}else t({id:o,x:a.scrollLeft,y:a.scrollTop})}}),e.sampling.scroll||100),n)}function Le(e,t){var n=R({},e);return t||delete n.userTriggered,n}var Ue=["INPUT","TEXTAREA","SELECT"],xe=new WeakMap;function Me(e){return function(e,t){if(Te&&e.parentRule instanceof CSSGroupingRule||we&&e.parentRule instanceof CSSMediaRule||be&&e.parentRule instanceof CSSSupportsRule||Ne&&e.parentRule instanceof CSSConditionRule){var n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else{n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Qe(e,t){var n,i;void 0===t&&(t={});var r=e.doc.defaultView;if(!r)return function(){};!function(e,t){var n=e.mutationCb,i=e.mousemoveCb,r=e.mouseInteractionCb,a=e.scrollCb,o=e.viewportResizeCb,s=e.inputCb,c=e.mediaInteractionCb,d=e.styleSheetRuleCb,l=e.styleDeclarationCb,u=e.canvasMutationCb,h=e.fontCb;e.mutationCb=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.mutation&&t.mutation.apply(t,b([],w(e),!1)),n.apply(void 0,b([],w(e),!1))},e.mousemoveCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mousemove&&t.mousemove.apply(t,b([],w(e),!1)),i.apply(void 0,b([],w(e),!1))},e.mouseInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mouseInteraction&&t.mouseInteraction.apply(t,b([],w(e),!1)),r.apply(void 0,b([],w(e),!1))},e.scrollCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.scroll&&t.scroll.apply(t,b([],w(e),!1)),a.apply(void 0,b([],w(e),!1))},e.viewportResizeCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.viewportResize&&t.viewportResize.apply(t,b([],w(e),!1)),o.apply(void 0,b([],w(e),!1))},e.inputCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.input&&t.input.apply(t,b([],w(e),!1)),s.apply(void 0,b([],w(e),!1))},e.mediaInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mediaInteaction&&t.mediaInteaction.apply(t,b([],w(e),!1)),c.apply(void 0,b([],w(e),!1))},e.styleSheetRuleCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.styleSheetRule&&t.styleSheetRule.apply(t,b([],w(e),!1)),d.apply(void 0,b([],w(e),!1))},e.styleDeclarationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.styleDeclaration&&t.styleDeclaration.apply(t,b([],w(e),!1)),l.apply(void 0,b([],w(e),!1))},e.canvasMutationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.canvasMutation&&t.canvasMutation.apply(t,b([],w(e),!1)),u.apply(void 0,b([],w(e),!1))},e.fontCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.font&&t.font.apply(t,b([],w(e),!1)),h.apply(void 0,b([],w(e),!1))}}(e,t);var a=Oe(e,e.doc),o=function(e){var t=e.mousemoveCb,n=e.sampling,i=e.doc,r=e.mirror;if(!1===n.mousemove)return function(){};var a,o="number"===typeof n.mousemove?n.mousemove:50,s="number"===typeof n.mousemoveCallback?n.mousemoveCallback:500,c=[],d=oe((function(e){var n=Date.now()-a;t(c.map((function(e){return e.timeOffset-=n,e})),e),c=[],a=null}),s),l=oe((function(e){var t=ke(e),n=pe(e)?e.changedTouches[0]:e,i=n.clientX,o=n.clientY;a||(a=Date.now()),c.push({x:i,y:o,id:r.getId(t),timeOffset:Date.now()-a}),d("undefined"!==typeof DragEvent&&e instanceof DragEvent?V.Drag:e instanceof MouseEvent?V.MouseMove:V.TouchMove)}),o,{trailing:!1}),u=[ie("mousemove",l,i),ie("touchmove",l,i),ie("drag",l,i)];return function(){u.forEach((function(e){return e()}))}}(e),s=De(e),c=Be(e),d=function(e){var t=e.viewportResizeCb,n=-1,i=-1;return ie("resize",oe((function(){var e=de(),r=le();n===e&&i===r||(t({width:Number(r),height:Number(e)}),n=e,i=r)}),200),window)}(e),l=function(e){var t=e.inputCb,n=e.doc,i=e.mirror,r=e.blockClass,a=e.ignoreClass,o=e.ignoreSelector,s=e.maskInputSelector,c=e.unmaskInputSelector,d=e.maskInputOptions,l=e.maskInputFn,u=e.sampling,h=e.userTriggeredOnInput;function A(e){var t=ke(e),i=e.isTrusted;if(t&&"OPTION"===t.tagName&&(t=t.parentElement),t&&t.tagName&&!(Ue.indexOf(t.tagName)<0)&&!ue(t,r)){var u=t.type;if(!(t.classList.contains(a)||o&&t.matches(o))){var A=t.value,f=!1;"radio"===u||"checkbox"===u?f=t.checked:(d[t.tagName.toLowerCase()]||d[u])&&(A=k({input:t,maskInputOptions:d,maskInputSelector:s,unmaskInputSelector:c,tagName:t.tagName,type:u,value:A,maskInputFn:l})),p(t,Le({text:A,isChecked:f,userTriggered:i},h));var g=t.name;"radio"===u&&g&&f&&n.querySelectorAll('input[type="radio"][name="'.concat(g,'"]')).forEach((function(e){e!==t&&p(e,Le({text:e.value,isChecked:!f,userTriggered:!1},h))}))}}}function p(e,n){var r=xe.get(e);if(!r||r.text!==n.text||r.isChecked!==n.isChecked){xe.set(e,n);var a=i.getId(e);t(R(R({},n),{id:a}))}}var f=("last"===u.input?["change"]:["input","change"]).map((function(e){return ie(e,A,n)})),g=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),_=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];return g&&g.set&&f.push.apply(f,b([],w(_.map((function(e){return se(e[0],e[1],{set:function(){A({target:this})}})}))),!1)),function(){f.forEach((function(e){return e()}))}}(e),u=function(e){var t=e.mediaInteractionCb,n=e.blockClass,i=e.mirror,r=e.sampling,a=function(e){return oe((function(r){var a=ke(r);if(a&&!ue(a,n)){var o=a,s=o.currentTime,c=o.volume,d=o.muted;t({type:e,id:i.getId(a),currentTime:s,volume:c,muted:d})}}),r.media||500)},o=[ie("play",a(0)),ie("pause",a(1)),ie("seeked",a(2)),ie("volumechange",a(3))];return function(){o.forEach((function(e){return e()}))}}(e),h=function(e,t){var n=e.styleSheetRuleCb,i=e.mirror,r=t.win;if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return function(){};var a=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=function(e,t){var r=i.getId(this.ownerNode);return-1!==r&&n({id:r,adds:[{rule:e,index:t}]}),a.apply(this,arguments)};var o=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=function(e){var t=i.getId(this.ownerNode);return-1!==t&&n({id:t,removes:[{index:e}]}),o.apply(this,arguments)};var s={};Te?s.CSSGroupingRule=r.CSSGroupingRule:(we&&(s.CSSMediaRule=r.CSSMediaRule),Ne&&(s.CSSConditionRule=r.CSSConditionRule),be&&(s.CSSSupportsRule=r.CSSSupportsRule));var c={};return Object.entries(s).forEach((function(e){var t=w(e,2),r=t[0],a=t[1];c[r]={insertRule:a.prototype.insertRule,deleteRule:a.prototype.deleteRule},a.prototype.insertRule=function(e,t){var a=i.getId(this.parentStyleSheet.ownerNode);return-1!==a&&n({id:a,adds:[{rule:e,index:b(b([],w(Me(this)),!1),[t||0],!1)}]}),c[r].insertRule.apply(this,arguments)},a.prototype.deleteRule=function(e){var t=i.getId(this.parentStyleSheet.ownerNode);return-1!==t&&n({id:t,removes:[{index:b(b([],w(Me(this)),!1),[e],!1)}]}),c[r].deleteRule.apply(this,arguments)}})),function(){r.CSSStyleSheet.prototype.insertRule=a,r.CSSStyleSheet.prototype.deleteRule=o,Object.entries(s).forEach((function(e){var t=w(e,2),n=t[0],i=t[1];i.prototype.insertRule=c[n].insertRule,i.prototype.deleteRule=c[n].deleteRule}))}}(e,{win:r}),A=function(e,t){var n=e.styleDeclarationCb,i=e.mirror,r=t.win,a=r.CSSStyleDeclaration.prototype.setProperty;r.CSSStyleDeclaration.prototype.setProperty=function(e,t,r){var o,s,c=i.getId(null===(s=null===(o=this.parentRule)||void 0===o?void 0:o.parentStyleSheet)||void 0===s?void 0:s.ownerNode);return-1!==c&&n({id:c,set:{property:e,value:t,priority:r},index:Me(this.parentRule)}),a.apply(this,arguments)};var o=r.CSSStyleDeclaration.prototype.removeProperty;return r.CSSStyleDeclaration.prototype.removeProperty=function(e){var t,r,a=i.getId(null===(r=null===(t=this.parentRule)||void 0===t?void 0:t.parentStyleSheet)||void 0===r?void 0:r.ownerNode);return-1!==a&&n({id:a,remove:{property:e},index:Me(this.parentRule)}),o.apply(this,arguments)},function(){r.CSSStyleDeclaration.prototype.setProperty=a,r.CSSStyleDeclaration.prototype.removeProperty=o}}(e,{win:r}),p=e.collectFonts?function(e){var t=e.fontCb,n=e.doc,i=n.defaultView;if(!i)return function(){};var r=[],a=new WeakMap,o=i.FontFace;i.FontFace=function(e,t,n){var i=new o(e,t,n);return a.set(i,{family:e,buffer:"string"!==typeof t,descriptors:n,fontSource:"string"===typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),i};var s=ce(n.fonts,"add",(function(e){return function(n){return setTimeout((function(){var e=a.get(n);e&&(t(e),a.delete(n))}),0),e.apply(this,[n])}}));return r.push((function(){i.FontFace=o})),r.push(s),function(){r.forEach((function(e){return e()}))}}(e):function(){},f=[];try{for(var g=T(e.plugins),_=g.next();!_.done;_=g.next()){var m=_.value;f.push(m.observer(m.callback,r,m.options))}}catch(E){n={error:E}}finally{try{_&&!_.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}return function(){Re.forEach((function(e){return e.reset()})),a.disconnect(),o(),s(),c(),d(),l(),u();try{h(),A()}catch(e){}p(),f.forEach((function(e){return e()}))}}var Pe=function(){function e(e){this.iframes=new WeakMap,this.mutationCb=e.mutationCb}return e.prototype.addIframe=function(e){this.iframes.set(e,!0)},e.prototype.addLoadListener=function(e){this.loadListener=e},e.prototype.attachIframe=function(e,t){var n;this.mutationCb({adds:[{parentId:e.__sn.id,nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,e)},e}(),Fe=function(){function e(e){this.restorePatches=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror;var t=this;this.restorePatches.push(ce(HTMLElement.prototype,"attachShadow",(function(e){return function(){var n=e.apply(this,arguments);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,this.ownerDocument),n}})))}return e.prototype.addShadowRoot=function(e,t){Oe(R(R({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e),Be(R(R({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))},e.prototype.observeAttachShadow=function(e){if(e.contentWindow){var t=this;this.restorePatches.push(ce(e.contentWindow.HTMLElement.prototype,"attachShadow",(function(n){return function(){var i=n.apply(this,arguments);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,e.contentDocument),i}})))}},e.prototype.reset=function(){this.restorePatches.forEach((function(e){return e()}))},e}();for(var Ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",je="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Ve=0;Ve<Ge.length;Ve++)je[Ge.charCodeAt(Ve)]=Ve;var Ye=new Map;var He=function(e,t,n){if(e&&(ze(e,t)||"object"===typeof e)){var i=function(e,t){var n=Ye.get(e);return n||(n=new Map,Ye.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name),r=i.indexOf(e);return-1===r&&(r=i.length,i.push(e)),r}};function Ke(e,t,n){if(e instanceof Array)return e.map((function(e){return Ke(e,t,n)}));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){var i=e.constructor.name,r=function(e){var t,n=new Uint8Array(e),i=n.length,r="";for(t=0;t<i;t+=3)r+=Ge[n[t]>>2],r+=Ge[(3&n[t])<<4|n[t+1]>>4],r+=Ge[(15&n[t+1])<<2|n[t+2]>>6],r+=Ge[63&n[t+2]];return i%3===2?r=r.substring(0,r.length-1)+"=":i%3===1&&(r=r.substring(0,r.length-2)+"=="),r}(e);return{rr_type:i,base64:r}}return e instanceof DataView?{rr_type:e.constructor.name,args:[Ke(e.buffer,t,n),e.byteOffset,e.byteLength]}:e instanceof HTMLImageElement?{rr_type:e.constructor.name,src:e.src}:e instanceof ImageData?{rr_type:e.constructor.name,args:[Ke(e.data,t,n),e.width,e.height]}:ze(e,t)||"object"===typeof e?{rr_type:e.constructor.name,index:He(e,t,n)}:e}var We=function(e,t,n){return b([],w(e),!1).map((function(e){return Ke(e,t,n)}))},ze=function(e,t){var n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((function(e){return"function"===typeof t[e]}));return Boolean(n.find((function(n){return e instanceof t[n]})))};function qe(e,t,n,i,r,a){var o,s,c=[],d=Object.getOwnPropertyNames(e),l=function(o){try{if("function"!==typeof e[o])return"continue";var s=ce(e,o,(function(s){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var l=s.apply(this,c);if(He(l,a,e),!ue(this.canvas,i)){r.getId(this.canvas);var u=We(b([],w(c),!1),a,e),h={type:t,property:o,args:u};n(this.canvas,h)}return l}}));c.push(s)}catch(l){var d=se(e,o,{set:function(e){n(this.canvas,{type:t,property:o,args:[e],setter:!0})}});c.push(d)}};try{for(var u=T(d),h=u.next();!h.done;h=u.next()){l(h.value)}}catch(A){o={error:A}}finally{try{h&&!h.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}return c}var Je,Xe,Ze=function(){function e(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=function(e,t){!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)},this.mutationCb=e.mutationCb,this.mirror=e.mirror,!0===e.recordCanvas&&this.initCanvasMutationObserver(e.win,e.blockClass)}return e.prototype.reset=function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()},e.prototype.freeze=function(){this.frozen=!0},e.prototype.unfreeze=function(){this.frozen=!1},e.prototype.lock=function(){this.locked=!0},e.prototype.unlock=function(){this.locked=!1},e.prototype.initCanvasMutationObserver=function(e,t){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var n=function(e,t){var n=[];try{var i=ce(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(n){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return ue(this,t)||"__context"in this||(this.__context=n),e.apply(this,b([n],w(i),!1))}}));n.push(i)}catch(r){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){n.forEach((function(e){return e()}))}}(e,t),i=function(e,t,n,i){var r,a,o=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype),c=function(i){try{if("function"!==typeof t.CanvasRenderingContext2D.prototype[i])return"continue";var r=ce(t.CanvasRenderingContext2D.prototype,i,(function(t){return function(){for(var r=this,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return ue(this.canvas,n)||setTimeout((function(){var t=b([],w(a),!1);if("drawImage"===i&&t[0]&&t[0]instanceof HTMLCanvasElement){var n=t[0],o=n.getContext("2d"),s=null===o||void 0===o?void 0:o.getImageData(0,0,n.width,n.height),c=null===s||void 0===s?void 0:s.data;t[0]=JSON.stringify(c)}e(r.canvas,{type:H["2D"],property:i,args:t})}),0),t.apply(this,a)}}));o.push(r)}catch(s){var a=se(t.CanvasRenderingContext2D.prototype,i,{set:function(t){e(this.canvas,{type:H["2D"],property:i,args:[t],setter:!0})}});o.push(a)}};try{for(var d=T(s),l=d.next();!l.done;l=d.next())c(l.value)}catch(u){r={error:u}}finally{try{l&&!l.done&&(a=d.return)&&a.call(d)}finally{if(r)throw r.error}}return function(){o.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,this.mirror),r=function(e,t,n,i){var r=[];return r.push.apply(r,b([],w(qe(t.WebGLRenderingContext.prototype,H.WebGL,e,n,i,t)),!1)),"undefined"!==typeof t.WebGL2RenderingContext&&r.push.apply(r,b([],w(qe(t.WebGL2RenderingContext.prototype,H.WebGL2,e,n,i,t)),!1)),function(){r.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,this.mirror);this.resetObservers=function(){n(),i(),r()}},e.prototype.startPendingCanvasMutationFlusher=function(){var e=this;requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))},e.prototype.startRAFTimestamping=function(){var e=this,t=function(n){e.rafStamps.latestId=n,requestAnimationFrame(t)};requestAnimationFrame(t)},e.prototype.flushPendingCanvasMutations=function(){var e=this;this.pendingCanvasMutations.forEach((function(t,n){var i=e.mirror.getId(n);e.flushPendingCanvasMutationFor(n,i)})),requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))},e.prototype.flushPendingCanvasMutationFor=function(e,t){if(!this.frozen&&!this.locked){var n=this.pendingCanvasMutations.get(e);if(n&&-1!==t){var i=n.map((function(e){e.type;var t=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["type"]);return t})),r=n[0].type;this.mutationCb({id:t,type:r,commands:i}),this.pendingCanvasMutations.delete(e)}}},e}();function $e(e){return R(R({},e),{timestamp:Date.now()})}var et={map:{},getId:function(e){return e&&e.__sn?e.__sn.id:-1},getNode:function(e){return this.map[e]||null},removeNodeFromMap:function(e){var t=this,n=e.__sn&&e.__sn.id;delete this.map[n],e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},has:function(e){return this.map.hasOwnProperty(e)},reset:function(){this.map={}}};function tt(e){void 0===e&&(e={});var t=e.emit,n=e.checkoutEveryNms,i=e.checkoutEveryNth,r=e.blockClass,a=void 0===r?"rr-block":r,o=e.blockSelector,s=void 0===o?null:o,c=e.unblockSelector,d=void 0===c?null:c,l=e.ignoreClass,u=void 0===l?"rr-ignore":l,h=e.ignoreSelector,A=void 0===h?null:h,p=e.maskTextClass,f=void 0===p?"rr-mask":p,g=e.maskTextSelector,_=void 0===g?null:g,m=e.maskInputSelector,E=void 0===m?null:m,I=e.unmaskTextSelector,v=void 0===I?null:I,C=e.unmaskInputSelector,y=void 0===C?null:C,S=e.inlineStylesheet,b=void 0===S||S,N=e.maskAllInputs,k=e.maskInputOptions,O=e.slimDOMOptions,D=e.maskInputFn,B=e.maskTextFn,L=e.hooks,U=e.packFn,x=e.sampling,M=void 0===x?{}:x,Q=e.mousemoveWait,P=e.recordCanvas,F=void 0!==P&&P,G=e.userTriggeredOnInput,Y=void 0!==G&&G,H=e.collectFonts,K=void 0!==H&&H,W=e.inlineImages,z=void 0!==W&&W,q=e.plugins,J=e.keepIframeSrcFn,X=void 0===J?function(){return!1}:J;if(!t)throw new Error("emit function is required");void 0!==Q&&void 0===M.mousemove&&(M.mousemove=Q);var Z,$,ee=!0===N?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==k?k:{password:!0},te=!0===O||"all"===O?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===O,headMetaDescKeywords:"all"===O}:O||{};void 0===Z&&(Z=window),"NodeList"in Z&&!Z.NodeList.prototype.forEach&&(Z.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in Z&&!Z.DOMTokenList.prototype.forEach&&(Z.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(e){if(!(0 in arguments))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1});var re=0;Je=function(e,r){var a;if(!(null===(a=Re[0])||void 0===a?void 0:a.isFrozen())||e.type===j.FullSnapshot||e.type===j.IncrementalSnapshot&&e.data.source===V.Mutation||Re.forEach((function(e){return e.unfreeze()})),t(function(e){var t,n;try{for(var i=T(q||[]),r=i.next();!r.done;r=i.next()){var a=r.value;a.eventProcessor&&(e=a.eventProcessor(e))}}catch(o){t={error:o}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return U&&(e=U(e)),e}(e),r),e.type===j.FullSnapshot)$=e,re=0;else if(e.type===j.IncrementalSnapshot){if(e.data.source===V.Mutation&&e.data.isAttachIframe)return;re++;var o=i&&re>=i,s=n&&e.timestamp-$.timestamp>n;(o||s)&&Xe(!0)}};var ae=function(e){Je($e({type:j.IncrementalSnapshot,data:R({source:V.Mutation},e)}))},oe=function(e){return Je($e({type:j.IncrementalSnapshot,data:R({source:V.Scroll},e)}))},se=function(e){return Je($e({type:j.IncrementalSnapshot,data:R({source:V.CanvasMutation},e)}))},ce=new Pe({mutationCb:ae}),ue=new Ze({recordCanvas:F,mutationCb:se,win:window,blockClass:a,mirror:et}),he=new Fe({mutationCb:ae,scrollCb:oe,bypassOptions:{blockClass:a,blockSelector:s,unblockSelector:d,maskTextClass:f,maskTextSelector:_,unmaskTextSelector:v,maskInputSelector:E,unmaskInputSelector:y,inlineStylesheet:b,maskInputOptions:ee,maskTextFn:B,maskInputFn:D,recordCanvas:F,inlineImages:z,sampling:M,slimDOMOptions:te,iframeManager:ce,canvasManager:ue},mirror:et});Xe=function(e){var t,n,i,r;void 0===e&&(e=!1),Je($e({type:j.Meta,data:{href:window.location.href,width:le(),height:de()}}),e),Re.forEach((function(e){return e.lock()}));var o=w(function(e,t){var n=t||{},i=n.blockClass,r=void 0===i?"rr-block":i,a=n.blockSelector,o=void 0===a?null:a,s=n.unblockSelector,c=void 0===s?null:s,d=n.maskTextClass,l=void 0===d?"rr-mask":d,u=n.maskTextSelector,h=void 0===u?null:u,A=n.unmaskTextSelector,p=void 0===A?null:A,f=n.inlineStylesheet,g=void 0===f||f,_=n.inlineImages,m=void 0!==_&&_,E=n.recordCanvas,I=void 0!==E&&E,v=n.maskInputSelector,C=void 0===v?null:v,y=n.unmaskInputSelector,S=void 0===y?null:y,R=n.maskAllInputs,T=void 0!==R&&R,w=n.maskTextFn,b=n.maskInputFn,N=n.slimDOM,k=void 0!==N&&N,O=n.dataURLOptions,D=n.preserveWhiteSpace,B=n.onSerialize,L=n.onIframeLoad,U=n.iframeLoadTimeout,x=n.keepIframeSrcFn,M={};return[ne(e,{doc:e,map:M,blockClass:r,blockSelector:o,unblockSelector:c,maskTextClass:l,maskTextSelector:h,unmaskTextSelector:p,skipChild:!1,inlineStylesheet:g,maskInputSelector:C,unmaskInputSelector:S,maskInputOptions:!0===T?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===T?{password:!0}:T,maskTextFn:w,maskInputFn:b,slimDOMOptions:!0===k||"all"===k?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===k,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===k?{}:k,dataURLOptions:O,inlineImages:m,recordCanvas:I,preserveWhiteSpace:D,onSerialize:B,onIframeLoad:L,iframeLoadTimeout:U,keepIframeSrcFn:void 0===x?function(){return!1}:x}),M]}(document,{blockClass:a,blockSelector:s,unblockSelector:d,maskTextClass:f,maskTextSelector:_,unmaskTextSelector:v,maskInputSelector:E,unmaskInputSelector:y,inlineStylesheet:b,maskAllInputs:ee,maskTextFn:B,slimDOM:te,recordCanvas:F,inlineImages:z,onSerialize:function(e){fe(e)&&ce.addIframe(e),ge(e)&&he.addShadowRoot(e.shadowRoot,document)},onIframeLoad:function(e,t){ce.attachIframe(e,t),he.observeAttachShadow(e)},keepIframeSrcFn:X}),2),c=o[0],l=o[1];if(!c)return console.warn("Failed to snapshot the document");et.map=l,Je($e({type:j.FullSnapshot,data:{node:c,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(n=null===(t=null===document||void 0===document?void 0:document.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===document||void 0===document?void 0:document.body.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(r=null===(i=null===document||void 0===document?void 0:document.body)||void 0===i?void 0:i.parentElement)||void 0===r?void 0:r.scrollTop)||(null===document||void 0===document?void 0:document.body.scrollTop)||0}}})),Re.forEach((function(e){return e.unlock()}))};try{var Ae=[];Ae.push(ie("DOMContentLoaded",(function(){Je($e({type:j.DomContentLoaded,data:{}}))})));var pe=function(e){var t;return Qe({mutationCb:ae,mousemoveCb:function(e,t){return Je($e({type:j.IncrementalSnapshot,data:{source:t,positions:e}}))},mouseInteractionCb:function(e){return Je($e({type:j.IncrementalSnapshot,data:R({source:V.MouseInteraction},e)}))},scrollCb:oe,viewportResizeCb:function(e){return Je($e({type:j.IncrementalSnapshot,data:R({source:V.ViewportResize},e)}))},inputCb:function(e){return Je($e({type:j.IncrementalSnapshot,data:R({source:V.Input},e)}))},mediaInteractionCb:function(e){return Je($e({type:j.IncrementalSnapshot,data:R({source:V.MediaInteraction},e)}))},styleSheetRuleCb:function(e){return Je($e({type:j.IncrementalSnapshot,data:R({source:V.StyleSheetRule},e)}))},styleDeclarationCb:function(e){return Je($e({type:j.IncrementalSnapshot,data:R({source:V.StyleDeclaration},e)}))},canvasMutationCb:se,fontCb:function(e){return Je($e({type:j.IncrementalSnapshot,data:R({source:V.Font},e)}))},blockClass:a,ignoreClass:u,ignoreSelector:A,maskTextClass:f,maskTextSelector:_,unmaskTextSelector:v,maskInputSelector:E,unmaskInputSelector:y,maskInputOptions:ee,inlineStylesheet:b,sampling:M,recordCanvas:F,inlineImages:z,userTriggeredOnInput:Y,collectFonts:K,doc:e,maskInputFn:D,maskTextFn:B,blockSelector:s,unblockSelector:d,slimDOMOptions:te,mirror:et,iframeManager:ce,shadowDomManager:he,canvasManager:ue,plugins:(null===(t=null===q||void 0===q?void 0:q.filter((function(e){return e.observer})))||void 0===t?void 0:t.map((function(e){return{observer:e.observer,options:e.options,callback:function(t){return Je($e({type:j.Plugin,data:{plugin:e.name,payload:t}}))}}})))||[]},L)};ce.addLoadListener((function(e){try{Ae.push(pe(e.contentDocument))}catch(t){console.warn(t)}}));var _e=function(){Xe(),Ae.push(pe(document))};return"interactive"===document.readyState||"complete"===document.readyState?_e():Ae.push(ie("load",(function(){Je($e({type:j.Load,data:{}})),_e()}),window)),function(){Ae.forEach((function(e){return e()}))}}catch(me){console.warn(me)}}tt.addCustomEvent=function(e,t){if(!Je)throw new Error("please add custom event after start recording");Je($e({type:j.Custom,data:{tag:e,payload:t}}))},tt.freezePage=function(){Re.forEach((function(e){return e.freeze()}))},tt.takeFullSnapshot=function(e){if(!Xe)throw new Error("please take full snapshot after start recording");Xe(e)},tt.mirror=et;const nt=["name","type","startTime","transferSize","duration"];function it(e){return function(t){return nt.every((n=>e[n]===t[n]))}}function rt(e){const t=new PerformanceObserver((t=>{const n=function(e,t){const[n,i,r]=e.reduce(((e,t)=>("navigation"===t.entryType?e[0].push(t):"largest-contentful-paint"===t.entryType?e[1].push(t):e[2].push(t),e)),[[],[],[]]),a=[],o=[];let s=i.length?i[i.length-1]:void 0;return t.forEach((e=>{if("largest-contentful-paint"!==e.entryType)if("navigation"!==e.entryType)a.push(e);else{const t=e;e.duration>0&&!n.find(it(t))&&!o.find(it(t))&&o.push(t)}else(!s||s.startTime<e.startTime)&&(s=e)})),[...s?[s]:[],...n,...r,...a,...o].sort(((e,t)=>e.startTime-t.startTime))}(e.performanceEvents,t.getEntries());e.performanceEvents=n}));return["element","event","first-input","largest-contentful-paint","layout-shift","longtask","navigation","paint","resource"].forEach((e=>{try{t.observe({type:e,buffered:!0})}catch(n){}})),t}class at{constructor(){this.events=[]}get hasEvents(){return this.events.length>0}destroy(){this.events=[]}async addEvent(e,t){t?this.events=[e]:this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.events=[],e(JSON.stringify(t))}))}}class ot{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.log("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((i,r)=>{const a=({data:t})=>{const o=t;if(o.method===e&&o.id===n){if(this._worker.removeEventListener("message",a),!o.success)return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.error("[Replay]",o.response),void r(new Error("Error in compression worker"));i(o.response)}};this._worker.addEventListener("message",a),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class st{constructor(e){this._worker=new ot(e),this.hasEvents=!1}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}async addEvent(e,t){return this.hasEvents=!0,t&&await this._clear(),this._sendEventToWorker(e)}finish(){return this._finishRequest()}_sendEventToWorker(e){return this._worker.postMessage("addEvent",JSON.stringify(e))}async _finishRequest(){const e=await this._worker.postMessage("finish");return this.hasEvents=!1,e}_clear(){return this._worker.postMessage("clear")}}class ct{constructor(e){this._fallback=new at,this._compression=new st(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get hasEvents(){return this._used.hasEvents}destroy(){this._fallback.destroy(),this._compression.destroy()}addEvent(e,t){return this._used.addEvent(e,t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.log("[Replay] Failed to load the compression worker, falling back to simple buffer"))}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e}=this._fallback,t=[];for(const i of e)t.push(this._compression.addEvent(i));this._used=this._compression;try{await Promise.all(t)}catch(n){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.warn("[Replay] Failed to add events when switching buffers.",n)}}}function dt(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function lt(e,t,n=+new Date){return dt(e.started,y,n)||dt(e.lastActivity,t,n)}function ut(e){if("sessionStorage"in _)try{_.sessionStorage.setItem(m,JSON.stringify(e))}catch(t){}}function ht(e){return void 0!==e&&Math.random()<e}function At(e){const t=(new Date).getTime();return{id:e.id||Object(d.b)(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled}}function pt({sessionSampleRate:e,errorSampleRate:t,stickySession:n=!1}){const i=function(e,t){return ht(e)?"session":!!ht(t)&&"error"}(e,t),r=At({sampled:i});return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.log(`[Replay] Creating new session: ${r.id}`),n&&ut(r),r}function ft({expiry:e,currentSession:t,stickySession:n,sessionSampleRate:i,errorSampleRate:r}){const a=t||n&&function(){if(!("sessionStorage"in _))return null;try{const e=_.sessionStorage.getItem(m);return e?At(JSON.parse(e)):null}catch(e){return null}}();if(a){if(!lt(a,e))return{type:"saved",session:a};if("error"===a.sampled){return{type:"new",session:At({sampled:!1})}}("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.log("[Replay] Session has expired")}return{type:"new",session:pt({stickySession:n,sessionSampleRate:i,errorSampleRate:r})}}async function gt(e,t,n){if(!e.eventBuffer)return null;if(e.isPaused())return null;const i=t.timestamp>9999999999?t.timestamp:1e3*t.timestamp;if(i+v<(new Date).getTime())return null;const r=e.getContext().earliestEvent;e.session&&0===e.session.segmentId&&(!r||i<r)&&(e.getContext().earliestEvent=i);try{return await e.eventBuffer.addEvent(t,n)}catch(a){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.error(a),e.stop()}}function _t(e){return{timestamp:(new Date).getTime()/1e3,type:"default",...e}}function mt(e,t){"sentry.transaction"!==t.category&&("ui.click"===t.category?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(gt(e,{type:j.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:t}}),"console"===t.category))))}const Et=e=>t=>{if(!e.isEnabled())return;const n=function(e){let t,n;try{n=function(e){if(t=e.event,t.target)return e.event.target;var t;return e.event}(e),t=Object(l.a)(n)}catch(i){t="<unknown>"}if(0===t.length)return null;return _t({category:`ui.${e.name}`,message:t,data:{...n?{nodeId:tt.mirror.getId(n)}:{}}})}(t);n&&mt(e,n)};function It(e,t){return t.map((({type:t,start:n,end:i,name:r,data:a})=>gt(e,{type:j.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:r,startTimestamp:n,endTimestamp:i,data:a}}})))}function vt(e,t){return("undefined"!==typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__||!e.getOptions()._experiments.traceInternals)&&!function(e){const t=Object(i.a)().getClient(),n=t&&t.getDsn();return!!n&&e.includes(n.host)}(t)}function Ct(e){return t=>{if(t.type===E)return delete t.breadcrumbs,t;if(function(e){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length)&&e.exception.values.some((e=>!!(e.stacktrace&&e.stacktrace.frames&&e.stacktrace.frames.length)&&e.stacktrace.frames.some((e=>e.filename&&e.filename.includes("/rrweb/src/")))))}(t)&&!e.getOptions()._experiments.captureExceptions)return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.log("[Replay] Ignoring error from rrweb internals",t),null;if(t.type&&"session"!==e.recordingMode||(t.tags={...t.tags,replayId:e.getSessionId()}),"transaction"===t.type&&t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id)return e.getContext().traceIds.add(t.contexts.trace.trace_id),t;if(t.type||e.getContext().errorIds.add(t.event_id),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&e.getOptions()._experiments.traceInternals){const e=function(e){return{type:"Unknown",value:"n/a",...e.exception&&e.exception.values&&e.exception.values[0]}}(t);!function(e){const{category:t,level:n,message:i,...a}=e;Object(r.a)({category:t||"console",level:n||"debug",message:`[debug]: ${i}`,...a})}({message:`Tagging event (${t.event_id}) - ${t.message} - ${e.type}: ${e.value}`})}return"error"===e.recordingMode&&t.exception&&t.message!==I&&setTimeout((async()=>{await e.flushImmediate(),e.stopRecording()&&(e.recordingMode="session",e.startRecording())})),t}}function yt(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,i=(new Date).getTime()/1e3;return{type:"navigation.push",start:i,end:i,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(It(e,[n]),!1))))}}let St=null;const Rt=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(St===t||!t)return null;if(St=t,t.category&&(["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui.")))return null;return _t(t)}(t);n&&mt(e,n)};function Tt(e){const t=Object(i.a)().getScope();t&&t.addScopeListener(Rt(e)),Object(u.a)("dom",Et(e)),Object(u.a)("fetch",function(e){return t=>{if(!e.isEnabled())return;const n=function(e){if(!e.endTimestamp)return null;const{startTimestamp:t,endTimestamp:n,fetchData:i,response:r}=e;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:i.url,data:{method:i.method,statusCode:r.status}}}(t);null!==n&&(vt(e,n.name)||e.addUpdate((()=>(It(e,[n]),!0))))}}(e)),Object(u.a)("xhr",function(e){return t=>{if(!e.isEnabled())return;const n=function(e){if(e.xhr.__sentry_own_request__)return null;if(e.startTimestamp&&(e.xhr.__sentry_xhr__=e.xhr.__sentry_xhr__||{},e.xhr.__sentry_xhr__.startTimestamp=e.startTimestamp),!e.endTimestamp)return null;const{method:t,url:n,status_code:i}=e.xhr.__sentry_xhr__||{};return void 0===n?null:{type:"resource.xhr",name:n,start:(e.xhr.__sentry_xhr__?e.xhr.__sentry_xhr__.startTimestamp||0:e.endTimestamp)/1e3,end:e.endTimestamp/1e3,data:{method:t,statusCode:i}}}(t);null!==n&&(vt(e,n.name)||e.addUpdate((()=>(It(e,[n]),!0))))}}(e)),Object(u.a)("history",yt(e)),Object(a.b)(Ct(e))}function wt(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:i}=e,r=(new Date).getTime()/1e3;return{type:"memory",name:"memory",start:r,end:r,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:i}}}}const bt={resource:function(e){const{entryType:t,initiatorType:n,name:i,responseEnd:r,startTime:a,encodedBodySize:o,transferSize:s}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:kt(a),end:kt(r),name:i,data:{size:s,encodedBodySize:o}}},paint:function(e){const{duration:t,entryType:n,name:i,startTime:r}=e,a=kt(r);return{type:n,name:i,start:a,end:a+t}},navigation:function(e){const{entryType:t,name:n,duration:i,domComplete:r,startTime:a,transferSize:o,type:s}=e;if(0===i)return null;return{type:`${t}.${s}`,start:kt(a),end:kt(r),name:n,data:{size:o,duration:i}}},"largest-contentful-paint":function(e){const{duration:t,entryType:n,startTime:i,size:r}=e,a=kt(i);return{type:n,name:n,start:a,end:a+t,data:{duration:t,size:r,nodeId:tt.mirror.getId(e.element)}}}};function Nt(e){return void 0===bt[e.entryType]?null:bt[e.entryType](e)}function kt(e){return((h.a||_.performance.timeOrigin)+e)/1e3}let Ot;async function Dt({recordingData:e,replayId:t,segmentId:n,includeReplayStartTimestamp:r,eventContext:a,timestamp:s,session:d,options:l}){const u=function({recordingData:e,headers:t}){let n;const i=`${JSON.stringify(t)}\n`;if("string"===typeof e)n=`${i}${e}`;else{const t=(new TextEncoder).encode(i);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:h,errorIds:f,traceIds:g,initialTimestamp:_}=a,m=Object(i.a)(),v=m.getClient(),C=m.getScope(),y=v&&v.getTransport(),S=v&&v.getDsn();if(!v||!C||!y||!S||!d.sampled)return;const R={type:E,...r?{replay_start_timestamp:_/1e3}:{},timestamp:s/1e3,error_ids:f,trace_ids:g,urls:h,replay_id:t,segment_id:n,replay_type:d.sampled},T=await async function({client:e,scope:t,replayId:n,event:i}){const r=await Object(o.a)(e.getOptions(),i,{event_id:n},t);if(!r)return null;r.platform=r.platform||"javascript";const a=e.getSdkMetadata&&e.getSdkMetadata(),{name:s,version:c}=a&&a.sdk||{};return r.sdk={...r.sdk,name:s||"sentry.javascript.unknown",version:c||"0.0.0"},r}({scope:C,client:v,replayId:t,event:R});if(!T)return v.recordDroppedEvent("event_processor","replay",R),void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.log("An event processor returned `null`, will not send event."));T.contexts={...T.contexts,replay:{...T.contexts&&T.contexts.replay,session_sample_rate:l.sessionSampleRate,error_sample_rate:l.errorSampleRate}};const w=function(e,t,n,i){return Object(A.a)(Object(A.b)(e,Object(A.c)(e),i,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"===typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(T,u,S,v.getOptions().tunnel);let b;try{b=await y.send(w)}catch(k){throw new Error(I)}if(!b)return b;const N=Object(p.c)({},b);if(Object(p.b)(N,"replay"))throw new Bt(N);if("number"===typeof b.statusCode&&(b.statusCode<200||b.statusCode>=300))throw new Lt(b.statusCode);return b}class Bt extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}class Lt extends Error{constructor(e){super(`Transport returned status code ${e}`)}}async function Ut(e,t={count:0,interval:5e3}){const{recordingData:n,options:i}=e;if(n.length)try{return await Dt(e),!0}catch(a){if(a instanceof Bt||a instanceof Lt)throw a;if(Object(r.c)("Replays",{_retryCount:t.count}),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i._experiments&&i._experiments.captureExceptions&&Object(r.b)(a),t.count>=3)throw new Error("Unable to send Replay - max retries exceeded");return t.interval*=++t.count,await new Promise(((n,i)=>{setTimeout((async()=>{try{await Ut(e,t),n(!0)}catch(a){i(a)}}),t.interval)}))}}class xt{__init(){this.eventBuffer=null}__init2(){this.performanceEvents=[]}__init3(){this.recordingMode="session"}__init4(){this._performanceObserver=null}__init5(){this._flushLock=null}__init6(){this._lastActivity=(new Date).getTime()}__init7(){this._isEnabled=!1}__init8(){this._isPaused=!1}__init9(){this._hasInitializedCoreListeners=!1}__init10(){this._stopRecording=null}__init11(){this._context={errorIds:new Set,traceIds:new Set,urls:[],earliestEvent:null,initialTimestamp:(new Date).getTime(),initialUrl:""}}constructor({options:e,recordingOptions:t}){xt.prototype.__init.call(this),xt.prototype.__init2.call(this),xt.prototype.__init3.call(this),xt.prototype.__init4.call(this),xt.prototype.__init5.call(this),xt.prototype.__init6.call(this),xt.prototype.__init7.call(this),xt.prototype.__init8.call(this),xt.prototype.__init9.call(this),xt.prototype.__init10.call(this),xt.prototype.__init11.call(this),xt.prototype.__init12.call(this),xt.prototype.__init13.call(this),xt.prototype.__init14.call(this),xt.prototype.__init15.call(this),xt.prototype.__init16.call(this),this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let i,r,a;const o=n&&n.maxWait?Math.max(n.maxWait,t):0;function s(){return c(),i=e(),i}function c(){void 0!==r&&clearTimeout(r),void 0!==a&&clearTimeout(a),r=a=void 0}function d(){return r&&clearTimeout(r),r=setTimeout(s,t),o&&void 0===a&&o!==t&&(a=setTimeout(s,o)),i}return d.cancel=c,d.flush=function(){return void 0!==r||void 0!==a?s():i},d}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay})}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}getOptions(){return this._options}start(){this._setInitialState(),this._loadAndCheckSession()&&(this.session?this.session.sampled&&("error"===this.session.sampled&&(this.recordingMode="error"),this._updateSessionActivity(),this.eventBuffer=function({useCompression:e}){if(e&&window.Worker)try{const e=new Blob(['/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */\nfunction t(t){let e=t.length;for(;--e>=0;)t[e]=0}const e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),a=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),n=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576);t(s);const r=new Array(60);t(r);const o=new Array(512);t(o);const l=new Array(256);t(l);const h=new Array(29);t(h);const d=new Array(30);function _(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}let f,c,u;function w(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}t(d);const m=t=>t<256?o[t]:o[256+(t>>>7)],b=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},g=(t,e,a)=>{t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},p=(t,e,a)=>{g(t,a[2*e],a[2*e+1])},k=(t,e)=>{let a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},v=(t,e,a)=>{const i=new Array(16);let n,s,r=0;for(n=1;n<=15;n++)r=r+a[n-1]<<1,i[n]=r;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=k(i[e]++,e))}},y=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},x=t=>{t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},z=(t,e,a,i)=>{const n=2*e,s=2*a;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[a]},A=(t,e,a)=>{const i=t.heap[a];let n=a<<1;for(;n<=t.heap_len&&(n<t.heap_len&&z(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!z(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i},E=(t,i,n)=>{let s,r,o,_,f=0;if(0!==t.sym_next)do{s=255&t.pending_buf[t.sym_buf+f++],s+=(255&t.pending_buf[t.sym_buf+f++])<<8,r=t.pending_buf[t.sym_buf+f++],0===s?p(t,r,i):(o=l[r],p(t,o+256+1,i),_=e[o],0!==_&&(r-=h[o],g(t,r,_)),s--,o=m(s),p(t,o,n),_=a[o],0!==_&&(s-=d[o],g(t,s,_)))}while(f<t.sym_next);p(t,256,i)},R=(t,e)=>{const a=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,s=e.stat_desc.elems;let r,o,l,h=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<s;r++)0!==a[2*r]?(t.heap[++t.heap_len]=h=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=h<2?++h:0,a[2*l]=1,t.depth[l]=0,t.opt_len--,n&&(t.static_len-=i[2*l+1]);for(e.max_code=h,r=t.heap_len>>1;r>=1;r--)A(t,a,r);l=s;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],A(t,a,1),o=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=o,a[2*l]=a[2*r]+a[2*o],t.depth[l]=(t.depth[r]>=t.depth[o]?t.depth[r]:t.depth[o])+1,a[2*r+1]=a[2*o+1]=l,t.heap[1]=l++,A(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const a=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let h,d,_,f,c,u,w=0;for(f=0;f<=15;f++)t.bl_count[f]=0;for(a[2*t.heap[t.heap_max]+1]=0,h=t.heap_max+1;h<573;h++)d=t.heap[h],f=a[2*a[2*d+1]+1]+1,f>l&&(f=l,w++),a[2*d+1]=f,d>i||(t.bl_count[f]++,c=0,d>=o&&(c=r[d-o]),u=a[2*d],t.opt_len+=u*(f+c),s&&(t.static_len+=u*(n[2*d+1]+c)));if(0!==w){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,w-=2}while(w>0);for(f=l;0!==f;f--)for(d=t.bl_count[f];0!==d;)_=t.heap[--h],_>i||(a[2*_+1]!==f&&(t.opt_len+=(f-a[2*_+1])*a[2*_],a[2*_+1]=f),d--)}})(t,e),v(a,h,t.bl_count)},Z=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=r,r=e[2*(i+1)+1],++o<l&&n===r||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4))},U=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),i=0;i<=a;i++)if(n=r,r=e[2*(i+1)+1],!(++o<l&&n===r)){if(o<h)do{p(t,n,t.bl_tree)}while(0!=--o);else 0!==n?(n!==s&&(p(t,n,t.bl_tree),o--),p(t,16,t.bl_tree),g(t,o-3,2)):o<=10?(p(t,17,t.bl_tree),g(t,o-3,3)):(p(t,18,t.bl_tree),g(t,o-11,7));o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4)}};let S=!1;const D=(t,e,a,i)=>{g(t,0+(i?1:0),3),x(t),b(t,a),b(t,~a),a&&t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a};var T=(t,e,a,i)=>{let o,l,h=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),R(t,t.l_desc),R(t,t.d_desc),h=(t=>{let e;for(Z(t,t.dyn_ltree,t.l_desc.max_code),Z(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*n[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),o=t.opt_len+3+7>>>3,l=t.static_len+3+7>>>3,l<=o&&(o=l)):o=l=a+5,a+4<=o&&-1!==e?D(t,e,a,i):4===t.strategy||l===o?(g(t,2+(i?1:0),3),E(t,s,r)):(g(t,4+(i?1:0),3),((t,e,a,i)=>{let s;for(g(t,e-257,5),g(t,a-1,5),g(t,i-4,4),s=0;s<i;s++)g(t,t.bl_tree[2*n[s]+1],3);U(t,t.dyn_ltree,e-1),U(t,t.dyn_dtree,a-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),E(t,t.dyn_ltree,t.dyn_dtree)),y(t),i&&x(t)},O={_tr_init:t=>{S||((()=>{let t,n,w,m,b;const g=new Array(16);for(w=0,m=0;m<28;m++)for(h[m]=w,t=0;t<1<<e[m];t++)l[w++]=m;for(l[w-1]=m,b=0,m=0;m<16;m++)for(d[m]=b,t=0;t<1<<a[m];t++)o[b++]=m;for(b>>=7;m<30;m++)for(d[m]=b<<7,t=0;t<1<<a[m]-7;t++)o[256+b++]=m;for(n=0;n<=15;n++)g[n]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,g[8]++;for(;t<=255;)s[2*t+1]=9,t++,g[9]++;for(;t<=279;)s[2*t+1]=7,t++,g[7]++;for(;t<=287;)s[2*t+1]=8,t++,g[8]++;for(v(s,287,g),t=0;t<30;t++)r[2*t+1]=5,r[2*t]=k(t,5);f=new _(s,e,257,286,15),c=new _(r,a,0,30,15),u=new _(new Array(0),i,0,19,7)})(),S=!0),t.l_desc=new w(t.dyn_ltree,f),t.d_desc=new w(t.dyn_dtree,c),t.bl_desc=new w(t.bl_tree,u),t.bi_buf=0,t.bi_valid=0,y(t)},_tr_stored_block:D,_tr_flush_block:T,_tr_tally:(t,e,a)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(l[a]+256+1)]++,t.dyn_dtree[2*m(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{g(t,2,3),p(t,256,s),(t=>{16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var F=(t,e,a,i)=>{let n=65535&t|0,s=t>>>16&65535|0,r=0;for(;0!==a;){r=a>2e3?2e3:a,a-=r;do{n=n+e[i++]|0,s=s+n|0}while(--r);n%=65521,s%=65521}return n|s<<16|0};const L=new Uint32Array((()=>{let t,e=[];for(var a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e})());var N=(t,e,a,i)=>{const n=L,s=i+a;t^=-1;for(let a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t},I={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},B={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:C,_tr_stored_block:H,_tr_flush_block:M,_tr_tally:j,_tr_align:K}=O,{Z_NO_FLUSH:P,Z_PARTIAL_FLUSH:Y,Z_FULL_FLUSH:G,Z_FINISH:X,Z_BLOCK:W,Z_OK:q,Z_STREAM_END:J,Z_STREAM_ERROR:Q,Z_DATA_ERROR:V,Z_BUF_ERROR:$,Z_DEFAULT_COMPRESSION:tt,Z_FILTERED:et,Z_HUFFMAN_ONLY:at,Z_RLE:it,Z_FIXED:nt,Z_DEFAULT_STRATEGY:st,Z_UNKNOWN:rt,Z_DEFLATED:ot}=B,lt=(t,e)=>(t.msg=I[e],e),ht=t=>2*t-(t>4?9:0),dt=t=>{let e=t.length;for(;--e>=0;)t[e]=0},_t=t=>{let e,a,i,n=t.w_size;e=t.hash_size,i=e;do{a=t.head[--i],t.head[i]=a>=n?a-n:0}while(--e);e=n,i=e;do{a=t.prev[--i],t.prev[i]=a>=n?a-n:0}while(--e)};let ft=(t,e,a)=>(e<<t.hash_shift^a)&t.hash_mask;const ct=t=>{const e=t.state;let a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},ut=(t,e)=>{M(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ct(t.strm)},wt=(t,e)=>{t.pending_buf[t.pending++]=e},mt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},bt=(t,e,a,i)=>{let n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,e.set(t.input.subarray(t.next_in,t.next_in+n),a),1===t.state.wrap?t.adler=F(t.adler,e,n,a):2===t.state.wrap&&(t.adler=N(t.adler,e,n,a)),t.next_in+=n,t.total_in+=n,n)},gt=(t,e)=>{let a,i,n=t.max_chain_length,s=t.strstart,r=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,h=t.window,d=t.w_mask,_=t.prev,f=t.strstart+258;let c=h[s+r-1],u=h[s+r];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(a=e,h[a+r]===u&&h[a+r-1]===c&&h[a]===h[s]&&h[++a]===h[s+1]){s+=2,a++;do{}while(h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&s<f);if(i=258-(f-s),s=f-258,i>r){if(t.match_start=e,r=i,i>=o)break;c=h[s+r-1],u=h[s+r]}}}while((e=_[e&d])>l&&0!=--n);return r<=t.lookahead?r:t.lookahead},pt=t=>{const e=t.w_size;let a,i,n;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)&&(t.window.set(t.window.subarray(e,e+e-i),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),_t(t),i+=e),0===t.strm.avail_in)break;if(a=bt(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=a,t.lookahead+t.insert>=3)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=ft(t,t.ins_h,t.window[n+1]);t.insert&&(t.ins_h=ft(t,t.ins_h,t.window[n+3-1]),t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},kt=(t,e)=>{let a,i,n,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r=0,o=t.strm.avail_in;do{if(a=65535,n=t.bi_valid+42>>3,t.strm.avail_out<n)break;if(n=t.strm.avail_out-n,i=t.strstart-t.block_start,a>i+t.strm.avail_in&&(a=i+t.strm.avail_in),a>n&&(a=n),a<s&&(0===a&&e!==X||e===P||a!==i+t.strm.avail_in))break;r=e===X&&a===i+t.strm.avail_in?1:0,H(t,0,0,r),t.pending_buf[t.pending-4]=a,t.pending_buf[t.pending-3]=a>>8,t.pending_buf[t.pending-2]=~a,t.pending_buf[t.pending-1]=~a>>8,ct(t.strm),i&&(i>a&&(i=a),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,a-=i),a&&(bt(t.strm,t.strm.output,t.strm.next_out,a),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a)}while(0===r);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),r?4:e!==P&&e!==X&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(n=t.window_size-t.strstart,t.strm.avail_in>n&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,n+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),n>t.strm.avail_in&&(n=t.strm.avail_in),n&&(bt(t.strm,t.window,t.strstart,n),t.strstart+=n,t.insert+=n>t.w_size-t.insert?t.w_size-t.insert:n),t.high_water<t.strstart&&(t.high_water=t.strstart),n=t.bi_valid+42>>3,n=t.pending_buf_size-n>65535?65535:t.pending_buf_size-n,s=n>t.w_size?t.w_size:n,i=t.strstart-t.block_start,(i>=s||(i||e===X)&&e!==P&&0===t.strm.avail_in&&i<=n)&&(a=i>n?n:i,r=e===X&&0===t.strm.avail_in&&a===i?1:0,H(t,t.block_start,a,r),t.block_start+=a,ct(t.strm)),r?3:1)},vt=(t,e)=>{let a,i;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a)),t.match_length>=3)if(i=j(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=ft(t,t.ins_h,t.window[t.strstart+1]);else i=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2},yt=(t,e)=>{let a,i,n;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a),t.match_length<=5&&(t.strategy===et||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-3,i=j(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(ut(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=j(t,0,t.window[t.strstart-1]),i&&ut(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=j(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2};function xt(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}const zt=[new xt(0,0,0,0,kt),new xt(4,4,8,4,vt),new xt(4,5,16,8,vt),new xt(4,6,32,32,vt),new xt(4,4,16,16,yt),new xt(8,16,32,32,yt),new xt(8,16,128,128,yt),new xt(8,32,128,256,yt),new xt(32,128,258,1024,yt),new xt(32,258,258,4096,yt)];function At(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ot,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),dt(this.dyn_ltree),dt(this.dyn_dtree),dt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),dt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),dt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Et=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||42!==e.status&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&113!==e.status&&666!==e.status?1:0},Rt=t=>{if(Et(t))return lt(t,Q);t.total_in=t.total_out=0,t.data_type=rt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=-2,C(e),q},Zt=t=>{const e=Rt(t);var a;return e===q&&((a=t.state).window_size=2*a.w_size,dt(a.head),a.max_lazy_match=zt[a.level].max_lazy,a.good_match=zt[a.level].good_length,a.nice_match=zt[a.level].nice_length,a.max_chain_length=zt[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0),e},Ut=(t,e,a,i,n,s)=>{if(!t)return Q;let r=1;if(e===tt&&(e=6),i<0?(r=0,i=-i):i>15&&(r=2,i-=16),n<1||n>9||a!==ot||i<8||i>15||e<0||e>9||s<0||s>nt||8===i&&1!==r)return lt(t,Q);8===i&&(i=9);const o=new At;return t.state=o,o.strm=t,o.status=42,o.wrap=r,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=s,o.method=a,Zt(t)};var St={deflateInit:(t,e)=>Ut(t,e,ot,15,8,st),deflateInit2:Ut,deflateReset:Zt,deflateResetKeep:Rt,deflateSetHeader:(t,e)=>Et(t)||2!==t.state.wrap?Q:(t.state.gzhead=e,q),deflate:(t,e)=>{if(Et(t)||e>W||e<0)return t?lt(t,Q):Q;const a=t.state;if(!t.output||0!==t.avail_in&&!t.input||666===a.status&&e!==X)return lt(t,0===t.avail_out?$:Q);const i=a.last_flush;if(a.last_flush=e,0!==a.pending){if(ct(t),0===t.avail_out)return a.last_flush=-1,q}else if(0===t.avail_in&&ht(e)<=ht(i)&&e!==X)return lt(t,$);if(666===a.status&&0!==t.avail_in)return lt(t,$);if(42===a.status&&0===a.wrap&&(a.status=113),42===a.status){let e=ot+(a.w_bits-8<<4)<<8,i=-1;if(i=a.strategy>=at||a.level<2?0:a.level<6?1:6===a.level?2:3,e|=i<<6,0!==a.strstart&&(e|=32),e+=31-e%31,mt(a,e),0!==a.strstart&&(mt(a,t.adler>>>16),mt(a,65535&t.adler)),t.adler=1,a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q}if(57===a.status)if(t.adler=0,wt(a,31),wt(a,139),wt(a,8),a.gzhead)wt(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),wt(a,255&a.gzhead.time),wt(a,a.gzhead.time>>8&255),wt(a,a.gzhead.time>>16&255),wt(a,a.gzhead.time>>24&255),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(wt(a,255&a.gzhead.extra.length),wt(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=N(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69;else if(wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,3),a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q;if(69===a.status){if(a.gzhead.extra){let e=a.pending,i=(65535&a.gzhead.extra.length)-a.gzindex;for(;a.pending+i>a.pending_buf_size;){let n=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+n),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>e&&(t.adler=N(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex+=n,ct(t),0!==a.pending)return a.last_flush=-1,q;e=0,i-=n}let n=new Uint8Array(a.gzhead.extra);a.pending_buf.set(n.subarray(a.gzindex,a.gzindex+i),a.pending),a.pending+=i,a.gzhead.hcrc&&a.pending>e&&(t.adler=N(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex=0}a.status=73}if(73===a.status){if(a.gzhead.name){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,q;i=0}e=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex=0}a.status=91}if(91===a.status){if(a.gzhead.comment){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,q;i=0}e=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i))}a.status=103}if(103===a.status){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(ct(t),0!==a.pending))return a.last_flush=-1,q;wt(a,255&t.adler),wt(a,t.adler>>8&255),t.adler=0}if(a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q}if(0!==t.avail_in||0!==a.lookahead||e!==P&&666!==a.status){let i=0===a.level?kt(a,e):a.strategy===at?((t,e)=>{let a;for(;;){if(0===t.lookahead&&(pt(t),0===t.lookahead)){if(e===P)return 1;break}if(t.match_length=0,a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):a.strategy===it?((t,e)=>{let a,i,n,s;const r=t.window;for(;;){if(t.lookahead<=258){if(pt(t),t.lookahead<=258&&e===P)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=t.strstart-1,i=r[n],i===r[++n]&&i===r[++n]&&i===r[++n])){s=t.strstart+258;do{}while(i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&n<s);t.match_length=258-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=j(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):zt[a.level].func(a,e);if(3!==i&&4!==i||(a.status=666),1===i||3===i)return 0===t.avail_out&&(a.last_flush=-1),q;if(2===i&&(e===Y?K(a):e!==W&&(H(a,0,0,!1),e===G&&(dt(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),ct(t),0===t.avail_out))return a.last_flush=-1,q}return e!==X?q:a.wrap<=0?J:(2===a.wrap?(wt(a,255&t.adler),wt(a,t.adler>>8&255),wt(a,t.adler>>16&255),wt(a,t.adler>>24&255),wt(a,255&t.total_in),wt(a,t.total_in>>8&255),wt(a,t.total_in>>16&255),wt(a,t.total_in>>24&255)):(mt(a,t.adler>>>16),mt(a,65535&t.adler)),ct(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?q:J)},deflateEnd:t=>{if(Et(t))return Q;const e=t.state.status;return t.state=null,113===e?lt(t,V):q},deflateSetDictionary:(t,e)=>{let a=e.length;if(Et(t))return Q;const i=t.state,n=i.wrap;if(2===n||1===n&&42!==i.status||i.lookahead)return Q;if(1===n&&(t.adler=F(t.adler,e,a,0)),i.wrap=0,a>=i.w_size){0===n&&(dt(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(a-i.w_size,a),0),e=t,a=i.w_size}const s=t.avail_in,r=t.next_in,o=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,pt(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=ft(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,pt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=r,t.input=o,t.avail_in=s,i.wrap=n,q},deflateInfo:"pako deflate (from Nodeca project)"};const Dt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Tt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(const e in a)Dt(a,e)&&(t[e]=a[e])}}return t},Ot=t=>{let e=0;for(let a=0,i=t.length;a<i;a++)e+=t[a].length;const a=new Uint8Array(e);for(let e=0,i=0,n=t.length;e<n;e++){let n=t[e];a.set(n,i),i+=n.length}return a};let Ft=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Ft=!1}const Lt=new Uint8Array(256);for(let t=0;t<256;t++)Lt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Lt[254]=Lt[254]=1;var Nt=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,i,n,s,r=t.length,o=0;for(n=0;n<r;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(o),s=0,n=0;s<o;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),a<128?e[s++]=a:a<2048?(e[s++]=192|a>>>6,e[s++]=128|63&a):a<65536?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e},It=(t,e)=>{const a=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let i,n;const s=new Array(2*a);for(n=0,i=0;i<a;){let e=t[i++];if(e<128){s[n++]=e;continue}let r=Lt[e];if(r>4)s[n++]=65533,i+=r-1;else{for(e&=2===r?31:3===r?15:7;r>1&&i<a;)e=e<<6|63&t[i++],r--;r>1?s[n++]=65533:e<65536?s[n++]=e:(e-=65536,s[n++]=55296|e>>10&1023,s[n++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Ft)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let a="";for(let i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a})(s,n)},Bt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let a=e-1;for(;a>=0&&128==(192&t[a]);)a--;return a<0||0===a?e:a+Lt[t[a]]>e?a:e};var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ht=Object.prototype.toString,{Z_NO_FLUSH:Mt,Z_SYNC_FLUSH:jt,Z_FULL_FLUSH:Kt,Z_FINISH:Pt,Z_OK:Yt,Z_STREAM_END:Gt,Z_DEFAULT_COMPRESSION:Xt,Z_DEFAULT_STRATEGY:Wt,Z_DEFLATED:qt}=B;function Jt(t){this.options=Tt({level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=St.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==Yt)throw new Error(I[a]);if(e.header&&St.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Nt(e.dictionary):"[object ArrayBuffer]"===Ht.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,a=St.deflateSetDictionary(this.strm,t),a!==Yt)throw new Error(I[a]);this._dict_set=!0}}function Qt(t,e){const a=new Jt(e);if(a.push(t,!0),a.err)throw a.msg||I[a.err];return a.result}Jt.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize;let n,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Pt:Mt,"string"==typeof t?a.input=Nt(t):"[object ArrayBuffer]"===Ht.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(s===jt||s===Kt)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if(n=St.deflate(a,s),n===Gt)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=St.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Yt;if(0!==a.avail_out){if(s>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===Yt&&(this.result=Ot(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Vt={Deflate:Jt,deflate:Qt,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Qt(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Qt(t,e)},constants:B};var $t=function(t,e){let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z,A;const E=t.state;a=t.next_in,z=t.input,i=a+(t.avail_in-5),n=t.next_out,A=t.output,s=n-(e-t.avail_out),r=n+(t.avail_out-257),o=E.dmax,l=E.wsize,h=E.whave,d=E.wnext,_=E.window,f=E.hold,c=E.bits,u=E.lencode,w=E.distcode,m=(1<<E.lenbits)-1,b=(1<<E.distbits)-1;t:do{c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=u[f&m];e:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,0===p)A[n++]=65535&g;else{if(!(16&p)){if(0==(64&p)){g=u[(65535&g)+(f&(1<<p)-1)];continue e}if(32&p){E.mode=16191;break t}t.msg="invalid literal/length code",E.mode=16209;break t}k=65535&g,p&=15,p&&(c<p&&(f+=z[a++]<<c,c+=8),k+=f&(1<<p)-1,f>>>=p,c-=p),c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=w[f&b];a:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,!(16&p)){if(0==(64&p)){g=w[(65535&g)+(f&(1<<p)-1)];continue a}t.msg="invalid distance code",E.mode=16209;break t}if(v=65535&g,p&=15,c<p&&(f+=z[a++]<<c,c+=8,c<p&&(f+=z[a++]<<c,c+=8)),v+=f&(1<<p)-1,v>o){t.msg="invalid distance too far back",E.mode=16209;break t}if(f>>>=p,c-=p,p=n-s,v>p){if(p=v-p,p>h&&E.sane){t.msg="invalid distance too far back",E.mode=16209;break t}if(y=0,x=_,0===d){if(y+=l-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}else if(d<p){if(y+=l+d-p,p-=d,p<k){k-=p;do{A[n++]=_[y++]}while(--p);if(y=0,d<k){p=d,k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}}else if(y+=d-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}for(;k>2;)A[n++]=x[y++],A[n++]=x[y++],A[n++]=x[y++],k-=3;k&&(A[n++]=x[y++],k>1&&(A[n++]=x[y++]))}else{y=n-v;do{A[n++]=A[y++],A[n++]=A[y++],A[n++]=A[y++],k-=3}while(k>2);k&&(A[n++]=A[y++],k>1&&(A[n++]=A[y++]))}break}}break}}while(a<i&&n<r);k=c>>3,a-=k,c-=k<<3,f&=(1<<c)-1,t.next_in=a,t.next_out=n,t.avail_in=a<i?i-a+5:5-(a-i),t.avail_out=n<r?r-n+257:257-(n-r),E.hold=f,E.bits=c};const te=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ee=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ae=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ie=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ne=(t,e,a,i,n,s,r,o)=>{const l=o.bits;let h,d,_,f,c,u,w=0,m=0,b=0,g=0,p=0,k=0,v=0,y=0,x=0,z=0,A=null;const E=new Uint16Array(16),R=new Uint16Array(16);let Z,U,S,D=null;for(w=0;w<=15;w++)E[w]=0;for(m=0;m<i;m++)E[e[a+m]]++;for(p=l,g=15;g>=1&&0===E[g];g--);if(p>g&&(p=g),0===g)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(b=1;b<g&&0===E[b];b++);for(p<b&&(p=b),y=1,w=1;w<=15;w++)if(y<<=1,y-=E[w],y<0)return-1;if(y>0&&(0===t||1!==g))return-1;for(R[1]=0,w=1;w<15;w++)R[w+1]=R[w]+E[w];for(m=0;m<i;m++)0!==e[a+m]&&(r[R[e[a+m]]++]=m);if(0===t?(A=D=r,u=20):1===t?(A=te,D=ee,u=257):(A=ae,D=ie,u=0),z=0,m=0,w=b,c=s,k=p,v=0,_=-1,x=1<<p,f=x-1,1===t&&x>852||2===t&&x>592)return 1;for(;;){Z=w-v,r[m]+1<u?(U=0,S=r[m]):r[m]>=u?(U=D[r[m]-u],S=A[r[m]-u]):(U=96,S=0),h=1<<w-v,d=1<<k,b=d;do{d-=h,n[c+(z>>v)+d]=Z<<24|U<<16|S|0}while(0!==d);for(h=1<<w-1;z&h;)h>>=1;if(0!==h?(z&=h-1,z+=h):z=0,m++,0==--E[w]){if(w===g)break;w=e[a+r[m]]}if(w>p&&(z&f)!==_){for(0===v&&(v=p),c+=b,k=w-v,y=1<<k;k+v<g&&(y-=E[k+v],!(y<=0));)k++,y<<=1;if(x+=1<<k,1===t&&x>852||2===t&&x>592)return 1;_=z&f,n[_]=p<<24|k<<16|c-s|0}}return 0!==z&&(n[c+z]=w-v<<24|64<<16|0),o.bits=p,0};const{Z_FINISH:se,Z_BLOCK:re,Z_TREES:oe,Z_OK:le,Z_STREAM_END:he,Z_NEED_DICT:de,Z_STREAM_ERROR:_e,Z_DATA_ERROR:fe,Z_MEM_ERROR:ce,Z_BUF_ERROR:ue,Z_DEFLATED:we}=B,me=16209,be=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function ge(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const pe=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<16180||e.mode>16211?1:0},ke=t=>{if(pe(t))return _e;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=16180,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,le},ve=t=>{if(pe(t))return _e;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ke(t)},ye=(t,e)=>{let a;if(pe(t))return _e;const i=t.state;return e<0?(a=0,e=-e):(a=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_e:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,ve(t))},xe=(t,e)=>{if(!t)return _e;const a=new ge;t.state=a,a.strm=t,a.window=null,a.mode=16180;const i=ye(t,e);return i!==le&&(t.state=null),i};let ze,Ae,Ee=!0;const Re=t=>{if(Ee){ze=new Int32Array(512),Ae=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ne(1,t.lens,0,288,ze,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ne(2,t.lens,0,32,Ae,0,t.work,{bits:5}),Ee=!1}t.lencode=ze,t.lenbits=9,t.distcode=Ae,t.distbits=5},Ze=(t,e,a,i)=>{let n;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(e.subarray(a-s.wsize,a),0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),s.window.set(e.subarray(a-i,a-i+n),s.wnext),(i-=n)?(s.window.set(e.subarray(a-i,a),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0};var Ue={inflateReset:ve,inflateReset2:ye,inflateResetKeep:ke,inflateInit:t=>xe(t,15),inflateInit2:xe,inflate:(t,e)=>{let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z=0;const A=new Uint8Array(4);let E,R;const Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(pe(t)||!t.output||!t.input&&0!==t.avail_in)return _e;a=t.state,16191===a.mode&&(a.mode=16192),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,_=o,f=l,x=le;t:for(;;)switch(a.mode){case 16180:if(0===a.wrap){a.mode=16192;break}for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(2&a.wrap&&35615===h){0===a.wbits&&(a.wbits=15),a.check=0,A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0),h=0,d=0,a.mode=16181;break}if(a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",a.mode=me;break}if((15&h)!==we){t.msg="unknown compression method",a.mode=me;break}if(h>>>=4,d-=4,y=8+(15&h),0===a.wbits&&(a.wbits=y),y>15||y>a.wbits){t.msg="invalid window size",a.mode=me;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=512&h?16189:16191,h=0,d=0;break;case 16181:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.flags=h,(255&a.flags)!==we){t.msg="unknown compression method",a.mode=me;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=me;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0,a.mode=16182;case 16182:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,A[2]=h>>>16&255,A[3]=h>>>24&255,a.check=N(a.check,A,4,0)),h=0,d=0,a.mode=16183;case 16183:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0,a.mode=16184;case 16184:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0}else a.head&&(a.head.extra=null);a.mode=16185;case 16185:if(1024&a.flags&&(c=a.length,c>o&&(c=o),c&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(i.subarray(s,s+c),y)),512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,a.length-=c),a.length))break t;a.length=0,a.mode=16186;case 16186:if(2048&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=16187;case 16187:if(4096&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.comment=null);a.mode=16188;case 16188:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(65535&a.check)){t.msg="header crc mismatch",a.mode=me;break}h=0,d=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=16191;break;case 16189:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}t.adler=a.check=be(h),h=0,d=0,a.mode=16190;case 16190:if(0===a.havedict)return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,de;t.adler=a.check=1,a.mode=16191;case 16191:if(e===re||e===oe)break t;case 16192:if(a.last){h>>>=7&d,d-=7&d,a.mode=16206;break}for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}switch(a.last=1&h,h>>>=1,d-=1,3&h){case 0:a.mode=16193;break;case 1:if(Re(a),a.mode=16199,e===oe){h>>>=2,d-=2;break t}break;case 2:a.mode=16196;break;case 3:t.msg="invalid block type",a.mode=me}h>>>=2,d-=2;break;case 16193:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",a.mode=me;break}if(a.length=65535&h,h=0,d=0,a.mode=16194,e===oe)break t;case 16194:a.mode=16195;case 16195:if(c=a.length,c){if(c>o&&(c=o),c>l&&(c=l),0===c)break t;n.set(i.subarray(s,s+c),r),o-=c,s+=c,l-=c,r+=c,a.length-=c;break}a.mode=16191;break;case 16196:for(;d<14;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=me;break}a.have=0,a.mode=16197;case 16197:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.lens[Z[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[Z[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,E={bits:a.lenbits},x=ne(0,a.lens,0,19,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid code lengths set",a.mode=me;break}a.have=0,a.mode=16198;case 16198:for(;a.have<a.nlen+a.ndist;){for(;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(g<16)h>>>=m,d-=m,a.lens[a.have++]=g;else{if(16===g){for(R=m+2;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(h>>>=m,d-=m,0===a.have){t.msg="invalid bit length repeat",a.mode=me;break}y=a.lens[a.have-1],c=3+(3&h),h>>>=2,d-=2}else if(17===g){for(R=m+3;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=3+(7&h),h>>>=3,d-=3}else{for(R=m+7;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=11+(127&h),h>>>=7,d-=7}if(a.have+c>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=me;break}for(;c--;)a.lens[a.have++]=y}}if(a.mode===me)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=me;break}if(a.lenbits=9,E={bits:a.lenbits},x=ne(1,a.lens,0,a.nlen,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid literal/lengths set",a.mode=me;break}if(a.distbits=6,a.distcode=a.distdyn,E={bits:a.distbits},x=ne(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,E),a.distbits=E.bits,x){t.msg="invalid distances set",a.mode=me;break}if(a.mode=16199,e===oe)break t;case 16199:a.mode=16200;case 16200:if(o>=6&&l>=258){t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,$t(t,f),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,16191===a.mode&&(a.back=-1);break}for(a.back=0;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(b&&0==(240&b)){for(p=m,k=b,v=g;z=a.lencode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,a.length=g,0===b){a.mode=16205;break}if(32&b){a.back=-1,a.mode=16191;break}if(64&b){t.msg="invalid literal/length code",a.mode=me;break}a.extra=15&b,a.mode=16201;case 16201:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=16202;case 16202:for(;z=a.distcode[h&(1<<a.distbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(0==(240&b)){for(p=m,k=b,v=g;z=a.distcode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,64&b){t.msg="invalid distance code",a.mode=me;break}a.offset=g,a.extra=15&b,a.mode=16203;case 16203:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=me;break}a.mode=16204;case 16204:if(0===l)break t;if(c=f-l,a.offset>c){if(c=a.offset-c,c>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=me;break}c>a.wnext?(c-=a.wnext,u=a.wsize-c):u=a.wnext-c,c>a.length&&(c=a.length),w=a.window}else w=n,u=r-a.offset,c=a.length;c>l&&(c=l),l-=c,a.length-=c;do{n[r++]=w[u++]}while(--c);0===a.length&&(a.mode=16200);break;case 16205:if(0===l)break t;n[r++]=a.length,l--,a.mode=16200;break;case 16206:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=i[s++]<<d,d+=8}if(f-=l,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?N(a.check,n,f,r-f):F(a.check,n,f,r-f)),f=l,4&a.wrap&&(a.flags?h:be(h))!==a.check){t.msg="incorrect data check",a.mode=me;break}h=0,d=0}a.mode=16207;case 16207:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=me;break}h=0,d=0}a.mode=16208;case 16208:x=he;break t;case me:x=fe;break t;case 16210:return ce;default:return _e}return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||f!==t.avail_out&&a.mode<me&&(a.mode<16206||e!==se))&&Ze(t,t.output,t.next_out,f-t.avail_out),_-=t.avail_in,f-=t.avail_out,t.total_in+=_,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?N(a.check,n,f,t.next_out-f):F(a.check,n,f,t.next_out-f)),t.data_type=a.bits+(a.last?64:0)+(16191===a.mode?128:0)+(16199===a.mode||16194===a.mode?256:0),(0===_&&0===f||e===se)&&x===le&&(x=ue),x},inflateEnd:t=>{if(pe(t))return _e;let e=t.state;return e.window&&(e.window=null),t.state=null,le},inflateGetHeader:(t,e)=>{if(pe(t))return _e;const a=t.state;return 0==(2&a.wrap)?_e:(a.head=e,e.done=!1,le)},inflateSetDictionary:(t,e)=>{const a=e.length;let i,n,s;return pe(t)?_e:(i=t.state,0!==i.wrap&&16190!==i.mode?_e:16190===i.mode&&(n=1,n=F(n,e,a,0),n!==i.check)?fe:(s=Ze(t,e,a,a),s?(i.mode=16210,ce):(i.havedict=1,le)))},inflateInfo:"pako inflate (from Nodeca project)"};var Se=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const De=Object.prototype.toString,{Z_NO_FLUSH:Te,Z_FINISH:Oe,Z_OK:Fe,Z_STREAM_END:Le,Z_NEED_DICT:Ne,Z_STREAM_ERROR:Ie,Z_DATA_ERROR:Be,Z_MEM_ERROR:Ce}=B;function He(t){this.options=Tt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=Ue.inflateInit2(this.strm,e.windowBits);if(a!==Fe)throw new Error(I[a]);if(this.header=new Se,Ue.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Nt(e.dictionary):"[object ArrayBuffer]"===De.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=Ue.inflateSetDictionary(this.strm,e.dictionary),a!==Fe)))throw new Error(I[a])}He.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize,n=this.options.dictionary;let s,r,o;if(this.ended)return!1;for(r=e===~~e?e:!0===e?Oe:Te,"[object ArrayBuffer]"===De.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),s=Ue.inflate(a,r),s===Ne&&n&&(s=Ue.inflateSetDictionary(a,n),s===Fe?s=Ue.inflate(a,r):s===Be&&(s=Ne));a.avail_in>0&&s===Le&&a.state.wrap>0&&0!==t[a.next_in];)Ue.inflateReset(a),s=Ue.inflate(a,r);switch(s){case Ie:case Be:case Ne:case Ce:return this.onEnd(s),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(0===a.avail_out||s===Le))if("string"===this.options.to){let t=Bt(a.output,a.next_out),e=a.next_out-t,n=It(a.output,t);a.next_out=e,a.avail_out=i-e,e&&a.output.set(a.output.subarray(t,t+e),0),this.onData(n)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(s!==Fe||0!==o){if(s===Le)return s=Ue.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},He.prototype.onData=function(t){this.chunks.push(t)},He.prototype.onEnd=function(t){t===Fe&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ot(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const{Deflate:Me,deflate:je,deflateRaw:Ke,gzip:Pe}=Vt;var Ye=Me,Ge=B;const Xe=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const e=this._hasEvents?",":"";this.deflate.push(e+t,Ge.Z_SYNC_FLUSH),this._hasEvents=!0}finish(){if(this.deflate.push("]",Ge.Z_FINISH),this.deflate.err)throw this.deflate.err;const t=this.deflate.result;return this._init(),t}_init(){this._hasEvents=!1,this.deflate=new Ye,this.deflate.push("[",Ge.Z_NO_FLUSH)}},We={clear:()=>(Xe.clear(),""),addEvent:t=>Xe.addEvent(t),finish:()=>Xe.finish()};addEventListener("message",(function(t){const e=t.data.method,a=t.data.id,i=t.data.arg;if(e in We&&"function"==typeof We[e])try{const t=We[e](i);postMessage({id:a,method:e,success:!0,response:t})}catch(t){postMessage({id:a,method:e,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']),t=URL.createObjectURL(e);("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.log("[Replay] Using compression worker");const n=new Worker(t);return new ct(n)}catch(t){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.log("[Replay] Failed to create compression worker")}return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.log("[Replay] Using simple buffer"),new at}({useCompression:this._options.useCompression}),this._addListeners(),this._isEnabled=!0,this.startRecording()):this._handleException(new Error("No session found")))}startRecording(){try{this._stopRecording=tt({...this._recordingOptions,..."error"===this.recordingMode&&{checkoutEveryNms:6e4},emit:this._handleRecordingEmit})}catch(e){this._handleException(e)}}stopRecording(){try{return!!this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0,!0)}catch(e){return this._handleException(e),!1}}stop(){if(this._isEnabled)try{("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.log("[Replay] Stopping Replays"),this._isEnabled=!1,this._removeListeners(),this.stopRecording(),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,this._debouncedFlush.cancel()}catch(e){this._handleException(e)}}pause(){this._isPaused=!0,this.stopRecording()}resume(){this._loadAndCheckSession()&&(this._isPaused=!1,this.startRecording())}addUpdate(e){const t=e();"error"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._loadAndCheckSession())return;this.resume()}}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(e){const t=this.getSessionId();if(this._lastActivity&&dt(this._lastActivity,y))return void this.pause();if(!this._loadAndCheckSession(e))return;return t===this.getSessionId()||(this._triggerFullSnapshot(),!1)}_handleException(e){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.error("[Replay]",e),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this._options._experiments&&this._options._experiments.captureExceptions&&Object(r.b)(e)}_loadAndCheckSession(e=3e5){const{type:t,session:n}=ft({expiry:e,stickySession:Boolean(this._options.stickySession),currentSession:this.session,sessionSampleRate:this._options.sessionSampleRate,errorSampleRate:this._options.errorSampleRate});"new"===t&&this._setInitialState();const i=this.getSessionId();return n.id!==i&&(n.previousSessionId=i),this.session=n,!!this.session.sampled||(this.stop(),!1)}_setInitialState(){const e=`${_.location.pathname}${_.location.hash}${_.location.search}`,t=`${_.location.origin}${e}`;this.performanceEvents=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=(new Date).getTime(),this._context.urls.push(t)}_addListeners(){try{_.document.addEventListener("visibilitychange",this._handleVisibilityChange),_.addEventListener("blur",this._handleWindowBlur),_.addEventListener("focus",this._handleWindowFocus),function(e){const t=Object(i.a)().getClient();if(!t)return;const n=t.recordDroppedEvent.bind(t);t.recordDroppedEvent=(t,i,r)=>(r&&!r.type&&r.event_id&&e.delete(r.event_id),n(t,i,r)),Ot=n}(this._context.errorIds),this._hasInitializedCoreListeners||(Tt(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}"_performanceObserver"in _&&(this._performanceObserver=rt(this))}_removeListeners(){try{_.document.removeEventListener("visibilitychange",this._handleVisibilityChange),_.removeEventListener("blur",this._handleWindowBlur),_.removeEventListener("focus",this._handleWindowFocus),function(){const e=Object(i.a)().getClient();e&&Ot&&(e.recordDroppedEvent=Ot)}(),this._performanceObserver&&(this._performanceObserver.disconnect(),this._performanceObserver=null)}catch(e){this._handleException(e)}}__init12(){this._handleRecordingEmit=(e,t)=>{this.checkAndHandleExpiredSession()?this.addUpdate((()=>("error"===this.recordingMode&&2===e.type&&this._setInitialState(),gt(this,e,t),2===e.type&&(this.session&&this.session.previousSessionId||("error"===this.recordingMode&&this.session&&this._context.earliestEvent&&(this.session.started=this._context.earliestEvent,this._maybeSaveSession()),"session"===this.recordingMode&&this.flushImmediate()),!0)))):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.error("[Replay] Received replay event after session expired.")}}__init13(){this._handleVisibilityChange=()=>{"visible"===_.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init14(){this._handleWindowBlur=()=>{const e=_t({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init15(){this._handleWindowFocus=()=>{const e=_t({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;const t=lt(this.session,C);e&&!t&&this._createCustomBreadcrumb(e),this._conditionalFlush()}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession(C)?e&&this._createCustomBreadcrumb(e):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.log("[Replay] Document has become active, but session has expired")}_triggerFullSnapshot(){try{("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.log("[Replay] Taking full rrweb snapshot"),tt.takeFullSnapshot(!0)}catch(e){this._handleException(e)}}_updateUserActivity(e=(new Date).getTime()){this._lastActivity=e}_updateSessionActivity(e=(new Date).getTime()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{gt(this,{type:j.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=[...this.performanceEvents];return this.performanceEvents=[],Promise.all(It(this,function(e){return e.map(Nt).filter(Boolean)}(e)))}_conditionalFlush(){"error"!==this.recordingMode&&this.flushImmediate()}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[],this._context.earliestEvent=null}_popEventContext(){this._context.earliestEvent&&this._context.earliestEvent<this._context.initialTimestamp&&(this._context.initialTimestamp=this._context.earliestEvent);const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds).filter(Boolean),traceIds:Array.from(this._context.traceIds).filter(Boolean),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){if(this.session&&this.eventBuffer){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(It(e,[wt(_.performance.memory)]))}catch(t){return[]}}(this),this.eventBuffer))try{const e=await this.eventBuffer.finish(),t=this.session.id,n=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession(),await Ut({replayId:t,recordingData:e,segmentId:i,includeReplayStartTimestamp:0===i,eventContext:n,session:this.session,options:this.getOptions(),timestamp:(new Date).getTime()})}catch(e){if(this._handleException(e),e instanceof Bt)return void this._handleRateLimit(e.rateLimits);this.stop()}}else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.error("[Replay] No session or eventBuffer found to flush.")}__init16(){this._flush=async()=>{if(this._isEnabled)if(this.checkAndHandleExpiredSession())if(this.session){if(this._debouncedFlush.cancel(),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=null);try{await this._flushLock}catch(e){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.error(e)}finally{this._debouncedFlush()}}else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.error("[Replay] No session found to flush.");else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.error("[Replay] Attempting to finish replay event after session expired.")}}_maybeSaveSession(){this.session&&this._options.stickySession&&ut(this.session)}_handleRateLimit(e){if(this.isPaused())return;const t=Object(p.a)(e,"replay")-Date.now();t>0&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.warn("[Replay]",`Rate limit hit, pausing replay for ${t}ms`),this.pause(),this._debouncedFlush.cancel(),setTimeout((()=>{("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.info("[Replay]","Resuming replay after rate limit"),this.resume()}),t))}}function Mt(e,t,n,i){const r=[...e,..."string"===typeof i?i.split(","):[],...t];return"undefined"!==typeof n&&("string"===typeof n&&r.push(`.${n}`),console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")),r.join(",")}function Qt({mask:e,unmask:t,block:n,unblock:i,ignore:r,blockClass:a,blockSelector:o,maskTextClass:s,maskTextSelector:c,ignoreClass:d}){const l=Mt(e,[".sentry-mask","[data-sentry-mask]"],s,c),u=Mt(t,[".sentry-unmask","[data-sentry-unmask]"]),h={maskTextSelector:l,unmaskTextSelector:u,maskInputSelector:l,unmaskInputSelector:u,blockSelector:Mt(n,[".sentry-block","[data-sentry-block]"],a,o),unblockSelector:Mt(i,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:Mt(r,[".sentry-ignore","[data-sentry-ignore]"],d)};return a instanceof RegExp&&(h.blockClass=a),s instanceof RegExp&&(h.maskTextClass=s),h}function Pt(){return"undefined"!==typeof window&&(!Object(f.b)()||"undefined"!==typeof e&&"renderer"===e.type)}const Ft="img,image,svg,path,rect,area,video,object,picture,embed,map,audio";let Gt=!1;class jt{static __initStatic(){this.id="Replay"}__init(){this.name=jt.id}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5e3,stickySession:n=!0,useCompression:i=!0,_experiments:r={},sessionSampleRate:a,errorSampleRate:o,maskAllText:s,maskAllInputs:c=!0,blockAllMedia:d=!0,mask:l=[],unmask:u=[],block:h=[],unblock:A=[],ignore:p=[],maskFn:f,blockClass:g,blockSelector:_,maskTextClass:m,maskTextSelector:E,ignoreClass:I}={}){if(jt.prototype.__init.call(this),this._recordingOptions={maskAllInputs:c,maskTextFn:f,maskInputFn:f,...Qt({mask:l,unmask:u,block:h,unblock:A,ignore:p,blockClass:g,blockSelector:_,maskTextClass:m,maskTextSelector:E,ignoreClass:I}),slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,stickySession:n,sessionSampleRate:a,errorSampleRate:o,useCompression:i,maskAllText:"boolean"===typeof s?s:!E,blockAllMedia:d,_experiments:r},"number"===typeof a&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${a} })`),this._initialOptions.sessionSampleRate=a),"number"===typeof o&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${o} })`),this._initialOptions.errorSampleRate=o),this._initialOptions.maskAllText&&(this._recordingOptions.maskTextSelector="body *:not(style), body *:not(script)"),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Ft}`:Ft),this._isInitialized&&Pt())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Gt}set _isInitialized(e){Gt=e}setupOnce(){Pt()&&(this._setup(),setTimeout((()=>this.start())))}start(){this._replay&&this._replay.start()}stop(){this._replay&&this._replay.stop()}flush(){if(this._replay&&this._replay.isEnabled())return this._replay.flushImmediate()}_setup(){const e=function(e){const t=Object(i.a)().getClient(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Object(g.c)(e)};if(!n)return console.warn("SDK client is not available."),r;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.");"number"===typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate);"number"===typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate);return r}(this._initialOptions);this._replay=new xt({options:e,recordingOptions:this._recordingOptions})}}jt.__initStatic()}).call(this,n(156))},705:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={};n.r(i),n.d(i,"Express",(function(){return u})),n.d(i,"Postgres",(function(){return g})),n.d(i,"Mysql",(function(){return _})),n.d(i,"Mongo",(function(){return I})),n.d(i,"Prisma",(function(){return v})),n.d(i,"GraphQL",(function(){return C})),n.d(i,"Apollo",(function(){return S})),n.d(i,"BrowserTracing",(function(){return ce}));var r=n(862),a=n(895),o=n(149),s=n(1665),c=n(179);n(1164);function d(e,t={}){const n=e.method&&e.method.toUpperCase();let i="",r="url";t.customRoute||e.route?(i=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,r="route"):(e.originalUrl||e.url)&&(i=Object(s.c)(e.originalUrl||e.url||""));let a="";return t.method&&n&&(a+=n),t.method&&t.path&&(a+=" "),t.path&&i&&(a+=i),[a,r]}function l(e){const t=Object(a.a)([e,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);return"sentry"!==(Object(a.a)([t,"optionalAccess",e=>e.instrumenter])||"sentry")}class u{static __initStatic(){this.id="Express"}__init(){this.name=u.id}constructor(e={}){u.prototype.__init.call(this),this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}setupOnce(e,t){this._router?l(t)?("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("Express Integration is skipped because of instrumenter configuration."):(function(e,t=[]){t.forEach((t=>function(e,t){const n=e[t];return e[t]=function(...e){return n.call(this,...function(e,t){return e.map((e=>"function"===typeof e?h(e,t):Array.isArray(e)?e.map((e=>"function"===typeof e?h(e,t):e)):e))}(e,t))},e}(e,t)))}(this._router,this._methods),function(e){const t="settings"in e;t&&void 0===e._router&&e.lazyrouter&&e.lazyrouter();const n=t?e._router:e;if(!n)return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.debug("Routing instrumentation is currently only supported in Express 4."));const i=Object.getPrototypeOf(n),r=i.process_params;i.process_params=function(e,t,n,i,o){n._reconstructedRoute||(n._reconstructedRoute="");const{layerRoutePath:l,isRegex:u,isArray:h,numExtraSegments:p}=function(e){const t=Object(a.a)([e,"access",e=>e.route,"optionalAccess",e=>e.path]),n=Object(c.k)(t),i=Array.isArray(t);if(!t)return{isRegex:n,isArray:i,numExtraSegments:0};const r=i?Math.max((o=t,o.reduce(((e,t)=>e+Object(s.a)(t.toString())),0)-Object(s.a)(e.path||"")),0):0;var o;return{layerRoutePath:A(i,t),isRegex:n,isArray:i,numExtraSegments:r}}(e);(l||u||h)&&(n._hasParameters=!0);const f=(l||e.path||"").split("/").filter((e=>e.length>0&&(u||h||!e.includes("*")))).join("/");f&&f.length>0&&(n._reconstructedRoute+=`/${f}${u?"/":""}`);if(Object(s.a)(n.originalUrl||"")+p===Object(s.a)(n._reconstructedRoute)){n._hasParameters||n._reconstructedRoute!==n.originalUrl&&(n._reconstructedRoute=n.originalUrl);const e=i.__sentry_transaction;if(e&&"custom"!==e.metadata.source){const t=n._reconstructedRoute||"/";e.setName(...d(n,{path:!0,method:!0,customRoute:t}))}}return r.call(this,e,t,n,i,o)}}(this._router)):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.error("ExpressIntegration is missing an Express instance")}}function h(e,t){const n=e.length;switch(n){case 2:return function(n,i){const r=i.__sentry_transaction;if(r){const n=r.startChild({description:e.name,op:`middleware.express.${t}`});i.once("finish",(()=>{n.finish()}))}return e.call(this,n,i)};case 3:return function(n,i,r){const o=i.__sentry_transaction,s=Object(a.a)([o,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`})]);e.call(this,n,i,(function(...e){Object(a.a)([s,"optionalAccess",e=>e.finish,"call",e=>e()]),r.call(this,...e)}))};case 4:return function(n,i,r,o){const s=r.__sentry_transaction,c=Object(a.a)([s,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`})]);e.call(this,n,i,r,(function(...e){Object(a.a)([c,"optionalAccess",e=>e.finish,"call",e=>e()]),o.call(this,...e)}))};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}function A(e,t){return e?t.map((e=>e.toString())).join(","):t&&t.toString()}u.__initStatic();var p=n(714),f=n(214);class g{static __initStatic(){this.id="Postgres"}__init(){this.name=g.id}constructor(e={}){g.prototype.__init.call(this),this._usePgNative=!!e.usePgNative}setupOnce(e,t){if(l(t))return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("Postgres Integration is skipped because of instrumenter configuration."));const n=Object(p.c)("pg");if(!n)return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.error("Postgres Integration was unable to require `pg` package."));if(this._usePgNative&&!Object(a.a)([n,"access",e=>e.native,"optionalAccess",e=>e.Client]))return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.error("Postgres Integration was unable to access 'pg-native' bindings."));const{Client:i}=this._usePgNative?n.native:n;Object(f.e)(i.prototype,"query",(function(e){return function(n,i,r){const o=t().getScope(),s=Object(a.a)([o,"optionalAccess",e=>e.getSpan,"call",e=>e()]),d=Object(a.a)([s,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"===typeof n?n:n.text,op:"db"})]);if("function"===typeof r)return e.call(this,n,i,(function(e,t){Object(a.a)([d,"optionalAccess",e=>e.finish,"call",e=>e()]),r(e,t)}));if("function"===typeof i)return e.call(this,n,(function(e,t){Object(a.a)([d,"optionalAccess",e=>e.finish,"call",e=>e()]),i(e,t)}));const l="undefined"!==typeof i?e.call(this,n,i):e.call(this,n);return Object(c.n)(l)?l.then((e=>(Object(a.a)([d,"optionalAccess",e=>e.finish,"call",e=>e()]),e))):(Object(a.a)([d,"optionalAccess",e=>e.finish,"call",e=>e()]),l)}}))}}g.__initStatic();class _{constructor(){_.prototype.__init.call(this)}static __initStatic(){this.id="Mysql"}__init(){this.name=_.id}setupOnce(e,t){if(l(t))return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("Mysql Integration is skipped because of instrumenter configuration."));const n=Object(p.c)("mysql/lib/Connection.js");n?Object(f.e)(n,"createQuery",(function(e){return function(n,i,r){const o=t().getScope(),s=Object(a.a)([o,"optionalAccess",e=>e.getSpan,"call",e=>e()]),c=Object(a.a)([s,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"===typeof n?n:n.sql,op:"db"})]);return"function"===typeof r?e.call(this,n,i,(function(e,t,n){Object(a.a)([c,"optionalAccess",e=>e.finish,"call",e=>e()]),r(e,t,n)})):"function"===typeof i?e.call(this,n,(function(e,t,n){Object(a.a)([c,"optionalAccess",e=>e.finish,"call",e=>e()]),i(e,t,n)})):e.call(this,n,i,r)}})):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.error("Mysql Integration was unable to require `mysql` package.")}}_.__initStatic();const m=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],E={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class I{static __initStatic(){this.id="Mongo"}__init(){this.name=I.id}constructor(e={}){I.prototype.__init.call(this),this._operations=Array.isArray(e.operations)?e.operations:m,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}setupOnce(e,t){if(l(t))return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("Mongo Integration is skipped because of instrumenter configuration."));const n=this._useMongoose?"mongoose":"mongodb",i=Object(p.c)(n);i?this._instrumentOperations(i.Collection,this._operations,t):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.error(`Mongo Integration was unable to require \`${n}\` package.`)}_instrumentOperations(e,t,n){t.forEach((t=>this._patchOperation(e,t,n)))}_patchOperation(e,t,n){if(!(t in e.prototype))return;const i=this._getSpanContextFromOperationArguments.bind(this);Object(f.e)(e.prototype,t,(function(e){return function(...r){const o=r[r.length-1],s=n().getScope(),d=Object(a.a)([s,"optionalAccess",e=>e.getSpan,"call",e=>e()]);if("function"!==typeof o||"mapReduce"===t&&2===r.length){const n=Object(a.a)([d,"optionalAccess",e=>e.startChild,"call",e=>e(i(this,t,r))]),o=e.call(this,...r);if(Object(c.n)(o))return o.then((e=>(Object(a.a)([n,"optionalAccess",e=>e.finish,"call",e=>e()]),e)));if((l=o)&&"object"===typeof l&&l.once&&"function"===typeof l.once){const e=o;try{e.once("close",(()=>{Object(a.a)([n,"optionalAccess",e=>e.finish,"call",e=>e()])}))}catch(h){Object(a.a)([n,"optionalAccess",e=>e.finish,"call",e=>e()])}return e}return Object(a.a)([n,"optionalAccess",e=>e.finish,"call",e=>e()]),o}var l;const u=Object(a.a)([d,"optionalAccess",e=>e.startChild,"call",e=>e(i(this,t,r.slice(0,-1)))]);return e.call(this,...r.slice(0,-1),(function(e,t){Object(a.a)([u,"optionalAccess",e=>e.finish,"call",e=>e()]),o(e,t)}))}}))}_getSpanContextFromOperationArguments(e,t,n){const i={collectionName:e.collectionName,dbName:e.dbName,namespace:e.namespace},r={op:"db",description:t,data:i},a=E[t],o=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!a||!o)return r;try{if("mapReduce"===t){const[e,t]=n;i[a[0]]="string"===typeof e?e:e.name||"<anonymous>",i[a[1]]="string"===typeof t?t:t.name||"<anonymous>"}else for(let e=0;e<a.length;e++)i[a[e]]=JSON.stringify(n[e])}catch(s){}return r}}I.__initStatic();class v{static __initStatic(){this.id="Prisma"}__init(){this.name=v.id}constructor(e={}){var t;v.prototype.__init.call(this),(t=e.client)&&t.$use?this._client=e.client:("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.warn(`Unsupported Prisma client provided to PrismaIntegration. Provided client: ${JSON.stringify(e.client)}`)}setupOnce(e,t){this._client?l(t)?("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("Prisma Integration is skipped because of instrumenter configuration."):this._client.$use(((e,n)=>{const i=t().getScope(),r=Object(a.a)([i,"optionalAccess",e=>e.getSpan,"call",e=>e()]),o=e.action,s=e.model,d=Object(a.a)([r,"optionalAccess",e=>e.startChild,"call",e=>e({description:s?`${s} ${o}`:o,op:"db.sql.prisma"})]),l=n(e);return Object(c.n)(l)?l.then((e=>(Object(a.a)([d,"optionalAccess",e=>e.finish,"call",e=>e()]),e))):(Object(a.a)([d,"optionalAccess",e=>e.finish,"call",e=>e()]),l)})):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.error("PrismaIntegration is missing a Prisma Client Instance")}}v.__initStatic();class C{constructor(){C.prototype.__init.call(this)}static __initStatic(){this.id="GraphQL"}__init(){this.name=C.id}setupOnce(e,t){if(l(t))return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("GraphQL Integration is skipped because of instrumenter configuration."));const n=Object(p.c)("graphql/execution/execute.js");n?Object(f.e)(n,"execute",(function(e){return function(...n){const i=t().getScope(),r=Object(a.a)([i,"optionalAccess",e=>e.getSpan,"call",e=>e()]),o=Object(a.a)([r,"optionalAccess",e=>e.startChild,"call",e=>e({description:"execute",op:"graphql.execute"})]);Object(a.a)([i,"optionalAccess",e=>e.setSpan,"call",e=>e(o)]);const s=e.call(this,...n);return Object(c.n)(s)?s.then((e=>(Object(a.a)([o,"optionalAccess",e=>e.finish,"call",e=>e()]),Object(a.a)([i,"optionalAccess",e=>e.setSpan,"call",e=>e(r)]),e))):(Object(a.a)([o,"optionalAccess",e=>e.finish,"call",e=>e()]),Object(a.a)([i,"optionalAccess",e=>e.setSpan,"call",e=>e(r)]),s)}})):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.error("GraphQL Integration was unable to require graphql/execution package.")}}C.__initStatic();var y=n(295);class S{constructor(){S.prototype.__init.call(this)}static __initStatic(){this.id="Apollo"}__init(){this.name=S.id}setupOnce(e,t){if(l(t))return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("Apollo Integration is skipped because of instrumenter configuration."));const n=Object(p.c)("apollo-server-core");n?Object(f.e)(n.ApolloServerBase.prototype,"constructSchema",(function(e){return function(){if(!this.config.resolvers)return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(this.config.schema?o.c.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property."):this.config.modules&&o.c.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),o.c.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),e.call(this);const n=Object(y.c)(this.config.resolvers);return this.config.resolvers=n.map((e=>(Object.keys(e).forEach((n=>{Object.keys(e[n]).forEach((i=>{"function"===typeof e[n][i]&&function(e,t,n,i){Object(f.e)(e[t],n,(function(e){return function(...r){const o=i().getScope(),s=Object(a.a)([o,"optionalAccess",e=>e.getSpan,"call",e=>e()]),d=Object(a.a)([s,"optionalAccess",e=>e.startChild,"call",e=>e({description:`${t}.${n}`,op:"graphql.resolve"})]),l=e.call(this,...r);return Object(c.n)(l)?l.then((e=>(Object(a.a)([d,"optionalAccess",e=>e.finish,"call",e=>e()]),e))):(Object(a.a)([d,"optionalAccess",e=>e.finish,"call",e=>e()]),l)}}))}(e,n,i,t)}))})),e))),e.call(this)}})):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.error("Apollo Integration was unable to require apollo-server-core package.")}}S.__initStatic();var R=n(1029),T=n(1981);const w="baggage",b="sentry-",N=/^sentry-/;function k(e){return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],i)=>{const r=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,a=0===i?r:`${e},${r}`;return a.length>8192?(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):a}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`sentry-${t}`]=n),e)),{}))}function O(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}var D=n(1674),B=n(871),L=n(223);const U=n(300).a;var x=n(619);const M=(e,t,n)=>{let i,r;return a=>{t.value>=0&&(a||n)&&(r=t.value-(i||0),(r||void 0===i)&&(i=t.value,t.delta=r,e(t)))}},Q=()=>U.__WEB_VITALS_POLYFILL__?U.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=U.performance.timing,t=U.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const i in e)"navigationStart"!==i&&"toJSON"!==i&&(n[i]=Math.max(e[i]-e.navigationStart,0));return n})()):U.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],P=()=>{const e=Q();return e&&e.activationStart||0},F=(e,t)=>{const n=Q();let i="navigate";return n&&(i=U.document.prerendering||P()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:"undefined"===typeof t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:i}},G=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const i=new PerformanceObserver((e=>{t(e.getEntries())}));return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(i){}},j=(e,t)=>{const n=i=>{"pagehide"!==i.type&&"hidden"!==U.document.visibilityState||(e(i),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)};let V=-1;const Y=()=>(V<0&&(V="hidden"!==U.document.visibilityState||U.document.prerendering?1/0:0,j((({timeStamp:e})=>{V=e}),!0)),{get firstHiddenTime(){return V}}),H={};function K(e){return"number"===typeof e&&isFinite(e)}function W(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}function z(){return U&&U.addEventListener&&U.performance}let q,J,X=0,Z={};function $(){const e=z();e&&x.a&&(e.mark&&U.performance.mark("sentry-tracing-init"),(e=>{const t=F("CLS",0);let n,i=0,r=[];const a=e=>{e.forEach((e=>{if(!e.hadRecentInput){const a=r[0],o=r[r.length-1];i&&0!==r.length&&e.startTime-o.startTime<1e3&&e.startTime-a.startTime<5e3?(i+=e.value,r.push(e)):(i=e.value,r=[e]),i>t.value&&(t.value=i,t.entries=r,n&&n())}}))},o=G("layout-shift",a);o&&(n=M(e,t),j((()=>{a(o.takeRecords()),n(!0)})))})((e=>{const t=e.entries.pop();t&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("[Measurements] Adding CLS"),Z.cls={value:e.value,unit:""},J=t)})),(e=>{const t=Y(),n=F("LCP");let i;const r=e=>{const r=e[e.length-1];if(r){const e=Math.max(r.startTime-P(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[r],i())}},a=G("largest-contentful-paint",r);if(a){i=M(e,n);const t=()=>{H[n.id]||(r(a.takeRecords()),a.disconnect(),H[n.id]=!0,i(!0))};["keydown","click"].forEach((e=>{addEventListener(e,t,{once:!0,capture:!0})})),j(t,!0)}})((e=>{const t=e.entries.pop();t&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("[Measurements] Adding LCP"),Z.lcp={value:e.value,unit:"millisecond"},q=t)})),(e=>{const t=Y(),n=F("FID");let i;const r=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),i(!0))},a=e=>{e.forEach(r)},o=G("first-input",a);i=M(e,n),o&&j((()=>{a(o.takeRecords()),o.disconnect()}),!0)})((e=>{const t=e.entries.pop();if(!t)return;const n=Object(L.c)(x.a),i=Object(L.c)(t.startTime);("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("[Measurements] Adding FID"),Z.fid={value:e.value,unit:"millisecond"},Z["mark.fid"]={value:n+i,unit:"second"}})))}function ee(e){const t=z();if(!t||!U.performance.getEntries||!x.a)return;("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("[Tracing] Adding & adjusting spans using Performance API");const n=Object(L.c)(x.a),i=t.getEntries();let r,a;if(i.slice(X).forEach((t=>{const i=Object(L.c)(t.startTime),s=Object(L.c)(t.duration);if(!("navigation"===e.op&&n+i<e.startTimestamp))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((i=>{te(e,t,i,n)})),te(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),te(e,t,"fetch",n,"cache","domainLookupStart"),te(e,t,"domainLookup",n,"DNS"),function(e,t,n){W(e,{op:"browser",description:"request",startTimestamp:n+Object(L.c)(t.requestStart),endTimestamp:n+Object(L.c)(t.responseEnd)}),W(e,{op:"browser",description:"response",startTimestamp:n+Object(L.c)(t.responseStart),endTimestamp:n+Object(L.c)(t.responseEnd)})}(e,t,n)}(e,t,n),r=n+Object(L.c)(t.responseStart),a=n+Object(L.c)(t.requestStart);break;case"mark":case"paint":case"measure":{!function(e,t,n,i,r){const a=r+n,o=a+i;W(e,{description:t.name,endTimestamp:o,op:t.entryType,startTimestamp:a})}(e,t,i,s,n);const r=Y(),a=t.startTime<r.firstHiddenTime;"first-paint"===t.name&&a&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("[Measurements] Adding FP"),Z.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&a&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("[Measurements] Adding FCP"),Z.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":{const r=t.name.replace(U.location.origin,"");!function(e,t,n,i,r,a){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const o={};"transferSize"in t&&(o["Transfer Size"]=t.transferSize);"encodedBodySize"in t&&(o["Encoded Body Size"]=t.encodedBodySize);"decodedBodySize"in t&&(o["Decoded Body Size"]=t.decodedBodySize);const s=a+i;W(e,{description:n,endTimestamp:s+r,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",startTimestamp:s,data:o})}(e,t,r,i,s,n);break}}})),X=Math.max(i.length-1,0),function(e){const t=U.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),K(n.rtt)&&(Z["connection.rtt"]={value:n.rtt,unit:"millisecond"}));K(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`);K(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===e.op){"number"===typeof r&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("[Measurements] Adding TTFB"),Z.ttfb={value:1e3*(r-e.startTimestamp),unit:"millisecond"},"number"===typeof a&&a<=r&&(Z["ttfb.requestTime"]={value:1e3*(r-a),unit:"millisecond"})),["fcp","fp","lcp"].forEach((t=>{if(!Z[t]||n>=e.startTimestamp)return;const i=Z[t].value,r=n+Object(L.c)(i),a=Math.abs(1e3*(r-e.startTimestamp)),s=a-i;("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log(`[Measurements] Normalized ${t} from ${i} to ${a} (${s})`),Z[t].value=a}));const t=Z["mark.fid"];t&&Z.fid&&(W(e,{description:"first input delay",endTimestamp:t.value+Object(L.c)(Z.fid.value),op:"ui.action",startTimestamp:t.value}),delete Z["mark.fid"]),"fcp"in Z||delete Z.cls,Object.keys(Z).forEach((t=>{e.setMeasurement(t,Z[t].value,Z[t].unit)})),function(e){q&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("[Measurements] Adding LCP Data"),q.element&&e.setTag("lcp.element",Object(D.c)(q.element)),q.id&&e.setTag("lcp.id",q.id),q.url&&e.setTag("lcp.url",q.url.trim().slice(0,200)),e.setTag("lcp.size",q.size));J&&J.sources&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("[Measurements] Adding CLS Data"),J.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,Object(D.c)(t.node)))))}(e)}q=void 0,J=void 0,Z={}}function te(e,t,n,i,r,a){const o=a?t[a]:t[`${n}End`],s=t[`${n}Start`];s&&o&&W(e,{op:"browser",description:Object(R.a)(r,(()=>n)),startTimestamp:i+Object(L.c)(s),endTimestamp:i+Object(L.c)(o)})}var ne=n(1184),ie=n(711);const re=["localhost",/^\//],ae={traceFetch:!0,traceXHR:!0,tracingOrigins:re,tracePropagationTargets:re};function oe(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:i,tracingOrigins:r,shouldCreateSpanForRequest:a}={traceFetch:ae.traceFetch,traceXHR:ae.traceXHR,...e},o="function"===typeof a?a:e=>!0,s=e=>function(e,t){return Object(ie.c)(e,t||re)}(e,i||r),d={};t&&Object(ne.a)("fetch",(e=>{!function(e,t,n,i){if(!Object(L.b)()||!e.fetchData||!t(e.fetchData.url))return;if(e.endTimestamp){const t=e.fetchData.__span;if(!t)return;const n=i[t];return void(n&&(e.response?n.setHttpStatus(e.response.status):e.error&&n.setStatus("internal_error"),n.finish(),delete i[t]))}const r=Object(L.a)();if(r){const t=r.startChild({data:{...e.fetchData,type:"fetch"},description:`${e.fetchData.method} ${e.fetchData.url}`,op:"http.client"});e.fetchData.__span=t.spanId,i[t.spanId]=t;const a=e.args[0];e.args[1]=e.args[1]||{};const o=e.args[1];n(e.fetchData.url)&&(o.headers=function(e,t,n,i){const r=k(t),a=n.toTraceparent(),o="undefined"!==typeof Request&&Object(c.g)(e,Request)?e.headers:i.headers;if(o){if("undefined"!==typeof Headers&&Object(c.g)(o,Headers)){const e=new Headers(o);return e.append("sentry-trace",a),r&&e.append(w,r),e}if(Array.isArray(o)){const e=[...o,["sentry-trace",a]];return r&&e.push([w,r]),e}{const e="baggage"in o?o.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),r&&t.push(r),{...o,"sentry-trace":a,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":a,baggage:r}}(a,r.getDynamicSamplingContext(),t,o),r.metadata.propagations++)}}(e,o,s,d)})),n&&Object(ne.a)("xhr",(e=>{!function(e,t,n,i){if(!Object(L.b)()||e.xhr&&e.xhr.__sentry_own_request__||!(e.xhr&&e.xhr.__sentry_xhr__&&t(e.xhr.__sentry_xhr__.url)))return;const r=e.xhr.__sentry_xhr__;if(e.endTimestamp){const t=e.xhr.__sentry_xhr_span_id__;if(!t)return;const n=i[t];return void(n&&(n.setHttpStatus(r.status_code),n.finish(),delete i[t]))}const a=Object(L.a)();if(a){const t=a.startChild({data:{...r.data,type:"xhr",method:r.method,url:r.url},description:`${r.method} ${r.url}`,op:"http.client"});if(e.xhr.__sentry_xhr_span_id__=t.spanId,i[e.xhr.__sentry_xhr_span_id__]=t,e.xhr.setRequestHeader&&n(e.xhr.__sentry_xhr__.url))try{e.xhr.setRequestHeader("sentry-trace",t.toTraceparent());const n=k(a.getDynamicSamplingContext());n&&e.xhr.setRequestHeader(w,n),a.metadata.propagations++}catch(o){}}}(e,o,s,d)}))}const se={idleTimeout:B.c,finalTimeout:B.a,heartbeatInterval:B.b,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!U||!U.location)return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.warn("Could not initialize routing instrumentation due to invalid location"));let i,r=U.location.href;t&&(i=e({name:U.location.pathname,op:"pageload",metadata:{source:"url"}})),n&&Object(ne.a)("history",(({to:t,from:n})=>{void 0===n&&r&&-1!==r.indexOf(t)?r=void 0:n!==t&&(r=void 0,i&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log(`[Tracing] Finishing current transaction with op: ${i.op}`),i.finish()),i=e({name:U.location.pathname,op:"navigation",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,_experiments:{enableLongTask:!0,enableInteractions:!1},...ae};class ce{__init(){this.name="BrowserTracing"}constructor(e){ce.prototype.__init.call(this),this.options={...se,...e},e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),$(),Object(a.a)([this,"access",e=>e.options,"access",e=>e._experiments,"optionalAccess",e=>e.enableLongTask])&&G("longtask",(e=>{for(const t of e){const e=Object(L.a)();if(!e)return;const n=Object(L.c)(x.a+t.startTime),i=Object(L.c)(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",startTimestamp:n,endTimestamp:n+i})}}))}setupOnce(e,t){this._getCurrentHub=t;const{routingInstrumentation:n,startTransactionOnLocationChange:i,startTransactionOnPageLoad:r,markBackgroundTransactions:s,traceFetch:c,traceXHR:d,tracePropagationTargets:l,shouldCreateSpanForRequest:u,_experiments:h}=this.options;n((e=>this._createRouteTransaction(e)),r,i),s&&(U&&U.document?U.document.addEventListener("visibilitychange",(()=>{const e=Object(L.a)();if(U.document.hidden&&e){const t="cancelled";("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${e.op}`),e.status||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.finish()}})):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.warn("[Tracing] Could not set up background tab detection due to lack of global document")),Object(a.a)([h,"optionalAccess",e=>e.enableInteractions])&&this._registerInteractionListener(),oe({traceFetch:c,traceXHR:d,tracePropagationTargets:l,shouldCreateSpanForRequest:u})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const{beforeNavigate:t,idleTimeout:n,finalTimeout:i,heartbeatInterval:s}=this.options,d="pageload"===e.op,l=d?de("sentry-trace"):null,u=d?de("baggage"):null,h=l?Object(T.a)(l):void 0,A=u?function(e){if(!Object(c.l)(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>({...e,...O(t)})),{});else{if(!e)return;t=O(e)}const n=Object.entries(t).reduce(((e,[t,n])=>(t.match(N)&&(e[t.slice(b.length)]=n),e)),{});return Object.keys(n).length>0?n:void 0}(u):void 0,p={...e,...h,metadata:{...e.metadata,dynamicSamplingContext:h&&!A?{}:A},trimEnd:!0},f="function"===typeof t?t(p):p,g=void 0===f?{...p,sampled:!1}:f;g.metadata=g.name!==p.name?{...g.metadata,source:"custom"}:g.metadata,this._latestRouteName=g.name,this._latestRouteSource=Object(a.a)([g,"access",e=>e.metadata,"optionalAccess",e=>e.source]),!1===g.sampled&&("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log(`[Tracing] Will not send ${g.op} transaction because of beforeNavigate.`),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log(`[Tracing] Starting ${g.op} transaction on scope`);const _=this._getCurrentHub(),{location:m}=U,E=Object(r.b)(_,g,n,i,!0,{location:m},s);return E.registerBeforeFinishCallback((e=>{ee(e)})),E}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:i}=this.options,a="ui.action.click";if(e&&(e.finish(),e=void 0),!this._getCurrentHub)return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.warn(`[Tracing] Did not create ${a} transaction because _getCurrentHub is invalid.`));if(!this._latestRouteName)return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`));const s=this._getCurrentHub(),{location:c}=U,d={name:this._latestRouteName,op:a,trimEnd:!0,metadata:{source:Object(R.a)(this._latestRouteSource,(()=>"url"))}};e=Object(r.b)(s,d,t,n,!0,{location:c},i)};["click"].forEach((e=>{addEventListener(e,t,{once:!1,capture:!0})}))}}function de(e){const t=Object(D.a)(`meta[name=${e}]`);return t?t.getAttribute("content"):null}("undefined"===typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&Object(r.a)()},712:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));n(285);function i(e,t=0){return"string"!==typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function r(e,t){let n=e;const i=n.length;if(i<=150)return n;t>i&&(t=i);let r=Math.max(t-60,0);r<5&&(r=0);let a=Math.min(r+140,i);return a>i-5&&(a=i),a===i&&(r=Math.max(a-140,0)),n=n.slice(r,a),r>0&&(n=`'{snip} ${n}`),a<i&&(n+=" {snip}"),n}},857:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var i=n(177),r=n(1184),a=n(295),o=n(149),s=n(1674);const c=["fatal","error","warning","log","info","debug"];function d(e){return"warn"===e?"warning":c.includes(e)?e:"log"}var l=n(711),u=n(1665),h=n(144);const A=1024,p="Breadcrumbs";class f{static __initStatic(){this.id=p}__init(){this.name=f.id}constructor(e){f.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){this.options.console&&Object(r.a)("console",g),this.options.dom&&Object(r.a)("dom",function(e){function t(t){let n,r="object"===typeof e?e.serializeAttribute:void 0,a="object"===typeof e&&"number"===typeof e.maxStringLength?e.maxStringLength:void 0;a&&a>A&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${a} was configured. Sentry will use 1024 instead.`),a=A),"string"===typeof r&&(r=[r]);try{n=t.event.target?Object(s.c)(t.event.target,{keyAttrs:r,maxStringLength:a}):Object(s.c)(t.event,{keyAttrs:r,maxStringLength:a})}catch(c){n="<unknown>"}0!==n.length&&Object(i.b)().addBreadcrumb({category:`ui.${t.name}`,message:n},{event:t.event,name:t.name,global:t.global})}return t}(this.options.dom)),this.options.xhr&&Object(r.a)("xhr",_),this.options.fetch&&Object(r.a)("fetch",m),this.options.history&&Object(r.a)("history",E)}addSentryBreadcrumb(e){this.options.sentry&&Object(i.b)().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:Object(a.e)(e)},{event:e})}}function g(e){for(let n=0;n<e.args.length;n++)if("ref=Ref<"===e.args[n]){e.args[n+1]="viewRef";break}const t={category:"console",data:{arguments:e.args,logger:"console"},level:d(e.level),message:Object(l.a)(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message=`Assertion failed: ${Object(l.a)(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1)}Object(i.b)().addBreadcrumb(t,{input:e.args,level:e.level})}function _(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;const{method:t,url:n,status_code:r,body:a}=e.xhr.__sentry_xhr__||{};Object(i.b)().addBreadcrumb({category:"xhr",data:{method:t,url:n,status_code:r},type:"http"},{xhr:e.xhr,input:a})}else;}function m(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?Object(i.b)().addBreadcrumb({category:"fetch",data:e.fetchData,level:"error",type:"http"},{data:e.error,input:e.args}):Object(i.b)().addBreadcrumb({category:"fetch",data:{...e.fetchData,status_code:e.response.status},type:"http"},{input:e.args,response:e.response})))}function E(e){let t=e.from,n=e.to;const r=Object(u.b)(h.a.location.href);let a=Object(u.b)(t);const o=Object(u.b)(n);a.path||(a=r),r.protocol===o.protocol&&r.host===o.host&&(n=o.relative),r.protocol===a.protocol&&r.host===a.host&&(t=a.relative),Object(i.b)().addBreadcrumb({category:"navigation",data:{from:t,to:n}})}f.__initStatic()},861:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return c}));var i=n(1029),r=n(295),a=n(619),o=n(149),s=n(214);class c{__init(){this.spans=[]}constructor(e=1e3){c.prototype.__init.call(this),this._maxlen=e}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class d{__init2(){this.traceId=Object(r.f)()}__init3(){this.spanId=Object(r.f)().substring(16)}__init4(){this.startTimestamp=Object(a.d)()}__init5(){this.tags={}}__init6(){this.data={}}__init7(){this.instrumenter="sentry"}constructor(e){if(d.prototype.__init2.call(this),d.prototype.__init3.call(this),d.prototype.__init4.call(this),d.prototype.__init5.call(this),d.prototype.__init6.call(this),d.prototype.__init7.call(this),!e)return this;e.traceId&&(this.traceId=e.traceId),e.spanId&&(this.spanId=e.spanId),e.parentSpanId&&(this.parentSpanId=e.parentSpanId),"sampled"in e&&(this.sampled=e.sampled),e.op&&(this.op=e.op),e.description&&(this.description=e.description),e.data&&(this.data=e.data),e.tags&&(this.tags=e.tags),e.status&&(this.status=e.status),e.startTimestamp&&(this.startTimestamp=e.startTimestamp),e.endTimestamp&&(this.endTimestamp=e.endTimestamp),e.instrumenter&&(this.instrumenter=e.instrumenter)}startChild(e){const t=new d({...e,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t),t.transaction=this.transaction,("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&t.transaction){const n=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${t.transaction.name||"< unknown name >"}' (${t.transaction.spanId}).`;t.transaction.metadata.spanMetadata[t.spanId]={logMessage:n},o.c.log(n)}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setStatus(e){return this.status=e,this}setHttpStatus(e){this.setTag("http.status_code",String(e));const t=function(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}(e);return"unknown_error"!==t&&this.setStatus(t),this}isSuccess(){return"ok"===this.status}finish(e){if(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:e}=this.transaction.metadata.spanMetadata[this.spanId];e&&o.c.log(e.replace("Starting","Finishing"))}this.endTimestamp="number"===typeof e?e:Object(a.d)()}toTraceparent(){let e="";return void 0!==this.sampled&&(e=this.sampled?"-1":"-0"),`${this.traceId}-${this.spanId}${e}`}toContext(){return Object(s.c)({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(e){return this.data=Object(i.a)(e.data,(()=>({}))),this.description=e.description,this.endTimestamp=e.endTimestamp,this.op=e.op,this.parentSpanId=e.parentSpanId,this.sampled=e.sampled,this.spanId=Object(i.a)(e.spanId,(()=>this.spanId)),this.startTimestamp=Object(i.a)(e.startTimestamp,(()=>this.startTimestamp)),this.status=e.status,this.tags=Object(i.a)(e.tags,(()=>({}))),this.traceId=Object(i.a)(e.traceId,(()=>this.traceId)),this}getTraceContext(){return Object(s.c)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return Object(s.c)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}}},862:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p}));var i=n(177),r=n(149),a=n(179),o=n(714),s=n(2310),c=n(871),d=n(998),l=n(223);function u(){const e=this.getScope();if(e){const t=e.getSpan();if(t)return{"sentry-trace":t.toTraceparent()}}return{}}function h(e,t,n){if(!Object(l.b)(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setMetadata({sampleRate:Number(e.sampled)}),e;let i;return"function"===typeof t.tracesSampler?(i=t.tracesSampler(n),e.setMetadata({sampleRate:Number(i)})):void 0!==n.parentSampled?i=n.parentSampled:(i=t.tracesSampleRate,e.setMetadata({sampleRate:Number(i)})),function(e){if(Object(a.h)(e)||"number"!==typeof e&&"boolean"!==typeof e)return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1;if(e<0||e>1)return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1;return!0}(i)?i?(e.sampled=Math.random()<i,e.sampled?(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log(`[Tracing] starting ${e.op} transaction - ${e.name}`),e):(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(i)})`),e)):(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log("[Tracing] Discarding transaction because "+("function"===typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function A(e,t){const n=this.getClient(),i=n&&n.getOptions()||{},a=i.instrumenter||"sentry",o=e.instrumenter||"sentry";a!==o&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.error(`A transaction was started with instrumenter=\`${o}\`, but the SDK is configured with the \`${a}\` instrumenter.\nThe transaction will not be sampled. Please use the ${a} instrumentation to start transactions.`),e.sampled=!1);let s=new d.a(e,this);return s=h(s,i,{parentSampled:e.parentSampled,transactionContext:e,...t}),s.sampled&&s.initSpanRecorder(i._experiments&&i._experiments.maxSpans),s}function p(e,t,n,i,r,a,o){const s=e.getClient(),d=s&&s.getOptions()||{};let l=new c.d(t,e,n,i,o,r);return l=h(l,d,{parentSampled:t.parentSampled,transactionContext:t,...a}),l.sampled&&l.initSpanRecorder(d._experiments&&d._experiments.maxSpans),l}function f(){!function(){const e=Object(i.d)();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=A),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=u))}(),Object(o.b)()&&function(){const t=Object(i.d)();if(!t.__SENTRY__)return;const n={mongodb:()=>new(Object(o.a)(e,"./integrations/node/mongo").Mongo),mongoose:()=>new(Object(o.a)(e,"./integrations/node/mongo").Mongo)({mongoose:!0}),mysql:()=>new(Object(o.a)(e,"./integrations/node/mysql").Mysql),pg:()=>new(Object(o.a)(e,"./integrations/node/postgres").Postgres)},r=Object.keys(n).filter((e=>!!Object(o.c)(e))).map((e=>{try{return n[e]()}catch(t){return}})).filter((e=>e));r.length>0&&(t.__SENTRY__.integrations=[...t.__SENTRY__.integrations||[],...r])}(),Object(s.a)()}}).call(this,n(1054)(e))},871:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u}));var i=n(619),r=n(149),a=n(861),o=n(998);const s=1e3,c=3e4,d=5e3;class l extends a.b{constructor(e,t,n,i){super(i),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){e.spanId!==this.transactionSpanId&&(e.finish=t=>{e.endTimestamp="number"===typeof t?t:Object(i.d)(),this._popActivity(e.spanId)},void 0===e.endTimestamp&&this._pushActivity(e.spanId)),super.add(e)}}class u extends o.a{__init(){this.activities={}}__init2(){this._heartbeatCounter=0}__init3(){this._finished=!1}__init4(){this._beforeFinishCallbacks=[]}constructor(e,t,n=s,i=c,a=d,o=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=i,this._heartbeatInterval=a,this._onScope=o,u.prototype.__init.call(this),u.prototype.__init2.call(this),u.prototype.__init3.call(this),u.prototype.__init4.call(this),o&&(h(t),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),t.configureScope((e=>e.setSpan(this)))),this._startIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this.finish())}),this._finalTimeout)}finish(e=Object(i.d)()){if(this._finished=!0,this.activities={},this.spanRecorder){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log("[Tracing] finishing IdleTransaction",new Date(1e3*e).toISOString(),this.op);for(const t of this._beforeFinishCallbacks)t(this,e);this.spanRecorder.spans=this.spanRecorder.spans.filter((t=>{if(t.spanId===this.spanId)return!0;t.endTimestamp||(t.endTimestamp=e,t.setStatus("cancelled"),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(t,void 0,2)));const n=t.startTimestamp<e;return n||("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(t,void 0,2)),n})),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log("[Tracing] flushing IdleTransaction")}else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log("[Tracing] No active IdleTransaction");return this._onScope&&h(this._idleHub),super.finish(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new l(t,n,this.spanId,e),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}_cancelIdleTimeout(){this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0)}_startIdleTimeout(e){this._cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||this.finish(e)}),this._idleTimeout)}_pushActivity(e){this._cancelIdleTimeout(),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log(`[Tracing] popActivity ${e}`),delete this.activities[e],("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=Object(i.d)()+this._idleTimeout/1e3;this._startIdleTimeout(e)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this.finish()):this._pingHeartbeat()}_pingHeartbeat(){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function h(e){const t=e.getScope();if(t){t.getTransaction()&&t.setSpan(void 0)}}},889:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}},893:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var i=n(285),r=n(2313),a=n(359),o=n(1255);function s(e,t=1/0,n=1/0){try{return c("",e,t,n)}catch(i){return{ERROR:`**non-serializable** (${i})`}}}function c(t,n,s=1/0,d=1/0,l=Object(r.a)()){const[u,h]=l;if(null===n||["number","boolean","string"].includes(typeof n)&&!Object(i.e)(n))return n;const A=function(t,n){try{return"domain"===t&&n&&"object"===typeof n&&n._events?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":"undefined"!==typeof e&&n===e?"[Global]":"undefined"!==typeof window&&n===window?"[Window]":"undefined"!==typeof document&&n===document?"[Document]":Object(i.j)(n)?"[SyntheticEvent]":"number"===typeof n&&n!==n?"[NaN]":void 0===n?"[undefined]":"function"===typeof n?`[Function: ${Object(o.a)(n)}]`:"symbol"===typeof n?`[${String(n)}]`:"bigint"===typeof n?`[BigInt: ${String(n)}]`:`[object ${function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(n)}]`}catch(r){return`**non-serializable** (${r})`}}(t,n);if(!A.startsWith("[object "))return A;if(n.__sentry_skip_normalization__)return n;if(0===s)return A.replace("object ","");if(u(n))return"[Circular ~]";const p=n;if(p&&"function"===typeof p.toJSON)try{return c("",p.toJSON(),s-1,d,l)}catch(m){}const f=Array.isArray(n)?[]:{};let g=0;const _=Object(a.b)(n);for(const e in _){if(!Object.prototype.hasOwnProperty.call(_,e))continue;if(g>=d){f[e]="[MaxProperties ~]";break}const t=_[e];f[e]=c(e,t,s-1,d,l),g++}return h(n),f}}).call(this,n(151))},895:function(e,t,n){"use strict";function i(e){let t,n=e[0],i=1;for(;i<e.length;){const r=e[i],a=e[i+1];if(i+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=a(n)):"call"!==r&&"optionalCall"!==r||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}n.d(t,"a",(function(){return i}))},896:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));n(359),n(712);var i=n(314);function r(){const e=i.a,t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");const n=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function a(e){return Array.isArray(e)?e:[e]}},949:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(1253),r=n(654),a=n(300),o=n(295),s=n(1254),c=n(1245),d=n(1e3);const l={Vue:a.a.Vue,attachProps:!0,logErrors:!1,hooks:s.a,timeout:2e3,trackComponents:!1,_metadata:{sdk:{name:"sentry.javascript.vue",packages:[{name:"npm:@sentry/vue",version:i.a}],version:i.a}}};function u(e={}){const t={...l,...e};if(Object(r.e)(t),t.Vue||t.app)if(t.app){Object(o.c)(t.app).forEach((e=>h(e,t)))}else t.Vue&&h(t.Vue,t);else console.warn("[@sentry/vue]: Misconfigured SDK. Vue specific errors will not be captured.\nUpdate your `Sentry.init` call with an appropriate config option:\n`app` (Application Instance - Vue 3) or `Vue` (Vue Constructor - Vue 2).")}const h=(e,t)=>{const n=e;!0===(n._instance&&n._instance.isMounted)&&console.warn("[@sentry/vue]: Misconfigured SDK. Vue app is already mounted. Make sure to call `app.mount()` after `Sentry.init()`."),Object(c.a)(e,t),("tracesSampleRate"in t||"tracesSampler"in t)&&e.mixin(Object(d.a)({...t,...t.tracingOptions}))}},950:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(144),r=n(512),a=n(1e3);function o(e){return(t,n=!0,o=!0)=>{const s={"routing.instrumentation":"vue-router"};n&&t({name:i.a.location.pathname,op:"pageload",tags:s,metadata:{source:"url"}}),e.onError((e=>Object(r.c)(e))),e.beforeEach(((e,i,r)=>{const c=null==i.name&&0===i.matched.length,d={params:e.params,query:e.query};let l=e.path,u="url";if(e.name?(l=e.name.toString(),u="custom"):e.matched[0]&&e.matched[0].path&&(l=e.matched[0].path,u="route"),n&&c){const e=Object(a.b)();e&&("custom"!==e.metadata.source&&e.setName(l,u),e.setData("params",d.params),e.setData("query",d.query))}o&&!c&&t({name:l,op:"navigation",tags:s,data:d,metadata:{source:u}}),r()}))}}},951:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return h}));var i=n(285),r=n(1030),a=n(2340),o=n(232),s=n(896),c=n(314),d=n(1023);class l{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(e){const t=new l;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments],t._sdkProcessingMetadata={...e._sdkProcessingMetadata}),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&Object(d.c)(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"===typeof e){const t=e(this);return t instanceof l?t:this}return e instanceof l?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):Object(i.f)(e)&&(e=e,this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(e,t){const n="number"===typeof t?t:100;if(n<=0)return this;const i={timestamp:Object(r.b)(),...e};return this._breadcrumbs=[...this._breadcrumbs,i].slice(-n),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const t=this._span.transaction&&this._span.transaction.name;t&&(e.tags={transaction:t,...e.tags})}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...u(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}_notifyEventProcessors(e,t,n,r=0){return new a.a(((a,s)=>{const c=e[r];if(null===t||"function"!==typeof c)a(t);else{const d=c({...t},n);("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.id&&null===d&&o.c.log(`Event processor "${c.id}" dropped event`),Object(i.k)(d)?d.then((t=>this._notifyEventProcessors(e,t,n,r+1).then(a))).then(null,s):this._notifyEventProcessors(e,d,n,r+1).then(a).then(null,s)}}))}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?Object(s.a)(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function u(){return Object(c.c)("globalEventProcessors",(()=>[]))}function h(e){u().push(e)}},986:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(214),r=n(645),a=n(144);const o=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class s{static __initStatic(){this.id="TryCatch"}__init(){this.name=s.id}constructor(e){s.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&Object(i.e)(a.a,"setTimeout",c),this._options.setInterval&&Object(i.e)(a.a,"setInterval",c),this._options.requestAnimationFrame&&Object(i.e)(a.a,"requestAnimationFrame",d),this._options.XMLHttpRequest&&"XMLHttpRequest"in a.a&&Object(i.e)(XMLHttpRequest.prototype,"send",l);const e=this._options.eventTarget;if(e){(Array.isArray(e)?e:o).forEach(u)}}}function c(e){return function(...t){const n=t[0];return t[0]=Object(a.c)(n,{mechanism:{data:{function:Object(r.b)(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}}function d(e){return function(t){return e.apply(this,[Object(a.c)(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Object(r.b)(e)},handled:!0,type:"instrument"}})])}}function l(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"===typeof n[e]&&Object(i.e)(n,e,(function(t){const n={mechanism:{data:{function:e,handler:Object(r.b)(t)},handled:!0,type:"instrument"}},o=Object(i.f)(t);return o&&(n.mechanism.data.handler=Object(r.b)(o)),Object(a.c)(t,n)}))})),e.apply(this,t)}}function u(e){const t=a.a,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Object(i.e)(n,"addEventListener",(function(t){return function(n,i,o){try{"function"===typeof i.handleEvent&&(i.handleEvent=Object(a.c)(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Object(r.b)(i),target:e},handled:!0,type:"instrument"}}))}catch(s){}return t.apply(this,[n,Object(a.c)(i,{mechanism:{data:{function:"addEventListener",handler:Object(r.b)(i),target:e},handled:!0,type:"instrument"}}),o])}})),Object(i.e)(n,"removeEventListener",(function(e){return function(t,n,i){const r=n;try{const n=r&&r.__sentry_wrapped__;n&&e.call(this,t,n,i)}catch(a){}return e.call(this,t,r,i)}})))}s.__initStatic()},987:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(177),r=n(1184),a=n(179),o=n(1674),s=n(149),c=n(295),d=n(657),l=n(144);class u{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=u.id}__init2(){this._installFunc={onerror:h,onunhandledrejection:A}}constructor(e){u.prototype.__init.call(this),u.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const n in e){const i=this._installFunc[n];i&&e[n]&&(t=n,("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log(`Global Handler attached: ${t}`),i(),this._installFunc[n]=void 0)}var t}}function h(){Object(r.a)("error",(e=>{const[t,n,i]=g();if(!t.getIntegration(u))return;const{msg:r,url:o,line:s,column:c,error:h}=e;if(Object(l.b)()||h&&h.__sentry_own_request__)return;const A=void 0===h&&Object(a.l)(r)?function(e,t,n,i){const r=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let o=Object(a.e)(e)?e.message:e,s="Error";const c=o.match(r);c&&(s=c[1],o=c[2]);return p({exception:{values:[{type:s,value:o}]}},t,n,i)}(r,o,s,c):p(Object(d.c)(n,h||r,void 0,i,!1),o,s,c);A.level="error",f(t,h,A,"onerror")}))}function A(){Object(r.a)("unhandledrejection",(e=>{const[t,n,i]=g();if(!t.getIntegration(u))return;let r=e;try{"reason"in e?r=e.reason:"detail"in e&&"reason"in e.detail&&(r=e.detail.reason)}catch(s){}if(Object(l.b)()||r&&r.__sentry_own_request__)return!0;const o=Object(a.j)(r)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(r)}`}]}}:Object(d.c)(n,r,void 0,i,!0);o.level="error",f(t,r,o,"onunhandledrejection")}))}function p(e,t,n,i){const r=e.exception=e.exception||{},s=r.values=r.values||[],c=s[0]=s[0]||{},d=c.stacktrace=c.stacktrace||{},l=d.frames=d.frames||[],u=isNaN(parseInt(i,10))?void 0:i,h=isNaN(parseInt(n,10))?void 0:n,A=Object(a.l)(t)&&t.length>0?t:Object(o.b)();return 0===l.length&&l.push({colno:u,filename:A,function:"?",in_app:!0,lineno:h}),e}function f(e,t,n,i){Object(c.a)(n,{handled:!1,type:i}),e.captureEvent(n,{originalException:t})}function g(){const e=Object(i.b)(),t=e.getClient(),n=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,n.stackParser,n.attachStacktrace]}u.__initStatic()},988:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(177),r=n(611),a=n(179),o=n(657);class s{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=s.id}constructor(e={}){s.prototype.__init.call(this),this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(){const e=Object(i.b)().getClient();e&&Object(r.b)(((t,n)=>{const r=Object(i.b)().getIntegration(s);return r?function(e,t,n,i,r){if(!i.exception||!i.exception.values||!r||!Object(a.g)(r.originalException,Error))return i;const o=c(e,n,r.originalException,t);return i.exception.values=[...o,...i.exception.values],i}(e.getOptions().stackParser,r._key,r._limit,t,n):t}))}}function c(e,t,n,i,r=[]){if(!Object(a.g)(n[i],Error)||r.length+1>=t)return r;const s=Object(o.d)(e,n[i]);return c(e,t,n[i],i,[s,...r])}s.__initStatic()},989:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(149);class r{constructor(){r.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=r.id}setupOnce(e,t){const n=e=>{const n=t().getIntegration(r);if(n){try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,i=t.message;if(!n&&!i)return!1;if(n&&!i||!n&&i)return!1;if(n!==i)return!1;if(!o(e,t))return!1;if(!a(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=s(t),i=s(e);if(!n||!i)return!1;if(n.type!==i.type||n.value!==i.value)return!1;if(!o(e,t))return!1;if(!a(e,t))return!1;return!0}(e,t))return!0;return!1}(e,n._previousEvent))return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(c){return n._previousEvent=e}return n._previousEvent=e}return e};n.id=this.name,e(n)}}function a(e,t){let n=c(e),i=c(t);if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;if(n=n,i=i,i.length!==n.length)return!1;for(let r=0;r<i.length;r++){const e=i[r],t=n[r];if(e.filename!==t.filename||e.lineno!==t.lineno||e.colno!==t.colno||e.function!==t.function)return!1}return!0}function o(e,t){let n=e.fingerprint,i=t.fingerprint;if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;n=n,i=i;try{return!(n.join("")!==i.join(""))}catch(r){return!1}}function s(e){return e.exception&&e.exception.values&&e.exception.values[0]}function c(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(n){return}}r.__initStatic()},990:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(611),r=n(177),a=n(144);class o{constructor(){o.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=o.id}setupOnce(){Object(i.b)((e=>{if(Object(r.b)().getIntegration(o)){if(!a.a.navigator&&!a.a.location&&!a.a.document)return e;const t=e.request&&e.request.url||a.a.location&&a.a.location.href,{referrer:n}=a.a.document||{},{userAgent:i}=a.a.navigator||{},r={...t&&{url:t},headers:{...e.request&&e.request.headers,...n&&{Referer:n},...i&&{"User-Agent":i}}};return{...e,request:r}}return e}))}}o.__initStatic()},998:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(1029),r=n(177),a=n(619),o=n(149),s=n(214),c=n(861);class d extends c.a{__init(){this._measurements={}}__init2(){this._contexts={}}__init3(){this._frozenDynamicSamplingContext=void 0}constructor(e,t){super(e),d.prototype.__init.call(this),d.prototype.__init2.call(this),d.prototype.__init3.call(this),this._hub=t||Object(r.b)(),this._name=e.name||"",this.metadata={source:"custom",...e.metadata,spanMetadata:{},changes:[],propagations:0},this._trimEnd=e.trimEnd,this.transaction=this;const n=this.metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}setName(e,t="custom"){e===this.name&&t===this.metadata.source||this.metadata.changes.push({source:this.metadata.source,timestamp:Object(a.c)(),propagations:this.metadata.propagations}),this._name=e,this.metadata.source=t}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new c.b(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this.metadata={...this.metadata,...e}}finish(e){if(void 0!==this.endTimestamp)return;if(this.name||(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(e),!0!==this.sampled){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.");const e=this._hub.getClient();return void(e&&e.recordDroppedEvent("sample_rate","transaction"))}const t=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&e.endTimestamp)):[];this._trimEnd&&t.length>0&&(this.endTimestamp=t.reduce(((e,t)=>e.endTimestamp&&t.endTimestamp?e.endTimestamp>t.endTimestamp?e:t:e)).endTimestamp);const n=this.metadata,i={contexts:{...this._contexts,trace:this.getTraceContext()},spans:t,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...n,dynamicSamplingContext:this.getDynamicSamplingContext()},...n.source&&{transaction_info:{source:n.source,changes:n.changes,propagations:n.propagations}}};return Object.keys(this._measurements).length>0&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),i.measurements=this._measurements),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.c.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),this._hub.captureEvent(i)}toContext(){const e=super.toContext();return Object(s.c)({...e,name:this.name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this.name=Object(i.a)(e.name,(()=>"")),this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const e=this._hub||Object(r.b)(),t=e&&e.getClient();if(!t)return{};const{environment:n,release:i}=t.getOptions()||{},{publicKey:a}=t.getDsn()||{},o=this.metadata.sampleRate,c=void 0!==o?o.toString():void 0,d=e.getScope(),{segment:l}=d&&d.getUser()||{},u=this.metadata.source,h=u&&"url"!==u?this.name:void 0;return Object(s.c)({environment:n,release:i,transaction:h,user_segment:l,public_key:a,trace_id:this.traceId,sample_rate:c})}}},999:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var i=n(214),r=n(1285);function a(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function o(e,t={}){const n="string"===typeof t?t:t.tunnel,r="string"!==typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${a(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return Object(i.h)({sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}})}(e,r)}`}function s(e,t){const n=Object(r.b)(e),i=`${a(n)}embed/error-page/`;let o=`dsn=${Object(r.a)(n)}`;for(const r in t)if("dsn"!==r)if("user"===r){const e=t.user;if(!e)continue;e.name&&(o+=`&name=${encodeURIComponent(e.name)}`),e.email&&(o+=`&email=${encodeURIComponent(e.email)}`)}else o+=`&${encodeURIComponent(r)}=${encodeURIComponent(t[r])}`;return`${i}?${o}`}}}]);
//# sourceMappingURL=26-e0974f2d03311475f998.chunk.js.map